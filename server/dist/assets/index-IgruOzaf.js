function Cq(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var ASe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Id(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var e5={exports:{}},Dx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qA;function Eq(){if(qA)return Dx;qA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,i){var l=null;if(i!==void 0&&(l=""+i),s.key!==void 0&&(l=""+s.key),"key"in s){i={};for(var o in s)o!=="key"&&(i[o]=s[o])}else i=s;return s=i.ref,{$$typeof:e,type:a,key:l,ref:s!==void 0?s:null,props:i}}return Dx.Fragment=t,Dx.jsx=r,Dx.jsxs=r,Dx}var $A;function Tq(){return $A||($A=1,e5.exports=Eq()),e5.exports}var n=Tq(),t5={exports:{}},Sr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HA;function Dq(){if(HA)return Sr;HA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),g=Symbol.iterator;function x(se){return se===null||typeof se!="object"?null:(se=g&&se[g]||se["@@iterator"],typeof se=="function"?se:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function j(se,R,I){this.props=se,this.context=R,this.refs=y,this.updater=I||b}j.prototype.isReactComponent={},j.prototype.setState=function(se,R){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,R,"setState")},j.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function S(){}S.prototype=j.prototype;function N(se,R,I){this.props=se,this.context=R,this.refs=y,this.updater=I||b}var C=N.prototype=new S;C.constructor=N,v(C,j.prototype),C.isPureReactComponent=!0;var T=Array.isArray;function P(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function F(se,R,I){var q=I.ref;return{$$typeof:e,type:se,key:R,ref:q!==void 0?q:null,props:I}}function H(se,R){return F(se.type,R,se.props)}function L(se){return typeof se=="object"&&se!==null&&se.$$typeof===e}function z(se){var R={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(I){return R[I]})}var V=/\/+/g;function G(se,R){return typeof se=="object"&&se!==null&&se.key!=null?z(""+se.key):R.toString(36)}function ie(se){switch(se.status){case"fulfilled":return se.value;case"rejected":throw se.reason;default:switch(typeof se.status=="string"?se.then(P,P):(se.status="pending",se.then(function(R){se.status==="pending"&&(se.status="fulfilled",se.value=R)},function(R){se.status==="pending"&&(se.status="rejected",se.reason=R)})),se.status){case"fulfilled":return se.value;case"rejected":throw se.reason}}throw se}function Z(se,R,I,q,K){var te=typeof se;(te==="undefined"||te==="boolean")&&(se=null);var J=!1;if(se===null)J=!0;else switch(te){case"bigint":case"string":case"number":J=!0;break;case"object":switch(se.$$typeof){case e:case t:J=!0;break;case f:return J=se._init,Z(J(se._payload),R,I,q,K)}}if(J)return K=K(se),J=q===""?"."+G(se,0):q,T(K)?(I="",J!=null&&(I=J.replace(V,"$&/")+"/"),Z(K,R,I,"",function(ye){return ye})):K!=null&&(L(K)&&(K=H(K,I+(K.key==null||se&&se.key===K.key?"":(""+K.key).replace(V,"$&/")+"/")+J)),R.push(K)),1;J=0;var Q=q===""?".":q+":";if(T(se))for(var ne=0;ne<se.length;ne++)q=se[ne],te=Q+G(q,ne),J+=Z(q,R,I,te,K);else if(ne=x(se),typeof ne=="function")for(se=ne.call(se),ne=0;!(q=se.next()).done;)q=q.value,te=Q+G(q,ne++),J+=Z(q,R,I,te,K);else if(te==="object"){if(typeof se.then=="function")return Z(ie(se),R,I,q,K);throw R=String(se),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return J}function X(se,R,I){if(se==null)return se;var q=[],K=0;return Z(se,q,"","",function(te){return R.call(I,te,K++)}),q}function he(se){if(se._status===-1){var R=se._result;R=R(),R.then(function(I){(se._status===0||se._status===-1)&&(se._status=1,se._result=I)},function(I){(se._status===0||se._status===-1)&&(se._status=2,se._result=I)}),se._status===-1&&(se._status=0,se._result=R)}if(se._status===1)return se._result.default;throw se._result}var ce=typeof reportError=="function"?reportError:function(se){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof se=="object"&&se!==null&&typeof se.message=="string"?String(se.message):String(se),error:se});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",se);return}console.error(se)},ke={map:X,forEach:function(se,R,I){X(se,function(){R.apply(this,arguments)},I)},count:function(se){var R=0;return X(se,function(){R++}),R},toArray:function(se){return X(se,function(R){return R})||[]},only:function(se){if(!L(se))throw Error("React.Children.only expected to receive a single React element child.");return se}};return Sr.Activity=m,Sr.Children=ke,Sr.Component=j,Sr.Fragment=r,Sr.Profiler=s,Sr.PureComponent=N,Sr.StrictMode=a,Sr.Suspense=d,Sr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Sr.__COMPILER_RUNTIME={__proto__:null,c:function(se){return D.H.useMemoCache(se)}},Sr.cache=function(se){return function(){return se.apply(null,arguments)}},Sr.cacheSignal=function(){return null},Sr.cloneElement=function(se,R,I){if(se==null)throw Error("The argument must be a React element, but you passed "+se+".");var q=v({},se.props),K=se.key;if(R!=null)for(te in R.key!==void 0&&(K=""+R.key),R)!M.call(R,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&R.ref===void 0||(q[te]=R[te]);var te=arguments.length-2;if(te===1)q.children=I;else if(1<te){for(var J=Array(te),Q=0;Q<te;Q++)J[Q]=arguments[Q+2];q.children=J}return F(se.type,K,q)},Sr.createContext=function(se){return se={$$typeof:l,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null},se.Provider=se,se.Consumer={$$typeof:i,_context:se},se},Sr.createElement=function(se,R,I){var q,K={},te=null;if(R!=null)for(q in R.key!==void 0&&(te=""+R.key),R)M.call(R,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(K[q]=R[q]);var J=arguments.length-2;if(J===1)K.children=I;else if(1<J){for(var Q=Array(J),ne=0;ne<J;ne++)Q[ne]=arguments[ne+2];K.children=Q}if(se&&se.defaultProps)for(q in J=se.defaultProps,J)K[q]===void 0&&(K[q]=J[q]);return F(se,te,K)},Sr.createRef=function(){return{current:null}},Sr.forwardRef=function(se){return{$$typeof:o,render:se}},Sr.isValidElement=L,Sr.lazy=function(se){return{$$typeof:f,_payload:{_status:-1,_result:se},_init:he}},Sr.memo=function(se,R){return{$$typeof:u,type:se,compare:R===void 0?null:R}},Sr.startTransition=function(se){var R=D.T,I={};D.T=I;try{var q=se(),K=D.S;K!==null&&K(I,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(P,ce)}catch(te){ce(te)}finally{R!==null&&I.types!==null&&(R.types=I.types),D.T=R}},Sr.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Sr.use=function(se){return D.H.use(se)},Sr.useActionState=function(se,R,I){return D.H.useActionState(se,R,I)},Sr.useCallback=function(se,R){return D.H.useCallback(se,R)},Sr.useContext=function(se){return D.H.useContext(se)},Sr.useDebugValue=function(){},Sr.useDeferredValue=function(se,R){return D.H.useDeferredValue(se,R)},Sr.useEffect=function(se,R){return D.H.useEffect(se,R)},Sr.useEffectEvent=function(se){return D.H.useEffectEvent(se)},Sr.useId=function(){return D.H.useId()},Sr.useImperativeHandle=function(se,R,I){return D.H.useImperativeHandle(se,R,I)},Sr.useInsertionEffect=function(se,R){return D.H.useInsertionEffect(se,R)},Sr.useLayoutEffect=function(se,R){return D.H.useLayoutEffect(se,R)},Sr.useMemo=function(se,R){return D.H.useMemo(se,R)},Sr.useOptimistic=function(se,R){return D.H.useOptimistic(se,R)},Sr.useReducer=function(se,R,I){return D.H.useReducer(se,R,I)},Sr.useRef=function(se){return D.H.useRef(se)},Sr.useState=function(se){return D.H.useState(se)},Sr.useSyncExternalStore=function(se,R,I){return D.H.useSyncExternalStore(se,R,I)},Sr.useTransition=function(){return D.H.useTransition()},Sr.version="19.2.0",Sr}var VA;function Sp(){return VA||(VA=1,t5.exports=Dq()),t5.exports}var k=Sp();const Kr=Id(k),Oq=Cq({__proto__:null,default:Kr},[k]);var r5={exports:{}},Ox={},a5={exports:{}},n5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA;function Fq(){return WA||(WA=1,(function(e){function t(Z,X){var he=Z.length;Z.push(X);e:for(;0<he;){var ce=he-1>>>1,ke=Z[ce];if(0<s(ke,X))Z[ce]=X,Z[he]=ke,he=ce;else break e}}function r(Z){return Z.length===0?null:Z[0]}function a(Z){if(Z.length===0)return null;var X=Z[0],he=Z.pop();if(he!==X){Z[0]=he;e:for(var ce=0,ke=Z.length,se=ke>>>1;ce<se;){var R=2*(ce+1)-1,I=Z[R],q=R+1,K=Z[q];if(0>s(I,he))q<ke&&0>s(K,I)?(Z[ce]=K,Z[q]=he,ce=q):(Z[ce]=I,Z[R]=he,ce=R);else if(q<ke&&0>s(K,he))Z[ce]=K,Z[q]=he,ce=q;else break e}}return X}function s(Z,X){var he=Z.sortIndex-X.sortIndex;return he!==0?he:Z.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],u=[],f=1,m=null,g=3,x=!1,b=!1,v=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function C(Z){for(var X=r(u);X!==null;){if(X.callback===null)a(u);else if(X.startTime<=Z)a(u),X.sortIndex=X.expirationTime,t(d,X);else break;X=r(u)}}function T(Z){if(v=!1,C(Z),!b)if(r(d)!==null)b=!0,P||(P=!0,z());else{var X=r(u);X!==null&&ie(T,X.startTime-Z)}}var P=!1,D=-1,M=5,F=-1;function H(){return y?!0:!(e.unstable_now()-F<M)}function L(){if(y=!1,P){var Z=e.unstable_now();F=Z;var X=!0;try{e:{b=!1,v&&(v=!1,S(D),D=-1),x=!0;var he=g;try{t:{for(C(Z),m=r(d);m!==null&&!(m.expirationTime>Z&&H());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,g=m.priorityLevel;var ke=ce(m.expirationTime<=Z);if(Z=e.unstable_now(),typeof ke=="function"){m.callback=ke,C(Z),X=!0;break t}m===r(d)&&a(d),C(Z)}else a(d);m=r(d)}if(m!==null)X=!0;else{var se=r(u);se!==null&&ie(T,se.startTime-Z),X=!1}}break e}finally{m=null,g=he,x=!1}X=void 0}}finally{X?z():P=!1}}}var z;if(typeof N=="function")z=function(){N(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,G=V.port2;V.port1.onmessage=L,z=function(){G.postMessage(null)}}else z=function(){j(L,0)};function ie(Z,X){D=j(function(){Z(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var he=g;g=X;try{return Z()}finally{g=he}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(Z,X){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var he=g;g=Z;try{return X()}finally{g=he}},e.unstable_scheduleCallback=function(Z,X,he){var ce=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ce+he:ce):he=ce,Z){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=he+ke,Z={id:f++,callback:X,priorityLevel:Z,startTime:he,expirationTime:ke,sortIndex:-1},he>ce?(Z.sortIndex=he,t(u,Z),r(d)===null&&Z===r(u)&&(v?(S(D),D=-1):v=!0,ie(T,he-ce))):(Z.sortIndex=ke,t(d,Z),b||x||(b=!0,P||(P=!0,z()))),Z},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(Z){var X=g;return function(){var he=g;g=X;try{return Z.apply(this,arguments)}finally{g=he}}}})(n5)),n5}var KA;function Pq(){return KA||(KA=1,a5.exports=Fq()),a5.exports}var s5={exports:{}},ji={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA;function Mq(){if(GA)return ji;GA=1;var e=Sp();function t(d){var u="https://react.dev/errors/"+d;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(d,u,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:u,implementation:f}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(d,u){if(d==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ji.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ji.createPortal=function(d,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(d,u,null,f)},ji.flushSync=function(d){var u=l.T,f=a.p;try{if(l.T=null,a.p=2,d)return d()}finally{l.T=u,a.p=f,a.d.f()}},ji.preconnect=function(d,u){typeof d=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,a.d.C(d,u))},ji.prefetchDNS=function(d){typeof d=="string"&&a.d.D(d)},ji.preinit=function(d,u){if(typeof d=="string"&&u&&typeof u.as=="string"){var f=u.as,m=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?a.d.S(d,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:x}):f==="script"&&a.d.X(d,{crossOrigin:m,integrity:g,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ji.preinitModule=function(d,u){if(typeof d=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);a.d.M(d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&a.d.M(d)},ji.preload=function(d,u){if(typeof d=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,m=o(f,u.crossOrigin);a.d.L(d,f,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ji.preloadModule=function(d,u){if(typeof d=="string")if(u){var f=o(u.as,u.crossOrigin);a.d.m(d,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else a.d.m(d)},ji.requestFormReset=function(d){a.d.r(d)},ji.unstable_batchedUpdates=function(d,u){return d(u)},ji.useFormState=function(d,u,f){return l.H.useFormState(d,u,f)},ji.useFormStatus=function(){return l.H.useHostTransitionStatus()},ji.version="19.2.0",ji}var YA;function fF(){if(YA)return s5.exports;YA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),s5.exports=Mq(),s5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA;function Lq(){if(XA)return Ox;XA=1;var e=Pq(),t=Sp(),r=fF();function a(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var h=c,p=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(p=h.return),c=h.return;while(c)}return h.tag===3?p:null}function l(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function o(c){if(c.tag===31){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function d(c){if(i(c)!==c)throw Error(a(188))}function u(c){var h=c.alternate;if(!h){if(h=i(c),h===null)throw Error(a(188));return h!==c?null:c}for(var p=c,w=h;;){var A=p.return;if(A===null)break;var O=A.alternate;if(O===null){if(w=A.return,w!==null){p=w;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===p)return d(A),c;if(O===w)return d(A),h;O=O.sibling}throw Error(a(188))}if(p.return!==w.return)p=A,w=O;else{for(var Y=!1,de=A.child;de;){if(de===p){Y=!0,p=A,w=O;break}if(de===w){Y=!0,w=A,p=O;break}de=de.sibling}if(!Y){for(de=O.child;de;){if(de===p){Y=!0,p=O,w=A;break}if(de===w){Y=!0,w=O,p=A;break}de=de.sibling}if(!Y)throw Error(a(189))}}if(p.alternate!==w)throw Error(a(190))}if(p.tag!==3)throw Error(a(188));return p.stateNode.current===p?c:h}function f(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=f(c),h!==null)return h;c=c.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),N=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(c){return c===null||typeof c!="object"?null:(c=L&&c[L]||c["@@iterator"],typeof c=="function"?c:null)}var V=Symbol.for("react.client.reference");function G(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===V?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case j:return"Profiler";case y:return"StrictMode";case T:return"Suspense";case P:return"SuspenseList";case F:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case b:return"Portal";case N:return c.displayName||"Context";case S:return(c._context.displayName||"Context")+".Consumer";case C:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case D:return h=c.displayName||null,h!==null?h:G(c.type)||"Memo";case M:h=c._payload,c=c._init;try{return G(c(h))}catch{}}return null}var ie=Array.isArray,Z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ce=[],ke=-1;function se(c){return{current:c}}function R(c){0>ke||(c.current=ce[ke],ce[ke]=null,ke--)}function I(c,h){ke++,ce[ke]=c.current,c.current=h}var q=se(null),K=se(null),te=se(null),J=se(null);function Q(c,h){switch(I(te,h),I(K,c),I(q,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?dA(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=dA(h),c=fA(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}R(q),I(q,c)}function ne(){R(q),R(K),R(te)}function ye(c){c.memoizedState!==null&&I(J,c);var h=q.current,p=fA(h,c.type);h!==p&&(I(K,c),I(q,p))}function De(c){K.current===c&&(R(q),R(K)),J.current===c&&(R(J),Ax._currentValue=he)}var ee,Je;function Oe(c){if(ee===void 0)try{throw Error()}catch(p){var h=p.stack.trim().match(/\n( *(at )?)/);ee=h&&h[1]||"",Je=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+c+Je}var ve=!1;function pt(c,h){if(!c||ve)return"";ve=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(h){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Ze){var Qe=Ze}Reflect.construct(c,[],dt)}else{try{dt.call()}catch(Ze){Qe=Ze}c.call(dt.prototype)}}else{try{throw Error()}catch(Ze){Qe=Ze}(dt=c())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Ze){if(Ze&&Qe&&typeof Ze.stack=="string")return[Ze.stack,Qe.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=w.DetermineComponentFrameRoot(),Y=O[0],de=O[1];if(Y&&de){var Ae=Y.split(`
`),Ge=de.split(`
`);for(A=w=0;w<Ae.length&&!Ae[w].includes("DetermineComponentFrameRoot");)w++;for(;A<Ge.length&&!Ge[A].includes("DetermineComponentFrameRoot");)A++;if(w===Ae.length||A===Ge.length)for(w=Ae.length-1,A=Ge.length-1;1<=w&&0<=A&&Ae[w]!==Ge[A];)A--;for(;1<=w&&0<=A;w--,A--)if(Ae[w]!==Ge[A]){if(w!==1||A!==1)do if(w--,A--,0>A||Ae[w]!==Ge[A]){var st=`
`+Ae[w].replace(" at new "," at ");return c.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",c.displayName)),st}while(1<=w&&0<=A);break}}}finally{ve=!1,Error.prepareStackTrace=p}return(p=c?c.displayName||c.name:"")?Oe(p):""}function et(c,h){switch(c.tag){case 26:case 27:case 5:return Oe(c.type);case 16:return Oe("Lazy");case 13:return c.child!==h&&h!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return pt(c.type,!1);case 11:return pt(c.type.render,!1);case 1:return pt(c.type,!0);case 31:return Oe("Activity");default:return""}}function Nt(c){try{var h="",p=null;do h+=et(c,p),p=c,c=c.return;while(c);return h}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var ot=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,ge=e.unstable_cancelCallback,Te=e.unstable_shouldYield,qe=e.unstable_requestPaint,xt=e.unstable_now,gt=e.unstable_getCurrentPriorityLevel,Mt=e.unstable_ImmediatePriority,mr=e.unstable_UserBlockingPriority,Pt=e.unstable_NormalPriority,Rt=e.unstable_LowPriority,wt=e.unstable_IdlePriority,Ct=e.log,ur=e.unstable_setDisableYieldValue,Lt=null,Dt=null;function tr(c){if(typeof Ct=="function"&&ur(c),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Lt,c)}catch{}}var wr=Math.clz32?Math.clz32:pr,ir=Math.log,Lr=Math.LN2;function pr(c){return c>>>=0,c===0?32:31-(ir(c)/Lr|0)|0}var _a=256,Xa=262144,ea=4194304;function Zt(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function $r(c,h,p){var w=c.pendingLanes;if(w===0)return 0;var A=0,O=c.suspendedLanes,Y=c.pingedLanes;c=c.warmLanes;var de=w&134217727;return de!==0?(w=de&~O,w!==0?A=Zt(w):(Y&=de,Y!==0?A=Zt(Y):p||(p=de&~c,p!==0&&(A=Zt(p))))):(de=w&~O,de!==0?A=Zt(de):Y!==0?A=Zt(Y):p||(p=w&~c,p!==0&&(A=Zt(p)))),A===0?0:h!==0&&h!==A&&(h&O)===0&&(O=A&-A,p=h&-h,O>=p||O===32&&(p&4194048)!==0)?h:A}function Bi(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function ls(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ul(){var c=ea;return ea<<=1,(ea&62914560)===0&&(ea=4194304),c}function vi(c){for(var h=[],p=0;31>p;p++)h.push(c);return h}function Jt(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Bl(c,h,p,w,A,O){var Y=c.pendingLanes;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=p,c.entangledLanes&=p,c.errorRecoveryDisabledLanes&=p,c.shellSuspendCounter=0;var de=c.entanglements,Ae=c.expirationTimes,Ge=c.hiddenUpdates;for(p=Y&~p;0<p;){var st=31-wr(p),dt=1<<st;de[st]=0,Ae[st]=-1;var Qe=Ge[st];if(Qe!==null)for(Ge[st]=null,st=0;st<Qe.length;st++){var Ze=Qe[st];Ze!==null&&(Ze.lane&=-536870913)}p&=~dt}w!==0&&dl(c,w,0),O!==0&&A===0&&c.tag!==0&&(c.suspendedLanes|=O&~(Y&~h))}function dl(c,h,p){c.pendingLanes|=h,c.suspendedLanes&=~h;var w=31-wr(h);c.entangledLanes|=h,c.entanglements[w]=c.entanglements[w]|1073741824|p&261930}function ys(c,h){var p=c.entangledLanes|=h;for(c=c.entanglements;p;){var w=31-wr(p),A=1<<w;A&h|c[w]&h&&(c[w]|=h),p&=~A}}function Js(c,h){var p=h&-h;return p=(p&42)!==0?1:Pa(p),(p&(c.suspendedLanes|h))!==0?0:p}function Pa(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function un(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function le(){var c=X.p;return c!==0?c:(c=window.event,c===void 0?32:MA(c.type))}function Ne(c,h){var p=X.p;try{return X.p=c,h()}finally{X.p=p}}var me=Math.random().toString(36).slice(2),pe="__reactFiber$"+me,be="__reactProps$"+me,Se="__reactContainer$"+me,ze="__reactEvents$"+me,tt="__reactListeners$"+me,$e="__reactHandles$"+me,He="__reactResources$"+me,We="__reactMarker$"+me;function vt(c){delete c[pe],delete c[be],delete c[ze],delete c[tt],delete c[$e]}function jt(c){var h=c[pe];if(h)return h;for(var p=c.parentNode;p;){if(h=p[Se]||p[pe]){if(p=h.alternate,h.child!==null||p!==null&&p.child!==null)for(c=yA(c);c!==null;){if(p=c[pe])return p;c=yA(c)}return h}c=p,p=c.parentNode}return null}function Ot(c){if(c=c[pe]||c[Se]){var h=c.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return c}return null}function bt(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(a(33))}function kt(c){var h=c[He];return h||(h=c[He]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function zt(c){c[We]=!0}var xa=new Set,Br={};function ja(c,h){ei(c,h),ei(c+"Capture",h)}function ei(c,h){for(Br[c]=h,c=0;c<h.length;c++)xa.add(h[c])}var zl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ul={},zi={};function Qc(c){return ot.call(zi,c)?!0:ot.call(Ul,c)?!1:zl.test(c)?zi[c]=!0:(Ul[c]=!0,!1)}function Kn(c,h,p){if(Qc(h))if(p===null)c.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var w=h.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+p)}}function Yd(c,h,p){if(p===null)c.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+p)}}function Na(c,h,p,w){if(w===null)c.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(p);return}c.setAttributeNS(h,p,""+w)}}function ti(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function f0(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function nc(c,h,p){var w=Object.getOwnPropertyDescriptor(c.constructor.prototype,h);if(!c.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var A=w.get,O=w.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return A.call(this)},set:function(Y){p=""+Y,O.call(this,Y)}}),Object.defineProperty(c,h,{enumerable:w.enumerable}),{getValue:function(){return p},setValue:function(Y){p=""+Y},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function sc(c){if(!c._valueTracker){var h=f0(c)?"checked":"value";c._valueTracker=nc(c,h,""+c[h])}}function fl(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var p=h.getValue(),w="";return c&&(w=f0(c)?c.checked?"true":"false":c.value),c=w,c!==p?(h.setValue(c),!0):!1}function vo(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Sn=/[\n"\\]/g;function Bs(c){return c.replace(Sn,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function h0(c,h,p,w,A,O,Y,de){c.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?c.type=Y:c.removeAttribute("type"),h!=null?Y==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+ti(h)):c.value!==""+ti(h)&&(c.value=""+ti(h)):Y!=="submit"&&Y!=="reset"||c.removeAttribute("value"),h!=null?m0(c,Y,ti(h)):p!=null?m0(c,Y,ti(p)):w!=null&&c.removeAttribute("value"),A==null&&O!=null&&(c.defaultChecked=!!O),A!=null&&(c.checked=A&&typeof A!="function"&&typeof A!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?c.name=""+ti(de):c.removeAttribute("name")}function zh(c,h,p,w,A,O,Y,de){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(c.type=O),h!=null||p!=null){if(!(O!=="submit"&&O!=="reset"||h!=null)){sc(c);return}p=p!=null?""+ti(p):"",h=h!=null?""+ti(h):p,de||h===c.value||(c.value=h),c.defaultValue=h}w=w??A,w=typeof w!="function"&&typeof w!="symbol"&&!!w,c.checked=de?c.checked:!!w,c.defaultChecked=!!w,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(c.name=Y),sc(c)}function m0(c,h,p){h==="number"&&vo(c.ownerDocument)===c||c.defaultValue===""+p||(c.defaultValue=""+p)}function ri(c,h,p,w){if(c=c.options,h){h={};for(var A=0;A<p.length;A++)h["$"+p[A]]=!0;for(p=0;p<c.length;p++)A=h.hasOwnProperty("$"+c[p].value),c[p].selected!==A&&(c[p].selected=A),A&&w&&(c[p].defaultSelected=!0)}else{for(p=""+ti(p),h=null,A=0;A<c.length;A++){if(c[A].value===p){c[A].selected=!0,w&&(c[A].defaultSelected=!0);return}h!==null||c[A].disabled||(h=c[A])}h!==null&&(h.selected=!0)}}function p0(c,h,p){if(h!=null&&(h=""+ti(h),h!==c.value&&(c.value=h),p==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=p!=null?""+ti(p):""}function x0(c,h,p,w){if(h==null){if(w!=null){if(p!=null)throw Error(a(92));if(ie(w)){if(1<w.length)throw Error(a(93));w=w[0]}p=w}p==null&&(p=""),h=p}p=ti(h),c.defaultValue=p,w=c.textContent,w===p&&w!==""&&w!==null&&(c.value=w),sc(c)}function Ui(c,h){if(h){var p=c.firstChild;if(p&&p===c.lastChild&&p.nodeType===3){p.nodeValue=h;return}}c.textContent=h}var g0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uh(c,h,p){var w=h.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":w?c.setProperty(h,p):typeof p!="number"||p===0||g0.has(h)?h==="float"?c.cssFloat=p:c[h]=(""+p).trim():c[h]=p+"px"}function qh(c,h,p){if(h!=null&&typeof h!="object")throw Error(a(62));if(c=c.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||h!=null&&h.hasOwnProperty(w)||(w.indexOf("--")===0?c.setProperty(w,""):w==="float"?c.cssFloat="":c[w]="");for(var A in h)w=h[A],h.hasOwnProperty(A)&&p[A]!==w&&Uh(c,A,w)}else for(var O in h)h.hasOwnProperty(O)&&Uh(c,O,h[O])}function v0(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ru=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ql(c){return Ru.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function $l(){}var ic=null;function Iu(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var lr=null,Zc=null;function $h(c){var h=Ot(c);if(h&&(c=h.stateNode)){var p=c[be]||null;e:switch(c=h.stateNode,h.type){case"input":if(h0(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),h=p.name,p.type==="radio"&&h!=null){for(p=c;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Bs(""+h)+'"][type="radio"]'),h=0;h<p.length;h++){var w=p[h];if(w!==c&&w.form===c.form){var A=w[be]||null;if(!A)throw Error(a(90));h0(w,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<p.length;h++)w=p[h],w.form===c.form&&fl(w)}break e;case"textarea":p0(c,p.value,p.defaultValue);break e;case"select":h=p.value,h!=null&&ri(c,!!p.multiple,h,!1)}}}var b0=!1;function Hh(c,h,p){if(b0)return c(h,p);b0=!0;try{var w=c(h);return w}finally{if(b0=!1,(lr!==null||Zc!==null)&&(Zv(),lr&&(h=lr,c=Zc,Zc=lr=null,$h(h),c)))for(h=0;h<c.length;h++)$h(c[h])}}function qi(c,h){var p=c.stateNode;if(p===null)return null;var w=p[be]||null;if(w===null)return null;p=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(p&&typeof p!="function")throw Error(a(231,h,typeof p));return p}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w0=!1;if(bs)try{var Bu={};Object.defineProperty(Bu,"passive",{get:function(){w0=!0}}),window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{w0=!1}var $i=null,zu=null,yo=null;function Uu(){if(yo)return yo;var c,h=zu,p=h.length,w,A="value"in $i?$i.value:$i.textContent,O=A.length;for(c=0;c<p&&h[c]===A[c];c++);var Y=p-c;for(w=1;w<=Y&&h[p-w]===A[O-w];w++);return yo=A.slice(c,1<w?1-w:void 0)}function lc(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Xd(){return!0}function Qd(){return!1}function os(c){function h(p,w,A,O,Y){this._reactName=p,this._targetInst=A,this.type=w,this.nativeEvent=O,this.target=Y,this.currentTarget=null;for(var de in c)c.hasOwnProperty(de)&&(p=c[de],this[de]=p?p(O):O[de]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Xd:Qd,this.isPropagationStopped=Qd,this}return m(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Xd)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Xd)},persist:function(){},isPersistent:Xd}),h}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=os(Hi),oc=m({},Hi,{view:0,detail:0}),Zd=os(oc),qu,cc,Jc,$u=m({},oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dr,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Jc&&(Jc&&c.type==="mousemove"?(qu=c.screenX-Jc.screenX,cc=c.screenY-Jc.screenY):cc=qu=0,Jc=c),qu)},movementY:function(c){return"movementY"in c?c.movementY:cc}}),wo=os($u),uc=m({},$u,{dataTransfer:0}),Vh=os(uc),Wh=m({},oc,{relatedTarget:0}),dc=os(Wh),Kh=m({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),B=os(Kh),re=m({},Hi,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_e=os(re),Ee=m({},Hi,{data:0}),Le=os(Ee),it={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yt(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=Ht[c])?!!h[c]:!1}function dr(){return Yt}var br=m({},oc,{key:function(c){if(c.key){var h=it[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=lc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ht[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dr,charCode:function(c){return c.type==="keypress"?lc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?lc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ia=os(br),Ja=m({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kn=os(Ja),Ma=m({},oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dr}),Gn=os(Ma),Mn=m({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ws=os(Mn),hl=m({},$u,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),yi=os(hl),Gh=m({},Hi,{newState:0,oldState:0}),Jd=os(Gh),Hu=[9,13,27,32],jo=bs&&"CompositionEvent"in window,Hl=null;bs&&"documentMode"in document&&(Hl=document.documentMode);var Vu=bs&&"TextEvent"in window&&!Hl,eu=bs&&(!jo||Hl&&8<Hl&&11>=Hl),js=" ",tu=!1;function ru(c,h){switch(c){case"keyup":return Hu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ef(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var No=!1;function dn(c,h){switch(c){case"compositionend":return ef(h);case"keypress":return h.which!==32?null:(tu=!0,js);case"textInput":return c=h.data,c===js&&tu?null:c;default:return null}}function fc(c,h){if(No)return c==="compositionend"||!jo&&ru(c,h)?(c=Uu(),yo=zu=$i=null,No=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return eu&&h.locale!=="ko"?null:h.data;default:return null}}var tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j0(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!tf[c.type]:h==="textarea"}function Vi(c,h,p,w){lr?Zc?Zc.push(w):Zc=[w]:lr=w,h=s1(h,"onChange"),0<h.length&&(p=new bo("onChange","change",null,p,w),c.push({event:p,listeners:h}))}var Vl=null,hc=null;function N0(c){sA(c,0)}function Wl(c){var h=bt(c);if(fl(h))return c}function au(c,h){if(c==="change")return h}var bi=!1;if(bs){var ai;if(bs){var _o="oninput"in document;if(!_o){var So=document.createElement("div");So.setAttribute("oninput","return;"),_o=typeof So.oninput=="function"}ai=_o}else ai=!1;bi=ai&&(!document.documentMode||9<document.documentMode)}function mc(){Vl&&(Vl.detachEvent("onpropertychange",rf),hc=Vl=null)}function rf(c){if(c.propertyName==="value"&&Wl(hc)){var h=[];Vi(h,hc,c,Iu(c)),Hh(N0,h)}}function af(c,h,p){c==="focusin"?(mc(),Vl=h,hc=p,Vl.attachEvent("onpropertychange",rf)):c==="focusout"&&mc()}function An(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Wl(hc)}function Yh(c,h){if(c==="click")return Wl(h)}function ko(c,h){if(c==="input"||c==="change")return Wl(h)}function Ao(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Ns=typeof Object.is=="function"?Object.is:Ao;function pc(c,h){if(Ns(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var p=Object.keys(c),w=Object.keys(h);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var A=p[w];if(!ot.call(h,A)||!Ns(c[A],h[A]))return!1}return!0}function nf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function sf(c,h){var p=nf(c);c=0;for(var w;p;){if(p.nodeType===3){if(w=c+p.textContent.length,c<=h&&w>=h)return{node:p,offset:h-c};c=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=nf(p)}}function xc(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?xc(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function gc(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=vo(c.document);h instanceof c.HTMLIFrameElement;){try{var p=typeof h.contentWindow.location.href=="string"}catch{p=!1}if(p)c=h.contentWindow;else break;h=vo(c.document)}return h}function Co(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var Wu=bs&&"documentMode"in document&&11>=document.documentMode,Wi=null,vc=null,zs=null,ml=!1;function la(c,h,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;ml||Wi==null||Wi!==vo(w)||(w=Wi,"selectionStart"in w&&Co(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),zs&&pc(zs,w)||(zs=w,w=s1(vc,"onSelect"),0<w.length&&(h=new bo("onSelect","select",null,h,p),c.push({event:h,listeners:w}),h.target=Wi)))}function Qr(c,h){var p={};return p[c.toLowerCase()]=h.toLowerCase(),p["Webkit"+c]="webkit"+h,p["Moz"+c]="moz"+h,p}var La={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},Cn={},Eo={};bs&&(Eo=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Kl(c){if(Cn[c])return Cn[c];if(!La[c])return c;var h=La[c],p;for(p in h)if(h.hasOwnProperty(p)&&p in Eo)return Cn[c]=h[p];return c}var Ku=Kl("animationend"),_0=Kl("animationiteration"),Xp=Kl("animationstart"),Cv=Kl("transitionrun"),Ev=Kl("transitionstart"),Tv=Kl("transitioncancel"),Qp=Kl("transitionend"),Zp=new Map,Gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gu.push("scrollEnd");function pl(c,h){Zp.set(c,h),ja(h,[c])}var S0=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Ki=[],Yu=0,Xh=0;function k0(){for(var c=Yu,h=Xh=Yu=0;h<c;){var p=Ki[h];Ki[h++]=null;var w=Ki[h];Ki[h++]=null;var A=Ki[h];Ki[h++]=null;var O=Ki[h];if(Ki[h++]=null,w!==null&&A!==null){var Y=w.pending;Y===null?A.next=A:(A.next=Y.next,Y.next=A),w.pending=A}O!==0&&C0(p,A,O)}}function A0(c,h,p,w){Ki[Yu++]=c,Ki[Yu++]=h,Ki[Yu++]=p,Ki[Yu++]=w,Xh|=w,c.lanes|=w,c=c.alternate,c!==null&&(c.lanes|=w)}function Qh(c,h,p,w){return A0(c,h,p,w),Us(c)}function yc(c,h){return A0(c,null,null,h),Us(c)}function C0(c,h,p){c.lanes|=p;var w=c.alternate;w!==null&&(w.lanes|=p);for(var A=!1,O=c.return;O!==null;)O.childLanes|=p,w=O.alternate,w!==null&&(w.childLanes|=p),O.tag===22&&(c=O.stateNode,c===null||c._visibility&1||(A=!0)),c=O,O=O.return;return c.tag===3?(O=c.stateNode,A&&h!==null&&(A=31-wr(p),c=O.hiddenUpdates,w=c[A],w===null?c[A]=[h]:w.push(h),h.lane=p|536870912),O):null}function Us(c){if(50<bx)throw bx=0,_w=null,Error(a(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var _s={};function Zh(c,h,p,w){this.tag=c,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(c,h,p,w){return new Zh(c,h,p,w)}function Jh(c){return c=c.prototype,!(!c||!c.isReactComponent)}function xl(c,h){var p=c.alternate;return p===null?(p=qs(c.tag,h,c.key,c.mode),p.elementType=c.elementType,p.type=c.type,p.stateNode=c.stateNode,p.alternate=c,c.alternate=p):(p.pendingProps=h,p.type=c.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=c.flags&65011712,p.childLanes=c.childLanes,p.lanes=c.lanes,p.child=c.child,p.memoizedProps=c.memoizedProps,p.memoizedState=c.memoizedState,p.updateQueue=c.updateQueue,h=c.dependencies,p.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},p.sibling=c.sibling,p.index=c.index,p.ref=c.ref,p.refCleanup=c.refCleanup,p}function E0(c,h){c.flags&=65011714;var p=c.alternate;return p===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=p.childLanes,c.lanes=p.lanes,c.child=p.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=p.memoizedProps,c.memoizedState=p.memoizedState,c.updateQueue=p.updateQueue,c.type=p.type,h=p.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function lf(c,h,p,w,A,O){var Y=0;if(w=c,typeof c=="function")Jh(c)&&(Y=1);else if(typeof c=="string")Y=xq(c,p,q.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case F:return c=qs(31,p,h,A),c.elementType=F,c.lanes=O,c;case v:return nu(p.children,A,O,h);case y:Y=8,A|=24;break;case j:return c=qs(12,p,h,A|2),c.elementType=j,c.lanes=O,c;case T:return c=qs(13,p,h,A),c.elementType=T,c.lanes=O,c;case P:return c=qs(19,p,h,A),c.elementType=P,c.lanes=O,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case N:Y=10;break e;case S:Y=9;break e;case C:Y=11;break e;case D:Y=14;break e;case M:Y=16,w=null;break e}Y=29,p=Error(a(130,c===null?"null":typeof c,"")),w=null}return h=qs(Y,p,h,A),h.elementType=c,h.type=w,h.lanes=O,h}function nu(c,h,p,w){return c=qs(7,c,w,h),c.lanes=p,c}function T0(c,h,p){return c=qs(6,c,null,h),c.lanes=p,c}function em(c){var h=qs(18,null,null,0);return h.stateNode=c,h}function of(c,h,p){return h=qs(4,c.children!==null?c.children:[],c.key,h),h.lanes=p,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var tm=new WeakMap;function gl(c,h){if(typeof c=="object"&&c!==null){var p=tm.get(c);return p!==void 0?p:(h={value:c,source:h,stack:Nt(h)},tm.set(c,h),h)}return{value:c,source:h,stack:Nt(h)}}var cf=[],Xu=0,rm=null,D0=0,vl=[],yl=0,su=null,bl=1,wl="";function Gi(c,h){cf[Xu++]=D0,cf[Xu++]=rm,rm=c,D0=h}function Dv(c,h,p){vl[yl++]=bl,vl[yl++]=wl,vl[yl++]=su,su=c;var w=bl;c=wl;var A=32-wr(w)-1;w&=~(1<<A),p+=1;var O=32-wr(h)+A;if(30<O){var Y=A-A%5;O=(w&(1<<Y)-1).toString(32),w>>=Y,A-=Y,bl=1<<32-wr(h)+A|p<<A|w,wl=O+c}else bl=1<<O|p<<A|w,wl=c}function Jp(c){c.return!==null&&(Gi(c,1),Dv(c,1,0))}function am(c){for(;c===rm;)rm=cf[--Xu],cf[Xu]=null,D0=cf[--Xu],cf[Xu]=null;for(;c===su;)su=vl[--yl],vl[yl]=null,wl=vl[--yl],vl[yl]=null,bl=vl[--yl],vl[yl]=null}function Ov(c,h){vl[yl++]=bl,vl[yl++]=wl,vl[yl++]=su,bl=h.id,wl=h.overflow,su=c}var Ss=null,Ha=null,Hr=!1,ni=null,fn=!1,Gl=Error(a(519));function iu(c){var h=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uf(gl(h,c)),Gl}function ex(c){var h=c.stateNode,p=c.type,w=c.memoizedProps;switch(h[pe]=c,h[be]=w,p){case"dialog":Wr("cancel",h),Wr("close",h);break;case"iframe":case"object":case"embed":Wr("load",h);break;case"video":case"audio":for(p=0;p<jx.length;p++)Wr(jx[p],h);break;case"source":Wr("error",h);break;case"img":case"image":case"link":Wr("error",h),Wr("load",h);break;case"details":Wr("toggle",h);break;case"input":Wr("invalid",h),zh(h,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Wr("invalid",h);break;case"textarea":Wr("invalid",h),x0(h,w.value,w.defaultValue,w.children)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||h.textContent===""+p||w.suppressHydrationWarning===!0||cA(h.textContent,p)?(w.popover!=null&&(Wr("beforetoggle",h),Wr("toggle",h)),w.onScroll!=null&&Wr("scroll",h),w.onScrollEnd!=null&&Wr("scrollend",h),w.onClick!=null&&(h.onclick=$l),h=!0):h=!1,h||iu(c,!0)}function bc(c){for(Ss=c.return;Ss;)switch(Ss.tag){case 5:case 31:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:Ss=Ss.return}}function ks(c){if(c!==Ss)return!1;if(!Hr)return bc(c),Hr=!0,!1;var h=c.tag,p;if((p=h!==3&&h!==27)&&((p=h===5)&&(p=c.type,p=!(p!=="form"&&p!=="button")||Bw(c.type,c.memoizedProps)),p=!p),p&&Ha&&iu(c),bc(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Ha=vA(c)}else if(h===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Ha=vA(c)}else h===27?(h=Ha,_f(c.type)?(c=Hw,Hw=null,Ha=c):Ha=h):Ha=Ss?Fo(c.stateNode.nextSibling):null;return!0}function Qu(){Ha=Ss=null,Hr=!1}function tx(){var c=ni;return c!==null&&(Al===null?Al=c:Al.push.apply(Al,c),ni=null),c}function uf(c){ni===null?ni=[c]:ni.push(c)}var nm=se(null),lu=null,To=null;function ou(c,h,p){I(nm,h._currentValue),h._currentValue=p}function jl(c){c._currentValue=nm.current,R(nm)}function df(c,h,p){for(;c!==null;){var w=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),c===p)break;c=c.return}}function Zu(c,h,p,w){var A=c.child;for(A!==null&&(A.return=c);A!==null;){var O=A.dependencies;if(O!==null){var Y=A.child;O=O.firstContext;e:for(;O!==null;){var de=O;O=A;for(var Ae=0;Ae<h.length;Ae++)if(de.context===h[Ae]){O.lanes|=p,de=O.alternate,de!==null&&(de.lanes|=p),df(O.return,p,c),w||(Y=null);break e}O=de.next}}else if(A.tag===18){if(Y=A.return,Y===null)throw Error(a(341));Y.lanes|=p,O=Y.alternate,O!==null&&(O.lanes|=p),df(Y,p,c),Y=null}else Y=A.child;if(Y!==null)Y.return=A;else for(Y=A;Y!==null;){if(Y===c){Y=null;break}if(A=Y.sibling,A!==null){A.return=Y.return,Y=A;break}Y=Y.return}A=Y}}function cu(c,h,p,w){c=null;for(var A=h,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var Y=A.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var de=A.type;Ns(A.pendingProps.value,Y.value)||(c!==null?c.push(de):c=[de])}}else if(A===J.current){if(Y=A.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(c!==null?c.push(Ax):c=[Ax])}A=A.return}c!==null&&Zu(h,c,p,w),h.flags|=262144}function sm(c){for(c=c.firstContext;c!==null;){if(!Ns(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function uu(c){lu=c,To=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function As(c){return Fv(lu,c)}function im(c,h){return lu===null&&uu(c),Fv(c,h)}function Fv(c,h){var p=h._currentValue;if(h={context:h,memoizedValue:p,next:null},To===null){if(c===null)throw Error(a(308));To=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else To=To.next=h;return p}var $2=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(p,w){c.push(w)}};this.abort=function(){h.aborted=!0,c.forEach(function(p){return p()})}},H2=e.unstable_scheduleCallback,V2=e.unstable_NormalPriority,En={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new $2,data:new Map,refCount:0}}function O0(c){c.refCount--,c.refCount===0&&H2(V2,function(){c.controller.abort()})}var F0=null,lm=0,_=0,E=null;function U(c,h){if(F0===null){var p=F0=[];lm=0,_=Tw(),E={status:"pending",value:void 0,then:function(w){p.push(w)}}}return lm++,h.then(W,W),h}function W(){if(--lm===0&&F0!==null){E!==null&&(E.status="fulfilled");var c=F0;F0=null,_=0,E=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function ae(c,h){var p=[],w={status:"pending",value:null,reason:null,then:function(A){p.push(A)}};return c.then(function(){w.status="fulfilled",w.value=h;for(var A=0;A<p.length;A++)(0,p[A])(h)},function(A){for(w.status="rejected",w.reason=A,A=0;A<p.length;A++)(0,p[A])(void 0)}),w}var oe=Z.S;Z.S=function(c,h){Fk=xt(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&U(c,h),oe!==null&&oe(c,h)};var ue=se(null);function fe(){var c=ue.current;return c!==null?c:Wa.pooledCache}function xe(c,h){h===null?I(ue,ue.current):I(ue,h.pool)}function je(){var c=fe();return c===null?null:{parent:En._currentValue,pool:c}}var Fe=Error(a(460)),Ve=Error(a(474)),we=Error(a(542)),Me={then:function(){}};function Be(c){return c=c.status,c==="fulfilled"||c==="rejected"}function at(c,h,p){switch(p=c[p],p===void 0?c.push(h):p!==h&&(h.then($l,$l),h=p),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,yt(c),c;default:if(typeof h.status=="string")h.then($l,$l);else{if(c=Wa,c!==null&&100<c.shellSuspendCounter)throw Error(a(482));c=h,c.status="pending",c.then(function(w){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=w}},function(w){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=w}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,yt(c),c}throw rt=h,Fe}}function Ue(c){try{var h=c._init;return h(c._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(rt=p,Fe):p}}var rt=null;function lt(){if(rt===null)throw Error(a(459));var c=rt;return rt=null,c}function yt(c){if(c===Fe||c===we)throw Error(a(483))}var ft=null,Wt=0;function It(c){var h=Wt;return Wt+=1,ft===null&&(ft=[]),at(ft,c,h)}function vr(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function qt(c,h){throw h.$$typeof===g?Error(a(525)):(c=Object.prototype.toString.call(h),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function Ur(c){function h(Re,Pe){if(c){var Ke=Re.deletions;Ke===null?(Re.deletions=[Pe],Re.flags|=16):Ke.push(Pe)}}function p(Re,Pe){if(!c)return null;for(;Pe!==null;)h(Re,Pe),Pe=Pe.sibling;return null}function w(Re){for(var Pe=new Map;Re!==null;)Re.key!==null?Pe.set(Re.key,Re):Pe.set(Re.index,Re),Re=Re.sibling;return Pe}function A(Re,Pe){return Re=xl(Re,Pe),Re.index=0,Re.sibling=null,Re}function O(Re,Pe,Ke){return Re.index=Ke,c?(Ke=Re.alternate,Ke!==null?(Ke=Ke.index,Ke<Pe?(Re.flags|=67108866,Pe):Ke):(Re.flags|=67108866,Pe)):(Re.flags|=1048576,Pe)}function Y(Re){return c&&Re.alternate===null&&(Re.flags|=67108866),Re}function de(Re,Pe,Ke,ct){return Pe===null||Pe.tag!==6?(Pe=T0(Ke,Re.mode,ct),Pe.return=Re,Pe):(Pe=A(Pe,Ke),Pe.return=Re,Pe)}function Ae(Re,Pe,Ke,ct){var nr=Ke.type;return nr===v?st(Re,Pe,Ke.props.children,ct,Ke.key):Pe!==null&&(Pe.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===M&&Ue(nr)===Pe.type)?(Pe=A(Pe,Ke.props),vr(Pe,Ke),Pe.return=Re,Pe):(Pe=lf(Ke.type,Ke.key,Ke.props,null,Re.mode,ct),vr(Pe,Ke),Pe.return=Re,Pe)}function Ge(Re,Pe,Ke,ct){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Ke.containerInfo||Pe.stateNode.implementation!==Ke.implementation?(Pe=of(Ke,Re.mode,ct),Pe.return=Re,Pe):(Pe=A(Pe,Ke.children||[]),Pe.return=Re,Pe)}function st(Re,Pe,Ke,ct,nr){return Pe===null||Pe.tag!==7?(Pe=nu(Ke,Re.mode,ct,nr),Pe.return=Re,Pe):(Pe=A(Pe,Ke),Pe.return=Re,Pe)}function dt(Re,Pe,Ke){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=T0(""+Pe,Re.mode,Ke),Pe.return=Re,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case x:return Ke=lf(Pe.type,Pe.key,Pe.props,null,Re.mode,Ke),vr(Ke,Pe),Ke.return=Re,Ke;case b:return Pe=of(Pe,Re.mode,Ke),Pe.return=Re,Pe;case M:return Pe=Ue(Pe),dt(Re,Pe,Ke)}if(ie(Pe)||z(Pe))return Pe=nu(Pe,Re.mode,Ke,null),Pe.return=Re,Pe;if(typeof Pe.then=="function")return dt(Re,It(Pe),Ke);if(Pe.$$typeof===N)return dt(Re,im(Re,Pe),Ke);qt(Re,Pe)}return null}function Qe(Re,Pe,Ke,ct){var nr=Pe!==null?Pe.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return nr!==null?null:de(Re,Pe,""+Ke,ct);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case x:return Ke.key===nr?Ae(Re,Pe,Ke,ct):null;case b:return Ke.key===nr?Ge(Re,Pe,Ke,ct):null;case M:return Ke=Ue(Ke),Qe(Re,Pe,Ke,ct)}if(ie(Ke)||z(Ke))return nr!==null?null:st(Re,Pe,Ke,ct,null);if(typeof Ke.then=="function")return Qe(Re,Pe,It(Ke),ct);if(Ke.$$typeof===N)return Qe(Re,Pe,im(Re,Ke),ct);qt(Re,Ke)}return null}function Ze(Re,Pe,Ke,ct,nr){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Re=Re.get(Ke)||null,de(Pe,Re,""+ct,nr);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:return Re=Re.get(ct.key===null?Ke:ct.key)||null,Ae(Pe,Re,ct,nr);case b:return Re=Re.get(ct.key===null?Ke:ct.key)||null,Ge(Pe,Re,ct,nr);case M:return ct=Ue(ct),Ze(Re,Pe,Ke,ct,nr)}if(ie(ct)||z(ct))return Re=Re.get(Ke)||null,st(Pe,Re,ct,nr,null);if(typeof ct.then=="function")return Ze(Re,Pe,Ke,It(ct),nr);if(ct.$$typeof===N)return Ze(Re,Pe,Ke,im(Pe,ct),nr);qt(Pe,ct)}return null}function Vt(Re,Pe,Ke,ct){for(var nr=null,da=null,Xt=Pe,Er=Pe=0,Yr=null;Xt!==null&&Er<Ke.length;Er++){Xt.index>Er?(Yr=Xt,Xt=null):Yr=Xt.sibling;var fa=Qe(Re,Xt,Ke[Er],ct);if(fa===null){Xt===null&&(Xt=Yr);break}c&&Xt&&fa.alternate===null&&h(Re,Xt),Pe=O(fa,Pe,Er),da===null?nr=fa:da.sibling=fa,da=fa,Xt=Yr}if(Er===Ke.length)return p(Re,Xt),Hr&&Gi(Re,Er),nr;if(Xt===null){for(;Er<Ke.length;Er++)Xt=dt(Re,Ke[Er],ct),Xt!==null&&(Pe=O(Xt,Pe,Er),da===null?nr=Xt:da.sibling=Xt,da=Xt);return Hr&&Gi(Re,Er),nr}for(Xt=w(Xt);Er<Ke.length;Er++)Yr=Ze(Xt,Re,Er,Ke[Er],ct),Yr!==null&&(c&&Yr.alternate!==null&&Xt.delete(Yr.key===null?Er:Yr.key),Pe=O(Yr,Pe,Er),da===null?nr=Yr:da.sibling=Yr,da=Yr);return c&&Xt.forEach(function(Ef){return h(Re,Ef)}),Hr&&Gi(Re,Er),nr}function cr(Re,Pe,Ke,ct){if(Ke==null)throw Error(a(151));for(var nr=null,da=null,Xt=Pe,Er=Pe=0,Yr=null,fa=Ke.next();Xt!==null&&!fa.done;Er++,fa=Ke.next()){Xt.index>Er?(Yr=Xt,Xt=null):Yr=Xt.sibling;var Ef=Qe(Re,Xt,fa.value,ct);if(Ef===null){Xt===null&&(Xt=Yr);break}c&&Xt&&Ef.alternate===null&&h(Re,Xt),Pe=O(Ef,Pe,Er),da===null?nr=Ef:da.sibling=Ef,da=Ef,Xt=Yr}if(fa.done)return p(Re,Xt),Hr&&Gi(Re,Er),nr;if(Xt===null){for(;!fa.done;Er++,fa=Ke.next())fa=dt(Re,fa.value,ct),fa!==null&&(Pe=O(fa,Pe,Er),da===null?nr=fa:da.sibling=fa,da=fa);return Hr&&Gi(Re,Er),nr}for(Xt=w(Xt);!fa.done;Er++,fa=Ke.next())fa=Ze(Xt,Re,Er,fa.value,ct),fa!==null&&(c&&fa.alternate!==null&&Xt.delete(fa.key===null?Er:fa.key),Pe=O(fa,Pe,Er),da===null?nr=fa:da.sibling=fa,da=fa);return c&&Xt.forEach(function(Aq){return h(Re,Aq)}),Hr&&Gi(Re,Er),nr}function za(Re,Pe,Ke,ct){if(typeof Ke=="object"&&Ke!==null&&Ke.type===v&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case x:e:{for(var nr=Ke.key;Pe!==null;){if(Pe.key===nr){if(nr=Ke.type,nr===v){if(Pe.tag===7){p(Re,Pe.sibling),ct=A(Pe,Ke.props.children),ct.return=Re,Re=ct;break e}}else if(Pe.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===M&&Ue(nr)===Pe.type){p(Re,Pe.sibling),ct=A(Pe,Ke.props),vr(ct,Ke),ct.return=Re,Re=ct;break e}p(Re,Pe);break}else h(Re,Pe);Pe=Pe.sibling}Ke.type===v?(ct=nu(Ke.props.children,Re.mode,ct,Ke.key),ct.return=Re,Re=ct):(ct=lf(Ke.type,Ke.key,Ke.props,null,Re.mode,ct),vr(ct,Ke),ct.return=Re,Re=ct)}return Y(Re);case b:e:{for(nr=Ke.key;Pe!==null;){if(Pe.key===nr)if(Pe.tag===4&&Pe.stateNode.containerInfo===Ke.containerInfo&&Pe.stateNode.implementation===Ke.implementation){p(Re,Pe.sibling),ct=A(Pe,Ke.children||[]),ct.return=Re,Re=ct;break e}else{p(Re,Pe);break}else h(Re,Pe);Pe=Pe.sibling}ct=of(Ke,Re.mode,ct),ct.return=Re,Re=ct}return Y(Re);case M:return Ke=Ue(Ke),za(Re,Pe,Ke,ct)}if(ie(Ke))return Vt(Re,Pe,Ke,ct);if(z(Ke)){if(nr=z(Ke),typeof nr!="function")throw Error(a(150));return Ke=nr.call(Ke),cr(Re,Pe,Ke,ct)}if(typeof Ke.then=="function")return za(Re,Pe,It(Ke),ct);if(Ke.$$typeof===N)return za(Re,Pe,im(Re,Ke),ct);qt(Re,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Pe!==null&&Pe.tag===6?(p(Re,Pe.sibling),ct=A(Pe,Ke),ct.return=Re,Re=ct):(p(Re,Pe),ct=T0(Ke,Re.mode,ct),ct.return=Re,Re=ct),Y(Re)):p(Re,Pe)}return function(Re,Pe,Ke,ct){try{Wt=0;var nr=za(Re,Pe,Ke,ct);return ft=null,nr}catch(Xt){if(Xt===Fe||Xt===we)throw Xt;var da=qs(29,Xt,null,Re.mode);return da.lanes=ct,da.return=Re,da}finally{}}}var Va=Ur(!0),_r=Ur(!1),Bt=!1;function Et(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function en(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function or(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Ar(c,h,p){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(ya&2)!==0){var A=w.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),w.pending=h,h=Us(c),C0(c,null,p),h}return A0(c,w,h,p),Us(c)}function ga(c,h,p){if(h=h.updateQueue,h!==null&&(h=h.shared,(p&4194048)!==0)){var w=h.lanes;w&=c.pendingLanes,p|=w,h.lanes=p,ys(c,p)}}function Yn(c,h){var p=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var A=null,O=null;if(p=p.firstBaseUpdate,p!==null){do{var Y={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};O===null?A=O=Y:O=O.next=Y,p=p.next}while(p!==null);O===null?A=O=h:O=O.next=h}else A=O=h;p={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:w.shared,callbacks:w.callbacks},c.updateQueue=p;return}c=p.lastBaseUpdate,c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=h}var Cs=!1;function Ra(){if(Cs){var c=E;if(c!==null)throw c}}function Ln(c,h,p,w){Cs=!1;var A=c.updateQueue;Bt=!1;var O=A.firstBaseUpdate,Y=A.lastBaseUpdate,de=A.shared.pending;if(de!==null){A.shared.pending=null;var Ae=de,Ge=Ae.next;Ae.next=null,Y===null?O=Ge:Y.next=Ge,Y=Ae;var st=c.alternate;st!==null&&(st=st.updateQueue,de=st.lastBaseUpdate,de!==Y&&(de===null?st.firstBaseUpdate=Ge:de.next=Ge,st.lastBaseUpdate=Ae))}if(O!==null){var dt=A.baseState;Y=0,st=Ge=Ae=null,de=O;do{var Qe=de.lane&-536870913,Ze=Qe!==de.lane;if(Ze?(Gr&Qe)===Qe:(w&Qe)===Qe){Qe!==0&&Qe===_&&(Cs=!0),st!==null&&(st=st.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Vt=c,cr=de;Qe=h;var za=p;switch(cr.tag){case 1:if(Vt=cr.payload,typeof Vt=="function"){dt=Vt.call(za,dt,Qe);break e}dt=Vt;break e;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=cr.payload,Qe=typeof Vt=="function"?Vt.call(za,dt,Qe):Vt,Qe==null)break e;dt=m({},dt,Qe);break e;case 2:Bt=!0}}Qe=de.callback,Qe!==null&&(c.flags|=64,Ze&&(c.flags|=8192),Ze=A.callbacks,Ze===null?A.callbacks=[Qe]:Ze.push(Qe))}else Ze={lane:Qe,tag:de.tag,payload:de.payload,callback:de.callback,next:null},st===null?(Ge=st=Ze,Ae=dt):st=st.next=Ze,Y|=Qe;if(de=de.next,de===null){if(de=A.shared.pending,de===null)break;Ze=de,de=Ze.next,Ze.next=null,A.lastBaseUpdate=Ze,A.shared.pending=null}}while(!0);st===null&&(Ae=dt),A.baseState=Ae,A.firstBaseUpdate=Ge,A.lastBaseUpdate=st,O===null&&(A.shared.lanes=0),yf|=Y,c.lanes=Y,c.memoizedState=dt}}function $s(c,h){if(typeof c!="function")throw Error(a(191,c));c.call(h)}function Rn(c,h){var p=c.callbacks;if(p!==null)for(c.callbacks=null,c=0;c<p.length;c++)$s(p[c],h)}var Rr=se(null),ta=se(0);function tn(c,h){c=od,I(ta,c),I(Rr,h),od=c|h.baseLanes}function oa(){I(ta,od),I(Rr,Rr.current)}function Xn(){od=ta.current,R(Rr),R(ta)}var rn=se(null),ra=null;function Tn(c){var h=c.alternate;I(Zr,Zr.current&1),I(rn,c),ra===null&&(h===null||Rr.current!==null||h.memoizedState!==null)&&(ra=c)}function va(c){I(Zr,Zr.current),I(rn,c),ra===null&&(ra=c)}function In(c){c.tag===22?(I(Zr,Zr.current),I(rn,c),ra===null&&(ra=c)):Bn()}function Bn(){I(Zr,Zr.current),I(rn,rn.current)}function Sa(c){R(rn),ra===c&&(ra=null),R(Zr)}var Zr=se(0);function Hs(c){for(var h=c;h!==null;){if(h.tag===13){var p=h.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||qw(p)||$w(p)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var hn=0,rr=null,ar=null,aa=null,wi=!1,Nl=!1,si=!1,zn=0,du=0,fu=null,om=0;function Ia(){throw Error(a(321))}function rx(c,h){if(h===null)return!1;for(var p=0;p<h.length&&p<c.length;p++)if(!Ns(c[p],h[p]))return!1;return!0}function ax(c,h,p,w,A,O){return hn=O,rr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Z.H=c===null||c.memoizedState===null?H6:J2,si=!1,O=p(w,A),si=!1,Nl&&(O=wc(h,p,w,A)),cm(c),O}function cm(c){Z.H=dx;var h=ar!==null&&ar.next!==null;if(hn=0,aa=ar=rr=null,wi=!1,du=0,fu=null,h)throw Error(a(300));c===null||us||(c=c.dependencies,c!==null&&sm(c)&&(us=!0))}function wc(c,h,p,w){rr=c;var A=0;do{if(Nl&&(fu=null),du=0,Nl=!1,25<=A)throw Error(a(301));if(A+=1,aa=ar=null,c.updateQueue!=null){var O=c.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Z.H=V6,O=h(p,w)}while(Nl);return O}function W2(){var c=Z.H,h=c.useState()[0];return h=typeof h.then=="function"?hu(h):h,c=c.useState()[0],(ar!==null?ar.memoizedState:null)!==c&&(rr.flags|=1024),h}function nx(){var c=zn!==0;return zn=0,c}function sx(c,h,p){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~p}function um(c){if(wi){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}wi=!1}hn=0,aa=ar=rr=null,Nl=!1,du=zn=0,fu=null}function cs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return aa===null?rr.memoizedState=aa=c:aa=aa.next=c,aa}function mn(){if(ar===null){var c=rr.alternate;c=c!==null?c.memoizedState:null}else c=ar.next;var h=aa===null?rr.memoizedState:aa.next;if(h!==null)aa=h,ar=c;else{if(c===null)throw rr.alternate===null?Error(a(467)):Error(a(310));ar=c,c={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},aa===null?rr.memoizedState=aa=c:aa=aa.next=c}return aa}function P0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(c){var h=du;return du+=1,fu===null&&(fu=[]),c=at(fu,c,h),h=rr,(aa===null?h.memoizedState:aa.next)===null&&(h=h.alternate,Z.H=h===null||h.memoizedState===null?H6:J2),c}function hf(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return hu(c);if(c.$$typeof===N)return As(c)}throw Error(a(438,String(c)))}function Ju(c){var h=null,p=rr.updateQueue;if(p!==null&&(h=p.memoCache),h==null){var w=rr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(h={data:w.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),p===null&&(p=P0(),rr.updateQueue=p),p.memoCache=h,p=h.data[h.index],p===void 0)for(p=h.data[h.index]=Array(c),w=0;w<c;w++)p[w]=H;return h.index++,p}function Do(c,h){return typeof h=="function"?h(c):h}function dm(c){var h=mn();return mf(h,ar,c)}function mf(c,h,p){var w=c.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=p;var A=c.baseQueue,O=w.pending;if(O!==null){if(A!==null){var Y=A.next;A.next=O.next,O.next=Y}h.baseQueue=A=O,w.pending=null}if(O=c.baseState,A===null)c.memoizedState=O;else{h=A.next;var de=Y=null,Ae=null,Ge=h,st=!1;do{var dt=Ge.lane&-536870913;if(dt!==Ge.lane?(Gr&dt)===dt:(hn&dt)===dt){var Qe=Ge.revertLane;if(Qe===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),dt===_&&(st=!0);else if((hn&Qe)===Qe){Ge=Ge.next,Qe===_&&(st=!0);continue}else dt={lane:0,revertLane:Ge.revertLane,gesture:null,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},Ae===null?(de=Ae=dt,Y=O):Ae=Ae.next=dt,rr.lanes|=Qe,yf|=Qe;dt=Ge.action,si&&p(O,dt),O=Ge.hasEagerState?Ge.eagerState:p(O,dt)}else Qe={lane:dt,revertLane:Ge.revertLane,gesture:Ge.gesture,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},Ae===null?(de=Ae=Qe,Y=O):Ae=Ae.next=Qe,rr.lanes|=dt,yf|=dt;Ge=Ge.next}while(Ge!==null&&Ge!==h);if(Ae===null?Y=O:Ae.next=de,!Ns(O,c.memoizedState)&&(us=!0,st&&(p=E,p!==null)))throw p;c.memoizedState=O,c.baseState=Y,c.baseQueue=Ae,w.lastRenderedState=O}return A===null&&(w.lanes=0),[c.memoizedState,w.dispatch]}function fm(c){var h=mn(),p=h.queue;if(p===null)throw Error(a(311));p.lastRenderedReducer=c;var w=p.dispatch,A=p.pending,O=h.memoizedState;if(A!==null){p.pending=null;var Y=A=A.next;do O=c(O,Y.action),Y=Y.next;while(Y!==A);Ns(O,h.memoizedState)||(us=!0),h.memoizedState=O,h.baseQueue===null&&(h.baseState=O),p.lastRenderedState=O}return[O,w]}function hm(c,h,p){var w=rr,A=mn(),O=Hr;if(O){if(p===void 0)throw Error(a(407));p=p()}else p=h();var Y=!Ns((ar||A).memoizedState,p);if(Y&&(A.memoizedState=p,us=!0),A=A.queue,K2(lx.bind(null,w,A,c),[c]),A.getSnapshot!==h||Y||aa!==null&&aa.memoizedState.tag&1){if(w.flags|=2048,td(9,{destroy:void 0},ix.bind(null,w,A,p,h),null),Wa===null)throw Error(a(349));O||(hn&127)!==0||jc(w,h,p)}return p}function jc(c,h,p){c.flags|=16384,c={getSnapshot:h,value:p},h=rr.updateQueue,h===null?(h=P0(),rr.updateQueue=h,h.stores=[c]):(p=h.stores,p===null?h.stores=[c]:p.push(c))}function ix(c,h,p,w){h.value=p,h.getSnapshot=w,Pv(h)&&ox(c)}function lx(c,h,p){return p(function(){Pv(h)&&ox(c)})}function Pv(c){var h=c.getSnapshot;c=c.value;try{var p=h();return!Ns(c,p)}catch{return!0}}function ox(c){var h=yc(c,2);h!==null&&Cl(h,c,2)}function mu(c){var h=cs();if(typeof c=="function"){var p=c;if(c=p(),si){tr(!0);try{p()}finally{tr(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:c},h}function Mv(c,h,p,w){return c.baseState=p,mf(c,ar,typeof w=="function"?w:Do)}function Lv(c,h,p,w,A){if(zv(c))throw Error(a(485));if(c=h.action,c!==null){var O={payload:A,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){O.listeners.push(Y)}};Z.T!==null?p(!0):O.isTransition=!1,w(O),p=h.pending,p===null?(O.next=h.pending=O,Rv(h,O)):(O.next=p.next,h.pending=p.next=O)}}function Rv(c,h){var p=h.action,w=h.payload,A=c.state;if(h.isTransition){var O=Z.T,Y={};Z.T=Y;try{var de=p(A,w),Ae=Z.S;Ae!==null&&Ae(Y,de),cx(c,h,de)}catch(Ge){ed(c,h,Ge)}finally{O!==null&&Y.types!==null&&(O.types=Y.types),Z.T=O}}else try{O=p(A,w),cx(c,h,O)}catch(Ge){ed(c,h,Ge)}}function cx(c,h,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){Iv(c,h,w)},function(w){return ed(c,h,w)}):Iv(c,h,p)}function Iv(c,h,p){h.status="fulfilled",h.value=p,mm(h),c.state=p,h=c.pending,h!==null&&(p=h.next,p===h?c.pending=null:(p=p.next,h.next=p,Rv(c,p)))}function ed(c,h,p){var w=c.pending;if(c.pending=null,w!==null){w=w.next;do h.status="rejected",h.reason=p,mm(h),h=h.next;while(h!==w)}c.action=null}function mm(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function M0(c,h){return h}function Oo(c,h){if(Hr){var p=Wa.formState;if(p!==null){e:{var w=rr;if(Hr){if(Ha){t:{for(var A=Ha,O=fn;A.nodeType!==8;){if(!O){A=null;break t}if(A=Fo(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){Ha=Fo(A.nextSibling),w=A.data==="F!";break e}}iu(w)}w=!1}w&&(h=p[0])}}return p=cs(),p.memoizedState=p.baseState=h,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M0,lastRenderedState:h},p.queue=w,p=U6.bind(null,rr,w),w.dispatch=p,w=mu(!1),O=Z2.bind(null,rr,!1,w.queue),w=cs(),A={state:h,dispatch:null,action:c,pending:null},w.queue=A,p=Lv.bind(null,rr,A,O,p),A.dispatch=p,w.memoizedState=c,[h,p,!1]}function Nc(c){var h=mn();return _c(h,ar,c)}function _c(c,h,p){if(h=mf(c,h,M0)[0],c=dm(Do)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var w=hu(h)}catch(Y){throw Y===Fe?we:Y}else w=h;h=mn();var A=h.queue,O=A.dispatch;return p!==h.memoizedState&&(rr.flags|=2048,td(9,{destroy:void 0},pm.bind(null,A,p),null)),[w,O,c]}function pm(c,h){c.action=h}function xm(c){var h=mn(),p=ar;if(p!==null)return _c(h,p,c);mn(),h=h.memoizedState,p=mn();var w=p.queue.dispatch;return p.memoizedState=c,[h,w,!1]}function td(c,h,p,w){return c={tag:c,create:p,deps:w,inst:h,next:null},h=rr.updateQueue,h===null&&(h=P0(),rr.updateQueue=h),p=h.lastEffect,p===null?h.lastEffect=c.next=c:(w=p.next,p.next=c,c.next=w,h.lastEffect=c),c}function Bv(){return mn().memoizedState}function pf(c,h,p,w){var A=cs();rr.flags|=c,A.memoizedState=td(1|h,{destroy:void 0},p,w===void 0?null:w)}function xf(c,h,p,w){var A=mn();w=w===void 0?null:w;var O=A.memoizedState.inst;ar!==null&&w!==null&&rx(w,ar.memoizedState.deps)?A.memoizedState=td(h,O,p,w):(rr.flags|=c,A.memoizedState=td(1|h,O,p,w))}function A6(c,h){pf(8390656,8,c,h)}function K2(c,h){xf(2048,8,c,h)}function wU(c){rr.flags|=4;var h=rr.updateQueue;if(h===null)h=P0(),rr.updateQueue=h,h.events=[c];else{var p=h.events;p===null?h.events=[c]:p.push(c)}}function C6(c){var h=mn().memoizedState;return wU({ref:h,nextImpl:c}),function(){if((ya&2)!==0)throw Error(a(440));return h.impl.apply(void 0,arguments)}}function E6(c,h){return xf(4,2,c,h)}function T6(c,h){return xf(4,4,c,h)}function D6(c,h){if(typeof h=="function"){c=c();var p=h(c);return function(){typeof p=="function"?p():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function O6(c,h,p){p=p!=null?p.concat([c]):null,xf(4,4,D6.bind(null,h,c),p)}function G2(){}function F6(c,h){var p=mn();h=h===void 0?null:h;var w=p.memoizedState;return h!==null&&rx(h,w[1])?w[0]:(p.memoizedState=[c,h],c)}function P6(c,h){var p=mn();h=h===void 0?null:h;var w=p.memoizedState;if(h!==null&&rx(h,w[1]))return w[0];if(w=c(),si){tr(!0);try{c()}finally{tr(!1)}}return p.memoizedState=[w,h],w}function Y2(c,h,p){return p===void 0||(hn&1073741824)!==0&&(Gr&261930)===0?c.memoizedState=h:(c.memoizedState=p,c=Mk(),rr.lanes|=c,yf|=c,p)}function M6(c,h,p,w){return Ns(p,h)?p:Rr.current!==null?(c=Y2(c,p,w),Ns(c,h)||(us=!0),c):(hn&42)===0||(hn&1073741824)!==0&&(Gr&261930)===0?(us=!0,c.memoizedState=p):(c=Mk(),rr.lanes|=c,yf|=c,h)}function L6(c,h,p,w,A){var O=X.p;X.p=O!==0&&8>O?O:8;var Y=Z.T,de={};Z.T=de,Z2(c,!1,h,p);try{var Ae=A(),Ge=Z.S;if(Ge!==null&&Ge(de,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var st=ae(Ae,w);ux(c,h,st,Ql(c))}else ux(c,h,w,Ql(c))}catch(dt){ux(c,h,{then:function(){},status:"rejected",reason:dt},Ql())}finally{X.p=O,Y!==null&&de.types!==null&&(Y.types=de.types),Z.T=Y}}function jU(){}function X2(c,h,p,w){if(c.tag!==5)throw Error(a(476));var A=R6(c).queue;L6(c,A,h,he,p===null?jU:function(){return I6(c),p(w)})}function R6(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:he},next:null};var p={};return h.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:p},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function I6(c){var h=R6(c);h.next===null&&(h=c.alternate.memoizedState),ux(c,h.next.queue,{},Ql())}function Q2(){return As(Ax)}function B6(){return mn().memoizedState}function z6(){return mn().memoizedState}function NU(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var p=Ql();c=or(p);var w=Ar(h,c,p);w!==null&&(Cl(w,h,p),ga(w,h,p)),h={cache:ff()},c.payload=h;return}h=h.return}}function _U(c,h,p){var w=Ql();p={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},zv(c)?q6(h,p):(p=Qh(c,h,p,w),p!==null&&(Cl(p,c,w),$6(p,h,w)))}function U6(c,h,p){var w=Ql();ux(c,h,p,w)}function ux(c,h,p,w){var A={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(zv(c))q6(h,A);else{var O=c.alternate;if(c.lanes===0&&(O===null||O.lanes===0)&&(O=h.lastRenderedReducer,O!==null))try{var Y=h.lastRenderedState,de=O(Y,p);if(A.hasEagerState=!0,A.eagerState=de,Ns(de,Y))return A0(c,h,A,0),Wa===null&&k0(),!1}catch{}finally{}if(p=Qh(c,h,A,w),p!==null)return Cl(p,c,w),$6(p,h,w),!0}return!1}function Z2(c,h,p,w){if(w={lane:2,revertLane:Tw(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},zv(c)){if(h)throw Error(a(479))}else h=Qh(c,p,w,2),h!==null&&Cl(h,c,2)}function zv(c){var h=c.alternate;return c===rr||h!==null&&h===rr}function q6(c,h){Nl=wi=!0;var p=c.pending;p===null?h.next=h:(h.next=p.next,p.next=h),c.pending=h}function $6(c,h,p){if((p&4194048)!==0){var w=h.lanes;w&=c.pendingLanes,p|=w,h.lanes=p,ys(c,p)}}var dx={readContext:As,use:hf,useCallback:Ia,useContext:Ia,useEffect:Ia,useImperativeHandle:Ia,useLayoutEffect:Ia,useInsertionEffect:Ia,useMemo:Ia,useReducer:Ia,useRef:Ia,useState:Ia,useDebugValue:Ia,useDeferredValue:Ia,useTransition:Ia,useSyncExternalStore:Ia,useId:Ia,useHostTransitionStatus:Ia,useFormState:Ia,useActionState:Ia,useOptimistic:Ia,useMemoCache:Ia,useCacheRefresh:Ia};dx.useEffectEvent=Ia;var H6={readContext:As,use:hf,useCallback:function(c,h){return cs().memoizedState=[c,h===void 0?null:h],c},useContext:As,useEffect:A6,useImperativeHandle:function(c,h,p){p=p!=null?p.concat([c]):null,pf(4194308,4,D6.bind(null,h,c),p)},useLayoutEffect:function(c,h){return pf(4194308,4,c,h)},useInsertionEffect:function(c,h){pf(4,2,c,h)},useMemo:function(c,h){var p=cs();h=h===void 0?null:h;var w=c();if(si){tr(!0);try{c()}finally{tr(!1)}}return p.memoizedState=[w,h],w},useReducer:function(c,h,p){var w=cs();if(p!==void 0){var A=p(h);if(si){tr(!0);try{p(h)}finally{tr(!1)}}}else A=h;return w.memoizedState=w.baseState=A,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:A},w.queue=c,c=c.dispatch=_U.bind(null,rr,c),[w.memoizedState,c]},useRef:function(c){var h=cs();return c={current:c},h.memoizedState=c},useState:function(c){c=mu(c);var h=c.queue,p=U6.bind(null,rr,h);return h.dispatch=p,[c.memoizedState,p]},useDebugValue:G2,useDeferredValue:function(c,h){var p=cs();return Y2(p,c,h)},useTransition:function(){var c=mu(!1);return c=L6.bind(null,rr,c.queue,!0,!1),cs().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,p){var w=rr,A=cs();if(Hr){if(p===void 0)throw Error(a(407));p=p()}else{if(p=h(),Wa===null)throw Error(a(349));(Gr&127)!==0||jc(w,h,p)}A.memoizedState=p;var O={value:p,getSnapshot:h};return A.queue=O,A6(lx.bind(null,w,O,c),[c]),w.flags|=2048,td(9,{destroy:void 0},ix.bind(null,w,O,p,h),null),p},useId:function(){var c=cs(),h=Wa.identifierPrefix;if(Hr){var p=wl,w=bl;p=(w&~(1<<32-wr(w)-1)).toString(32)+p,h="_"+h+"R_"+p,p=zn++,0<p&&(h+="H"+p.toString(32)),h+="_"}else p=om++,h="_"+h+"r_"+p.toString(32)+"_";return c.memoizedState=h},useHostTransitionStatus:Q2,useFormState:Oo,useActionState:Oo,useOptimistic:function(c){var h=cs();h.memoizedState=h.baseState=c;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=p,h=Z2.bind(null,rr,!0,p),p.dispatch=h,[c,h]},useMemoCache:Ju,useCacheRefresh:function(){return cs().memoizedState=NU.bind(null,rr)},useEffectEvent:function(c){var h=cs(),p={impl:c};return h.memoizedState=p,function(){if((ya&2)!==0)throw Error(a(440));return p.impl.apply(void 0,arguments)}}},J2={readContext:As,use:hf,useCallback:F6,useContext:As,useEffect:K2,useImperativeHandle:O6,useInsertionEffect:E6,useLayoutEffect:T6,useMemo:P6,useReducer:dm,useRef:Bv,useState:function(){return dm(Do)},useDebugValue:G2,useDeferredValue:function(c,h){var p=mn();return M6(p,ar.memoizedState,c,h)},useTransition:function(){var c=dm(Do)[0],h=mn().memoizedState;return[typeof c=="boolean"?c:hu(c),h]},useSyncExternalStore:hm,useId:B6,useHostTransitionStatus:Q2,useFormState:Nc,useActionState:Nc,useOptimistic:function(c,h){var p=mn();return Mv(p,ar,c,h)},useMemoCache:Ju,useCacheRefresh:z6};J2.useEffectEvent=C6;var V6={readContext:As,use:hf,useCallback:F6,useContext:As,useEffect:K2,useImperativeHandle:O6,useInsertionEffect:E6,useLayoutEffect:T6,useMemo:P6,useReducer:fm,useRef:Bv,useState:function(){return fm(Do)},useDebugValue:G2,useDeferredValue:function(c,h){var p=mn();return ar===null?Y2(p,c,h):M6(p,ar.memoizedState,c,h)},useTransition:function(){var c=fm(Do)[0],h=mn().memoizedState;return[typeof c=="boolean"?c:hu(c),h]},useSyncExternalStore:hm,useId:B6,useHostTransitionStatus:Q2,useFormState:xm,useActionState:xm,useOptimistic:function(c,h){var p=mn();return ar!==null?Mv(p,ar,c,h):(p.baseState=c,[c,p.queue.dispatch])},useMemoCache:Ju,useCacheRefresh:z6};V6.useEffectEvent=C6;function ew(c,h,p,w){h=c.memoizedState,p=p(w,h),p=p==null?h:m({},h,p),c.memoizedState=p,c.lanes===0&&(c.updateQueue.baseState=p)}var tw={enqueueSetState:function(c,h,p){c=c._reactInternals;var w=Ql(),A=or(w);A.payload=h,p!=null&&(A.callback=p),h=Ar(c,A,w),h!==null&&(Cl(h,c,w),ga(h,c,w))},enqueueReplaceState:function(c,h,p){c=c._reactInternals;var w=Ql(),A=or(w);A.tag=1,A.payload=h,p!=null&&(A.callback=p),h=Ar(c,A,w),h!==null&&(Cl(h,c,w),ga(h,c,w))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var p=Ql(),w=or(p);w.tag=2,h!=null&&(w.callback=h),h=Ar(c,w,p),h!==null&&(Cl(h,c,p),ga(h,c,p))}};function W6(c,h,p,w,A,O,Y){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,O,Y):h.prototype&&h.prototype.isPureReactComponent?!pc(p,w)||!pc(A,O):!0}function K6(c,h,p,w){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(p,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(p,w),h.state!==c&&tw.enqueueReplaceState(h,h.state,null)}function L0(c,h){var p=h;if("ref"in h){p={};for(var w in h)w!=="ref"&&(p[w]=h[w])}if(c=c.defaultProps){p===h&&(p=m({},p));for(var A in c)p[A]===void 0&&(p[A]=c[A])}return p}function G6(c){S0(c)}function Y6(c){console.error(c)}function X6(c){S0(c)}function Uv(c,h){try{var p=c.onUncaughtError;p(h.value,{componentStack:h.stack})}catch(w){setTimeout(function(){throw w})}}function Q6(c,h,p){try{var w=c.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function rw(c,h,p){return p=or(p),p.tag=3,p.payload={element:null},p.callback=function(){Uv(c,h)},p}function Z6(c){return c=or(c),c.tag=3,c}function J6(c,h,p,w){var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var O=w.value;c.payload=function(){return A(O)},c.callback=function(){Q6(h,p,w)}}var Y=p.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(c.callback=function(){Q6(h,p,w),typeof A!="function"&&(bf===null?bf=new Set([this]):bf.add(this));var de=w.stack;this.componentDidCatch(w.value,{componentStack:de!==null?de:""})})}function SU(c,h,p,w,A){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(h=p.alternate,h!==null&&cu(h,p,A,!0),p=rn.current,p!==null){switch(p.tag){case 31:case 13:return ra===null?Jv():p.alternate===null&&Un===0&&(Un=3),p.flags&=-257,p.flags|=65536,p.lanes=A,w===Me?p.flags|=16384:(h=p.updateQueue,h===null?p.updateQueue=new Set([w]):h.add(w),Aw(c,w,A)),!1;case 22:return p.flags|=65536,w===Me?p.flags|=16384:(h=p.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=h):(p=h.retryQueue,p===null?h.retryQueue=new Set([w]):p.add(w)),Aw(c,w,A)),!1}throw Error(a(435,p.tag))}return Aw(c,w,A),Jv(),!1}if(Hr)return h=rn.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,w!==Gl&&(c=Error(a(422),{cause:w}),uf(gl(c,p)))):(w!==Gl&&(h=Error(a(423),{cause:w}),uf(gl(h,p))),c=c.current.alternate,c.flags|=65536,A&=-A,c.lanes|=A,w=gl(w,p),A=rw(c.stateNode,w,A),Yn(c,A),Un!==4&&(Un=2)),!1;var O=Error(a(520),{cause:w});if(O=gl(O,p),yx===null?yx=[O]:yx.push(O),Un!==4&&(Un=2),h===null)return!0;w=gl(w,p),p=h;do{switch(p.tag){case 3:return p.flags|=65536,c=A&-A,p.lanes|=c,c=rw(p.stateNode,w,c),Yn(p,c),!1;case 1:if(h=p.type,O=p.stateNode,(p.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(bf===null||!bf.has(O))))return p.flags|=65536,A&=-A,p.lanes|=A,A=Z6(A),J6(A,c,p,w),Yn(p,A),!1}p=p.return}while(p!==null);return!1}var aw=Error(a(461)),us=!1;function ii(c,h,p,w){h.child=c===null?_r(h,null,p,w):Va(h,c.child,p,w)}function ek(c,h,p,w,A){p=p.render;var O=h.ref;if("ref"in w){var Y={};for(var de in w)de!=="ref"&&(Y[de]=w[de])}else Y=w;return uu(h),w=ax(c,h,p,Y,O,A),de=nx(),c!==null&&!us?(sx(c,h,A),rd(c,h,A)):(Hr&&de&&Jp(h),h.flags|=1,ii(c,h,w,A),h.child)}function tk(c,h,p,w,A){if(c===null){var O=p.type;return typeof O=="function"&&!Jh(O)&&O.defaultProps===void 0&&p.compare===null?(h.tag=15,h.type=O,rk(c,h,O,w,A)):(c=lf(p.type,null,w,h,h.mode,A),c.ref=h.ref,c.return=h,h.child=c)}if(O=c.child,!dw(c,A)){var Y=O.memoizedProps;if(p=p.compare,p=p!==null?p:pc,p(Y,w)&&c.ref===h.ref)return rd(c,h,A)}return h.flags|=1,c=xl(O,w),c.ref=h.ref,c.return=h,h.child=c}function rk(c,h,p,w,A){if(c!==null){var O=c.memoizedProps;if(pc(O,w)&&c.ref===h.ref)if(us=!1,h.pendingProps=w=O,dw(c,A))(c.flags&131072)!==0&&(us=!0);else return h.lanes=c.lanes,rd(c,h,A)}return nw(c,h,p,w,A)}function ak(c,h,p,w){var A=w.children,O=c!==null?c.memoizedState:null;if(c===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((h.flags&128)!==0){if(O=O!==null?O.baseLanes|p:p,c!==null){for(w=h.child=c.child,A=0;w!==null;)A=A|w.lanes|w.childLanes,w=w.sibling;w=A&~O}else w=0,h.child=null;return nk(c,h,O,p,w)}if((p&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&xe(h,O!==null?O.cachePool:null),O!==null?tn(h,O):oa(),In(h);else return w=h.lanes=536870912,nk(c,h,O!==null?O.baseLanes|p:p,p,w)}else O!==null?(xe(h,O.cachePool),tn(h,O),Bn(),h.memoizedState=null):(c!==null&&xe(h,null),oa(),Bn());return ii(c,h,A,p),h.child}function fx(c,h){return c!==null&&c.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function nk(c,h,p,w,A){var O=fe();return O=O===null?null:{parent:En._currentValue,pool:O},h.memoizedState={baseLanes:p,cachePool:O},c!==null&&xe(h,null),oa(),In(h),c!==null&&cu(c,h,w,!0),h.childLanes=A,null}function qv(c,h){return h=Hv({mode:h.mode,children:h.children},c.mode),h.ref=c.ref,c.child=h,h.return=c,h}function sk(c,h,p){return Va(h,c.child,null,p),c=qv(h,h.pendingProps),c.flags|=2,Sa(h),h.memoizedState=null,c}function kU(c,h,p){var w=h.pendingProps,A=(h.flags&128)!==0;if(h.flags&=-129,c===null){if(Hr){if(w.mode==="hidden")return c=qv(h,w),h.lanes=536870912,fx(null,c);if(va(h),(c=Ha)?(c=gA(c,fn),c=c!==null&&c.data==="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:su!==null?{id:bl,overflow:wl}:null,retryLane:536870912,hydrationErrors:null},p=em(c),p.return=h,h.child=p,Ss=h,Ha=null)):c=null,c===null)throw iu(h);return h.lanes=536870912,null}return qv(h,w)}var O=c.memoizedState;if(O!==null){var Y=O.dehydrated;if(va(h),A)if(h.flags&256)h.flags&=-257,h=sk(c,h,p);else if(h.memoizedState!==null)h.child=c.child,h.flags|=128,h=null;else throw Error(a(558));else if(us||cu(c,h,p,!1),A=(p&c.childLanes)!==0,us||A){if(w=Wa,w!==null&&(Y=Js(w,p),Y!==0&&Y!==O.retryLane))throw O.retryLane=Y,yc(c,Y),Cl(w,c,Y),aw;Jv(),h=sk(c,h,p)}else c=O.treeContext,Ha=Fo(Y.nextSibling),Ss=h,Hr=!0,ni=null,fn=!1,c!==null&&Ov(h,c),h=qv(h,w),h.flags|=4096;return h}return c=xl(c.child,{mode:w.mode,children:w.children}),c.ref=h.ref,h.child=c,c.return=h,c}function $v(c,h){var p=h.ref;if(p===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(a(284));(c===null||c.ref!==p)&&(h.flags|=4194816)}}function nw(c,h,p,w,A){return uu(h),p=ax(c,h,p,w,void 0,A),w=nx(),c!==null&&!us?(sx(c,h,A),rd(c,h,A)):(Hr&&w&&Jp(h),h.flags|=1,ii(c,h,p,A),h.child)}function ik(c,h,p,w,A,O){return uu(h),h.updateQueue=null,p=wc(h,w,p,A),cm(c),w=nx(),c!==null&&!us?(sx(c,h,O),rd(c,h,O)):(Hr&&w&&Jp(h),h.flags|=1,ii(c,h,p,O),h.child)}function lk(c,h,p,w,A){if(uu(h),h.stateNode===null){var O=_s,Y=p.contextType;typeof Y=="object"&&Y!==null&&(O=As(Y)),O=new p(w,O),h.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=tw,h.stateNode=O,O._reactInternals=h,O=h.stateNode,O.props=w,O.state=h.memoizedState,O.refs={},Et(h),Y=p.contextType,O.context=typeof Y=="object"&&Y!==null?As(Y):_s,O.state=h.memoizedState,Y=p.getDerivedStateFromProps,typeof Y=="function"&&(ew(h,p,Y,w),O.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(Y=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),Y!==O.state&&tw.enqueueReplaceState(O,O.state,null),Ln(h,w,O,A),Ra(),O.state=h.memoizedState),typeof O.componentDidMount=="function"&&(h.flags|=4194308),w=!0}else if(c===null){O=h.stateNode;var de=h.memoizedProps,Ae=L0(p,de);O.props=Ae;var Ge=O.context,st=p.contextType;Y=_s,typeof st=="object"&&st!==null&&(Y=As(st));var dt=p.getDerivedStateFromProps;st=typeof dt=="function"||typeof O.getSnapshotBeforeUpdate=="function",de=h.pendingProps!==de,st||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(de||Ge!==Y)&&K6(h,O,w,Y),Bt=!1;var Qe=h.memoizedState;O.state=Qe,Ln(h,w,O,A),Ra(),Ge=h.memoizedState,de||Qe!==Ge||Bt?(typeof dt=="function"&&(ew(h,p,dt,w),Ge=h.memoizedState),(Ae=Bt||W6(h,p,Ae,w,Qe,Ge,Y))?(st||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(h.flags|=4194308)):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=Ge),O.props=w,O.state=Ge,O.context=Y,w=Ae):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{O=h.stateNode,en(c,h),Y=h.memoizedProps,st=L0(p,Y),O.props=st,dt=h.pendingProps,Qe=O.context,Ge=p.contextType,Ae=_s,typeof Ge=="object"&&Ge!==null&&(Ae=As(Ge)),de=p.getDerivedStateFromProps,(Ge=typeof de=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==dt||Qe!==Ae)&&K6(h,O,w,Ae),Bt=!1,Qe=h.memoizedState,O.state=Qe,Ln(h,w,O,A),Ra();var Ze=h.memoizedState;Y!==dt||Qe!==Ze||Bt||c!==null&&c.dependencies!==null&&sm(c.dependencies)?(typeof de=="function"&&(ew(h,p,de,w),Ze=h.memoizedState),(st=Bt||W6(h,p,st,w,Qe,Ze,Ae)||c!==null&&c.dependencies!==null&&sm(c.dependencies))?(Ge||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(w,Ze,Ae),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(w,Ze,Ae)),typeof O.componentDidUpdate=="function"&&(h.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===c.memoizedProps&&Qe===c.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&Qe===c.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=Ze),O.props=w,O.state=Ze,O.context=Ae,w=st):(typeof O.componentDidUpdate!="function"||Y===c.memoizedProps&&Qe===c.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&Qe===c.memoizedState||(h.flags|=1024),w=!1)}return O=w,$v(c,h),w=(h.flags&128)!==0,O||w?(O=h.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:O.render(),h.flags|=1,c!==null&&w?(h.child=Va(h,c.child,null,A),h.child=Va(h,null,p,A)):ii(c,h,p,A),h.memoizedState=O.state,c=h.child):c=rd(c,h,A),c}function ok(c,h,p,w){return Qu(),h.flags|=256,ii(c,h,p,w),h.child}var sw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function iw(c){return{baseLanes:c,cachePool:je()}}function lw(c,h,p){return c=c!==null?c.childLanes&~p:0,h&&(c|=Xl),c}function ck(c,h,p){var w=h.pendingProps,A=!1,O=(h.flags&128)!==0,Y;if((Y=O)||(Y=c!==null&&c.memoizedState===null?!1:(Zr.current&2)!==0),Y&&(A=!0,h.flags&=-129),Y=(h.flags&32)!==0,h.flags&=-33,c===null){if(Hr){if(A?Tn(h):Bn(),(c=Ha)?(c=gA(c,fn),c=c!==null&&c.data!=="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:su!==null?{id:bl,overflow:wl}:null,retryLane:536870912,hydrationErrors:null},p=em(c),p.return=h,h.child=p,Ss=h,Ha=null)):c=null,c===null)throw iu(h);return $w(c)?h.lanes=32:h.lanes=536870912,null}var de=w.children;return w=w.fallback,A?(Bn(),A=h.mode,de=Hv({mode:"hidden",children:de},A),w=nu(w,A,p,null),de.return=h,w.return=h,de.sibling=w,h.child=de,w=h.child,w.memoizedState=iw(p),w.childLanes=lw(c,Y,p),h.memoizedState=sw,fx(null,w)):(Tn(h),ow(h,de))}var Ae=c.memoizedState;if(Ae!==null&&(de=Ae.dehydrated,de!==null)){if(O)h.flags&256?(Tn(h),h.flags&=-257,h=cw(c,h,p)):h.memoizedState!==null?(Bn(),h.child=c.child,h.flags|=128,h=null):(Bn(),de=w.fallback,A=h.mode,w=Hv({mode:"visible",children:w.children},A),de=nu(de,A,p,null),de.flags|=2,w.return=h,de.return=h,w.sibling=de,h.child=w,Va(h,c.child,null,p),w=h.child,w.memoizedState=iw(p),w.childLanes=lw(c,Y,p),h.memoizedState=sw,h=fx(null,w));else if(Tn(h),$w(de)){if(Y=de.nextSibling&&de.nextSibling.dataset,Y)var Ge=Y.dgst;Y=Ge,w=Error(a(419)),w.stack="",w.digest=Y,uf({value:w,source:null,stack:null}),h=cw(c,h,p)}else if(us||cu(c,h,p,!1),Y=(p&c.childLanes)!==0,us||Y){if(Y=Wa,Y!==null&&(w=Js(Y,p),w!==0&&w!==Ae.retryLane))throw Ae.retryLane=w,yc(c,w),Cl(Y,c,w),aw;qw(de)||Jv(),h=cw(c,h,p)}else qw(de)?(h.flags|=192,h.child=c.child,h=null):(c=Ae.treeContext,Ha=Fo(de.nextSibling),Ss=h,Hr=!0,ni=null,fn=!1,c!==null&&Ov(h,c),h=ow(h,w.children),h.flags|=4096);return h}return A?(Bn(),de=w.fallback,A=h.mode,Ae=c.child,Ge=Ae.sibling,w=xl(Ae,{mode:"hidden",children:w.children}),w.subtreeFlags=Ae.subtreeFlags&65011712,Ge!==null?de=xl(Ge,de):(de=nu(de,A,p,null),de.flags|=2),de.return=h,w.return=h,w.sibling=de,h.child=w,fx(null,w),w=h.child,de=c.child.memoizedState,de===null?de=iw(p):(A=de.cachePool,A!==null?(Ae=En._currentValue,A=A.parent!==Ae?{parent:Ae,pool:Ae}:A):A=je(),de={baseLanes:de.baseLanes|p,cachePool:A}),w.memoizedState=de,w.childLanes=lw(c,Y,p),h.memoizedState=sw,fx(c.child,w)):(Tn(h),p=c.child,c=p.sibling,p=xl(p,{mode:"visible",children:w.children}),p.return=h,p.sibling=null,c!==null&&(Y=h.deletions,Y===null?(h.deletions=[c],h.flags|=16):Y.push(c)),h.child=p,h.memoizedState=null,p)}function ow(c,h){return h=Hv({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Hv(c,h){return c=qs(22,c,null,h),c.lanes=0,c}function cw(c,h,p){return Va(h,c.child,null,p),c=ow(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function uk(c,h,p){c.lanes|=h;var w=c.alternate;w!==null&&(w.lanes|=h),df(c.return,h,p)}function uw(c,h,p,w,A,O){var Y=c.memoizedState;Y===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:A,treeForkCount:O}:(Y.isBackwards=h,Y.rendering=null,Y.renderingStartTime=0,Y.last=w,Y.tail=p,Y.tailMode=A,Y.treeForkCount=O)}function dk(c,h,p){var w=h.pendingProps,A=w.revealOrder,O=w.tail;w=w.children;var Y=Zr.current,de=(Y&2)!==0;if(de?(Y=Y&1|2,h.flags|=128):Y&=1,I(Zr,Y),ii(c,h,w,p),w=Hr?D0:0,!de&&c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&uk(c,p,h);else if(c.tag===19)uk(c,p,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(A){case"forwards":for(p=h.child,A=null;p!==null;)c=p.alternate,c!==null&&Hs(c)===null&&(A=p),p=p.sibling;p=A,p===null?(A=h.child,h.child=null):(A=p.sibling,p.sibling=null),uw(h,!1,A,p,O,w);break;case"backwards":case"unstable_legacy-backwards":for(p=null,A=h.child,h.child=null;A!==null;){if(c=A.alternate,c!==null&&Hs(c)===null){h.child=A;break}c=A.sibling,A.sibling=p,p=A,A=c}uw(h,!0,p,null,O,w);break;case"together":uw(h,!1,null,null,void 0,w);break;default:h.memoizedState=null}return h.child}function rd(c,h,p){if(c!==null&&(h.dependencies=c.dependencies),yf|=h.lanes,(p&h.childLanes)===0)if(c!==null){if(cu(c,h,p,!1),(p&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(a(153));if(h.child!==null){for(c=h.child,p=xl(c,c.pendingProps),h.child=p,p.return=h;c.sibling!==null;)c=c.sibling,p=p.sibling=xl(c,c.pendingProps),p.return=h;p.sibling=null}return h.child}function dw(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&sm(c)))}function AU(c,h,p){switch(h.tag){case 3:Q(h,h.stateNode.containerInfo),ou(h,En,c.memoizedState.cache),Qu();break;case 27:case 5:ye(h);break;case 4:Q(h,h.stateNode.containerInfo);break;case 10:ou(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,va(h),null;break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(Tn(h),h.flags|=128,null):(p&h.child.childLanes)!==0?ck(c,h,p):(Tn(h),c=rd(c,h,p),c!==null?c.sibling:null);Tn(h);break;case 19:var A=(c.flags&128)!==0;if(w=(p&h.childLanes)!==0,w||(cu(c,h,p,!1),w=(p&h.childLanes)!==0),A){if(w)return dk(c,h,p);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),I(Zr,Zr.current),w)break;return null;case 22:return h.lanes=0,ak(c,h,p,h.pendingProps);case 24:ou(h,En,c.memoizedState.cache)}return rd(c,h,p)}function fk(c,h,p){if(c!==null)if(c.memoizedProps!==h.pendingProps)us=!0;else{if(!dw(c,p)&&(h.flags&128)===0)return us=!1,AU(c,h,p);us=(c.flags&131072)!==0}else us=!1,Hr&&(h.flags&1048576)!==0&&Dv(h,D0,h.index);switch(h.lanes=0,h.tag){case 16:e:{var w=h.pendingProps;if(c=Ue(h.elementType),h.type=c,typeof c=="function")Jh(c)?(w=L0(c,w),h.tag=1,h=lk(null,h,c,w,p)):(h.tag=0,h=nw(null,h,c,w,p));else{if(c!=null){var A=c.$$typeof;if(A===C){h.tag=11,h=ek(null,h,c,w,p);break e}else if(A===D){h.tag=14,h=tk(null,h,c,w,p);break e}}throw h=G(c)||c,Error(a(306,h,""))}}return h;case 0:return nw(c,h,h.type,h.pendingProps,p);case 1:return w=h.type,A=L0(w,h.pendingProps),lk(c,h,w,A,p);case 3:e:{if(Q(h,h.stateNode.containerInfo),c===null)throw Error(a(387));w=h.pendingProps;var O=h.memoizedState;A=O.element,en(c,h),Ln(h,w,null,p);var Y=h.memoizedState;if(w=Y.cache,ou(h,En,w),w!==O.cache&&Zu(h,[En],p,!0),Ra(),w=Y.element,O.isDehydrated)if(O={element:w,isDehydrated:!1,cache:Y.cache},h.updateQueue.baseState=O,h.memoizedState=O,h.flags&256){h=ok(c,h,w,p);break e}else if(w!==A){A=gl(Error(a(424)),h),uf(A),h=ok(c,h,w,p);break e}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Ha=Fo(c.firstChild),Ss=h,Hr=!0,ni=null,fn=!0,p=_r(h,null,w,p),h.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Qu(),w===A){h=rd(c,h,p);break e}ii(c,h,w,p)}h=h.child}return h;case 26:return $v(c,h),c===null?(p=NA(h.type,null,h.pendingProps,null))?h.memoizedState=p:Hr||(p=h.type,c=h.pendingProps,w=i1(te.current).createElement(p),w[pe]=h,w[be]=c,li(w,p,c),zt(w),h.stateNode=w):h.memoizedState=NA(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return ye(h),c===null&&Hr&&(w=h.stateNode=bA(h.type,h.pendingProps,te.current),Ss=h,fn=!0,A=Ha,_f(h.type)?(Hw=A,Ha=Fo(w.firstChild)):Ha=A),ii(c,h,h.pendingProps.children,p),$v(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&Hr&&((A=w=Ha)&&(w=aq(w,h.type,h.pendingProps,fn),w!==null?(h.stateNode=w,Ss=h,Ha=Fo(w.firstChild),fn=!1,A=!0):A=!1),A||iu(h)),ye(h),A=h.type,O=h.pendingProps,Y=c!==null?c.memoizedProps:null,w=O.children,Bw(A,O)?w=null:Y!==null&&Bw(A,Y)&&(h.flags|=32),h.memoizedState!==null&&(A=ax(c,h,W2,null,null,p),Ax._currentValue=A),$v(c,h),ii(c,h,w,p),h.child;case 6:return c===null&&Hr&&((c=p=Ha)&&(p=nq(p,h.pendingProps,fn),p!==null?(h.stateNode=p,Ss=h,Ha=null,c=!0):c=!1),c||iu(h)),null;case 13:return ck(c,h,p);case 4:return Q(h,h.stateNode.containerInfo),w=h.pendingProps,c===null?h.child=Va(h,null,w,p):ii(c,h,w,p),h.child;case 11:return ek(c,h,h.type,h.pendingProps,p);case 7:return ii(c,h,h.pendingProps,p),h.child;case 8:return ii(c,h,h.pendingProps.children,p),h.child;case 12:return ii(c,h,h.pendingProps.children,p),h.child;case 10:return w=h.pendingProps,ou(h,h.type,w.value),ii(c,h,w.children,p),h.child;case 9:return A=h.type._context,w=h.pendingProps.children,uu(h),A=As(A),w=w(A),h.flags|=1,ii(c,h,w,p),h.child;case 14:return tk(c,h,h.type,h.pendingProps,p);case 15:return rk(c,h,h.type,h.pendingProps,p);case 19:return dk(c,h,p);case 31:return kU(c,h,p);case 22:return ak(c,h,p,h.pendingProps);case 24:return uu(h),w=As(En),c===null?(A=fe(),A===null&&(A=Wa,O=ff(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=p),A=O),h.memoizedState={parent:w,cache:A},Et(h),ou(h,En,A)):((c.lanes&p)!==0&&(en(c,h),Ln(h,null,null,p),Ra()),A=c.memoizedState,O=h.memoizedState,A.parent!==w?(A={parent:w,cache:w},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),ou(h,En,w)):(w=O.cache,ou(h,En,w),w!==A.cache&&Zu(h,[En],p,!0))),ii(c,h,h.pendingProps.children,p),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function ad(c){c.flags|=4}function fw(c,h,p,w,A){if((h=(c.mode&32)!==0)&&(h=!1),h){if(c.flags|=16777216,(A&335544128)===A)if(c.stateNode.complete)c.flags|=8192;else if(Bk())c.flags|=8192;else throw rt=Me,Ve}else c.flags&=-16777217}function hk(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!CA(h))if(Bk())c.flags|=8192;else throw rt=Me,Ve}function Vv(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?ul():536870912,c.lanes|=h,bm|=h)}function hx(c,h){if(!Hr)switch(c.tailMode){case"hidden":h=c.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c.tail=null:p.sibling=null;break;case"collapsed":p=c.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function an(c){var h=c.alternate!==null&&c.alternate.child===c.child,p=0,w=0;if(h)for(var A=c.child;A!==null;)p|=A.lanes|A.childLanes,w|=A.subtreeFlags&65011712,w|=A.flags&65011712,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)p|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=w,c.childLanes=p,h}function CU(c,h,p){var w=h.pendingProps;switch(am(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(h),null;case 1:return an(h),null;case 3:return p=h.stateNode,w=null,c!==null&&(w=c.memoizedState.cache),h.memoizedState.cache!==w&&(h.flags|=2048),jl(En),ne(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(c===null||c.child===null)&&(ks(h)?ad(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,tx())),an(h),null;case 26:var A=h.type,O=h.memoizedState;return c===null?(ad(h),O!==null?(an(h),hk(h,O)):(an(h),fw(h,A,null,w,p))):O?O!==c.memoizedState?(ad(h),an(h),hk(h,O)):(an(h),h.flags&=-16777217):(c=c.memoizedProps,c!==w&&ad(h),an(h),fw(h,A,c,w,p)),null;case 27:if(De(h),p=te.current,A=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==w&&ad(h);else{if(!w){if(h.stateNode===null)throw Error(a(166));return an(h),null}c=q.current,ks(h)?ex(h):(c=bA(A,w,p),h.stateNode=c,ad(h))}return an(h),null;case 5:if(De(h),A=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==w&&ad(h);else{if(!w){if(h.stateNode===null)throw Error(a(166));return an(h),null}if(O=q.current,ks(h))ex(h);else{var Y=i1(te.current);switch(O){case 1:O=Y.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:O=Y.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":O=Y.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":O=Y.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":O=Y.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof w.is=="string"?Y.createElement("select",{is:w.is}):Y.createElement("select"),w.multiple?O.multiple=!0:w.size&&(O.size=w.size);break;default:O=typeof w.is=="string"?Y.createElement(A,{is:w.is}):Y.createElement(A)}}O[pe]=h,O[be]=w;e:for(Y=h.child;Y!==null;){if(Y.tag===5||Y.tag===6)O.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===h)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===h)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}h.stateNode=O;e:switch(li(O,A,w),A){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&ad(h)}}return an(h),fw(h,h.type,c===null?null:c.memoizedProps,h.pendingProps,p),null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==w&&ad(h);else{if(typeof w!="string"&&h.stateNode===null)throw Error(a(166));if(c=te.current,ks(h)){if(c=h.stateNode,p=h.memoizedProps,w=null,A=Ss,A!==null)switch(A.tag){case 27:case 5:w=A.memoizedProps}c[pe]=h,c=!!(c.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||cA(c.nodeValue,p)),c||iu(h,!0)}else c=i1(c).createTextNode(w),c[pe]=h,h.stateNode=c}return an(h),null;case 31:if(p=h.memoizedState,c===null||c.memoizedState!==null){if(w=ks(h),p!==null){if(c===null){if(!w)throw Error(a(318));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(557));c[pe]=h}else Qu(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;an(h),c=!1}else p=tx(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=p),c=!0;if(!c)return h.flags&256?(Sa(h),h):(Sa(h),null);if((h.flags&128)!==0)throw Error(a(558))}return an(h),null;case 13:if(w=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(A=ks(h),w!==null&&w.dehydrated!==null){if(c===null){if(!A)throw Error(a(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));A[pe]=h}else Qu(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;an(h),A=!1}else A=tx(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(Sa(h),h):(Sa(h),null)}return Sa(h),(h.flags&128)!==0?(h.lanes=p,h):(p=w!==null,c=c!==null&&c.memoizedState!==null,p&&(w=h.child,A=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(A=w.alternate.memoizedState.cachePool.pool),O=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(O=w.memoizedState.cachePool.pool),O!==A&&(w.flags|=2048)),p!==c&&p&&(h.child.flags|=8192),Vv(h,h.updateQueue),an(h),null);case 4:return ne(),c===null&&Pw(h.stateNode.containerInfo),an(h),null;case 10:return jl(h.type),an(h),null;case 19:if(R(Zr),w=h.memoizedState,w===null)return an(h),null;if(A=(h.flags&128)!==0,O=w.rendering,O===null)if(A)hx(w,!1);else{if(Un!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(O=Hs(c),O!==null){for(h.flags|=128,hx(w,!1),c=O.updateQueue,h.updateQueue=c,Vv(h,c),h.subtreeFlags=0,c=p,p=h.child;p!==null;)E0(p,c),p=p.sibling;return I(Zr,Zr.current&1|2),Hr&&Gi(h,w.treeForkCount),h.child}c=c.sibling}w.tail!==null&&xt()>Xv&&(h.flags|=128,A=!0,hx(w,!1),h.lanes=4194304)}else{if(!A)if(c=Hs(O),c!==null){if(h.flags|=128,A=!0,c=c.updateQueue,h.updateQueue=c,Vv(h,c),hx(w,!0),w.tail===null&&w.tailMode==="hidden"&&!O.alternate&&!Hr)return an(h),null}else 2*xt()-w.renderingStartTime>Xv&&p!==536870912&&(h.flags|=128,A=!0,hx(w,!1),h.lanes=4194304);w.isBackwards?(O.sibling=h.child,h.child=O):(c=w.last,c!==null?c.sibling=O:h.child=O,w.last=O)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=xt(),c.sibling=null,p=Zr.current,I(Zr,A?p&1|2:p&1),Hr&&Gi(h,w.treeForkCount),c):(an(h),null);case 22:case 23:return Sa(h),Xn(),w=h.memoizedState!==null,c!==null?c.memoizedState!==null!==w&&(h.flags|=8192):w&&(h.flags|=8192),w?(p&536870912)!==0&&(h.flags&128)===0&&(an(h),h.subtreeFlags&6&&(h.flags|=8192)):an(h),p=h.updateQueue,p!==null&&Vv(h,p.retryQueue),p=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==p&&(h.flags|=2048),c!==null&&R(ue),null;case 24:return p=null,c!==null&&(p=c.memoizedState.cache),h.memoizedState.cache!==p&&(h.flags|=2048),jl(En),an(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function EU(c,h){switch(am(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return jl(En),ne(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return De(h),null;case 31:if(h.memoizedState!==null){if(Sa(h),h.alternate===null)throw Error(a(340));Qu()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 13:if(Sa(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Qu()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return R(Zr),null;case 4:return ne(),null;case 10:return jl(h.type),null;case 22:case 23:return Sa(h),Xn(),c!==null&&R(ue),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return jl(En),null;case 25:return null;default:return null}}function mk(c,h){switch(am(h),h.tag){case 3:jl(En),ne();break;case 26:case 27:case 5:De(h);break;case 4:ne();break;case 31:h.memoizedState!==null&&Sa(h);break;case 13:Sa(h);break;case 19:R(Zr);break;case 10:jl(h.type);break;case 22:case 23:Sa(h),Xn(),c!==null&&R(ue);break;case 24:jl(En)}}function mx(c,h){try{var p=h.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var A=w.next;p=A;do{if((p.tag&c)===c){w=void 0;var O=p.create,Y=p.inst;w=O(),Y.destroy=w}p=p.next}while(p!==A)}}catch(de){Aa(h,h.return,de)}}function gf(c,h,p){try{var w=h.updateQueue,A=w!==null?w.lastEffect:null;if(A!==null){var O=A.next;w=O;do{if((w.tag&c)===c){var Y=w.inst,de=Y.destroy;if(de!==void 0){Y.destroy=void 0,A=h;var Ae=p,Ge=de;try{Ge()}catch(st){Aa(A,Ae,st)}}}w=w.next}while(w!==O)}}catch(st){Aa(h,h.return,st)}}function pk(c){var h=c.updateQueue;if(h!==null){var p=c.stateNode;try{Rn(h,p)}catch(w){Aa(c,c.return,w)}}}function xk(c,h,p){p.props=L0(c.type,c.memoizedProps),p.state=c.memoizedState;try{p.componentWillUnmount()}catch(w){Aa(c,h,w)}}function px(c,h){try{var p=c.ref;if(p!==null){switch(c.tag){case 26:case 27:case 5:var w=c.stateNode;break;case 30:w=c.stateNode;break;default:w=c.stateNode}typeof p=="function"?c.refCleanup=p(w):p.current=w}}catch(A){Aa(c,h,A)}}function pu(c,h){var p=c.ref,w=c.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(A){Aa(c,h,A)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(A){Aa(c,h,A)}else p.current=null}function gk(c){var h=c.type,p=c.memoizedProps,w=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(A){Aa(c,c.return,A)}}function hw(c,h,p){try{var w=c.stateNode;QU(w,c.type,p,h),w[be]=h}catch(A){Aa(c,c.return,A)}}function vk(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&_f(c.type)||c.tag===4}function mw(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||vk(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&_f(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function pw(c,h,p){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(c,h):(h=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,h.appendChild(c),p=p._reactRootContainer,p!=null||h.onclick!==null||(h.onclick=$l));else if(w!==4&&(w===27&&_f(c.type)&&(p=c.stateNode,h=null),c=c.child,c!==null))for(pw(c,h,p),c=c.sibling;c!==null;)pw(c,h,p),c=c.sibling}function Wv(c,h,p){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?p.insertBefore(c,h):p.appendChild(c);else if(w!==4&&(w===27&&_f(c.type)&&(p=c.stateNode),c=c.child,c!==null))for(Wv(c,h,p),c=c.sibling;c!==null;)Wv(c,h,p),c=c.sibling}function yk(c){var h=c.stateNode,p=c.memoizedProps;try{for(var w=c.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);li(h,w,p),h[pe]=c,h[be]=p}catch(O){Aa(c,c.return,O)}}var nd=!1,ds=!1,xw=!1,bk=typeof WeakSet=="function"?WeakSet:Set,Vs=null;function TU(c,h){if(c=c.containerInfo,Rw=h1,c=gc(c),Co(c)){if("selectionStart"in c)var p={start:c.selectionStart,end:c.selectionEnd};else e:{p=(p=c.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var A=w.anchorOffset,O=w.focusNode;w=w.focusOffset;try{p.nodeType,O.nodeType}catch{p=null;break e}var Y=0,de=-1,Ae=-1,Ge=0,st=0,dt=c,Qe=null;t:for(;;){for(var Ze;dt!==p||A!==0&&dt.nodeType!==3||(de=Y+A),dt!==O||w!==0&&dt.nodeType!==3||(Ae=Y+w),dt.nodeType===3&&(Y+=dt.nodeValue.length),(Ze=dt.firstChild)!==null;)Qe=dt,dt=Ze;for(;;){if(dt===c)break t;if(Qe===p&&++Ge===A&&(de=Y),Qe===O&&++st===w&&(Ae=Y),(Ze=dt.nextSibling)!==null)break;dt=Qe,Qe=dt.parentNode}dt=Ze}p=de===-1||Ae===-1?null:{start:de,end:Ae}}else p=null}p=p||{start:0,end:0}}else p=null;for(Iw={focusedElem:c,selectionRange:p},h1=!1,Vs=h;Vs!==null;)if(h=Vs,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Vs=c;else for(;Vs!==null;){switch(h=Vs,O=h.alternate,c=h.flags,h.tag){case 0:if((c&4)!==0&&(c=h.updateQueue,c=c!==null?c.events:null,c!==null))for(p=0;p<c.length;p++)A=c[p],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&O!==null){c=void 0,p=h,A=O.memoizedProps,O=O.memoizedState,w=p.stateNode;try{var Vt=L0(p.type,A);c=w.getSnapshotBeforeUpdate(Vt,O),w.__reactInternalSnapshotBeforeUpdate=c}catch(cr){Aa(p,p.return,cr)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,p=c.nodeType,p===9)Uw(c);else if(p===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Uw(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(a(163))}if(c=h.sibling,c!==null){c.return=h.return,Vs=c;break}Vs=h.return}}function wk(c,h,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:id(c,p),w&4&&mx(5,p);break;case 1:if(id(c,p),w&4)if(c=p.stateNode,h===null)try{c.componentDidMount()}catch(Y){Aa(p,p.return,Y)}else{var A=L0(p.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(A,h,c.__reactInternalSnapshotBeforeUpdate)}catch(Y){Aa(p,p.return,Y)}}w&64&&pk(p),w&512&&px(p,p.return);break;case 3:if(id(c,p),w&64&&(c=p.updateQueue,c!==null)){if(h=null,p.child!==null)switch(p.child.tag){case 27:case 5:h=p.child.stateNode;break;case 1:h=p.child.stateNode}try{Rn(c,h)}catch(Y){Aa(p,p.return,Y)}}break;case 27:h===null&&w&4&&yk(p);case 26:case 5:id(c,p),h===null&&w&4&&gk(p),w&512&&px(p,p.return);break;case 12:id(c,p);break;case 31:id(c,p),w&4&&_k(c,p);break;case 13:id(c,p),w&4&&Sk(c,p),w&64&&(c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(p=BU.bind(null,p),sq(c,p))));break;case 22:if(w=p.memoizedState!==null||nd,!w){h=h!==null&&h.memoizedState!==null||ds,A=nd;var O=ds;nd=w,(ds=h)&&!O?ld(c,p,(p.subtreeFlags&8772)!==0):id(c,p),nd=A,ds=O}break;case 30:break;default:id(c,p)}}function jk(c){var h=c.alternate;h!==null&&(c.alternate=null,jk(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&vt(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var pn=null,_l=!1;function sd(c,h,p){for(p=p.child;p!==null;)Nk(c,h,p),p=p.sibling}function Nk(c,h,p){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Lt,p)}catch{}switch(p.tag){case 26:ds||pu(p,h),sd(c,h,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:ds||pu(p,h);var w=pn,A=_l;_f(p.type)&&(pn=p.stateNode,_l=!1),sd(c,h,p),_x(p.stateNode),pn=w,_l=A;break;case 5:ds||pu(p,h);case 6:if(w=pn,A=_l,pn=null,sd(c,h,p),pn=w,_l=A,pn!==null)if(_l)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(p.stateNode)}catch(O){Aa(p,h,O)}else try{pn.removeChild(p.stateNode)}catch(O){Aa(p,h,O)}break;case 18:pn!==null&&(_l?(c=pn,pA(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,p.stateNode),Cm(c)):pA(pn,p.stateNode));break;case 4:w=pn,A=_l,pn=p.stateNode.containerInfo,_l=!0,sd(c,h,p),pn=w,_l=A;break;case 0:case 11:case 14:case 15:gf(2,p,h),ds||gf(4,p,h),sd(c,h,p);break;case 1:ds||(pu(p,h),w=p.stateNode,typeof w.componentWillUnmount=="function"&&xk(p,h,w)),sd(c,h,p);break;case 21:sd(c,h,p);break;case 22:ds=(w=ds)||p.memoizedState!==null,sd(c,h,p),ds=w;break;default:sd(c,h,p)}}function _k(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{Cm(c)}catch(p){Aa(h,h.return,p)}}}function Sk(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Cm(c)}catch(p){Aa(h,h.return,p)}}function DU(c){switch(c.tag){case 31:case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new bk),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new bk),h;default:throw Error(a(435,c.tag))}}function Kv(c,h){var p=DU(c);h.forEach(function(w){if(!p.has(w)){p.add(w);var A=zU.bind(null,c,w);w.then(A,A)}})}function Sl(c,h){var p=h.deletions;if(p!==null)for(var w=0;w<p.length;w++){var A=p[w],O=c,Y=h,de=Y;e:for(;de!==null;){switch(de.tag){case 27:if(_f(de.type)){pn=de.stateNode,_l=!1;break e}break;case 5:pn=de.stateNode,_l=!1;break e;case 3:case 4:pn=de.stateNode.containerInfo,_l=!0;break e}de=de.return}if(pn===null)throw Error(a(160));Nk(O,Y,A),pn=null,_l=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)kk(h,c),h=h.sibling}var Sc=null;function kk(c,h){var p=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Sl(h,c),kl(c),w&4&&(gf(3,c,c.return),mx(3,c),gf(5,c,c.return));break;case 1:Sl(h,c),kl(c),w&512&&(ds||p===null||pu(p,p.return)),w&64&&nd&&(c=c.updateQueue,c!==null&&(w=c.callbacks,w!==null&&(p=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var A=Sc;if(Sl(h,c),kl(c),w&512&&(ds||p===null||pu(p,p.return)),w&4){var O=p!==null?p.memoizedState:null;if(w=c.memoizedState,p===null)if(w===null)if(c.stateNode===null){e:{w=c.type,p=c.memoizedProps,A=A.ownerDocument||A;t:switch(w){case"title":O=A.getElementsByTagName("title")[0],(!O||O[We]||O[pe]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(w),A.head.insertBefore(O,A.querySelector("head > title"))),li(O,w,p),O[pe]=c,zt(O),w=O;break e;case"link":var Y=kA("link","href",A).get(w+(p.href||""));if(Y){for(var de=0;de<Y.length;de++)if(O=Y[de],O.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&O.getAttribute("rel")===(p.rel==null?null:p.rel)&&O.getAttribute("title")===(p.title==null?null:p.title)&&O.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){Y.splice(de,1);break t}}O=A.createElement(w),li(O,w,p),A.head.appendChild(O);break;case"meta":if(Y=kA("meta","content",A).get(w+(p.content||""))){for(de=0;de<Y.length;de++)if(O=Y[de],O.getAttribute("content")===(p.content==null?null:""+p.content)&&O.getAttribute("name")===(p.name==null?null:p.name)&&O.getAttribute("property")===(p.property==null?null:p.property)&&O.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&O.getAttribute("charset")===(p.charSet==null?null:p.charSet)){Y.splice(de,1);break t}}O=A.createElement(w),li(O,w,p),A.head.appendChild(O);break;default:throw Error(a(468,w))}O[pe]=c,zt(O),w=O}c.stateNode=w}else AA(A,c.type,c.stateNode);else c.stateNode=SA(A,w,c.memoizedProps);else O!==w?(O===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):O.count--,w===null?AA(A,c.type,c.stateNode):SA(A,w,c.memoizedProps)):w===null&&c.stateNode!==null&&hw(c,c.memoizedProps,p.memoizedProps)}break;case 27:Sl(h,c),kl(c),w&512&&(ds||p===null||pu(p,p.return)),p!==null&&w&4&&hw(c,c.memoizedProps,p.memoizedProps);break;case 5:if(Sl(h,c),kl(c),w&512&&(ds||p===null||pu(p,p.return)),c.flags&32){A=c.stateNode;try{Ui(A,"")}catch(Vt){Aa(c,c.return,Vt)}}w&4&&c.stateNode!=null&&(A=c.memoizedProps,hw(c,A,p!==null?p.memoizedProps:A)),w&1024&&(xw=!0);break;case 6:if(Sl(h,c),kl(c),w&4){if(c.stateNode===null)throw Error(a(162));w=c.memoizedProps,p=c.stateNode;try{p.nodeValue=w}catch(Vt){Aa(c,c.return,Vt)}}break;case 3:if(c1=null,A=Sc,Sc=l1(h.containerInfo),Sl(h,c),Sc=A,kl(c),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Cm(h.containerInfo)}catch(Vt){Aa(c,c.return,Vt)}xw&&(xw=!1,Ak(c));break;case 4:w=Sc,Sc=l1(c.stateNode.containerInfo),Sl(h,c),kl(c),Sc=w;break;case 12:Sl(h,c),kl(c);break;case 31:Sl(h,c),kl(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,Kv(c,w)));break;case 13:Sl(h,c),kl(c),c.child.flags&8192&&c.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Yv=xt()),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,Kv(c,w)));break;case 22:A=c.memoizedState!==null;var Ae=p!==null&&p.memoizedState!==null,Ge=nd,st=ds;if(nd=Ge||A,ds=st||Ae,Sl(h,c),ds=st,nd=Ge,kl(c),w&8192)e:for(h=c.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(p===null||Ae||nd||ds||R0(c)),p=null,h=c;;){if(h.tag===5||h.tag===26){if(p===null){Ae=p=h;try{if(O=Ae.stateNode,A)Y=O.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{de=Ae.stateNode;var dt=Ae.memoizedProps.style,Qe=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;de.style.display=Qe==null||typeof Qe=="boolean"?"":(""+Qe).trim()}}catch(Vt){Aa(Ae,Ae.return,Vt)}}}else if(h.tag===6){if(p===null){Ae=h;try{Ae.stateNode.nodeValue=A?"":Ae.memoizedProps}catch(Vt){Aa(Ae,Ae.return,Vt)}}}else if(h.tag===18){if(p===null){Ae=h;try{var Ze=Ae.stateNode;A?xA(Ze,!0):xA(Ae.stateNode,!1)}catch(Vt){Aa(Ae,Ae.return,Vt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}w&4&&(w=c.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,Kv(c,p))));break;case 19:Sl(h,c),kl(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,Kv(c,w)));break;case 30:break;case 21:break;default:Sl(h,c),kl(c)}}function kl(c){var h=c.flags;if(h&2){try{for(var p,w=c.return;w!==null;){if(vk(w)){p=w;break}w=w.return}if(p==null)throw Error(a(160));switch(p.tag){case 27:var A=p.stateNode,O=mw(c);Wv(c,O,A);break;case 5:var Y=p.stateNode;p.flags&32&&(Ui(Y,""),p.flags&=-33);var de=mw(c);Wv(c,de,Y);break;case 3:case 4:var Ae=p.stateNode.containerInfo,Ge=mw(c);pw(c,Ge,Ae);break;default:throw Error(a(161))}}catch(st){Aa(c,c.return,st)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function Ak(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;Ak(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function id(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)wk(c,h.alternate,h),h=h.sibling}function R0(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:gf(4,h,h.return),R0(h);break;case 1:pu(h,h.return);var p=h.stateNode;typeof p.componentWillUnmount=="function"&&xk(h,h.return,p),R0(h);break;case 27:_x(h.stateNode);case 26:case 5:pu(h,h.return),R0(h);break;case 22:h.memoizedState===null&&R0(h);break;case 30:R0(h);break;default:R0(h)}c=c.sibling}}function ld(c,h,p){for(p=p&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var w=h.alternate,A=c,O=h,Y=O.flags;switch(O.tag){case 0:case 11:case 15:ld(A,O,p),mx(4,O);break;case 1:if(ld(A,O,p),w=O,A=w.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ge){Aa(w,w.return,Ge)}if(w=O,A=w.updateQueue,A!==null){var de=w.stateNode;try{var Ae=A.shared.hiddenCallbacks;if(Ae!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Ae.length;A++)$s(Ae[A],de)}catch(Ge){Aa(w,w.return,Ge)}}p&&Y&64&&pk(O),px(O,O.return);break;case 27:yk(O);case 26:case 5:ld(A,O,p),p&&w===null&&Y&4&&gk(O),px(O,O.return);break;case 12:ld(A,O,p);break;case 31:ld(A,O,p),p&&Y&4&&_k(A,O);break;case 13:ld(A,O,p),p&&Y&4&&Sk(A,O);break;case 22:O.memoizedState===null&&ld(A,O,p),px(O,O.return);break;case 30:break;default:ld(A,O,p)}h=h.sibling}}function gw(c,h){var p=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==p&&(c!=null&&c.refCount++,p!=null&&O0(p))}function vw(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&O0(c))}function kc(c,h,p,w){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Ck(c,h,p,w),h=h.sibling}function Ck(c,h,p,w){var A=h.flags;switch(h.tag){case 0:case 11:case 15:kc(c,h,p,w),A&2048&&mx(9,h);break;case 1:kc(c,h,p,w);break;case 3:kc(c,h,p,w),A&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&O0(c)));break;case 12:if(A&2048){kc(c,h,p,w),c=h.stateNode;try{var O=h.memoizedProps,Y=O.id,de=O.onPostCommit;typeof de=="function"&&de(Y,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Ae){Aa(h,h.return,Ae)}}else kc(c,h,p,w);break;case 31:kc(c,h,p,w);break;case 13:kc(c,h,p,w);break;case 23:break;case 22:O=h.stateNode,Y=h.alternate,h.memoizedState!==null?O._visibility&2?kc(c,h,p,w):xx(c,h):O._visibility&2?kc(c,h,p,w):(O._visibility|=2,gm(c,h,p,w,(h.subtreeFlags&10256)!==0||!1)),A&2048&&gw(Y,h);break;case 24:kc(c,h,p,w),A&2048&&vw(h.alternate,h);break;default:kc(c,h,p,w)}}function gm(c,h,p,w,A){for(A=A&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var O=c,Y=h,de=p,Ae=w,Ge=Y.flags;switch(Y.tag){case 0:case 11:case 15:gm(O,Y,de,Ae,A),mx(8,Y);break;case 23:break;case 22:var st=Y.stateNode;Y.memoizedState!==null?st._visibility&2?gm(O,Y,de,Ae,A):xx(O,Y):(st._visibility|=2,gm(O,Y,de,Ae,A)),A&&Ge&2048&&gw(Y.alternate,Y);break;case 24:gm(O,Y,de,Ae,A),A&&Ge&2048&&vw(Y.alternate,Y);break;default:gm(O,Y,de,Ae,A)}h=h.sibling}}function xx(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var p=c,w=h,A=w.flags;switch(w.tag){case 22:xx(p,w),A&2048&&gw(w.alternate,w);break;case 24:xx(p,w),A&2048&&vw(w.alternate,w);break;default:xx(p,w)}h=h.sibling}}var gx=8192;function vm(c,h,p){if(c.subtreeFlags&gx)for(c=c.child;c!==null;)Ek(c,h,p),c=c.sibling}function Ek(c,h,p){switch(c.tag){case 26:vm(c,h,p),c.flags&gx&&c.memoizedState!==null&&gq(p,Sc,c.memoizedState,c.memoizedProps);break;case 5:vm(c,h,p);break;case 3:case 4:var w=Sc;Sc=l1(c.stateNode.containerInfo),vm(c,h,p),Sc=w;break;case 22:c.memoizedState===null&&(w=c.alternate,w!==null&&w.memoizedState!==null?(w=gx,gx=16777216,vm(c,h,p),gx=w):vm(c,h,p));break;default:vm(c,h,p)}}function Tk(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function vx(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var p=0;p<h.length;p++){var w=h[p];Vs=w,Ok(w,c)}Tk(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Dk(c),c=c.sibling}function Dk(c){switch(c.tag){case 0:case 11:case 15:vx(c),c.flags&2048&&gf(9,c,c.return);break;case 3:vx(c);break;case 12:vx(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,Gv(c)):vx(c);break;default:vx(c)}}function Gv(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var p=0;p<h.length;p++){var w=h[p];Vs=w,Ok(w,c)}Tk(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:gf(8,h,h.return),Gv(h);break;case 22:p=h.stateNode,p._visibility&2&&(p._visibility&=-3,Gv(h));break;default:Gv(h)}c=c.sibling}}function Ok(c,h){for(;Vs!==null;){var p=Vs;switch(p.tag){case 0:case 11:case 15:gf(8,p,h);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:O0(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,Vs=w;else e:for(p=c;Vs!==null;){w=Vs;var A=w.sibling,O=w.return;if(jk(w),w===p){Vs=null;break e}if(A!==null){A.return=O,Vs=A;break e}Vs=O}}}var OU={getCacheForType:function(c){var h=As(En),p=h.data.get(c);return p===void 0&&(p=c(),h.data.set(c,p)),p},cacheSignal:function(){return As(En).controller.signal}},FU=typeof WeakMap=="function"?WeakMap:Map,ya=0,Wa=null,Vr=null,Gr=0,ka=0,Yl=null,vf=!1,ym=!1,yw=!1,od=0,Un=0,yf=0,I0=0,bw=0,Xl=0,bm=0,yx=null,Al=null,ww=!1,Yv=0,Fk=0,Xv=1/0,Qv=null,bf=null,Es=0,wf=null,wm=null,cd=0,jw=0,Nw=null,Pk=null,bx=0,_w=null;function Ql(){return(ya&2)!==0&&Gr!==0?Gr&-Gr:Z.T!==null?Tw():le()}function Mk(){if(Xl===0)if((Gr&536870912)===0||Hr){var c=Xa;Xa<<=1,(Xa&3932160)===0&&(Xa=262144),Xl=c}else Xl=536870912;return c=rn.current,c!==null&&(c.flags|=32),Xl}function Cl(c,h,p){(c===Wa&&(ka===2||ka===9)||c.cancelPendingCommit!==null)&&(jm(c,0),jf(c,Gr,Xl,!1)),Jt(c,p),((ya&2)===0||c!==Wa)&&(c===Wa&&((ya&2)===0&&(I0|=p),Un===4&&jf(c,Gr,Xl,!1)),xu(c))}function Lk(c,h,p){if((ya&6)!==0)throw Error(a(327));var w=!p&&(h&127)===0&&(h&c.expiredLanes)===0||Bi(c,h),A=w?LU(c,h):kw(c,h,!0),O=w;do{if(A===0){ym&&!w&&jf(c,h,0,!1);break}else{if(p=c.current.alternate,O&&!PU(p)){A=kw(c,h,!1),O=!1;continue}if(A===2){if(O=h,c.errorRecoveryDisabledLanes&O)var Y=0;else Y=c.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){h=Y;e:{var de=c;A=yx;var Ae=de.current.memoizedState.isDehydrated;if(Ae&&(jm(de,Y).flags|=256),Y=kw(de,Y,!1),Y!==2){if(yw&&!Ae){de.errorRecoveryDisabledLanes|=O,I0|=O,A=4;break e}O=Al,Al=A,O!==null&&(Al===null?Al=O:Al.push.apply(Al,O))}A=Y}if(O=!1,A!==2)continue}}if(A===1){jm(c,0),jf(c,h,0,!0);break}e:{switch(w=c,O=A,O){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:jf(w,h,Xl,!vf);break e;case 2:Al=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(A=Yv+300-xt(),10<A)){if(jf(w,h,Xl,!vf),$r(w,0,!0)!==0)break e;cd=h,w.timeoutHandle=hA(Rk.bind(null,w,p,Al,Qv,ww,h,Xl,I0,bm,vf,O,"Throttled",-0,0),A);break e}Rk(w,p,Al,Qv,ww,h,Xl,I0,bm,vf,O,null,-0,0)}}break}while(!0);xu(c)}function Rk(c,h,p,w,A,O,Y,de,Ae,Ge,st,dt,Qe,Ze){if(c.timeoutHandle=-1,dt=h.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$l},Ek(h,O,dt);var Vt=(O&62914560)===O?Yv-xt():(O&4194048)===O?Fk-xt():0;if(Vt=vq(dt,Vt),Vt!==null){cd=O,c.cancelPendingCommit=Vt(Vk.bind(null,c,h,O,p,w,A,Y,de,Ae,st,dt,null,Qe,Ze)),jf(c,O,Y,!Ge);return}}Vk(c,h,O,p,w,A,Y,de,Ae)}function PU(c){for(var h=c;;){var p=h.tag;if((p===0||p===11||p===15)&&h.flags&16384&&(p=h.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var A=p[w],O=A.getSnapshot;A=A.value;try{if(!Ns(O(),A))return!1}catch{return!1}}if(p=h.child,h.subtreeFlags&16384&&p!==null)p.return=h,h=p;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function jf(c,h,p,w){h&=~bw,h&=~I0,c.suspendedLanes|=h,c.pingedLanes&=~h,w&&(c.warmLanes|=h),w=c.expirationTimes;for(var A=h;0<A;){var O=31-wr(A),Y=1<<O;w[O]=-1,A&=~Y}p!==0&&dl(c,p,h)}function Zv(){return(ya&6)===0?(wx(0),!1):!0}function Sw(){if(Vr!==null){if(ka===0)var c=Vr.return;else c=Vr,To=lu=null,um(c),ft=null,Wt=0,c=Vr;for(;c!==null;)mk(c.alternate,c),c=c.return;Vr=null}}function jm(c,h){var p=c.timeoutHandle;p!==-1&&(c.timeoutHandle=-1,eq(p)),p=c.cancelPendingCommit,p!==null&&(c.cancelPendingCommit=null,p()),cd=0,Sw(),Wa=c,Vr=p=xl(c.current,null),Gr=h,ka=0,Yl=null,vf=!1,ym=Bi(c,h),yw=!1,bm=Xl=bw=I0=yf=Un=0,Al=yx=null,ww=!1,(h&8)!==0&&(h|=h&32);var w=c.entangledLanes;if(w!==0)for(c=c.entanglements,w&=h;0<w;){var A=31-wr(w),O=1<<A;h|=c[A],w&=~O}return od=h,k0(),p}function Ik(c,h){rr=null,Z.H=dx,h===Fe||h===we?(h=lt(),ka=3):h===Ve?(h=lt(),ka=4):ka=h===aw?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Yl=h,Vr===null&&(Un=1,Uv(c,gl(h,c.current)))}function Bk(){var c=rn.current;return c===null?!0:(Gr&4194048)===Gr?ra===null:(Gr&62914560)===Gr||(Gr&536870912)!==0?c===ra:!1}function zk(){var c=Z.H;return Z.H=dx,c===null?dx:c}function Uk(){var c=Z.A;return Z.A=OU,c}function Jv(){Un=4,vf||(Gr&4194048)!==Gr&&rn.current!==null||(ym=!0),(yf&134217727)===0&&(I0&134217727)===0||Wa===null||jf(Wa,Gr,Xl,!1)}function kw(c,h,p){var w=ya;ya|=2;var A=zk(),O=Uk();(Wa!==c||Gr!==h)&&(Qv=null,jm(c,h)),h=!1;var Y=Un;e:do try{if(ka!==0&&Vr!==null){var de=Vr,Ae=Yl;switch(ka){case 8:Sw(),Y=6;break e;case 3:case 2:case 9:case 6:rn.current===null&&(h=!0);var Ge=ka;if(ka=0,Yl=null,Nm(c,de,Ae,Ge),p&&ym){Y=0;break e}break;default:Ge=ka,ka=0,Yl=null,Nm(c,de,Ae,Ge)}}MU(),Y=Un;break}catch(st){Ik(c,st)}while(!0);return h&&c.shellSuspendCounter++,To=lu=null,ya=w,Z.H=A,Z.A=O,Vr===null&&(Wa=null,Gr=0,k0()),Y}function MU(){for(;Vr!==null;)qk(Vr)}function LU(c,h){var p=ya;ya|=2;var w=zk(),A=Uk();Wa!==c||Gr!==h?(Qv=null,Xv=xt()+500,jm(c,h)):ym=Bi(c,h);e:do try{if(ka!==0&&Vr!==null){h=Vr;var O=Yl;t:switch(ka){case 1:ka=0,Yl=null,Nm(c,h,O,1);break;case 2:case 9:if(Be(O)){ka=0,Yl=null,$k(h);break}h=function(){ka!==2&&ka!==9||Wa!==c||(ka=7),xu(c)},O.then(h,h);break e;case 3:ka=7;break e;case 4:ka=5;break e;case 7:Be(O)?(ka=0,Yl=null,$k(h)):(ka=0,Yl=null,Nm(c,h,O,7));break;case 5:var Y=null;switch(Vr.tag){case 26:Y=Vr.memoizedState;case 5:case 27:var de=Vr;if(Y?CA(Y):de.stateNode.complete){ka=0,Yl=null;var Ae=de.sibling;if(Ae!==null)Vr=Ae;else{var Ge=de.return;Ge!==null?(Vr=Ge,e1(Ge)):Vr=null}break t}}ka=0,Yl=null,Nm(c,h,O,5);break;case 6:ka=0,Yl=null,Nm(c,h,O,6);break;case 8:Sw(),Un=6;break e;default:throw Error(a(462))}}RU();break}catch(st){Ik(c,st)}while(!0);return To=lu=null,Z.H=w,Z.A=A,ya=p,Vr!==null?0:(Wa=null,Gr=0,k0(),Un)}function RU(){for(;Vr!==null&&!Te();)qk(Vr)}function qk(c){var h=fk(c.alternate,c,od);c.memoizedProps=c.pendingProps,h===null?e1(c):Vr=h}function $k(c){var h=c,p=h.alternate;switch(h.tag){case 15:case 0:h=ik(p,h,h.pendingProps,h.type,void 0,Gr);break;case 11:h=ik(p,h,h.pendingProps,h.type.render,h.ref,Gr);break;case 5:um(h);default:mk(p,h),h=Vr=E0(h,od),h=fk(p,h,od)}c.memoizedProps=c.pendingProps,h===null?e1(c):Vr=h}function Nm(c,h,p,w){To=lu=null,um(h),ft=null,Wt=0;var A=h.return;try{if(SU(c,A,h,p,Gr)){Un=1,Uv(c,gl(p,c.current)),Vr=null;return}}catch(O){if(A!==null)throw Vr=A,O;Un=1,Uv(c,gl(p,c.current)),Vr=null;return}h.flags&32768?(Hr||w===1?c=!0:ym||(Gr&536870912)!==0?c=!1:(vf=c=!0,(w===2||w===9||w===3||w===6)&&(w=rn.current,w!==null&&w.tag===13&&(w.flags|=16384))),Hk(h,c)):e1(h)}function e1(c){var h=c;do{if((h.flags&32768)!==0){Hk(h,vf);return}c=h.return;var p=CU(h.alternate,h,od);if(p!==null){Vr=p;return}if(h=h.sibling,h!==null){Vr=h;return}Vr=h=c}while(h!==null);Un===0&&(Un=5)}function Hk(c,h){do{var p=EU(c.alternate,c);if(p!==null){p.flags&=32767,Vr=p;return}if(p=c.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!h&&(c=c.sibling,c!==null)){Vr=c;return}Vr=c=p}while(c!==null);Un=6,Vr=null}function Vk(c,h,p,w,A,O,Y,de,Ae){c.cancelPendingCommit=null;do t1();while(Es!==0);if((ya&6)!==0)throw Error(a(327));if(h!==null){if(h===c.current)throw Error(a(177));if(O=h.lanes|h.childLanes,O|=Xh,Bl(c,p,O,Y,de,Ae),c===Wa&&(Vr=Wa=null,Gr=0),wm=h,wf=c,cd=p,jw=O,Nw=A,Pk=w,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,UU(Pt,function(){return Xk(),null})):(c.callbackNode=null,c.callbackPriority=0),w=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||w){w=Z.T,Z.T=null,A=X.p,X.p=2,Y=ya,ya|=4;try{TU(c,h,p)}finally{ya=Y,X.p=A,Z.T=w}}Es=1,Wk(),Kk(),Gk()}}function Wk(){if(Es===1){Es=0;var c=wf,h=wm,p=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||p){p=Z.T,Z.T=null;var w=X.p;X.p=2;var A=ya;ya|=4;try{kk(h,c);var O=Iw,Y=gc(c.containerInfo),de=O.focusedElem,Ae=O.selectionRange;if(Y!==de&&de&&de.ownerDocument&&xc(de.ownerDocument.documentElement,de)){if(Ae!==null&&Co(de)){var Ge=Ae.start,st=Ae.end;if(st===void 0&&(st=Ge),"selectionStart"in de)de.selectionStart=Ge,de.selectionEnd=Math.min(st,de.value.length);else{var dt=de.ownerDocument||document,Qe=dt&&dt.defaultView||window;if(Qe.getSelection){var Ze=Qe.getSelection(),Vt=de.textContent.length,cr=Math.min(Ae.start,Vt),za=Ae.end===void 0?cr:Math.min(Ae.end,Vt);!Ze.extend&&cr>za&&(Y=za,za=cr,cr=Y);var Re=sf(de,cr),Pe=sf(de,za);if(Re&&Pe&&(Ze.rangeCount!==1||Ze.anchorNode!==Re.node||Ze.anchorOffset!==Re.offset||Ze.focusNode!==Pe.node||Ze.focusOffset!==Pe.offset)){var Ke=dt.createRange();Ke.setStart(Re.node,Re.offset),Ze.removeAllRanges(),cr>za?(Ze.addRange(Ke),Ze.extend(Pe.node,Pe.offset)):(Ke.setEnd(Pe.node,Pe.offset),Ze.addRange(Ke))}}}}for(dt=[],Ze=de;Ze=Ze.parentNode;)Ze.nodeType===1&&dt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<dt.length;de++){var ct=dt[de];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}h1=!!Rw,Iw=Rw=null}finally{ya=A,X.p=w,Z.T=p}}c.current=h,Es=2}}function Kk(){if(Es===2){Es=0;var c=wf,h=wm,p=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||p){p=Z.T,Z.T=null;var w=X.p;X.p=2;var A=ya;ya|=4;try{wk(c,h.alternate,h)}finally{ya=A,X.p=w,Z.T=p}}Es=3}}function Gk(){if(Es===4||Es===3){Es=0,qe();var c=wf,h=wm,p=cd,w=Pk;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Es=5:(Es=0,wm=wf=null,Yk(c,c.pendingLanes));var A=c.pendingLanes;if(A===0&&(bf=null),un(p),h=h.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Lt,h,void 0,(h.current.flags&128)===128)}catch{}if(w!==null){h=Z.T,A=X.p,X.p=2,Z.T=null;try{for(var O=c.onRecoverableError,Y=0;Y<w.length;Y++){var de=w[Y];O(de.value,{componentStack:de.stack})}}finally{Z.T=h,X.p=A}}(cd&3)!==0&&t1(),xu(c),A=c.pendingLanes,(p&261930)!==0&&(A&42)!==0?c===_w?bx++:(bx=0,_w=c):bx=0,wx(0)}}function Yk(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,O0(h)))}function t1(){return Wk(),Kk(),Gk(),Xk()}function Xk(){if(Es!==5)return!1;var c=wf,h=jw;jw=0;var p=un(cd),w=Z.T,A=X.p;try{X.p=32>p?32:p,Z.T=null,p=Nw,Nw=null;var O=wf,Y=cd;if(Es=0,wm=wf=null,cd=0,(ya&6)!==0)throw Error(a(331));var de=ya;if(ya|=4,Dk(O.current),Ck(O,O.current,Y,p),ya=de,wx(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Lt,O)}catch{}return!0}finally{X.p=A,Z.T=w,Yk(c,h)}}function Qk(c,h,p){h=gl(p,h),h=rw(c.stateNode,h,2),c=Ar(c,h,2),c!==null&&(Jt(c,2),xu(c))}function Aa(c,h,p){if(c.tag===3)Qk(c,c,p);else for(;h!==null;){if(h.tag===3){Qk(h,c,p);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(bf===null||!bf.has(w))){c=gl(p,c),p=Z6(2),w=Ar(h,p,2),w!==null&&(J6(p,w,h,c),Jt(w,2),xu(w));break}}h=h.return}}function Aw(c,h,p){var w=c.pingCache;if(w===null){w=c.pingCache=new FU;var A=new Set;w.set(h,A)}else A=w.get(h),A===void 0&&(A=new Set,w.set(h,A));A.has(p)||(yw=!0,A.add(p),c=IU.bind(null,c,h,p),h.then(c,c))}function IU(c,h,p){var w=c.pingCache;w!==null&&w.delete(h),c.pingedLanes|=c.suspendedLanes&p,c.warmLanes&=~p,Wa===c&&(Gr&p)===p&&(Un===4||Un===3&&(Gr&62914560)===Gr&&300>xt()-Yv?(ya&2)===0&&jm(c,0):bw|=p,bm===Gr&&(bm=0)),xu(c)}function Zk(c,h){h===0&&(h=ul()),c=yc(c,h),c!==null&&(Jt(c,h),xu(c))}function BU(c){var h=c.memoizedState,p=0;h!==null&&(p=h.retryLane),Zk(c,p)}function zU(c,h){var p=0;switch(c.tag){case 31:case 13:var w=c.stateNode,A=c.memoizedState;A!==null&&(p=A.retryLane);break;case 19:w=c.stateNode;break;case 22:w=c.stateNode._retryCache;break;default:throw Error(a(314))}w!==null&&w.delete(h),Zk(c,p)}function UU(c,h){return Ie(c,h)}var r1=null,_m=null,Cw=!1,a1=!1,Ew=!1,Nf=0;function xu(c){c!==_m&&c.next===null&&(_m===null?r1=_m=c:_m=_m.next=c),a1=!0,Cw||(Cw=!0,$U())}function wx(c,h){if(!Ew&&a1){Ew=!0;do for(var p=!1,w=r1;w!==null;){if(c!==0){var A=w.pendingLanes;if(A===0)var O=0;else{var Y=w.suspendedLanes,de=w.pingedLanes;O=(1<<31-wr(42|c)+1)-1,O&=A&~(Y&~de),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(p=!0,rA(w,O))}else O=Gr,O=$r(w,w===Wa?O:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(O&3)===0||Bi(w,O)||(p=!0,rA(w,O));w=w.next}while(p);Ew=!1}}function qU(){Jk()}function Jk(){a1=Cw=!1;var c=0;Nf!==0&&JU()&&(c=Nf);for(var h=xt(),p=null,w=r1;w!==null;){var A=w.next,O=eA(w,h);O===0?(w.next=null,p===null?r1=A:p.next=A,A===null&&(_m=p)):(p=w,(c!==0||(O&3)!==0)&&(a1=!0)),w=A}Es!==0&&Es!==5||wx(c),Nf!==0&&(Nf=0)}function eA(c,h){for(var p=c.suspendedLanes,w=c.pingedLanes,A=c.expirationTimes,O=c.pendingLanes&-62914561;0<O;){var Y=31-wr(O),de=1<<Y,Ae=A[Y];Ae===-1?((de&p)===0||(de&w)!==0)&&(A[Y]=ls(de,h)):Ae<=h&&(c.expiredLanes|=de),O&=~de}if(h=Wa,p=Gr,p=$r(c,c===h?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w=c.callbackNode,p===0||c===h&&(ka===2||ka===9)||c.cancelPendingCommit!==null)return w!==null&&w!==null&&ge(w),c.callbackNode=null,c.callbackPriority=0;if((p&3)===0||Bi(c,p)){if(h=p&-p,h===c.callbackPriority)return h;switch(w!==null&&ge(w),un(p)){case 2:case 8:p=mr;break;case 32:p=Pt;break;case 268435456:p=wt;break;default:p=Pt}return w=tA.bind(null,c),p=Ie(p,w),c.callbackPriority=h,c.callbackNode=p,h}return w!==null&&w!==null&&ge(w),c.callbackPriority=2,c.callbackNode=null,2}function tA(c,h){if(Es!==0&&Es!==5)return c.callbackNode=null,c.callbackPriority=0,null;var p=c.callbackNode;if(t1()&&c.callbackNode!==p)return null;var w=Gr;return w=$r(c,c===Wa?w:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w===0?null:(Lk(c,w,h),eA(c,xt()),c.callbackNode!=null&&c.callbackNode===p?tA.bind(null,c):null)}function rA(c,h){if(t1())return null;Lk(c,h,!0)}function $U(){tq(function(){(ya&6)!==0?Ie(Mt,qU):Jk()})}function Tw(){if(Nf===0){var c=_;c===0&&(c=_a,_a<<=1,(_a&261888)===0&&(_a=256)),Nf=c}return Nf}function aA(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ql(""+c)}function nA(c,h){var p=h.ownerDocument.createElement("input");return p.name=h.name,p.value=h.value,c.id&&p.setAttribute("form",c.id),h.parentNode.insertBefore(p,h),c=new FormData(c),p.parentNode.removeChild(p),c}function HU(c,h,p,w,A){if(h==="submit"&&p&&p.stateNode===A){var O=aA((A[be]||null).action),Y=w.submitter;Y&&(h=(h=Y[be]||null)?aA(h.formAction):Y.getAttribute("formAction"),h!==null&&(O=h,Y=null));var de=new bo("action","action",null,w,A);c.push({event:de,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Nf!==0){var Ae=Y?nA(A,Y):new FormData(A);X2(p,{pending:!0,data:Ae,method:A.method,action:O},null,Ae)}}else typeof O=="function"&&(de.preventDefault(),Ae=Y?nA(A,Y):new FormData(A),X2(p,{pending:!0,data:Ae,method:A.method,action:O},O,Ae))},currentTarget:A}]})}}for(var Dw=0;Dw<Gu.length;Dw++){var Ow=Gu[Dw],VU=Ow.toLowerCase(),WU=Ow[0].toUpperCase()+Ow.slice(1);pl(VU,"on"+WU)}pl(Ku,"onAnimationEnd"),pl(_0,"onAnimationIteration"),pl(Xp,"onAnimationStart"),pl("dblclick","onDoubleClick"),pl("focusin","onFocus"),pl("focusout","onBlur"),pl(Cv,"onTransitionRun"),pl(Ev,"onTransitionStart"),pl(Tv,"onTransitionCancel"),pl(Qp,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jx));function sA(c,h){h=(h&4)!==0;for(var p=0;p<c.length;p++){var w=c[p],A=w.event;w=w.listeners;e:{var O=void 0;if(h)for(var Y=w.length-1;0<=Y;Y--){var de=w[Y],Ae=de.instance,Ge=de.currentTarget;if(de=de.listener,Ae!==O&&A.isPropagationStopped())break e;O=de,A.currentTarget=Ge;try{O(A)}catch(st){S0(st)}A.currentTarget=null,O=Ae}else for(Y=0;Y<w.length;Y++){if(de=w[Y],Ae=de.instance,Ge=de.currentTarget,de=de.listener,Ae!==O&&A.isPropagationStopped())break e;O=de,A.currentTarget=Ge;try{O(A)}catch(st){S0(st)}A.currentTarget=null,O=Ae}}}}function Wr(c,h){var p=h[ze];p===void 0&&(p=h[ze]=new Set);var w=c+"__bubble";p.has(w)||(iA(h,c,2,!1),p.add(w))}function Fw(c,h,p){var w=0;h&&(w|=4),iA(p,c,w,h)}var n1="_reactListening"+Math.random().toString(36).slice(2);function Pw(c){if(!c[n1]){c[n1]=!0,xa.forEach(function(p){p!=="selectionchange"&&(KU.has(p)||Fw(p,!1,c),Fw(p,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[n1]||(h[n1]=!0,Fw("selectionchange",!1,h))}}function iA(c,h,p,w){switch(MA(h)){case 2:var A=wq;break;case 8:A=jq;break;default:A=Yw}p=A.bind(null,h,p,c),A=void 0,!w0||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),w?A!==void 0?c.addEventListener(h,p,{capture:!0,passive:A}):c.addEventListener(h,p,!0):A!==void 0?c.addEventListener(h,p,{passive:A}):c.addEventListener(h,p,!1)}function Mw(c,h,p,w,A){var O=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var Y=w.tag;if(Y===3||Y===4){var de=w.stateNode.containerInfo;if(de===A)break;if(Y===4)for(Y=w.return;Y!==null;){var Ae=Y.tag;if((Ae===3||Ae===4)&&Y.stateNode.containerInfo===A)return;Y=Y.return}for(;de!==null;){if(Y=jt(de),Y===null)return;if(Ae=Y.tag,Ae===5||Ae===6||Ae===26||Ae===27){w=O=Y;continue e}de=de.parentNode}}w=w.return}Hh(function(){var Ge=O,st=Iu(p),dt=[];e:{var Qe=Zp.get(c);if(Qe!==void 0){var Ze=bo,Vt=c;switch(c){case"keypress":if(lc(p)===0)break e;case"keydown":case"keyup":Ze=ia;break;case"focusin":Vt="focus",Ze=dc;break;case"focusout":Vt="blur",Ze=dc;break;case"beforeblur":case"afterblur":Ze=dc;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=Gn;break;case Ku:case _0:case Xp:Ze=B;break;case Qp:Ze=ws;break;case"scroll":case"scrollend":Ze=Zd;break;case"wheel":Ze=yi;break;case"copy":case"cut":case"paste":Ze=_e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=kn;break;case"toggle":case"beforetoggle":Ze=Jd}var cr=(h&4)!==0,za=!cr&&(c==="scroll"||c==="scrollend"),Re=cr?Qe!==null?Qe+"Capture":null:Qe;cr=[];for(var Pe=Ge,Ke;Pe!==null;){var ct=Pe;if(Ke=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ke===null||Re===null||(ct=qi(Pe,Re),ct!=null&&cr.push(Nx(Pe,ct,Ke))),za)break;Pe=Pe.return}0<cr.length&&(Qe=new Ze(Qe,Vt,null,p,st),dt.push({event:Qe,listeners:cr}))}}if((h&7)===0){e:{if(Qe=c==="mouseover"||c==="pointerover",Ze=c==="mouseout"||c==="pointerout",Qe&&p!==ic&&(Vt=p.relatedTarget||p.fromElement)&&(jt(Vt)||Vt[Se]))break e;if((Ze||Qe)&&(Qe=st.window===st?st:(Qe=st.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,Ze?(Vt=p.relatedTarget||p.toElement,Ze=Ge,Vt=Vt?jt(Vt):null,Vt!==null&&(za=i(Vt),cr=Vt.tag,Vt!==za||cr!==5&&cr!==27&&cr!==6)&&(Vt=null)):(Ze=null,Vt=Ge),Ze!==Vt)){if(cr=wo,ct="onMouseLeave",Re="onMouseEnter",Pe="mouse",(c==="pointerout"||c==="pointerover")&&(cr=kn,ct="onPointerLeave",Re="onPointerEnter",Pe="pointer"),za=Ze==null?Qe:bt(Ze),Ke=Vt==null?Qe:bt(Vt),Qe=new cr(ct,Pe+"leave",Ze,p,st),Qe.target=za,Qe.relatedTarget=Ke,ct=null,jt(st)===Ge&&(cr=new cr(Re,Pe+"enter",Vt,p,st),cr.target=Ke,cr.relatedTarget=za,ct=cr),za=ct,Ze&&Vt)t:{for(cr=GU,Re=Ze,Pe=Vt,Ke=0,ct=Re;ct;ct=cr(ct))Ke++;ct=0;for(var nr=Pe;nr;nr=cr(nr))ct++;for(;0<Ke-ct;)Re=cr(Re),Ke--;for(;0<ct-Ke;)Pe=cr(Pe),ct--;for(;Ke--;){if(Re===Pe||Pe!==null&&Re===Pe.alternate){cr=Re;break t}Re=cr(Re),Pe=cr(Pe)}cr=null}else cr=null;Ze!==null&&lA(dt,Qe,Ze,cr,!1),Vt!==null&&za!==null&&lA(dt,za,Vt,cr,!0)}}e:{if(Qe=Ge?bt(Ge):window,Ze=Qe.nodeName&&Qe.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Qe.type==="file")var da=au;else if(j0(Qe))if(bi)da=ko;else{da=An;var Xt=af}else Ze=Qe.nodeName,!Ze||Ze.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?Ge&&v0(Ge.elementType)&&(da=au):da=Yh;if(da&&(da=da(c,Ge))){Vi(dt,da,p,st);break e}Xt&&Xt(c,Qe,Ge),c==="focusout"&&Ge&&Qe.type==="number"&&Ge.memoizedProps.value!=null&&m0(Qe,"number",Qe.value)}switch(Xt=Ge?bt(Ge):window,c){case"focusin":(j0(Xt)||Xt.contentEditable==="true")&&(Wi=Xt,vc=Ge,zs=null);break;case"focusout":zs=vc=Wi=null;break;case"mousedown":ml=!0;break;case"contextmenu":case"mouseup":case"dragend":ml=!1,la(dt,p,st);break;case"selectionchange":if(Wu)break;case"keydown":case"keyup":la(dt,p,st)}var Er;if(jo)e:{switch(c){case"compositionstart":var Yr="onCompositionStart";break e;case"compositionend":Yr="onCompositionEnd";break e;case"compositionupdate":Yr="onCompositionUpdate";break e}Yr=void 0}else No?ru(c,p)&&(Yr="onCompositionEnd"):c==="keydown"&&p.keyCode===229&&(Yr="onCompositionStart");Yr&&(eu&&p.locale!=="ko"&&(No||Yr!=="onCompositionStart"?Yr==="onCompositionEnd"&&No&&(Er=Uu()):($i=st,zu="value"in $i?$i.value:$i.textContent,No=!0)),Xt=s1(Ge,Yr),0<Xt.length&&(Yr=new Le(Yr,c,null,p,st),dt.push({event:Yr,listeners:Xt}),Er?Yr.data=Er:(Er=ef(p),Er!==null&&(Yr.data=Er)))),(Er=Vu?dn(c,p):fc(c,p))&&(Yr=s1(Ge,"onBeforeInput"),0<Yr.length&&(Xt=new Le("onBeforeInput","beforeinput",null,p,st),dt.push({event:Xt,listeners:Yr}),Xt.data=Er)),HU(dt,c,Ge,p,st)}sA(dt,h)})}function Nx(c,h,p){return{instance:c,listener:h,currentTarget:p}}function s1(c,h){for(var p=h+"Capture",w=[];c!==null;){var A=c,O=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=qi(c,p),A!=null&&w.unshift(Nx(c,A,O)),A=qi(c,h),A!=null&&w.push(Nx(c,A,O))),c.tag===3)return w;c=c.return}return[]}function GU(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function lA(c,h,p,w,A){for(var O=h._reactName,Y=[];p!==null&&p!==w;){var de=p,Ae=de.alternate,Ge=de.stateNode;if(de=de.tag,Ae!==null&&Ae===w)break;de!==5&&de!==26&&de!==27||Ge===null||(Ae=Ge,A?(Ge=qi(p,O),Ge!=null&&Y.unshift(Nx(p,Ge,Ae))):A||(Ge=qi(p,O),Ge!=null&&Y.push(Nx(p,Ge,Ae)))),p=p.return}Y.length!==0&&c.push({event:h,listeners:Y})}var YU=/\r\n?/g,XU=/\u0000|\uFFFD/g;function oA(c){return(typeof c=="string"?c:""+c).replace(YU,`
`).replace(XU,"")}function cA(c,h){return h=oA(h),oA(c)===h}function Ba(c,h,p,w,A,O){switch(p){case"children":typeof w=="string"?h==="body"||h==="textarea"&&w===""||Ui(c,w):(typeof w=="number"||typeof w=="bigint")&&h!=="body"&&Ui(c,""+w);break;case"className":Yd(c,"class",w);break;case"tabIndex":Yd(c,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Yd(c,p,w);break;case"style":qh(c,w,O);break;case"data":if(h!=="object"){Yd(c,"data",w);break}case"src":case"href":if(w===""&&(h!=="a"||p!=="href")){c.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(p);break}w=ql(""+w),c.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){c.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(p==="formAction"?(h!=="input"&&Ba(c,h,"name",A.name,A,null),Ba(c,h,"formEncType",A.formEncType,A,null),Ba(c,h,"formMethod",A.formMethod,A,null),Ba(c,h,"formTarget",A.formTarget,A,null)):(Ba(c,h,"encType",A.encType,A,null),Ba(c,h,"method",A.method,A,null),Ba(c,h,"target",A.target,A,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(p);break}w=ql(""+w),c.setAttribute(p,w);break;case"onClick":w!=null&&(c.onclick=$l);break;case"onScroll":w!=null&&Wr("scroll",c);break;case"onScrollEnd":w!=null&&Wr("scrollend",c);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(a(61));if(p=w.__html,p!=null){if(A.children!=null)throw Error(a(60));c.innerHTML=p}}break;case"multiple":c.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":c.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){c.removeAttribute("xlink:href");break}p=ql(""+w),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(p,""+w):c.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(p,""):c.removeAttribute(p);break;case"capture":case"download":w===!0?c.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(p,w):c.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?c.setAttribute(p,w):c.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?c.removeAttribute(p):c.setAttribute(p,w);break;case"popover":Wr("beforetoggle",c),Wr("toggle",c),Kn(c,"popover",w);break;case"xlinkActuate":Na(c,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Na(c,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Na(c,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Na(c,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Na(c,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Na(c,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Na(c,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Na(c,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Na(c,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Kn(c,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=y0.get(p)||p,Kn(c,p,w))}}function Lw(c,h,p,w,A,O){switch(p){case"style":qh(c,w,O);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(a(61));if(p=w.__html,p!=null){if(A.children!=null)throw Error(a(60));c.innerHTML=p}}break;case"children":typeof w=="string"?Ui(c,w):(typeof w=="number"||typeof w=="bigint")&&Ui(c,""+w);break;case"onScroll":w!=null&&Wr("scroll",c);break;case"onScrollEnd":w!=null&&Wr("scrollend",c);break;case"onClick":w!=null&&(c.onclick=$l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Br.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(A=p.endsWith("Capture"),h=p.slice(2,A?p.length-7:void 0),O=c[be]||null,O=O!=null?O[p]:null,typeof O=="function"&&c.removeEventListener(h,O,A),typeof w=="function")){typeof O!="function"&&O!==null&&(p in c?c[p]=null:c.hasAttribute(p)&&c.removeAttribute(p)),c.addEventListener(h,w,A);break e}p in c?c[p]=w:w===!0?c.setAttribute(p,""):Kn(c,p,w)}}}function li(c,h,p){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wr("error",c),Wr("load",c);var w=!1,A=!1,O;for(O in p)if(p.hasOwnProperty(O)){var Y=p[O];if(Y!=null)switch(O){case"src":w=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Ba(c,h,O,Y,p,null)}}A&&Ba(c,h,"srcSet",p.srcSet,p,null),w&&Ba(c,h,"src",p.src,p,null);return;case"input":Wr("invalid",c);var de=O=Y=A=null,Ae=null,Ge=null;for(w in p)if(p.hasOwnProperty(w)){var st=p[w];if(st!=null)switch(w){case"name":A=st;break;case"type":Y=st;break;case"checked":Ae=st;break;case"defaultChecked":Ge=st;break;case"value":O=st;break;case"defaultValue":de=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(a(137,h));break;default:Ba(c,h,w,st,p,null)}}zh(c,O,de,Ae,Ge,Y,A,!1);return;case"select":Wr("invalid",c),w=Y=O=null;for(A in p)if(p.hasOwnProperty(A)&&(de=p[A],de!=null))switch(A){case"value":O=de;break;case"defaultValue":Y=de;break;case"multiple":w=de;default:Ba(c,h,A,de,p,null)}h=O,p=Y,c.multiple=!!w,h!=null?ri(c,!!w,h,!1):p!=null&&ri(c,!!w,p,!0);return;case"textarea":Wr("invalid",c),O=A=w=null;for(Y in p)if(p.hasOwnProperty(Y)&&(de=p[Y],de!=null))switch(Y){case"value":w=de;break;case"defaultValue":A=de;break;case"children":O=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(91));break;default:Ba(c,h,Y,de,p,null)}x0(c,w,A,O);return;case"option":for(Ae in p)if(p.hasOwnProperty(Ae)&&(w=p[Ae],w!=null))switch(Ae){case"selected":c.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Ba(c,h,Ae,w,p,null)}return;case"dialog":Wr("beforetoggle",c),Wr("toggle",c),Wr("cancel",c),Wr("close",c);break;case"iframe":case"object":Wr("load",c);break;case"video":case"audio":for(w=0;w<jx.length;w++)Wr(jx[w],c);break;case"image":Wr("error",c),Wr("load",c);break;case"details":Wr("toggle",c);break;case"embed":case"source":case"link":Wr("error",c),Wr("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ge in p)if(p.hasOwnProperty(Ge)&&(w=p[Ge],w!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Ba(c,h,Ge,w,p,null)}return;default:if(v0(h)){for(st in p)p.hasOwnProperty(st)&&(w=p[st],w!==void 0&&Lw(c,h,st,w,p,void 0));return}}for(de in p)p.hasOwnProperty(de)&&(w=p[de],w!=null&&Ba(c,h,de,w,p,null))}function QU(c,h,p,w){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,Y=null,de=null,Ae=null,Ge=null,st=null;for(Ze in p){var dt=p[Ze];if(p.hasOwnProperty(Ze)&&dt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Ae=dt;default:w.hasOwnProperty(Ze)||Ba(c,h,Ze,null,w,dt)}}for(var Qe in w){var Ze=w[Qe];if(dt=p[Qe],w.hasOwnProperty(Qe)&&(Ze!=null||dt!=null))switch(Qe){case"type":O=Ze;break;case"name":A=Ze;break;case"checked":Ge=Ze;break;case"defaultChecked":st=Ze;break;case"value":Y=Ze;break;case"defaultValue":de=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(a(137,h));break;default:Ze!==dt&&Ba(c,h,Qe,Ze,w,dt)}}h0(c,Y,de,Ae,Ge,st,O,A);return;case"select":Ze=Y=de=Qe=null;for(O in p)if(Ae=p[O],p.hasOwnProperty(O)&&Ae!=null)switch(O){case"value":break;case"multiple":Ze=Ae;default:w.hasOwnProperty(O)||Ba(c,h,O,null,w,Ae)}for(A in w)if(O=w[A],Ae=p[A],w.hasOwnProperty(A)&&(O!=null||Ae!=null))switch(A){case"value":Qe=O;break;case"defaultValue":de=O;break;case"multiple":Y=O;default:O!==Ae&&Ba(c,h,A,O,w,Ae)}h=de,p=Y,w=Ze,Qe!=null?ri(c,!!p,Qe,!1):!!w!=!!p&&(h!=null?ri(c,!!p,h,!0):ri(c,!!p,p?[]:"",!1));return;case"textarea":Ze=Qe=null;for(de in p)if(A=p[de],p.hasOwnProperty(de)&&A!=null&&!w.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:Ba(c,h,de,null,w,A)}for(Y in w)if(A=w[Y],O=p[Y],w.hasOwnProperty(Y)&&(A!=null||O!=null))switch(Y){case"value":Qe=A;break;case"defaultValue":Ze=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:A!==O&&Ba(c,h,Y,A,w,O)}p0(c,Qe,Ze);return;case"option":for(var Vt in p)if(Qe=p[Vt],p.hasOwnProperty(Vt)&&Qe!=null&&!w.hasOwnProperty(Vt))switch(Vt){case"selected":c.selected=!1;break;default:Ba(c,h,Vt,null,w,Qe)}for(Ae in w)if(Qe=w[Ae],Ze=p[Ae],w.hasOwnProperty(Ae)&&Qe!==Ze&&(Qe!=null||Ze!=null))switch(Ae){case"selected":c.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:Ba(c,h,Ae,Qe,w,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var cr in p)Qe=p[cr],p.hasOwnProperty(cr)&&Qe!=null&&!w.hasOwnProperty(cr)&&Ba(c,h,cr,null,w,Qe);for(Ge in w)if(Qe=w[Ge],Ze=p[Ge],w.hasOwnProperty(Ge)&&Qe!==Ze&&(Qe!=null||Ze!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(a(137,h));break;default:Ba(c,h,Ge,Qe,w,Ze)}return;default:if(v0(h)){for(var za in p)Qe=p[za],p.hasOwnProperty(za)&&Qe!==void 0&&!w.hasOwnProperty(za)&&Lw(c,h,za,void 0,w,Qe);for(st in w)Qe=w[st],Ze=p[st],!w.hasOwnProperty(st)||Qe===Ze||Qe===void 0&&Ze===void 0||Lw(c,h,st,Qe,w,Ze);return}}for(var Re in p)Qe=p[Re],p.hasOwnProperty(Re)&&Qe!=null&&!w.hasOwnProperty(Re)&&Ba(c,h,Re,null,w,Qe);for(dt in w)Qe=w[dt],Ze=p[dt],!w.hasOwnProperty(dt)||Qe===Ze||Qe==null&&Ze==null||Ba(c,h,dt,Qe,w,Ze)}function uA(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZU(){if(typeof performance.getEntriesByType=="function"){for(var c=0,h=0,p=performance.getEntriesByType("resource"),w=0;w<p.length;w++){var A=p[w],O=A.transferSize,Y=A.initiatorType,de=A.duration;if(O&&de&&uA(Y)){for(Y=0,de=A.responseEnd,w+=1;w<p.length;w++){var Ae=p[w],Ge=Ae.startTime;if(Ge>de)break;var st=Ae.transferSize,dt=Ae.initiatorType;st&&uA(dt)&&(Ae=Ae.responseEnd,Y+=st*(Ae<de?1:(de-Ge)/(Ae-Ge)))}if(--w,h+=8*(O+Y)/(A.duration/1e3),c++,10<c)break}}if(0<c)return h/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var Rw=null,Iw=null;function i1(c){return c.nodeType===9?c:c.ownerDocument}function dA(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fA(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function Bw(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var zw=null;function JU(){var c=window.event;return c&&c.type==="popstate"?c===zw?!1:(zw=c,!0):(zw=null,!1)}var hA=typeof setTimeout=="function"?setTimeout:void 0,eq=typeof clearTimeout=="function"?clearTimeout:void 0,mA=typeof Promise=="function"?Promise:void 0,tq=typeof queueMicrotask=="function"?queueMicrotask:typeof mA<"u"?function(c){return mA.resolve(null).then(c).catch(rq)}:hA;function rq(c){setTimeout(function(){throw c})}function _f(c){return c==="head"}function pA(c,h){var p=h,w=0;do{var A=p.nextSibling;if(c.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"||p==="/&"){if(w===0){c.removeChild(A),Cm(h);return}w--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")w++;else if(p==="html")_x(c.ownerDocument.documentElement);else if(p==="head"){p=c.ownerDocument.head,_x(p);for(var O=p.firstChild;O;){var Y=O.nextSibling,de=O.nodeName;O[We]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&O.rel.toLowerCase()==="stylesheet"||p.removeChild(O),O=Y}}else p==="body"&&_x(c.ownerDocument.body);p=A}while(p);Cm(h)}function xA(c,h){var p=c;c=0;do{var w=p.nextSibling;if(p.nodeType===1?h?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(h?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(c===0)break;c--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||c++;p=w}while(p)}function Uw(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var p=h;switch(h=h.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Uw(p),vt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}c.removeChild(p)}}function aq(c,h,p,w){for(;c.nodeType===1;){var A=p;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!w&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(w){if(!c[We])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(O=c.getAttribute("rel"),O==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(O!==A.rel||c.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||c.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||c.getAttribute("title")!==(A.title==null?null:A.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(O=c.getAttribute("src"),(O!==(A.src==null?null:A.src)||c.getAttribute("type")!==(A.type==null?null:A.type)||c.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&c.getAttribute("name")===O)return c}else return c;if(c=Fo(c.nextSibling),c===null)break}return null}function nq(c,h,p){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!p||(c=Fo(c.nextSibling),c===null))return null;return c}function gA(c,h){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!h||(c=Fo(c.nextSibling),c===null))return null;return c}function qw(c){return c.data==="$?"||c.data==="$~"}function $w(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function sq(c,h){var p=c.ownerDocument;if(c.data==="$~")c._reactRetry=h;else if(c.data!=="$?"||p.readyState!=="loading")h();else{var w=function(){h(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),c._reactRetry=w}}function Fo(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return c}var Hw=null;function vA(c){c=c.nextSibling;for(var h=0;c;){if(c.nodeType===8){var p=c.data;if(p==="/$"||p==="/&"){if(h===0)return Fo(c.nextSibling);h--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||h++}c=c.nextSibling}return null}function yA(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var p=c.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(h===0)return c;h--}else p!=="/$"&&p!=="/&"||h++}c=c.previousSibling}return null}function bA(c,h,p){switch(h=i1(p),c){case"html":if(c=h.documentElement,!c)throw Error(a(452));return c;case"head":if(c=h.head,!c)throw Error(a(453));return c;case"body":if(c=h.body,!c)throw Error(a(454));return c;default:throw Error(a(451))}}function _x(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);vt(c)}var Po=new Map,wA=new Set;function l1(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var ud=X.d;X.d={f:iq,r:lq,D:oq,C:cq,L:uq,m:dq,X:hq,S:fq,M:mq};function iq(){var c=ud.f(),h=Zv();return c||h}function lq(c){var h=Ot(c);h!==null&&h.tag===5&&h.type==="form"?I6(h):ud.r(c)}var Sm=typeof document>"u"?null:document;function jA(c,h,p){var w=Sm;if(w&&typeof h=="string"&&h){var A=Bs(h);A='link[rel="'+c+'"][href="'+A+'"]',typeof p=="string"&&(A+='[crossorigin="'+p+'"]'),wA.has(A)||(wA.add(A),c={rel:c,crossOrigin:p,href:h},w.querySelector(A)===null&&(h=w.createElement("link"),li(h,"link",c),zt(h),w.head.appendChild(h)))}}function oq(c){ud.D(c),jA("dns-prefetch",c,null)}function cq(c,h){ud.C(c,h),jA("preconnect",c,h)}function uq(c,h,p){ud.L(c,h,p);var w=Sm;if(w&&c&&h){var A='link[rel="preload"][as="'+Bs(h)+'"]';h==="image"&&p&&p.imageSrcSet?(A+='[imagesrcset="'+Bs(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(A+='[imagesizes="'+Bs(p.imageSizes)+'"]')):A+='[href="'+Bs(c)+'"]';var O=A;switch(h){case"style":O=km(c);break;case"script":O=Am(c)}Po.has(O)||(c=m({rel:"preload",href:h==="image"&&p&&p.imageSrcSet?void 0:c,as:h},p),Po.set(O,c),w.querySelector(A)!==null||h==="style"&&w.querySelector(Sx(O))||h==="script"&&w.querySelector(kx(O))||(h=w.createElement("link"),li(h,"link",c),zt(h),w.head.appendChild(h)))}}function dq(c,h){ud.m(c,h);var p=Sm;if(p&&c){var w=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+Bs(w)+'"][href="'+Bs(c)+'"]',O=A;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Am(c)}if(!Po.has(O)&&(c=m({rel:"modulepreload",href:c},h),Po.set(O,c),p.querySelector(A)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(kx(O)))return}w=p.createElement("link"),li(w,"link",c),zt(w),p.head.appendChild(w)}}}function fq(c,h,p){ud.S(c,h,p);var w=Sm;if(w&&c){var A=kt(w).hoistableStyles,O=km(c);h=h||"default";var Y=A.get(O);if(!Y){var de={loading:0,preload:null};if(Y=w.querySelector(Sx(O)))de.loading=5;else{c=m({rel:"stylesheet",href:c,"data-precedence":h},p),(p=Po.get(O))&&Vw(c,p);var Ae=Y=w.createElement("link");zt(Ae),li(Ae,"link",c),Ae._p=new Promise(function(Ge,st){Ae.onload=Ge,Ae.onerror=st}),Ae.addEventListener("load",function(){de.loading|=1}),Ae.addEventListener("error",function(){de.loading|=2}),de.loading|=4,o1(Y,h,w)}Y={type:"stylesheet",instance:Y,count:1,state:de},A.set(O,Y)}}}function hq(c,h){ud.X(c,h);var p=Sm;if(p&&c){var w=kt(p).hoistableScripts,A=Am(c),O=w.get(A);O||(O=p.querySelector(kx(A)),O||(c=m({src:c,async:!0},h),(h=Po.get(A))&&Ww(c,h),O=p.createElement("script"),zt(O),li(O,"link",c),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},w.set(A,O))}}function mq(c,h){ud.M(c,h);var p=Sm;if(p&&c){var w=kt(p).hoistableScripts,A=Am(c),O=w.get(A);O||(O=p.querySelector(kx(A)),O||(c=m({src:c,async:!0,type:"module"},h),(h=Po.get(A))&&Ww(c,h),O=p.createElement("script"),zt(O),li(O,"link",c),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},w.set(A,O))}}function NA(c,h,p,w){var A=(A=te.current)?l1(A):null;if(!A)throw Error(a(446));switch(c){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(h=km(p.href),p=kt(A).hoistableStyles,w=p.get(h),w||(w={type:"style",instance:null,count:0,state:null},p.set(h,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){c=km(p.href);var O=kt(A).hoistableStyles,Y=O.get(c);if(Y||(A=A.ownerDocument||A,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(c,Y),(O=A.querySelector(Sx(c)))&&!O._p&&(Y.instance=O,Y.state.loading=5),Po.has(c)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Po.set(c,p),O||pq(A,c,p,Y.state))),h&&w===null)throw Error(a(528,""));return Y}if(h&&w!==null)throw Error(a(529,""));return null;case"script":return h=p.async,p=p.src,typeof p=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Am(p),p=kt(A).hoistableScripts,w=p.get(h),w||(w={type:"script",instance:null,count:0,state:null},p.set(h,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,c))}}function km(c){return'href="'+Bs(c)+'"'}function Sx(c){return'link[rel="stylesheet"]['+c+"]"}function _A(c){return m({},c,{"data-precedence":c.precedence,precedence:null})}function pq(c,h,p,w){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?w.loading=1:(h=c.createElement("link"),w.preload=h,h.addEventListener("load",function(){return w.loading|=1}),h.addEventListener("error",function(){return w.loading|=2}),li(h,"link",p),zt(h),c.head.appendChild(h))}function Am(c){return'[src="'+Bs(c)+'"]'}function kx(c){return"script[async]"+c}function SA(c,h,p){if(h.count++,h.instance===null)switch(h.type){case"style":var w=c.querySelector('style[data-href~="'+Bs(p.href)+'"]');if(w)return h.instance=w,zt(w),w;var A=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(c.ownerDocument||c).createElement("style"),zt(w),li(w,"style",A),o1(w,p.precedence,c),h.instance=w;case"stylesheet":A=km(p.href);var O=c.querySelector(Sx(A));if(O)return h.state.loading|=4,h.instance=O,zt(O),O;w=_A(p),(A=Po.get(A))&&Vw(w,A),O=(c.ownerDocument||c).createElement("link"),zt(O);var Y=O;return Y._p=new Promise(function(de,Ae){Y.onload=de,Y.onerror=Ae}),li(O,"link",w),h.state.loading|=4,o1(O,p.precedence,c),h.instance=O;case"script":return O=Am(p.src),(A=c.querySelector(kx(O)))?(h.instance=A,zt(A),A):(w=p,(A=Po.get(O))&&(w=m({},p),Ww(w,A)),c=c.ownerDocument||c,A=c.createElement("script"),zt(A),li(A,"link",w),c.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(w=h.instance,h.state.loading|=4,o1(w,p.precedence,c));return h.instance}function o1(c,h,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=w.length?w[w.length-1]:null,O=A,Y=0;Y<w.length;Y++){var de=w[Y];if(de.dataset.precedence===h)O=de;else if(O!==A)break}O?O.parentNode.insertBefore(c,O.nextSibling):(h=p.nodeType===9?p.head:p,h.insertBefore(c,h.firstChild))}function Vw(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function Ww(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var c1=null;function kA(c,h,p){if(c1===null){var w=new Map,A=c1=new Map;A.set(p,w)}else A=c1,w=A.get(p),w||(w=new Map,A.set(p,w));if(w.has(c))return w;for(w.set(c,null),p=p.getElementsByTagName(c),A=0;A<p.length;A++){var O=p[A];if(!(O[We]||O[pe]||c==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=O.getAttribute(h)||"";Y=c+Y;var de=w.get(Y);de?de.push(O):w.set(Y,[O])}}return w}function AA(c,h,p){c=c.ownerDocument||c,c.head.insertBefore(p,h==="title"?c.querySelector("head > title"):null)}function xq(c,h,p){if(p===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function CA(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function gq(c,h,p,w){if(p.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var A=km(w.href),O=h.querySelector(Sx(A));if(O){h=O._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(c.count++,c=u1.bind(c),h.then(c,c)),p.state.loading|=4,p.instance=O,zt(O);return}O=h.ownerDocument||h,w=_A(w),(A=Po.get(A))&&Vw(w,A),O=O.createElement("link"),zt(O);var Y=O;Y._p=new Promise(function(de,Ae){Y.onload=de,Y.onerror=Ae}),li(O,"link",w),p.instance=O}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(p,h),(h=p.state.preload)&&(p.state.loading&3)===0&&(c.count++,p=u1.bind(c),h.addEventListener("load",p),h.addEventListener("error",p))}}var Kw=0;function vq(c,h){return c.stylesheets&&c.count===0&&f1(c,c.stylesheets),0<c.count||0<c.imgCount?function(p){var w=setTimeout(function(){if(c.stylesheets&&f1(c,c.stylesheets),c.unsuspend){var O=c.unsuspend;c.unsuspend=null,O()}},6e4+h);0<c.imgBytes&&Kw===0&&(Kw=62500*ZU());var A=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&f1(c,c.stylesheets),c.unsuspend)){var O=c.unsuspend;c.unsuspend=null,O()}},(c.imgBytes>Kw?50:800)+h);return c.unsuspend=p,function(){c.unsuspend=null,clearTimeout(w),clearTimeout(A)}}:null}function u1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)f1(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var d1=null;function f1(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,d1=new Map,h.forEach(yq,c),d1=null,u1.call(c))}function yq(c,h){if(!(h.state.loading&4)){var p=d1.get(c);if(p)var w=p.get(null);else{p=new Map,d1.set(c,p);for(var A=c.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var Y=A[O];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(p.set(Y.dataset.precedence,Y),w=Y)}w&&p.set(null,w)}A=h.instance,Y=A.getAttribute("data-precedence"),O=p.get(Y)||w,O===w&&p.set(null,A),p.set(Y,A),this.count++,w=u1.bind(this),A.addEventListener("load",w),A.addEventListener("error",w),O?O.parentNode.insertBefore(A,O.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(A,c.firstChild)),h.state.loading|=4}}var Ax={$$typeof:N,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function bq(c,h,p,w,A,O,Y,de,Ae){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=w,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function EA(c,h,p,w,A,O,Y,de,Ae,Ge,st,dt){return c=new bq(c,h,p,Y,Ae,Ge,st,dt,de),h=1,O===!0&&(h|=24),O=qs(3,null,null,h),c.current=O,O.stateNode=c,h=ff(),h.refCount++,c.pooledCache=h,h.refCount++,O.memoizedState={element:w,isDehydrated:p,cache:h},Et(O),c}function TA(c){return c?(c=_s,c):_s}function DA(c,h,p,w,A,O){A=TA(A),w.context===null?w.context=A:w.pendingContext=A,w=or(h),w.payload={element:p},O=O===void 0?null:O,O!==null&&(w.callback=O),p=Ar(c,w,h),p!==null&&(Cl(p,c,h),ga(p,c,h))}function OA(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var p=c.retryLane;c.retryLane=p!==0&&p<h?p:h}}function Gw(c,h){OA(c,h),(c=c.alternate)&&OA(c,h)}function FA(c){if(c.tag===13||c.tag===31){var h=yc(c,67108864);h!==null&&Cl(h,c,67108864),Gw(c,67108864)}}function PA(c){if(c.tag===13||c.tag===31){var h=Ql();h=Pa(h);var p=yc(c,h);p!==null&&Cl(p,c,h),Gw(c,h)}}var h1=!0;function wq(c,h,p,w){var A=Z.T;Z.T=null;var O=X.p;try{X.p=2,Yw(c,h,p,w)}finally{X.p=O,Z.T=A}}function jq(c,h,p,w){var A=Z.T;Z.T=null;var O=X.p;try{X.p=8,Yw(c,h,p,w)}finally{X.p=O,Z.T=A}}function Yw(c,h,p,w){if(h1){var A=Xw(w);if(A===null)Mw(c,h,w,m1,p),LA(c,w);else if(_q(A,c,h,p,w))w.stopPropagation();else if(LA(c,w),h&4&&-1<Nq.indexOf(c)){for(;A!==null;){var O=Ot(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var Y=Zt(O.pendingLanes);if(Y!==0){var de=O;for(de.pendingLanes|=2,de.entangledLanes|=2;Y;){var Ae=1<<31-wr(Y);de.entanglements[1]|=Ae,Y&=~Ae}xu(O),(ya&6)===0&&(Xv=xt()+500,wx(0))}}break;case 31:case 13:de=yc(O,2),de!==null&&Cl(de,O,2),Zv(),Gw(O,2)}if(O=Xw(w),O===null&&Mw(c,h,w,m1,p),O===A)break;A=O}A!==null&&w.stopPropagation()}else Mw(c,h,w,null,p)}}function Xw(c){return c=Iu(c),Qw(c)}var m1=null;function Qw(c){if(m1=null,c=jt(c),c!==null){var h=i(c);if(h===null)c=null;else{var p=h.tag;if(p===13){if(c=l(h),c!==null)return c;c=null}else if(p===31){if(c=o(h),c!==null)return c;c=null}else if(p===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return m1=c,null}function MA(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case Mt:return 2;case mr:return 8;case Pt:case Rt:return 32;case wt:return 268435456;default:return 32}default:return 32}}var Zw=!1,Sf=null,kf=null,Af=null,Cx=new Map,Ex=new Map,Cf=[],Nq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LA(c,h){switch(c){case"focusin":case"focusout":Sf=null;break;case"dragenter":case"dragleave":kf=null;break;case"mouseover":case"mouseout":Af=null;break;case"pointerover":case"pointerout":Cx.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ex.delete(h.pointerId)}}function Tx(c,h,p,w,A,O){return c===null||c.nativeEvent!==O?(c={blockedOn:h,domEventName:p,eventSystemFlags:w,nativeEvent:O,targetContainers:[A]},h!==null&&(h=Ot(h),h!==null&&FA(h)),c):(c.eventSystemFlags|=w,h=c.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),c)}function _q(c,h,p,w,A){switch(h){case"focusin":return Sf=Tx(Sf,c,h,p,w,A),!0;case"dragenter":return kf=Tx(kf,c,h,p,w,A),!0;case"mouseover":return Af=Tx(Af,c,h,p,w,A),!0;case"pointerover":var O=A.pointerId;return Cx.set(O,Tx(Cx.get(O)||null,c,h,p,w,A)),!0;case"gotpointercapture":return O=A.pointerId,Ex.set(O,Tx(Ex.get(O)||null,c,h,p,w,A)),!0}return!1}function RA(c){var h=jt(c.target);if(h!==null){var p=i(h);if(p!==null){if(h=p.tag,h===13){if(h=l(p),h!==null){c.blockedOn=h,Ne(c.priority,function(){PA(p)});return}}else if(h===31){if(h=o(p),h!==null){c.blockedOn=h,Ne(c.priority,function(){PA(p)});return}}else if(h===3&&p.stateNode.current.memoizedState.isDehydrated){c.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}c.blockedOn=null}function p1(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var p=Xw(c.nativeEvent);if(p===null){p=c.nativeEvent;var w=new p.constructor(p.type,p);ic=w,p.target.dispatchEvent(w),ic=null}else return h=Ot(p),h!==null&&FA(h),c.blockedOn=p,!1;h.shift()}return!0}function IA(c,h,p){p1(c)&&p.delete(h)}function Sq(){Zw=!1,Sf!==null&&p1(Sf)&&(Sf=null),kf!==null&&p1(kf)&&(kf=null),Af!==null&&p1(Af)&&(Af=null),Cx.forEach(IA),Ex.forEach(IA)}function x1(c,h){c.blockedOn===h&&(c.blockedOn=null,Zw||(Zw=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Sq)))}var g1=null;function BA(c){g1!==c&&(g1=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){g1===c&&(g1=null);for(var h=0;h<c.length;h+=3){var p=c[h],w=c[h+1],A=c[h+2];if(typeof w!="function"){if(Qw(w||p)===null)continue;break}var O=Ot(p);O!==null&&(c.splice(h,3),h-=3,X2(O,{pending:!0,data:A,method:p.method,action:w},w,A))}}))}function Cm(c){function h(Ae){return x1(Ae,c)}Sf!==null&&x1(Sf,c),kf!==null&&x1(kf,c),Af!==null&&x1(Af,c),Cx.forEach(h),Ex.forEach(h);for(var p=0;p<Cf.length;p++){var w=Cf[p];w.blockedOn===c&&(w.blockedOn=null)}for(;0<Cf.length&&(p=Cf[0],p.blockedOn===null);)RA(p),p.blockedOn===null&&Cf.shift();if(p=(c.ownerDocument||c).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var A=p[w],O=p[w+1],Y=A[be]||null;if(typeof O=="function")Y||BA(p);else if(Y){var de=null;if(O&&O.hasAttribute("formAction")){if(A=O,Y=O[be]||null)de=Y.formAction;else if(Qw(A)!==null)continue}else de=Y.action;typeof de=="function"?p[w+1]=de:(p.splice(w,3),w-=3),BA(p)}}}function zA(){function c(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(Y){return A=Y})},focusReset:"manual",scroll:"manual"})}function h(){A!==null&&(A(),A=null),w||setTimeout(p,20)}function p(){if(!w&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,A=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(p,100),function(){w=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),A!==null&&(A(),A=null)}}}function Jw(c){this._internalRoot=c}v1.prototype.render=Jw.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(a(409));var p=h.current,w=Ql();DA(p,w,c,h,null,null)},v1.prototype.unmount=Jw.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;DA(c.current,2,null,c,null,null),Zv(),h[Se]=null}};function v1(c){this._internalRoot=c}v1.prototype.unstable_scheduleHydration=function(c){if(c){var h=le();c={blockedOn:null,target:c,priority:h};for(var p=0;p<Cf.length&&h!==0&&h<Cf[p].priority;p++);Cf.splice(p,0,c),p===0&&RA(c)}};var UA=t.version;if(UA!=="19.2.0")throw Error(a(527,UA,"19.2.0"));X.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=u(h),c=c!==null?f(c):null,c=c===null?null:c.stateNode,c};var kq={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y1.isDisabled&&y1.supportsFiber)try{Lt=y1.inject(kq),Dt=y1}catch{}}return Ox.createRoot=function(c,h){if(!s(c))throw Error(a(299));var p=!1,w="",A=G6,O=Y6,Y=X6;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(O=h.onCaughtError),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError)),h=EA(c,1,!1,null,null,p,w,null,A,O,Y,zA),c[Se]=h.current,Pw(c),new Jw(h)},Ox.hydrateRoot=function(c,h,p){if(!s(c))throw Error(a(299));var w=!1,A="",O=G6,Y=Y6,de=X6,Ae=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(O=p.onUncaughtError),p.onCaughtError!==void 0&&(Y=p.onCaughtError),p.onRecoverableError!==void 0&&(de=p.onRecoverableError),p.formState!==void 0&&(Ae=p.formState)),h=EA(c,1,!0,h,p??null,w,A,Ae,O,Y,de,zA),h.context=TA(null),p=h.current,w=Ql(),w=Pa(w),A=or(w),A.callback=null,Ar(p,A,w),p=w,h.current.lanes=p,Jt(h,p),xu(h),c[Se]=h.current,Pw(c),new v1(h)},Ox.version="19.2.0",Ox}var QA;function Rq(){if(QA)return r5.exports;QA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),r5.exports=Lq(),r5.exports}var Iq=Rq(),kp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bq={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},zq=class{#e=Bq;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},V0=new zq;function Uq(e){setTimeout(e,0)}var ih=typeof window>"u"||"Deno"in globalThis;function Xi(){}function qq(e,t){return typeof e=="function"?e(t):e}function kN(e){return typeof e=="number"&&e>=0&&e!==1/0}function hF(e,t){return Math.max(e+(t||0)-Date.now(),0)}function qf(e,t){return typeof e=="function"?e(t):e}function Vo(e,t){return typeof e=="function"?e(t):e}function ZA(e,t){const{type:r="all",exact:a,fetchStatus:s,predicate:i,queryKey:l,stale:o}=e;if(l){if(a){if(t.queryHash!==d4(l,t.options))return!1}else if(!fg(t.queryKey,l))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||s&&s!==t.state.fetchStatus||i&&!i(t))}function JA(e,t){const{exact:r,status:a,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(lh(t.options.mutationKey)!==lh(i))return!1}else if(!fg(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||s&&!s(t))}function d4(e,t){return(t?.queryKeyHashFn||lh)(e)}function lh(e){return JSON.stringify(e,(t,r)=>AN(r)?Object.keys(r).sort().reduce((a,s)=>(a[s]=r[s],a),{}):r)}function fg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>fg(e[r],t[r])):!1}var $q=Object.prototype.hasOwnProperty;function mF(e,t){if(e===t)return e;const r=eC(e)&&eC(t);if(!r&&!(AN(e)&&AN(t)))return t;const s=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),l=i.length,o=r?new Array(l):{};let d=0;for(let u=0;u<l;u++){const f=r?u:i[u],m=e[f],g=t[f];if(m===g){o[f]=m,(r?u<s:$q.call(e,f))&&d++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){o[f]=g;continue}const x=mF(m,g);o[f]=x,x===m&&d++}return s===l&&d===s?e:o}function _y(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function eC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function AN(e){if(!tC(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!tC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tC(e){return Object.prototype.toString.call(e)==="[object Object]"}function Hq(e){return new Promise(t=>{V0.setTimeout(t,e)})}function CN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?mF(e,t):t}function Vq(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function Wq(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var f4=Symbol();function pF(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===f4?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function xF(e,t){return typeof e=="function"?e(...t):!!e}var Kq=class extends kp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!ih&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},h4=new Kq;function EN(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function a(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{a({status:"fulfilled",value:s}),e(s)},r.reject=s=>{a({status:"rejected",reason:s}),t(s)},r}var Gq=Uq;function Yq(){let e=[],t=0,r=o=>{o()},a=o=>{o()},s=Gq;const i=o=>{t?e.push(o):s(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&s(()=>{a(()=>{o.forEach(d=>{r(d)})})})};return{batch:o=>{let d;t++;try{d=o()}finally{t--,t||l()}return d},batchCalls:o=>(...d)=>{i(()=>{o(...d)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{s=o}}}var Ds=Yq(),Xq=class extends kp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!ih&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Sy=new Xq;function Qq(e){return Math.min(1e3*2**e,3e4)}function gF(e){return(e??"online")==="online"?Sy.isOnline():!0}var TN=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function vF(e){let t=!1,r=0,a;const s=EN(),i=()=>s.status!=="pending",l=v=>{if(!i()){const y=new TN(v);g(y),e.onCancel?.(y)}},o=()=>{t=!0},d=()=>{t=!1},u=()=>h4.isFocused()&&(e.networkMode==="always"||Sy.isOnline())&&e.canRun(),f=()=>gF(e.networkMode)&&e.canRun(),m=v=>{i()||(a?.(),s.resolve(v))},g=v=>{i()||(a?.(),s.reject(v))},x=()=>new Promise(v=>{a=y=>{(i()||u())&&v(y)},e.onPause?.()}).then(()=>{a=void 0,i()||e.onContinue?.()}),b=()=>{if(i())return;let v;const y=r===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(j){v=Promise.reject(j)}Promise.resolve(v).then(m).catch(j=>{if(i())return;const S=e.retry??(ih?0:3),N=e.retryDelay??Qq,C=typeof N=="function"?N(r,j):N,T=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,j);if(t||!T){g(j);return}r++,e.onFail?.(r,j),Hq(C).then(()=>u()?void 0:x()).then(()=>{t?g(j):b()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(a?.(),s),cancelRetry:o,continueRetry:d,canStart:f,start:()=>(f()?b():x().then(b),s)}}var yF=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kN(this.gcTime)&&(this.#e=V0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ih?1/0:300*1e3))}clearGcTimeout(){this.#e&&(V0.clearTimeout(this.#e),this.#e=void 0)}},Zq=class extends yF{#e;#t;#r;#n;#a;#i;#l;constructor(e){super(),this.#l=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=rC(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=rC(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=CN(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#a?.promise;return this.#a?.cancel(e),t?t.then(Xi).catch(Xi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Vo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===f4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!hF(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#a&&(this.#l?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(d=>d.options.queryFn);o&&this.setOptions(o.options)}const r=new AbortController,a=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#l=!0,r.signal)})},s=()=>{const o=pF(this.options,t),u=(()=>{const f={client:this.#n,queryKey:this.queryKey,meta:this.meta};return a(f),f})();return this.#l=!1,this.options.persister?this.options.persister(o,u,this):o(u)},l=(()=>{const o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:s};return a(o),o})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#s({type:"fetch",meta:l.fetchOptions?.meta}),this.#a=vF({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:o=>{o instanceof TN&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(o,d)=>{this.#s({type:"failed",failureCount:o,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const o=await this.#a.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#r.config.onSuccess?.(o,this),this.#r.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof TN){if(o.silent)return this.#a.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#r.config.onError?.(o,this),this.#r.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...bF(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ds.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function bF(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gF(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function rC(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Jq=class extends kp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#l=EN(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#a;#i;#l;#s;#p;#f;#h;#c;#u;#o;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),aC(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return DN(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return DN(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),t._defaulted&&!_y(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&nC(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),a&&(this.#t!==r||Vo(this.options.enabled,this.#t)!==Vo(t.enabled,this.#t)||qf(this.options.staleTime,this.#t)!==qf(t.staleTime,this.#t))&&this.#x();const s=this.#g();a&&(this.#t!==r||Vo(this.options.enabled,this.#t)!==Vo(t.enabled,this.#t)||s!==this.#o)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return t$(this,r)&&(this.#n=r,this.#i=this.options,this.#a=this.#t.state),r}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#j();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Xi)),t}#x(){this.#b();const e=qf(this.options.staleTime,this.#t);if(ih||this.#n.isStale||!kN(e))return;const r=hF(this.#n.dataUpdatedAt,e)+1;this.#c=V0.setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#o=e,!(ih||Vo(this.options.enabled,this.#t)===!1||!kN(this.#o)||this.#o===0)&&(this.#u=V0.setInterval(()=>{(this.options.refetchIntervalInBackground||h4.isFocused())&&this.#d()},this.#o))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#c&&(V0.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(V0.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,a=this.options,s=this.#n,i=this.#a,l=this.#i,d=e!==r?e.state:this.#r,{state:u}=e;let f={...u},m=!1,g;if(t._optimisticResults){const M=this.hasListeners(),F=!M&&aC(e,t),H=M&&nC(e,r,t,a);(F||H)&&(f={...f,...bF(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:b,status:v}=f;g=f.data;let y=!1;if(t.placeholderData!==void 0&&g===void 0&&v==="pending"){let M;s?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(M=s.data,y=!0):M=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,M!==void 0&&(v="success",g=CN(s?.data,M,t),m=!0)}if(t.select&&g!==void 0&&!y)if(s&&g===i?.data&&t.select===this.#p)g=this.#f;else try{this.#p=t.select,g=t.select(g),g=CN(s?.data,g,t),this.#f=g,this.#s=null}catch(M){this.#s=M}this.#s&&(x=this.#s,g=this.#f,b=Date.now(),v="error");const j=f.fetchStatus==="fetching",S=v==="pending",N=v==="error",C=S&&j,T=g!==void 0,D={status:v,fetchStatus:f.fetchStatus,isPending:S,isSuccess:v==="success",isError:N,isInitialLoading:C,isLoading:C,data:g,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:b,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!S,isLoadingError:N&&!T,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:N&&T,isStale:m4(e,t),refetch:this.refetch,promise:this.#l,isEnabled:Vo(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const M=L=>{D.status==="error"?L.reject(D.error):D.data!==void 0&&L.resolve(D.data)},F=()=>{const L=this.#l=D.promise=EN();M(L)},H=this.#l;switch(H.status){case"pending":e.queryHash===r.queryHash&&M(H);break;case"fulfilled":(D.status==="error"||D.data!==H.value)&&F();break;case"rejected":(D.status!=="error"||D.error!==H.reason)&&F();break}}return D}updateResult(){const e=this.#n,t=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#h=this.#t),_y(t,e))return;this.#n=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#m.size)return!0;const i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(l=>{const o=l;return this.#n[o]!==e[o]&&i.has(o)})};this.#N({listeners:r()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#N(e){Ds.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function e$(e,t){return Vo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function aC(e,t){return e$(e,t)||e.state.data!==void 0&&DN(e,t,t.refetchOnMount)}function DN(e,t,r){if(Vo(t.enabled,e)!==!1&&qf(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&m4(e,t)}return!1}function nC(e,t,r,a){return(e!==t||Vo(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&m4(e,r)}function m4(e,t){return Vo(t.enabled,e)!==!1&&e.isStaleByTime(qf(t.staleTime,e))}function t$(e,t){return!_y(e.getCurrentResult(),t)}function sC(e){return{onFetch:(t,r)=>{const a=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},d=0;const u=async()=>{let f=!1;const m=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},g=pF(t.options,t.fetchOptions),x=async(b,v,y)=>{if(f)return Promise.reject();if(v==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:v,direction:y?"backward":"forward",meta:t.options.meta};return m(P),P})(),N=await g(S),{maxPages:C}=t.options,T=y?Wq:Vq;return{pages:T(b.pages,N,C),pageParams:T(b.pageParams,v,C)}};if(s&&i.length){const b=s==="backward",v=b?r$:iC,y={pages:i,pageParams:l},j=v(a,y);o=await x(y,j,b)}else{const b=e??i.length;do{const v=d===0?l[0]??a.initialPageParam:iC(a,o);if(d>0&&v==null)break;o=await x(o,v),d++}while(d<b)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function iC(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function r$(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var a$=class extends yF{#e;#t;#r;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||wF(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#a({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=vF({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,l)=>{this.#a({type:"failed",failureCount:i,error:l})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",s=!this.#n.canStart();try{if(a)t();else{this.#a({type:"pending",variables:e,isPaused:s}),await this.#r.config.onMutate?.(e,this,r);const l=await this.options.onMutate?.(e,r);l!==this.state.context&&this.#a({type:"pending",context:l,variables:e,isPaused:s})}const i=await this.#n.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#a({type:"success",data:i}),i}catch(i){try{throw await this.#r.config.onError?.(i,e,this.state.context,this,r),await this.options.onError?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,i,e,this.state.context,r),i}finally{this.#a({type:"error",error:i})}}finally{this.#r.runNext(this)}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ds.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function wF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var n$=class extends kp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new a$({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=b1(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=b1(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=b1(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(s=>s.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=b1(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ds.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>JA(t,r))}findAll(e={}){return this.getAll().filter(t=>JA(e,t))}notify(e){Ds.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ds.batch(()=>Promise.all(e.map(t=>t.continue().catch(Xi))))}};function b1(e){return e.options.scope?.id}var s$=class extends kp{#e;#t=void 0;#r;#n;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),_y(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&lh(r.mutationKey)!==lh(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#a(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(t,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#a(){const t=this.#r?.state??wF();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Ds.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#n.onSuccess?.(t.data,r,a,s),this.#n.onSettled?.(t.data,null,r,a,s)):t?.type==="error"&&(this.#n.onError?.(t.error,r,a,s),this.#n.onSettled?.(void 0,t.error,r,a,s))}this.listeners.forEach(r=>{r(this.#t)})})}},i$=class extends kp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,s=t.queryHash??d4(a,t);let i=this.get(s);return i||(i=new Zq({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ds.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>ZA(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>ZA(e,r)):t}notify(e){Ds.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ds.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ds.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l$=class{#e;#t;#r;#n;#a;#i;#l;#s;constructor(e={}){this.#e=e.queryCache||new i$,this.#t=e.mutationCache||new n$,this.#r=e.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=h4.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Sy.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(qf(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(a.queryHash)?.state.data,l=qq(t,i);if(l!==void 0)return this.#e.build(this,a).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return Ds.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ds.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ds.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=Ds.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(a).then(Xi).catch(Xi)}invalidateQueries(e,t={}){return Ds.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Ds.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Xi)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(Xi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(qf(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Xi).catch(Xi)}fetchInfiniteQuery(e){return e.behavior=sC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Xi).catch(Xi)}ensureInfiniteQueryData(e){return e.behavior=sC(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Sy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(lh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{fg(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#a.set(lh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{fg(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=d4(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===f4&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},jF=k.createContext(void 0),Tt=e=>{const t=k.useContext(jF);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},o$=({client:e,children:t})=>(k.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(jF.Provider,{value:e,children:t})),NF=k.createContext(!1),c$=()=>k.useContext(NF);NF.Provider;function u$(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var d$=k.createContext(u$()),f$=()=>k.useContext(d$),h$=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},m$=e=>{k.useEffect(()=>{e.clearReset()},[e])},p$=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||xF(r,[e.error,a])),x$=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>r(a(...s)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},g$=(e,t)=>e.isLoading&&e.isFetching&&!t,v$=(e,t)=>e?.suspense&&t.isPending,lC=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function y$(e,t,r){const a=c$(),s=f$(),i=Tt(),l=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=a?"isRestoring":"optimistic",x$(l),h$(l,s),m$(s);const o=!i.getQueryCache().get(l.queryHash),[d]=k.useState(()=>new t(i,l)),u=d.getOptimisticResult(l),f=!a&&e.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(m=>{const g=f?d.subscribe(Ds.batchCalls(m)):Xi;return d.updateResult(),g},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),k.useEffect(()=>{d.setOptions(l)},[l,d]),v$(l,u))throw lC(l,d,s);if(p$({result:u,errorResetBoundary:s,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(l,u),l.experimental_prefetchInRender&&!ih&&g$(u,a)&&(o?lC(l,d,s):i.getQueryCache().get(l.queryHash)?.promise)?.catch(Xi).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?u:d.trackResult(u)}function Ft(e,t){return y$(e,Jq)}function St(e,t){const r=Tt(),[a]=k.useState(()=>new s$(r,e));k.useEffect(()=>{a.setOptions(e)},[a,e]);const s=k.useSyncExternalStore(k.useCallback(l=>a.subscribe(Ds.batchCalls(l)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=k.useCallback((l,o)=>{a.mutate(l,o).catch(Xi)},[a]);if(s.error&&xF(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const b$="modulepreload",w$=function(e){return"/"+e},oC={},i5=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let d=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");s=d(r.map(u=>{if(u=w$(u),u in oC)return;oC[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":b$,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((x,b)=>{g.addEventListener("load",x),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};var j$=function(){return null};/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cC="popstate";function N$(e={}){function t(a,s){let{pathname:i,search:l,hash:o}=a.location;return ON("",{pathname:i,search:l,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){return typeof s=="string"?s:hg(s)}return S$(t,r,null,e)}function bn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _$(){return Math.random().toString(36).substring(2,10)}function uC(e,t){return{usr:e.state,key:e.key,idx:t}}function ON(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ap(t):t,state:r,key:t&&t.key||a||_$()}}function hg({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ap(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function S$(e,t,r,a={}){let{window:s=document.defaultView,v5Compat:i=!1}=a,l=s.history,o="POP",d=null,u=f();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function f(){return(l.state||{idx:null}).idx}function m(){o="POP";let y=f(),j=y==null?null:y-u;u=y,d&&d({action:o,location:v.location,delta:j})}function g(y,j){o="PUSH";let S=ON(v.location,y,j);u=f()+1;let N=uC(S,u),C=v.createHref(S);try{l.pushState(N,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(C)}i&&d&&d({action:o,location:v.location,delta:1})}function x(y,j){o="REPLACE";let S=ON(v.location,y,j);u=f();let N=uC(S,u),C=v.createHref(S);l.replaceState(N,"",C),i&&d&&d({action:o,location:v.location,delta:0})}function b(y){return k$(y)}let v={get action(){return o},get location(){return e(s,l)},listen(y){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(cC,m),d=y,()=>{s.removeEventListener(cC,m),d=null}},createHref(y){return t(s,y)},createURL:b,encodeLocation(y){let j=b(y);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:x,go(y){return l.go(y)}};return v}function k$(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),bn(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:hg(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function _F(e,t,r="/"){return A$(e,t,r,!1)}function A$(e,t,r,a){let s=typeof t=="string"?Ap(t):t,i=Ed(s.pathname||"/",r);if(i==null)return null;let l=SF(e);C$(l);let o=null;for(let d=0;o==null&&d<l.length;++d){let u=B$(i);o=R$(l[d],u,a)}return o}function SF(e,t=[],r=[],a="",s=!1){let i=(l,o,d=s,u)=>{let f={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(a)&&d)return;bn(f.relativePath.startsWith(a),`Absolute route path "${f.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(a.length)}let m=wd([a,f.relativePath]),g=r.concat(f);l.children&&l.children.length>0&&(bn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),SF(l.children,t,g,m,d)),!(l.path==null&&!l.index)&&t.push({path:m,score:M$(m,l.index),routesMeta:g})};return e.forEach((l,o)=>{if(l.path===""||!l.path?.includes("?"))i(l,o);else for(let d of kF(l.path))i(l,o,!0,d)}),t}function kF(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let l=kF(a.join("/")),o=[];return o.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&o.push(...l),o.map(d=>e.startsWith("/")&&d===""?"/":d)}function C$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:L$(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var E$=/^:[\w-]+$/,T$=3,D$=2,O$=1,F$=10,P$=-2,dC=e=>e==="*";function M$(e,t){let r=e.split("/"),a=r.length;return r.some(dC)&&(a+=P$),t&&(a+=D$),r.filter(s=>!dC(s)).reduce((s,i)=>s+(E$.test(i)?T$:i===""?O$:F$),a)}function L$(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function R$(e,t,r=!1){let{routesMeta:a}=e,s={},i="/",l=[];for(let o=0;o<a.length;++o){let d=a[o],u=o===a.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=ky({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),g=d.route;if(!m&&u&&r&&!a[a.length-1].route.index&&(m=ky({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:wd([i,m.pathname]),pathnameBase:$$(wd([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=wd([i,m.pathnameBase]))}return l}function ky(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=I$(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:a.reduce((u,{paramName:f,isOptional:m},g)=>{if(f==="*"){let b=o[g]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=o[g];return m&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:e}}function I$(e,t=!1,r=!0){Yo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,d)=>(a.push({paramName:o,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function B$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ed(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function z$(e,t="/"){let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?Ap(e):e;return{pathname:r?r.startsWith("/")?r:U$(r,t):t,search:H$(a),hash:V$(s)}}function U$(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function l5(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function q$(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function p4(e){let t=q$(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function x4(e,t,r,a=!1){let s;typeof e=="string"?s=Ap(e):(s={...e},bn(!s.pathname||!s.pathname.includes("?"),l5("?","pathname","search",s)),bn(!s.pathname||!s.pathname.includes("#"),l5("#","pathname","hash",s)),bn(!s.search||!s.search.includes("#"),l5("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,o;if(l==null)o=r;else{let m=t.length-1;if(!a&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}o=m>=0?t[m]:"/"}let d=z$(s,o),u=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}var wd=e=>e.join("/").replace(/\/\/+/g,"/"),$$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,V$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function W$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var AF=["POST","PUT","PATCH","DELETE"];new Set(AF);var K$=["GET",...AF];new Set(K$);var Cp=k.createContext(null);Cp.displayName="DataRouter";var Rb=k.createContext(null);Rb.displayName="DataRouterState";k.createContext(!1);var CF=k.createContext({isTransitioning:!1});CF.displayName="ViewTransition";var G$=k.createContext(new Map);G$.displayName="Fetchers";var Y$=k.createContext(null);Y$.displayName="Await";var Vc=k.createContext(null);Vc.displayName="Navigation";var Gg=k.createContext(null);Gg.displayName="Location";var Wc=k.createContext({outlet:null,matches:[],isDataRoute:!1});Wc.displayName="Route";var g4=k.createContext(null);g4.displayName="RouteError";function X$(e,{relative:t}={}){bn(Ep(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=k.useContext(Vc),{hash:s,pathname:i,search:l}=Yg(e,{relative:t}),o=i;return r!=="/"&&(o=i==="/"?r:wd([r,i])),a.createHref({pathname:o,search:l,hash:s})}function Ep(){return k.useContext(Gg)!=null}function Kc(){return bn(Ep(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Gg).location}var EF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TF(e){k.useContext(Vc).static||k.useLayoutEffect(e)}function $a(){let{isDataRoute:e}=k.useContext(Wc);return e?cH():Q$()}function Q$(){bn(Ep(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(Cp),{basename:t,navigator:r}=k.useContext(Vc),{matches:a}=k.useContext(Wc),{pathname:s}=Kc(),i=JSON.stringify(p4(a)),l=k.useRef(!1);return TF(()=>{l.current=!0}),k.useCallback((d,u={})=>{if(Yo(l.current,EF),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=x4(d,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:wd([t,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[t,r,i,s,e])}k.createContext(null);function xo(){let{matches:e}=k.useContext(Wc),t=e[e.length-1];return t?t.params:{}}function Yg(e,{relative:t}={}){let{matches:r}=k.useContext(Wc),{pathname:a}=Kc(),s=JSON.stringify(p4(r));return k.useMemo(()=>x4(e,JSON.parse(s),a,t==="path"),[e,s,a,t])}function Z$(e,t){return DF(e,t)}function DF(e,t,r,a,s){bn(Ep(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=k.useContext(Vc),{matches:l}=k.useContext(Wc),o=l[l.length-1],d=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",m=o&&o.route;{let S=m&&m.path||"";OF(u,!m||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=Kc(),x;if(t){let S=typeof t=="string"?Ap(t):t;bn(f==="/"||S.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),x=S}else x=g;let b=x.pathname||"/",v=b;if(f!=="/"){let S=f.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=_F(e,{pathname:v});Yo(m||y!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Yo(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=aH(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},d,S.params),pathname:wd([f,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:wd([f,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),l,r,a,s);return t&&j?k.createElement(Gg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},j):j}function J$(){let e=oH(),t=W$(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:i},"ErrorBoundary")," or"," ",k.createElement("code",{style:i},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),r?k.createElement("pre",{style:s},r):null,l)}var eH=k.createElement(J$,null),tH=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?k.createElement(Wc.Provider,{value:this.props.routeContext},k.createElement(g4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rH({routeContext:e,match:t,children:r}){let a=k.useContext(Cp);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Wc.Provider,{value:e},r)}function aH(e,t=[],r=null,a=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r?.errors;if(l!=null){let u=i.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);bn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,d=-1;if(r)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:m,errors:g}=r,x=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){o=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,f,m)=>{let g,x=!1,b=null,v=null;r&&(g=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||eH,o&&(d<0&&m===0?(OF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,v=null):d===m&&(x=!0,v=f.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,m+1)),j=()=>{let S;return g?S=b:x?S=v:f.route.Component?S=k.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,k.createElement(rH,{match:f,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?k.createElement(tH,{location:r.location,revalidation:r.revalidation,component:b,error:g,children:j(),routeContext:{outlet:null,matches:y,isDataRoute:!0},unstable_onError:a}):j()},null)}function v4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nH(e){let t=k.useContext(Cp);return bn(t,v4(e)),t}function sH(e){let t=k.useContext(Rb);return bn(t,v4(e)),t}function iH(e){let t=k.useContext(Wc);return bn(t,v4(e)),t}function y4(e){let t=iH(e),r=t.matches[t.matches.length-1];return bn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function lH(){return y4("useRouteId")}function oH(){let e=k.useContext(g4),t=sH("useRouteError"),r=y4("useRouteError");return e!==void 0?e:t.errors?.[r]}function cH(){let{router:e}=nH("useNavigate"),t=y4("useNavigate"),r=k.useRef(!1);return TF(()=>{r.current=!0}),k.useCallback(async(s,i={})=>{Yo(r.current,EF),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var fC={};function OF(e,t,r){!t&&!fC[e]&&(fC[e]=!0,Yo(!1,r))}k.memo(uH);function uH({routes:e,future:t,state:r,unstable_onError:a}){return DF(e,void 0,r,a,t)}function Gm({to:e,replace:t,state:r,relative:a}){bn(Ep(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=k.useContext(Vc);Yo(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=k.useContext(Wc),{pathname:l}=Kc(),o=$a(),d=x4(e,p4(i),l,a==="path"),u=JSON.stringify(d);return k.useEffect(()=>{o(JSON.parse(u),{replace:t,state:r,relative:a})},[o,u,a,t,r]),null}function jr(e){bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dH({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:s,static:i=!1}){bn(!Ep(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=k.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=Ap(r));let{pathname:d="/",search:u="",hash:f="",state:m=null,key:g="default"}=r,x=k.useMemo(()=>{let b=Ed(d,l);return b==null?null:{location:{pathname:b,search:u,hash:f,state:m,key:g},navigationType:a}},[l,d,u,f,m,g,a]);return Yo(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:k.createElement(Vc.Provider,{value:o},k.createElement(Gg.Provider,{children:t,value:x}))}function fH({children:e,location:t}){return Z$(FN(e),t)}function FN(e,t=[]){let r=[];return k.Children.forEach(e,(a,s)=>{if(!k.isValidElement(a))return;let i=[...t,s];if(a.type===k.Fragment){r.push.apply(r,FN(a.props.children,i));return}bn(a.type===jr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=FN(a.props.children,i)),r.push(l)}),r}var uy="get",dy="application/x-www-form-urlencoded";function Ib(e){return e!=null&&typeof e.tagName=="string"}function hH(e){return Ib(e)&&e.tagName.toLowerCase()==="button"}function mH(e){return Ib(e)&&e.tagName.toLowerCase()==="form"}function pH(e){return Ib(e)&&e.tagName.toLowerCase()==="input"}function xH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gH(e,t){return e.button===0&&(!t||t==="_self")&&!xH(e)}function PN(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(s=>[r,s]):[[r,a]])},[]))}function vH(e,t){let r=PN(e);return t&&t.forEach((a,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var w1=null;function yH(){if(w1===null)try{new FormData(document.createElement("form"),0),w1=!1}catch{w1=!0}return w1}var bH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o5(e){return e!=null&&!bH.has(e)?(Yo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dy}"`),null):e}function wH(e,t){let r,a,s,i,l;if(mH(e)){let o=e.getAttribute("action");a=o?Ed(o,t):null,r=e.getAttribute("method")||uy,s=o5(e.getAttribute("enctype"))||dy,i=new FormData(e)}else if(hH(e)||pH(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||o.getAttribute("action");if(a=d?Ed(d,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||uy,s=o5(e.getAttribute("formenctype"))||o5(o.getAttribute("enctype"))||dy,i=new FormData(o,e),!yH()){let{name:u,type:f,value:m}=e;if(f==="image"){let g=u?`${u}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else u&&i.append(u,m)}}else{if(Ib(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=uy,a=null,s=dy,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:a,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function b4(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jH(e,t,r){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&Ed(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function NH(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _H(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function SH(e,t,r){let a=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await NH(i,r);return l.links?l.links():[]}return[]}));return EH(a.flat(1).filter(_H).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function hC(e,t,r,a,s,i){let l=(d,u)=>r[u]?d.route.id!==r[u].route.id:!0,o=(d,u)=>r[u].pathname!==d.pathname||r[u].route.path?.endsWith("*")&&r[u].params["*"]!==d.params["*"];return i==="assets"?t.filter((d,u)=>l(d,u)||o(d,u)):i==="data"?t.filter((d,u)=>{let f=a.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,u)||o(d,u))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function kH(e,t,{includeHydrateFallback:r}={}){return AH(e.map(a=>{let s=t.routes[a.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function AH(e){return[...new Set(e)]}function CH(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function EH(e,t){let r=new Set;return new Set(t),e.reduce((a,s)=>{let i=JSON.stringify(CH(s));return r.has(i)||(r.add(i),a.push({key:i,link:s})),a},[])}function FF(){let e=k.useContext(Cp);return b4(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function TH(){let e=k.useContext(Rb);return b4(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var w4=k.createContext(void 0);w4.displayName="FrameworkContext";function PF(){let e=k.useContext(w4);return b4(e,"You must render this element inside a <HydratedRouter> element"),e}function DH(e,t){let r=k.useContext(w4),[a,s]=k.useState(!1),[i,l]=k.useState(!1),{onFocus:o,onBlur:d,onMouseEnter:u,onMouseLeave:f,onTouchStart:m}=t,g=k.useRef(null);k.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let v=j=>{j.forEach(S=>{l(S.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return g.current&&y.observe(g.current),()=>{y.disconnect()}}},[e]),k.useEffect(()=>{if(a){let v=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(v)}}},[a]);let x=()=>{s(!0)},b=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,g,{}]:[i,g,{onFocus:Fx(o,x),onBlur:Fx(d,b),onMouseEnter:Fx(u,x),onMouseLeave:Fx(f,b),onTouchStart:Fx(m,x)}]:[!1,g,{}]}function Fx(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function OH({page:e,...t}){let{router:r}=FF(),a=k.useMemo(()=>_F(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?k.createElement(PH,{page:e,matches:a,...t}):null}function FH(e){let{manifest:t,routeModules:r}=PF(),[a,s]=k.useState([]);return k.useEffect(()=>{let i=!1;return SH(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),a}function PH({page:e,matches:t,...r}){let a=Kc(),{manifest:s,routeModules:i}=PF(),{basename:l}=FF(),{loaderData:o,matches:d}=TH(),u=k.useMemo(()=>hC(e,t,d,s,a,"data"),[e,t,d,s,a]),f=k.useMemo(()=>hC(e,t,d,s,a,"assets"),[e,t,d,s,a]),m=k.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let b=new Set,v=!1;if(t.forEach(j=>{let S=s.routes[j.route.id];!S||!S.hasLoader||(!u.some(N=>N.route.id===j.route.id)&&j.route.id in o&&i[j.route.id]?.shouldRevalidate||S.hasClientLoader?v=!0:b.add(j.route.id))}),b.size===0)return[];let y=jH(e,l,"data");return v&&b.size>0&&y.searchParams.set("_routes",t.filter(j=>b.has(j.route.id)).map(j=>j.route.id).join(",")),[y.pathname+y.search]},[l,o,a,s,u,t,e,i]),g=k.useMemo(()=>kH(f,s),[f,s]),x=FH(f);return k.createElement(k.Fragment,null,m.map(b=>k.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),g.map(b=>k.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),x.map(({key:b,link:v})=>k.createElement("link",{key:b,nonce:r.nonce,...v})))}function MH(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var MF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MF&&(window.__reactRouterVersion="7.9.4")}catch{}function LH({basename:e,children:t,window:r}){let a=k.useRef();a.current==null&&(a.current=N$({window:r,v5Compat:!0}));let s=a.current,[i,l]=k.useState({action:s.action,location:s.location}),o=k.useCallback(d=>{k.startTransition(()=>l(d))},[l]);return k.useLayoutEffect(()=>s.listen(o),[s,o]),k.createElement(dH,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var LF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ml=k.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:s,reloadDocument:i,replace:l,state:o,target:d,to:u,preventScrollReset:f,viewTransition:m,...g},x){let{basename:b}=k.useContext(Vc),v=typeof u=="string"&&LF.test(u),y,j=!1;if(typeof u=="string"&&v&&(y=u,MF))try{let F=new URL(window.location.href),H=u.startsWith("//")?new URL(F.protocol+u):new URL(u),L=Ed(H.pathname,b);H.origin===F.origin&&L!=null?u=L+H.search+H.hash:j=!0}catch{Yo(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=X$(u,{relative:s}),[N,C,T]=DH(a,g),P=zH(u,{replace:l,state:o,target:d,preventScrollReset:f,relative:s,viewTransition:m});function D(F){t&&t(F),F.defaultPrevented||P(F)}let M=k.createElement("a",{...g,...T,href:y||S,onClick:j||i?t:D,ref:MH(x,C),target:d,"data-discover":!v&&r==="render"?"true":void 0});return N&&!v?k.createElement(k.Fragment,null,M,k.createElement(OH,{page:S})):M});Ml.displayName="Link";var RH=k.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:s=!1,style:i,to:l,viewTransition:o,children:d,...u},f){let m=Yg(l,{relative:u.relative}),g=Kc(),x=k.useContext(Rb),{navigator:b,basename:v}=k.useContext(Vc),y=x!=null&&VH(m)&&o===!0,j=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,S=g.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(S=S.toLowerCase(),N=N?N.toLowerCase():null,j=j.toLowerCase()),N&&v&&(N=Ed(N,v)||N);const C=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let T=S===j||!s&&S.startsWith(j)&&S.charAt(C)==="/",P=N!=null&&(N===j||!s&&N.startsWith(j)&&N.charAt(j.length)==="/"),D={isActive:T,isPending:P,isTransitioning:y},M=T?t:void 0,F;typeof a=="function"?F=a(D):F=[a,T?"active":null,P?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let H=typeof i=="function"?i(D):i;return k.createElement(Ml,{...u,"aria-current":M,className:F,ref:f,style:H,to:l,viewTransition:o},typeof d=="function"?d(D):d)});RH.displayName="NavLink";var IH=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:s,state:i,method:l=uy,action:o,onSubmit:d,relative:u,preventScrollReset:f,viewTransition:m,...g},x)=>{let b=$H(),v=HH(o,{relative:u}),y=l.toLowerCase()==="get"?"get":"post",j=typeof o=="string"&&LF.test(o),S=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let C=N.nativeEvent.submitter,T=C?.getAttribute("formmethod")||l;b(C||N.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:i,relative:u,preventScrollReset:f,viewTransition:m})};return k.createElement("form",{ref:x,method:y,action:v,onSubmit:a?d:S,...g,"data-discover":!j&&e==="render"?"true":void 0})});IH.displayName="Form";function BH(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RF(e){let t=k.useContext(Cp);return bn(t,BH(e)),t}function zH(e,{target:t,replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:l}={}){let o=$a(),d=Kc(),u=Yg(e,{relative:i});return k.useCallback(f=>{if(gH(f,t)){f.preventDefault();let m=r!==void 0?r:hg(d)===hg(u);o(e,{replace:m,state:a,preventScrollReset:s,relative:i,viewTransition:l})}},[d,o,u,r,a,t,e,s,i,l])}function IF(e){Yo(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=k.useRef(PN(e)),r=k.useRef(!1),a=Kc(),s=k.useMemo(()=>vH(a.search,r.current?null:t.current),[a.search]),i=$a(),l=k.useCallback((o,d)=>{const u=PN(typeof o=="function"?o(new URLSearchParams(s)):o);r.current=!0,i("?"+u,d)},[i,s]);return[s,l]}var UH=0,qH=()=>`__${String(++UH)}__`;function $H(){let{router:e}=RF("useSubmit"),{basename:t}=k.useContext(Vc),r=lH();return k.useCallback(async(a,s={})=>{let{action:i,method:l,encType:o,formData:d,body:u}=wH(a,t);if(s.navigate===!1){let f=s.fetcherKey||qH();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:u,formMethod:s.method||l,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:u,formMethod:s.method||l,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function HH(e,{relative:t}={}){let{basename:r}=k.useContext(Vc),a=k.useContext(Wc);bn(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i={...Yg(e||".",{relative:t})},l=Kc();if(e==null){i.search=l.search;let o=new URLSearchParams(i.search),d=o.getAll("index");if(d.some(f=>f==="")){o.delete("index"),d.filter(m=>m).forEach(m=>o.append("index",m));let f=o.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:wd([r,i.pathname])),hg(i)}function VH(e,{relative:t}={}){let r=k.useContext(CF);bn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=RF("useViewTransitionState"),s=Yg(e,{relative:t});if(!r.isTransitioning)return!1;let i=Ed(r.currentLocation.pathname,a)||r.currentLocation.pathname,l=Ed(r.nextLocation.pathname,a)||r.nextLocation.pathname;return ky(s.pathname,l)!=null||ky(s.pathname,i)!=null}var BF=fF();const WH="http://localhost:3001/api",j1="auth_token",N1="current_user",_1="user_permissions";class Em extends Error{status;code;constructor(t,r,a){super(t),this.name="ApiError",this.status=r,this.code=a}}const Yi={getToken:()=>localStorage.getItem(j1),setToken:e=>{localStorage.setItem(j1,e)},removeToken:()=>{localStorage.removeItem(j1)},getUser:()=>{const e=localStorage.getItem(N1);if(e)try{return JSON.parse(e)}catch{return null}return null},setUser:e=>{localStorage.setItem(N1,JSON.stringify(e))},removeUser:()=>{localStorage.removeItem(N1)},getPermissions:()=>{const e=localStorage.getItem(_1);if(e)try{return JSON.parse(e)}catch{return[]}return[]},setPermissions:e=>{localStorage.setItem(_1,JSON.stringify(e))},removePermissions:()=>{localStorage.removeItem(_1)},clearAll:()=>{localStorage.removeItem(j1),localStorage.removeItem(N1),localStorage.removeItem(_1)},hasPermission:e=>{if(Yi.getUser()?.role==="admin")return!0;const r=Yi.getPermissions();return r.includes(e)||r.includes("*")},hasAnyPermission:(...e)=>e.some(t=>Yi.hasPermission(t)),hasAllPermissions:(...e)=>e.every(t=>Yi.hasPermission(t))};class KH{baseURL;constructor(t){this.baseURL=t}async request(t,r={}){const{params:a,skipAuth:s,...i}=r;let l=`${this.baseURL}${t}`;if(a){const u=new URLSearchParams(a).toString();l+=`?${u}`}const d=i.body instanceof FormData?{...i.headers}:{"Content-Type":"application/json",...i.headers};if(!s){const u=Yi.getToken();u&&(d.Authorization=`Bearer ${u}`)}try{const u=await fetch(l,{...i,headers:d});if(u.status===401){const m=await u.json().catch(()=>({}));throw(m.code==="TOKEN_EXPIRED"||m.code==="INVALID_TOKEN")&&(Yi.clearAll(),window.dispatchEvent(new CustomEvent("auth:token-expired"))),new Em(m.error||"Authentication required",u.status,m.code)}if(u.status===403){const m=await u.json().catch(()=>({}));throw new Em(m.error||"Permission denied",u.status,m.code||"FORBIDDEN")}if(!u.ok){const m=await u.json().catch(()=>({}));throw new Em(m.error||m.message||"Une erreur est survenue",u.status,m.code)}return await u.json()}catch(u){throw u instanceof Em?u:u instanceof Error?new Em(`Erreur de connexion: ${u.message}`,void 0,"NETWORK_ERROR"):new Em("Une erreur inconnue est survenue")}}async get(t,r){return this.request(t,{method:"GET",params:r})}async post(t,r,a){const s=r instanceof FormData?r:JSON.stringify(r);return this.request(t,{method:"POST",body:s,skipAuth:a?.skipAuth})}async put(t,r){const a=r instanceof FormData?r:JSON.stringify(r);return this.request(t,{method:"PUT",body:a})}async patch(t,r){const a=r instanceof FormData?r:JSON.stringify(r);return this.request(t,{method:"PATCH",body:a})}async delete(t){return this.request(t,{method:"DELETE"})}}const Ce=new KH(WH),mC={async login(e,t){return await Ce.post("/auth/login",{username:e,password:t},{skipAuth:!0})},async getCurrentUser(){return Ce.get("/auth/me")},async refreshToken(){return Ce.post("/auth/refresh",{})},async logout(){return Ce.post("/auth/logout",{})},async changePassword(e,t){return Ce.post("/auth/change-password",{currentPassword:e,newPassword:t})}},zF=k.createContext(void 0),GH=({children:e})=>{const[t,r]=k.useState(null),[a,s]=k.useState([]),[i,l]=k.useState(!0);k.useEffect(()=>{(()=>{const v=Yi.getUser(),y=Yi.getToken(),j=Yi.getPermissions();v&&y&&(r(v),s(j)),l(!1)})()},[]),k.useEffect(()=>{const b=()=>{console.warn("Token expired, logging out..."),r(null),s([])};return window.addEventListener("auth:token-expired",b),()=>{window.removeEventListener("auth:token-expired",b)}},[]);const o=async(b,v)=>{try{const y=await mC.login(b,v);y.token&&Yi.setToken(y.token);const j=y.user||y;Yi.setUser(j),r(j);const S=y.permissions||[];return Yi.setPermissions(S),s(S),!0}catch(y){return console.error("Erreur de connexion:",y),!1}},d=()=>{r(null),s([]),Yi.clearAll()},u=async()=>{try{const b=await mC.getCurrentUser();b.user&&(Yi.setUser(b.user),r(b.user)),b.permissions&&(Yi.setPermissions(b.permissions),s(b.permissions))}catch(b){console.error("Error refreshing user:",b)}},f=b=>t?.role==="admin"?!0:a.includes(b)||a.includes("*"),m=(...b)=>b.some(v=>f(v)),g=t?.role==="admin",x=t?.role==="gerant";return n.jsx(zF.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:i,login:o,logout:d,isAdmin:g,isGerant:x,permissions:a,hasPermission:f,hasAnyPermission:m,refreshUser:u},children:e})},jn=()=>{const e=k.useContext(zF);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function t0(...e){return e.filter(Boolean).join(" ")}const Ye=k.forwardRef(({className:e,variant:t="default",size:r="default",...a},s)=>{const i="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",l={default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"underline-offset-4 hover:underline text-blue-600"},o={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"};return n.jsx("button",{className:t0(i,l[t],o[r],e),ref:s,...a})});Ye.displayName="Button";const xr=k.forwardRef(({className:e,type:t,...r},a)=>n.jsx("input",{type:t,className:t0("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));xr.displayName="Input";const Or=k.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:t0("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm",e),...t}));Or.displayName="Card";const Ic=k.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:t0("flex flex-col space-y-1.5 p-6",e),...t}));Ic.displayName="CardHeader";const Bc=k.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:t0("text-2xl font-semibold leading-none tracking-tight",e),...t}));Bc.displayName="CardTitle";const UF=k.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:t0("text-sm text-gray-500",e),...t}));UF.displayName="CardDescription";const Fr=k.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:t0("p-6 pt-0",e),...t}));Fr.displayName="CardContent";const YH=k.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:t0("flex items-center p-6 pt-0",e),...t}));YH.displayName="CardFooter";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QH=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),pC=e=>{const t=QH(e);return t.charAt(0).toUpperCase()+t.slice(1)},qF=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),ZH=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:l,...o},d)=>k.createElement("svg",{ref:d,...JH,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:qF("lucide",s),...!i&&!ZH(o)&&{"aria-hidden":"true"},...o},[...l.map(([u,f])=>k.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(e,t)=>{const r=k.forwardRef(({className:a,...s},i)=>k.createElement(eV,{ref:i,iconNode:t,className:qF(`lucide-${XH(pC(e))}`,`lucide-${e}`,a),...s}));return r.displayName=pC(e),r};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],$F=ut("activity",tV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],aV=ut("arrow-down",rV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xo=ut("arrow-left",nV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],iV=ut("arrow-up",sV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],oV=ut("at-sign",lV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Fn=ut("award",cV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],dV=ut("bold",uV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wa=ut("book-open",fV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],mV=ut("box",hV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],mg=ut("briefcase",pV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],gV=ut("building-2",xV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]],yV=ut("cake",vV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Eu=ut("calculator",bV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],j4=ut("calendar-check",wV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],ku=ut("calendar-days",jV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],xC=ut("calendar-range",NV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ba=ut("calendar",_V);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],kV=ut("camera",SV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],pg=ut("chart-column",AV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oh=ut("check",CV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Au=ut("chevron-down",EV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],N4=ut("chevron-left",TV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rl=ut("chevron-right",DV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],HF=ut("chevron-up",OV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nr=ut("circle-alert",FV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Xr=ut("circle-check-big",PV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],VF=ut("circle-check",MV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pc=ut("circle-play",LV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],IV=ut("circle-user",RV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fo=ut("circle-x",BV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UV=ut("circle",zV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Ay=ut("clipboard-check",qV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],MN=ut("clipboard-list",$V);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],na=ut("clock",HV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Dl=ut("copy",VV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],WF=ut("credit-card",WV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],gC=ut("database",KV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jd=ut("dollar-sign",GV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ps=ut("download",YV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],QV=ut("ellipsis-vertical",XV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Bb=ut("external-link",ZV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ji=ut("eye-off",JV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pi=ut("eye",eW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],cp=ut("file-check",tW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],S1=ut("file-down",rW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Cy=ut("file-plus",aW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Nd=ut("file-question-mark",nW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],up=ut("file-spreadsheet",sW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fa=ut("file-text",iW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vC=ut("file-warning",lW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],KF=ut("folder-open",oW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=[["path",{d:"M2 11.5V5a2 2 0 0 1 2-2h3.9c.7 0 1.3.3 1.7.9l.8 1.2c.4.6 1 .9 1.7.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5",key:"a8xqs0"}],["path",{d:"M11.378 13.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1saktj"}]],uW=ut("folder-pen",cW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],yC=ut("folder-plus",dW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ch=ut("folder",fW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Tp=ut("funnel",hW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],_4=ut("graduation-cap",mW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],S4=ut("grid-3x3",pW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],Xx=ut("hard-hat",xW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],zb=ut("hash",gW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ym=ut("house",vW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Qx=ut("image",yW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bW=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],wW=ut("italic",bW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],NW=ut("key-round",jW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],bC=ut("key",_W);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SW=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],dp=ut("layers",SW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kW=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],AW=ut("lightbulb",kW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CW=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],xg=ut("link",CW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],GF=ut("list",EW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],c5=ut("loader-circle",TW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],OW=ut("lock-open",DW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fp=ut("lock",FW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PW=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],YF=ut("log-out",PW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],XF=ut("mail",MW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ns=ut("map-pin",LW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],IW=ut("menu",RW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],zW=ut("message-circle",BW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],as=ut("message-square",UW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ey=ut("minus",qW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Zx=ut("package",$W);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ub=ut("palette",HW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],WW=ut("paperclip",VW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ah=ut("pen-line",KW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],hp=ut("pen",GW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],XW=ut("percent",YW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Jx=ut("phone",QW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],k4=ut("pin",ZW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Jr=ut("plus",JW);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],tK=ut("receipt",eK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],aK=ut("refresh-cw",rK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Td=ut("save",nK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ou=ut("search",sK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xm=ut("send",iK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xg=ut("settings",lK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wC=ut("shield-check",oK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],jC=ut("shield-x",cK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],X0=ut("shield",uK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],fK=ut("sliders-vertical",dK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],NC=ut("square-check-big",hK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mc=ut("square-pen",mK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],LN=ut("square",pK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],gK=ut("star",xK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],qb=ut("tag",vK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],bK=ut("text-align-center",yK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],jK=ut("text-align-end",wK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],QF=ut("text-align-start",NK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],SK=ut("thumbs-up",_K);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Pr=ut("trash-2",kK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ll=ut("trending-up",AK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],co=ut("triangle-alert",CK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],TK=ut("truck",EK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Qm=ut("type",DK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],zc=ut("upload",OK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],RN=ut("user-check",FK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ZF=ut("user-plus",PK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],il=ut("user",MK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ya=ut("users",LK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],gg=ut("video",RK);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mr=ut("x",IK),Tm=[{url:"https://images.unsplash.com/photo-1581092160562-40aa08e78837?auto=format&fit=crop&w=1200&q=80",caption:"Oprateur de chariot lvateur"},{url:"https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?auto=format&fit=crop&w=1200&q=80",caption:"Gestion des engins de chantier"},{url:"https://images.unsplash.com/photo-1581092162384-8987c1d64718?auto=format&fit=crop&w=1200&q=80",caption:"Manutention professionnelle"},{url:"https://images.unsplash.com/photo-1513828583688-c52646db42da?auto=format&fit=crop&w=1200&q=80",caption:"quipe de travaux"}],BK=()=>{const[e,t]=k.useState(""),[r,a]=k.useState(""),[s,i]=k.useState(""),[l,o]=k.useState(!1),[d,u]=k.useState(0),[f,m]=k.useState(!1),{login:g}=jn(),x=$a();k.useEffect(()=>{const j=setInterval(()=>{u(S=>S===Tm.length-1?0:S+1)},4e3);return()=>clearInterval(j)},[]);const b=async j=>{j.preventDefault(),i(""),o(!0),await g(e,r)?x("/dashboard"):i("Nom d'utilisateur ou mot de passe incorrect"),o(!1)},v=()=>{u(j=>j===0?Tm.length-1:j-1)},y=()=>{u(j=>j===Tm.length-1?0:j+1)};return n.jsxs("div",{className:"min-h-screen flex",children:[n.jsx("div",{className:"hidden lg:flex lg:w-1/2 relative bg-gradient-to-br from-orange-600 to-blue-900 overflow-hidden",children:n.jsxs("div",{className:"relative w-full h-full",children:[Tm.map((j,S)=>n.jsxs("div",{className:`absolute inset-0 transition-opacity duration-1000 ${S===d?"opacity-100":"opacity-0"}`,children:[n.jsx("img",{src:j.url,alt:j.caption,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"})]},S)),n.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-12 text-white z-10",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Xx,{className:"w-12 h-12"}),n.jsxs("h1",{className:"text-4xl font-bold",children:["Systme de Gestion",n.jsx("br",{}),"Comptable"]})]}),n.jsx("p",{className:"text-xl text-gray-200 max-w-md",children:"Solution professionnelle pour la gestion des dclarations de sessions"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("p",{className:"text-lg font-medium text-gray-100",children:Tm[d].caption})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:v,className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors backdrop-blur-sm","aria-label":"Image prcdente",children:n.jsx(N4,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex gap-2",children:Tm.map((j,S)=>n.jsx("button",{onClick:()=>u(S),className:`h-2 rounded-full transition-all ${S===d?"w-8 bg-white":"w-2 bg-white/50 hover:bg-white/70"}`,"aria-label":`Aller  l'image ${S+1}`},S))}),n.jsx("button",{onClick:y,className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors backdrop-blur-sm","aria-label":"Image suivante",children:n.jsx(rl,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"mt-8 flex flex-wrap gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-full bg-white/10 backdrop-blur-sm",children:[n.jsx(TK,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Engins de chantier"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-full bg-white/10 backdrop-blur-sm",children:[n.jsx(Ya,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Gestion d'quipes"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-full bg-white/10 backdrop-blur-sm",children:[n.jsx(Xx,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Manutention"})]})]})]})]})}),n.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"lg:hidden mb-8 text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[n.jsx(Xx,{className:"w-10 h-10 text-orange-600"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion Comptable"})]}),n.jsx("p",{className:"text-gray-600",children:"Solution pour vos dclarations de sessions"})]}),n.jsxs(Or,{className:"shadow-xl border-0",children:[n.jsxs(Ic,{className:"space-y-1 pb-6",children:[n.jsx(Bc,{className:"text-2xl font-bold text-center text-gray-900",children:"Connexion"}),n.jsx(UF,{className:"text-center text-gray-600",children:"Accdez  votre espace personnel"})]}),n.jsxs(Fr,{children:[n.jsxs("form",{onSubmit:b,className:"space-y-5",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"username",className:"text-sm font-medium text-gray-700",children:"Nom d'utilisateur"}),n.jsx(xr,{id:"username",type:"text",placeholder:"Votre identifiant",value:e,onChange:j=>t(j.target.value),required:!0,className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Mot de passe"}),n.jsxs("div",{className:"relative",children:[n.jsx(xr,{id:"password",type:f?"text":"password",placeholder:"Votre mot de passe",value:r,onChange:j=>a(j.target.value),required:!0,className:"h-11 pr-10"}),n.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors","aria-label":f?"Masquer le mot de passe":"Afficher le mot de passe",children:f?n.jsx(Ji,{className:"w-5 h-5"}):n.jsx(pi,{className:"w-5 h-5"})})]})]}),s&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-3 rounded-lg text-sm flex items-start gap-2",children:[n.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),n.jsx("span",{children:s})]}),n.jsx(Ye,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600 text-white font-medium shadow-lg",disabled:l,children:l?n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connexion..."]}):"Se connecter"})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-sm text-gray-500",children:[n.jsx("p",{children:" 2025 Systme de Gestion Comptable"}),n.jsx("p",{className:"mt-1",children:"Tous droits rservs"})]})]})]})]})})]})},zK=({className:e=""})=>{const[t,r]=k.useState(!1),[a,s]=k.useState(["gestion-comptable","formation-en-ligne"]),{user:i,isAdmin:l,isGerant:o,logout:d}=jn(),u=$a(),f=Kc(),m=()=>{d(),u("/login"),r(!1)},g=N=>{s(C=>C.includes(N)?C.filter(T=>T!==N):[...C,N])},x=[{id:"gestion-comptable",title:"Gestion Comptable",icon:Eu,items:[{to:"/dashboard",icon:Ym,label:"Tableau de bord"},{to:"/admin/segments",icon:Eu,label:"Segments"},{to:"/admin/cities",icon:ns,label:"Villes"},{to:"/admin/users",icon:Ya,label:"Utilisateurs"},{to:"/admin/calculation-sheets",icon:up,label:"Fiches de calcul"},{to:"/admin/create-declaration",icon:Cy,label:"Crer dclaration"},{to:"/admin/declarations",icon:Ay,label:"Grer dclarations"}]},{id:"formation-en-ligne",title:"Formation en Ligne",icon:_4,items:[{to:"/admin/formations-management",icon:wa,label:"Gestion des Formations"},{to:"/admin/sessions-formation",icon:j4,label:"Sessions de Formation"},{to:"/admin/analytics",icon:pg,label:"Analytics"},{to:"/admin/student-reports",icon:Fa,label:"Rapports tudiants"},{to:"/admin/certificates",icon:Fn,label:"Certificats"},{to:"/admin/certificate-templates",icon:Ub,label:"Templates de Certificats"},{to:"/admin/forums",icon:as,label:"Forums"}]}],b=[{to:"/dashboard",icon:Ym,label:"Tableau de bord"},{to:"/professor/declarations",icon:GF,label:"Mes dclarations"}],v=[{to:"/dashboard",icon:Ym,label:"Tableau de bord"},{to:"/gerant/view-declarations",icon:Ay,label:"Voir dclarations"}],y=l?x:[],j=l?[]:o?v:b,S=N=>f.pathname===N;return n.jsxs(n.Fragment,{children:[n.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>r(!0),className:`lg:hidden ${e}`,"aria-label":"Open menu",children:n.jsx(IW,{className:"h-6 w-6"})}),t&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>r(!1)}),n.jsxs("div",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out lg:hidden ${t?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Menu"}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>r(!1),"aria-label":"Close menu",children:n.jsx(Mr,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800",children:i?.full_name||i?.username}),n.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i?.role})]}),n.jsxs("nav",{className:"flex flex-col p-2 space-y-2 overflow-y-auto flex-1",children:[y.map(N=>{const C=a.includes(N.id),T=N.icon;return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("button",{onClick:()=>g(N.id),className:"w-full flex items-center justify-between px-3 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(T,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{children:N.title})]}),C?n.jsx(HF,{className:"h-4 w-4 text-gray-400"}):n.jsx(Au,{className:"h-4 w-4 text-gray-400"})]}),C&&n.jsx("div",{className:"ml-6 space-y-0.5",children:N.items.map(P=>{const D=P.icon,M=S(P.to);return n.jsxs(Ml,{to:P.to,onClick:()=>r(!1),className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${M?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[n.jsx(D,{className:`h-4 w-4 ${M?"text-blue-600":"text-gray-400"}`}),n.jsx("span",{children:P.label})]},P.to)})})]},N.id)}),j.map(N=>n.jsxs(Ml,{to:N.to,onClick:()=>r(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg text-sm transition-colors ${S(N.to)?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-100"}`,children:[n.jsx(N.icon,{className:`h-5 w-5 ${S(N.to)?"text-blue-600":"text-gray-400"}`}),n.jsx("span",{className:"font-medium",children:N.label})]},N.to))]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t bg-white",children:n.jsxs(Ye,{onClick:m,variant:"outline",className:"w-full flex items-center justify-center gap-2",children:[n.jsx(YF,{className:"h-4 w-4"}),"Dconnexion"]})})]})]})},UK=({title:e,subtitle:t})=>{const{user:r,logout:a}=jn(),s=$a(),i=()=>{a(),s("/login")};return n.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-30",children:n.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[n.jsx(zK,{}),n.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[n.jsx(Xx,{className:"h-6 w-6 sm:h-7 sm:w-7 text-orange-600"}),n.jsx("span",{className:"text-lg sm:text-xl font-bold text-gray-800",children:"Comptabilit PL"})]}),e&&n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h1",{className:"text-base sm:text-lg lg:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:e}),t&&n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 hidden sm:block",children:t})]})]}),n.jsxs("div",{className:"hidden lg:flex items-center gap-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800",children:r?.full_name||r?.username}),n.jsx("p",{className:"text-xs text-gray-500 capitalize",children:r?.role})]}),n.jsxs(Ye,{onClick:i,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(YF,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Dconnexion"})]})]}),!e&&n.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[n.jsx(Xx,{className:"h-6 w-6 text-orange-600"}),n.jsx("span",{className:"text-base font-bold text-gray-800",children:"Comptabilit PL"})]})]})})})},qK=()=>{const e=Kc(),{hasPermission:t}=jn(),[r,a]=k.useState(["gestion-comptable","formation-en-ligne","ressources-humaines"]),s=d=>{a(u=>u.includes(d)?u.filter(f=>f!==d):[...u,d])},l=[{id:"gestion-comptable",title:"Gestion Comptable",icon:Eu,items:[{to:"/dashboard",icon:Ym,label:"Tableau de bord",permission:"accounting.dashboard.view_page"},{to:"/admin/segments",icon:Eu,label:"Segments",permission:"accounting.segments.view_page"},{to:"/admin/cities",icon:ns,label:"Villes",permission:"accounting.cities.view_page"},{to:"/admin/users",icon:Ya,label:"Utilisateurs",permission:"accounting.users.view_page"},{to:"/admin/roles",icon:X0,label:"Rles & Permissions",permission:"accounting.roles.view_page"},{to:"/admin/calculation-sheets",icon:up,label:"Fiches de calcul",permission:"accounting.calculation_sheets.view_page"},{to:"/admin/create-declaration",icon:Cy,label:"Crer dclaration",permission:"accounting.create_declaration.view_page"},{to:"/admin/declarations",icon:Ay,label:"Grer dclarations",permission:"accounting.declarations.view_page"}]},{id:"formation-en-ligne",title:"Formation en Ligne",icon:_4,items:[{to:"/admin/formations-management",icon:wa,label:"Gestion des Formations",permission:"training.formations.view_page"},{to:"/admin/sessions-formation",icon:j4,label:"Sessions de Formation",permission:"training.sessions.view_page"},{to:"/admin/analytics",icon:pg,label:"Analytics",permission:"training.analytics.view_page"},{to:"/admin/student-reports",icon:Fa,label:"Rapports tudiants",permission:"training.student_reports.view_page"},{to:"/admin/certificates",icon:Fn,label:"Certificats",permission:"training.certificates.view_page"},{to:"/admin/certificate-templates",icon:Ub,label:"Templates de Certificats",permission:"training.certificate_templates.view_page"},{to:"/admin/forums",icon:as,label:"Forums",permission:"training.forums.view_page"}]},{id:"ressources-humaines",title:"Ressources Humaines",icon:mg,items:[{to:"/admin/hr/employees",icon:RN,label:"Dossiers du Personnel",permission:"hr.employees.view_page"},{to:"/admin/hr/attendance",icon:na,label:"Temps & Prsence",permission:"hr.attendance.view_page"},{to:"/admin/hr/leaves",icon:ku,label:"Congs & Planning",permission:"hr.leaves.view_page"},{to:"/admin/hr/dashboard",icon:pg,label:"Tableau de bord RH",permission:"hr.dashboard.view_page"},{to:"/admin/hr/settings",icon:Xg,label:"Paramtres RH",permission:"hr.settings.view_page"}]}].map(d=>({...d,items:d.items.filter(u=>!u.permission||t(u.permission))})).filter(d=>d.items.length>0),o=d=>e.pathname===d;return n.jsxs("aside",{className:"hidden lg:flex lg:flex-col lg:w-72 bg-white border-r border-gray-200 h-[calc(100vh-64px)] sticky top-16 overflow-y-auto",children:[n.jsx("nav",{className:"flex-1 px-3 py-4 space-y-2",children:l.map(d=>{const u=r.includes(d.id),f=d.icon;return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("button",{onClick:()=>s(d.id),className:"w-full flex items-center justify-between px-3 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50 rounded-lg transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(f,{className:"h-5 w-5 text-gray-600 group-hover:text-blue-600"}),n.jsx("span",{className:"group-hover:text-blue-600",children:d.title})]}),u?n.jsx(HF,{className:"h-4 w-4 text-gray-400"}):n.jsx(Au,{className:"h-4 w-4 text-gray-400"})]}),u&&n.jsx("div",{className:"ml-3 space-y-0.5 border-l-2 border-gray-200 pl-3",children:d.items.map(m=>{const g=m.icon,x=o(m.to);return n.jsxs(Ml,{to:m.to,className:`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-all ${x?"bg-blue-50 text-blue-700 font-medium border-l-2 border-blue-600 -ml-[2px]":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[n.jsx(g,{className:`h-4 w-4 ${x?"text-blue-600":"text-gray-400"}`}),n.jsx("span",{children:m.label})]},m.to)})})]},d.id)})}),n.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:n.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Comptabilit PL  2025"})})]})},Ut=({children:e,title:t,subtitle:r})=>n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(UK,{title:t,subtitle:r}),n.jsxs("div",{className:"flex",children:[n.jsx(qK,{}),n.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})]});function $K(){return Ft({queryKey:["dashboard-stats"],queryFn:async()=>Ce.get("/admin/dashboard-stats"),refetchInterval:3e4})}const HK=()=>{const{data:e,isLoading:t,error:r}=$K();if(t)return n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(r||!e)return n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-red-800",children:"Erreur lors du chargement des statistiques"})});const{statusStats:a,alerts:s,metrics:i,rankings:l}=e;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistiques Rapides"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow-sm p-4 border border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Fiches"}),n.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:a.total})]}),n.jsx(Fa,{className:"w-10 h-10 text-blue-500 opacity-50"})]})}),n.jsx("div",{className:`rounded-lg shadow-sm p-4 border ${a.soumise>5?"bg-gradient-to-br from-red-50 to-red-100 border-red-300 animate-pulse":"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:`text-sm font-medium ${a.soumise>5?"text-red-600":"text-blue-600"}`,children:"Soumises"}),n.jsx("p",{className:`text-3xl font-bold mt-1 ${a.soumise>5?"text-red-900":"text-blue-900"}`,children:a.soumise}),a.soumise>5&&n.jsx("p",{className:"text-xs text-red-700 mt-1",children:"  traiter rapidement"})]}),n.jsx(Xm,{className:`w-10 h-10 opacity-50 ${a.soumise>5?"text-red-500":"text-blue-500"}`})]})}),n.jsx("div",{className:`rounded-lg shadow-sm p-4 border ${a.a_declarer>3?"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-300 animate-pulse":"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-orange-600",children:" dclarer"}),n.jsx("p",{className:"text-3xl font-bold text-orange-900 mt-1",children:a.a_declarer}),a.a_declarer>3&&n.jsx("p",{className:"text-xs text-orange-700 mt-1",children:" Attente prof"})]}),n.jsx(Nr,{className:"w-10 h-10 text-orange-500 opacity-50"})]})}),n.jsx("div",{className:`rounded-lg shadow-sm p-4 border ${s.expired.total>0?"bg-gradient-to-br from-red-50 to-red-100 border-red-300":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:`text-sm font-medium ${s.expired.total>0?"text-red-600":"text-gray-600"}`,children:"Expires"}),n.jsx("p",{className:`text-3xl font-bold mt-1 ${s.expired.total>0?"text-red-900":"text-gray-900"}`,children:s.expired.total}),s.expired.critical>0&&n.jsxs("p",{className:"text-xs text-red-700 mt-1",children:[" ",s.expired.critical," critique"]})]}),n.jsx(vC,{className:`w-10 h-10 opacity-50 ${s.expired.total>0?"text-red-500":"text-gray-400"}`})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow-sm p-4 border border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-600",children:"Revenus Total"}),n.jsxs("p",{className:"text-2xl font-bold text-green-900 mt-1",children:[new Intl.NumberFormat("fr-FR").format(i.totalRevenue)," MAD"]})]}),n.jsx(jd,{className:"w-10 h-10 text-green-500 opacity-50"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow-sm p-4 border border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Dlai Moyen"}),n.jsxs("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:[i.avgProcessingTime,n.jsx("span",{className:"text-lg ml-1",children:"j"})]}),n.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"de traitement"})]}),n.jsx(na,{className:"w-10 h-10 text-purple-500 opacity-50"})]})})]})]}),(a.soumise>0||s.expired.total>0||s.expiring>0||s.lateProcessing>0)&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Alertes Urgentes"}),n.jsxs("div",{className:"space-y-3",children:[a.soumise>0&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-r-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xm,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),n.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[a.soumise," dclaration",a.soumise>1?"s":""," soumise",a.soumise>1?"s":"","  traiter"]})]})}),s.expired.critical>0&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 rounded-r-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(co,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),n.jsxs("p",{className:"text-sm font-medium text-red-900",children:[" ",s.expired.critical," dclaration",s.expired.critical>1?"s":""," expire",s.expired.critical>1?"s":""," depuis > 30 jours (CRITIQUE)"]})]})}),s.expired.warning>0&&n.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-r-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-orange-600 flex-shrink-0"}),n.jsxs("p",{className:"text-sm font-medium text-orange-900",children:[" ",s.expired.warning," dclaration",s.expired.warning>1?"s":""," expire",s.expired.warning>1?"s":""," depuis 7-30 jours"]})]})}),s.expiring>0&&n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-r-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(na,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),n.jsxs("p",{className:"text-sm font-medium text-yellow-900",children:[" ",s.expiring," dclaration",s.expiring>1?"s":""," arrivant  chance dans 7 jours"]})]})}),s.lateProcessing>0&&n.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-600 rounded-r-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(vC,{className:"w-5 h-5 text-orange-600 flex-shrink-0"}),n.jsxs("p",{className:"text-sm font-medium text-orange-900",children:[" ",s.lateProcessing," dclaration",s.lateProcessing>1?"s":""," en retard de traitement (> 7 jours)"]})]})})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dtails par Statut"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Fa,{className:"w-4 h-4 text-gray-500"}),n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Brouillon"})]}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.brouillon})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-orange-300",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Nr,{className:"w-4 h-4 text-orange-500"}),n.jsx("p",{className:"text-xs font-medium text-orange-600",children:" dclarer"})]}),n.jsx("p",{className:"text-2xl font-bold text-orange-900",children:a.a_declarer})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-blue-300",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Xm,{className:"w-4 h-4 text-blue-500"}),n.jsx("p",{className:"text-xs font-medium text-blue-600",children:"Soumise"})]}),n.jsx("p",{className:"text-2xl font-bold text-blue-900",children:a.soumise})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-yellow-300",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(na,{className:"w-4 h-4 text-yellow-500"}),n.jsx("p",{className:"text-xs font-medium text-yellow-600",children:"En cours"})]}),n.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:a.en_cours})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-green-300",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Xr,{className:"w-4 h-4 text-green-500"}),n.jsx("p",{className:"text-xs font-medium text-green-600",children:"Approuve"})]}),n.jsx("p",{className:"text-2xl font-bold text-green-900",children:a.approuvee})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-red-300",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(fo,{className:"w-4 h-4 text-red-500"}),n.jsx("p",{className:"text-xs font-medium text-red-600",children:"Refuse"})]}),n.jsx("p",{className:"text-2xl font-bold text-red-900",children:a.refusee})]})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Mtriques de Performance"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow-sm p-6 border border-green-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Ll,{className:"w-6 h-6 text-green-600"}),n.jsx("p",{className:"text-sm font-medium text-green-700",children:"Taux d'Approbation"})]}),n.jsxs("p",{className:"text-4xl font-bold text-green-900",children:[i.approvalRate.toFixed(1),"%"]}),n.jsx("div",{className:"mt-3 bg-green-200 rounded-full h-2 overflow-hidden",children:n.jsx("div",{className:"bg-green-600 h-full transition-all duration-500",style:{width:`${i.approvalRate}%`}})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow-sm p-6 border border-purple-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(na,{className:"w-6 h-6 text-purple-600"}),n.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Dlai Moyen de Traitement"})]}),n.jsxs("p",{className:"text-4xl font-bold text-purple-900",children:[i.avgProcessingTime,n.jsx("span",{className:"text-2xl ml-1",children:"jours"})]}),n.jsx("p",{className:"text-xs text-purple-700 mt-2",children:"Entre soumission et validation"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow-sm p-6 border border-blue-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(jd,{className:"w-6 h-6 text-blue-600"}),n.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Revenus Totaux (Approuves)"})]}),n.jsx("p",{className:"text-3xl font-bold text-blue-900",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"MAD",minimumFractionDigits:0}).format(i.totalRevenue)}),n.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Bas sur les fiches approuves"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(Fa,{className:"w-4 h-4"}),"Top 3 Segments"]}),n.jsx("div",{className:"space-y-2",children:l.topSegments.length>0?l.topSegments.map((o,d)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-700 truncate",children:o.name}),n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o.count})]},d)):n.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aucune donne"})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(Nr,{className:"w-4 h-4"}),"Top 5 Villes"]}),n.jsx("div",{className:"space-y-2",children:l.topCities.length>0?l.topCities.map((o,d)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-700 truncate",children:o.name}),n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o.count})]},d)):n.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aucune donne"})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(Ya,{className:"w-4 h-4"}),"Top 5 Professeurs Actifs"]}),n.jsx("div",{className:"space-y-2",children:l.topProfessors.length>0?l.topProfessors.map((o,d)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-700 truncate",children:o.full_name}),n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o.count})]},d)):n.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aucune donne"})})]})]})]})},VK=()=>{const{user:e,isAdmin:t,isGerant:r}=jn(),l=t?[{title:"Gestion des Segments",description:"Crer et grer les segments de formation",icon:Eu,link:"/admin/segments",color:"bg-blue-500"},{title:"Gestion des Villes",description:"Grer les villes et leur affectation",icon:ns,link:"/admin/cities",color:"bg-green-500"},{title:"Gestion des Utilisateurs",description:"Crer et grer les comptes (admin, professeur, grant)",icon:Ya,link:"/admin/users",color:"bg-purple-500"},{title:"Fiches de Calcul",description:"Crer des templates de fiches de calcul",icon:up,link:"/admin/calculation-sheets",color:"bg-orange-500"},{title:"Crer des Dclarations",description:"Assigner des fiches de sessions aux professeurs",icon:Cy,link:"/admin/create-declaration",color:"bg-teal-500"},{title:"Gestion des Dclarations",description:"Valider et grer les dclarations des professeurs",icon:Ay,link:"/admin/declarations",color:"bg-indigo-500"},{title:"Analytics & Rapports",description:"Statistiques et analyses de performance des formations",icon:pg,link:"/admin/analytics",color:"bg-pink-500"},{title:"Rapports tudiants",description:"Consulter les rapports dtaills de progression des tudiants",icon:Fa,link:"/admin/student-reports",color:"bg-cyan-500"}]:r?[{title:"Crer des Dclarations",description:"Assigner des fiches de sessions aux professeurs",icon:Cy,link:"/gerant/create-declaration",color:"bg-blue-500"},{title:"Mes Dclarations Cres",description:"Suivre les dclarations que j'ai assignes",icon:GF,link:"/gerant/declarations",color:"bg-green-500"}]:[{title:"Mes Dclarations",description:"Crer et grer mes dclarations de sessions",icon:up,link:"/professor/declarations",color:"bg-blue-500"}];return n.jsxs(Ut,{title:"Tableau de Bord",subtitle:`Bienvenue, ${e?.full_name} (${t?"Administrateur":r?"Grant":"Professeur"})`,children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:l.map((o,d)=>n.jsx(Ml,{to:o.link,children:n.jsxs(Or,{className:"hover:shadow-lg transition-shadow cursor-pointer h-full",children:[n.jsxs(Ic,{children:[n.jsx("div",{className:`${o.color} w-12 h-12 rounded-lg flex items-center justify-center mb-4`,children:n.jsx(o.icon,{className:"h-6 w-6 text-white"})}),n.jsx(Bc,{className:"text-xl",children:o.title})]}),n.jsx(Fr,{children:n.jsx("p",{className:"text-gray-600",children:o.description})})]})},d))}),t&&n.jsx("div",{className:"mt-6 sm:mt-8",children:n.jsx(HK,{})}),!t&&n.jsxs("div",{className:"mt-6 sm:mt-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Statistiques Rapides"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"0"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r?"Dclarations cres":"Mes Fiches"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"0 MAD"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Revenus Total"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"0 MAD"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Charges Total"})]})})})]})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Ty={};Ty.version="0.18.5";var JF=1252,WK=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],A4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},C4=function(e){WK.indexOf(e)!=-1&&(JF=A4[0]=e)};function KK(){C4(1252)}var Oc=function(e){C4(e)};function E4(){Oc(1200),KK()}function _C(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function GK(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function eP(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Vx=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?GK(e.slice(2)):t==254&&r==255?eP(e.slice(2)):t==65279?e.slice(1):e},k1=function(t){return String.fromCharCode(t)},SC=function(t){return String.fromCharCode(t)},vg,Bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function yg(e){for(var t="",r=0,a=0,s=0,i=0,l=0,o=0,d=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,a=e.charCodeAt(u++),l=(r&3)<<4|a>>4,s=e.charCodeAt(u++),o=(a&15)<<2|s>>6,d=s&63,isNaN(a)?o=d=64:isNaN(s)&&(d=64),t+=Bf.charAt(i)+Bf.charAt(l)+Bf.charAt(o)+Bf.charAt(d);return t}function ho(e){var t="",r=0,a=0,s=0,i=0,l=0,o=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Bf.indexOf(e.charAt(u++)),l=Bf.indexOf(e.charAt(u++)),r=i<<2|l>>4,t+=String.fromCharCode(r),o=Bf.indexOf(e.charAt(u++)),a=(l&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(a)),d=Bf.indexOf(e.charAt(u++)),s=(o&3)<<6|d,d!==64&&(t+=String.fromCharCode(s));return t}var zr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Bd=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Vf(e){return zr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function kC(e){return zr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var so=function(t){return zr?Bd(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function $b(e){if(typeof ArrayBuffer>"u")return so(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function r0(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function YK(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function T4(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return T4(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ys=zr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Bd(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function XK(e){for(var t=[],r=0,a=e.length+250,s=Vf(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)s[r++]=l;else if(l<2048)s[r++]=192|l>>6&31,s[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;s[r++]=240|l>>8&7,s[r++]=128|l>>2&63,s[r++]=128|o>>6&15|(l&3)<<4,s[r++]=128|o&63}else s[r++]=224|l>>12&15,s[r++]=128|l>>6&63,s[r++]=128|l&63;r>a&&(t.push(s.slice(0,r)),r=0,s=Vf(65535),a=65530)}return t.push(s.slice(0,r)),Ys(t)}var sl=/\u0000/g,Wx=/[\u0001-\u0006]/g;function Zm(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Fc(e,t){var r=""+e;return r.length>=t?r:$n("0",t-r.length)+r}function D4(e,t){var r=""+e;return r.length>=t?r:$n(" ",t-r.length)+r}function Dy(e,t){var r=""+e;return r.length>=t?r:r+$n(" ",t-r.length)}function QK(e,t){var r=""+Math.round(e);return r.length>=t?r:$n("0",t-r.length)+r}function ZK(e,t){var r=""+e;return r.length>=t?r:$n("0",t-r.length)+r}var AC=Math.pow(2,32);function Dm(e,t){if(e>AC||e<-AC)return QK(e,t);var r=Math.round(e);return ZK(r,t)}function Oy(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var CC=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],u5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function JK(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var fr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},EC={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},eG={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Fy(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,l=1,o=0,d=1,u=0,f=0,m=Math.floor(s);u<t&&(m=Math.floor(s),o=m*l+i,f=m*u+d,!(s-m<5e-8));)s=1/(s-m),i=l,l=o,d=u,u=f;if(f>t&&(u>t?(f=d,o=i):(f=u,o=l)),!r)return[0,a*o,f];var g=Math.floor(a*o/f);return[g,a*o-g*f,f]}function W0(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,l=[],o={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(a+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++a,++o.D)),a===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var d=new Date(1900,0,1);d.setDate(d.getDate()+a-1),l=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),a<60&&(i=(i+6)%7),r&&(i=iG(d,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var tP=new Date(1899,11,31,0,0,0),tG=tP.getTime(),rG=new Date(1900,2,1,0,0,0);function rP(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=rG&&(r+=1440*60*1e3),(r-(tG+(e.getTimezoneOffset()-tP.getTimezoneOffset())*6e4))/(1440*60*1e3)}function O4(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function aG(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function nG(e){var t=e<0?12:11,r=O4(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function sG(e){var t=O4(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function bg(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=nG(e):t===10?r=e.toFixed(10).substr(0,12):r=sG(e),O4(aG(r.toUpperCase()))}function uh(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):bg(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Qo(14,rP(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function iG(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function lG(e,t,r,a){var s="",i=0,l=0,o=r.y,d,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:d=o%100,u=2;break;default:d=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:d=r.m,u=t.length;break;case 3:return u5[r.m-1][1];case 5:return u5[r.m-1][0];default:return u5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:d=r.d,u=t.length;break;case 3:return CC[r.q][0];default:return CC[r.q][1]}break;case 104:switch(t.length){case 1:case 2:d=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:d=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:d=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Fc(r.S,t.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),t==="s"?i===0?"0":""+i/l:(s=Fc(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":d=r.D*24+r.H;break;case"[m]":case"[mm]":d=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":d=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:d=o,u=1;break}var f=u>0?Fc(d,u):"";return f}function zf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var aP=/%/g;function oG(e,t,r){var a=t.replace(aP,""),s=t.length-a.length;return _d(e,a,r*Math.pow(10,2*s))+$n("%",s)}function cG(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return _d(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function nP(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+nP(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sP=/# (\?+)( ?)\/( ?)(\d+)/;function uG(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),l=s-i*a,o=a;return r+(i===0?"":""+i)+" "+(l===0?$n(" ",e[1].length+1+e[4].length):D4(l,e[1].length)+e[2]+"/"+e[3]+Fc(o,e[4].length))}function dG(e,t,r){return r+(t===0?"":""+t)+$n(" ",e[1].length+2+e[4].length)}var iP=/^#*0*\.([0#]+)/,lP=/\).*[0#]/,oP=/\(###\) ###\\?-####/;function Qi(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function TC(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function DC(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function fG(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function hG(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Bo(e,t,r){if(e.charCodeAt(0)===40&&!t.match(lP)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Bo("n",a,r):"("+Bo("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return cG(e,t,r);if(t.indexOf("%")!==-1)return oG(e,t,r);if(t.indexOf("E")!==-1)return nP(t,r);if(t.charCodeAt(0)===36)return"$"+Bo(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,l,o,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Dm(d,t.length);if(t.match(/^[#?]+$/))return s=Dm(r,0),s==="0"&&(s=""),s.length>t.length?s:Qi(t.substr(0,t.length-s.length))+s;if(i=t.match(sP))return uG(i,d,u);if(t.match(/^#+0+$/))return u+Dm(d,t.length-t.indexOf("0"));if(i=t.match(iP))return s=TC(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Qi(i[1])).replace(/\.$/,"."+Qi(i[1])).replace(/\.(\d*)$/,function(b,v){return"."+v+$n("0",Qi(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+TC(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+zf(Dm(d,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Bo(e,t,-r):zf(""+(Math.floor(r)+fG(r,i[1].length)))+"."+Fc(DC(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Bo(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Zm(Bo(e,t.replace(/[\\-]/g,""),r)),l=0,Zm(Zm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return l<s.length?s.charAt(l++):b==="0"?"0":""}));if(t.match(oP))return s=Bo(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Fy(d,Math.pow(10,l)-1,!1),s=""+u,f=_d("n",i[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Dy(o[2],l),f.length<i[4].length&&(f=Qi(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Fy(d,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?D4(o[1],l)+i[2]+"/"+i[3]+Dy(o[2],l):$n(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Dm(r,0),t.length<=s.length?s:Qi(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=s.indexOf(".");var m=t.indexOf(".")-l,g=t.length-s.length-m;return Qi(t.substr(0,m)+s+t.substr(t.length-g))}if(i=t.match(/^00,000\.([#0]*0)$/))return l=DC(r,i[1].length),r<0?"-"+Bo(e,t,-r):zf(hG(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Fc(0,3-b.length):"")+b})+"."+Fc(l,i[1].length);switch(t){case"###,##0.00":return Bo(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var x=zf(Dm(d,0));return x!=="0"?u+x:"";case"###,###.00":return Bo(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Bo(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function mG(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return _d(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function pG(e,t,r){var a=t.replace(aP,""),s=t.length-a.length;return _d(e,a,r*Math.pow(10,2*s))+$n("%",s)}function cP(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+cP(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function yu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(lP)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yu("n",a,r):"("+yu("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return mG(e,t,r);if(t.indexOf("%")!==-1)return pG(e,t,r);if(t.indexOf("E")!==-1)return cP(t,r);if(t.charCodeAt(0)===36)return"$"+yu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,l,o,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Fc(d,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Qi(t.substr(0,t.length-s.length))+s;if(i=t.match(sP))return dG(i,d,u);if(t.match(/^#+0+$/))return u+Fc(d,t.length-t.indexOf("0"));if(i=t.match(iP))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Qi(i[1])).replace(/\.$/,"."+Qi(i[1])),s=s.replace(/\.(\d*)$/,function(b,v){return"."+v+$n("0",Qi(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+zf(""+d);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yu(e,t,-r):zf(""+r)+"."+$n("0",i[1].length);if(i=t.match(/^#,#*,#0/))return yu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Zm(yu(e,t.replace(/[\\-]/g,""),r)),l=0,Zm(Zm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return l<s.length?s.charAt(l++):b==="0"?"0":""}));if(t.match(oP))return s=yu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Fy(d,Math.pow(10,l)-1,!1),s=""+u,f=_d("n",i[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Dy(o[2],l),f.length<i[4].length&&(f=Qi(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Fy(d,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?D4(o[1],l)+i[2]+"/"+i[3]+Dy(o[2],l):$n(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Qi(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=s.indexOf(".");var m=t.indexOf(".")-l,g=t.length-s.length-m;return Qi(t.substr(0,m)+s+t.substr(t.length-g))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+yu(e,t,-r):zf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Fc(0,3-b.length):"")+b})+"."+Fc(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var x=zf(""+d);return x!=="0"?u+x:"";default:if(t.match(/\.[0#?]*$/))return yu(e,t.slice(0,t.lastIndexOf(".")),r)+Qi(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function _d(e,t,r){return(r|0)===r?yu(e,t,r):Bo(e,t,r)}function xG(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var uP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Dp(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":Oy(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(uP))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function gG(e,t,r,a){for(var s=[],i="",l=0,o="",d="t",u,f,m,g="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!Oy(e,l))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(m=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(m);s[s.length]={t:"t",v:i},++l;break;case"\\":var x=e.charAt(++l),b=x==="("||x===")"?x:"t";s[s.length]={t:b,v:x},++l;break;case"_":s[s.length]={t:"t",v:" "},l+=2;break;case"@":s[s.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(u==null&&(u=W0(t,r,e.charAt(l+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(l,2)},d=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=W0(t,r),u==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&d.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),s[s.length]={t:o,v:i},d=o;break;case"A":case"a":case"":var v={t:o,v:o};if(u==null&&(u=W0(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",g="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",l+=5,g="h"):e.substr(l,5).toUpperCase()==="/"?(u!=null&&(v.v=u.H>=12?"":""),v.t="T",l+=5,g="h"):(v.t="t",++l),u==null&&v.t==="T")return"";s[s.length]=v,d=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(uP)){if(u==null&&(u=W0(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Dp(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;s[s.length]={t:o,v:i},d=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":s[s.length]={t:a===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++l;break;case"$":s[s.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++l;break}var y=0,j=0,S;for(l=s.length-1,d="t";l>=0;--l)switch(s[l].t){case"h":case"H":s[l].t=g,d="h",y<1&&(y=1);break;case"s":(S=s[l].v.match(/\.0+$/))&&(j=Math.max(j,S[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":d=s[l].t;break;case"m":d==="s"&&(s[l].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&s[l].v.match(/[Hh]/)&&(y=1),y<2&&s[l].v.match(/[Mm]/)&&(y=2),y<3&&s[l].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var N="",C;for(l=0;l<s.length;++l)switch(s[l].t){case"t":case"T":case" ":case"D":break;case"X":s[l].v="",s[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[l].v=lG(s[l].t.charCodeAt(0),s[l].v,u,j),s[l].t="t";break;case"n":case"?":for(C=l+1;s[C]!=null&&((o=s[C].t)==="?"||o==="D"||(o===" "||o==="t")&&s[C+1]!=null&&(s[C+1].t==="?"||s[C+1].t==="t"&&s[C+1].v==="/")||s[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[C].v==="/"||s[C].v===" "&&s[C+1]!=null&&s[C+1].t=="?"));)s[l].v+=s[C].v,s[C]={v:"",t:";"},++C;N+=s[l].v,l=C-1;break;case"G":s[l].t="t",s[l].v=uh(t,r);break}var T="",P,D;if(N.length>0){N.charCodeAt(0)==40?(P=t<0&&N.charCodeAt(0)===45?-t:t,D=_d("n",N,P)):(P=t<0&&a>1?-t:t,D=_d("n",N,P),P<0&&s[0]&&s[0].t=="t"&&(D=D.substr(1),s[0].v="-"+s[0].v)),C=D.length-1;var M=s.length;for(l=0;l<s.length;++l)if(s[l]!=null&&s[l].t!="t"&&s[l].v.indexOf(".")>-1){M=l;break}var F=s.length;if(M===s.length&&D.indexOf("E")===-1){for(l=s.length-1;l>=0;--l)s[l]==null||"n?".indexOf(s[l].t)===-1||(C>=s[l].v.length-1?(C-=s[l].v.length,s[l].v=D.substr(C+1,s[l].v.length)):C<0?s[l].v="":(s[l].v=D.substr(0,C+1),C=-1),s[l].t="t",F=l);C>=0&&F<s.length&&(s[F].v=D.substr(0,C+1)+s[F].v)}else if(M!==s.length&&D.indexOf("E")===-1){for(C=D.indexOf(".")-1,l=M;l>=0;--l)if(!(s[l]==null||"n?".indexOf(s[l].t)===-1)){for(f=s[l].v.indexOf(".")>-1&&l===M?s[l].v.indexOf(".")-1:s[l].v.length-1,T=s[l].v.substr(f+1);f>=0;--f)C>=0&&(s[l].v.charAt(f)==="0"||s[l].v.charAt(f)==="#")&&(T=D.charAt(C--)+T);s[l].v=T,s[l].t="t",F=l}for(C>=0&&F<s.length&&(s[F].v=D.substr(0,C+1)+s[F].v),C=D.indexOf(".")+1,l=M;l<s.length;++l)if(!(s[l]==null||"n?(".indexOf(s[l].t)===-1&&l!==M)){for(f=s[l].v.indexOf(".")>-1&&l===M?s[l].v.indexOf(".")+1:0,T=s[l].v.substr(0,f);f<s[l].v.length;++f)C<D.length&&(T+=D.charAt(C++));s[l].v=T,s[l].t="t",F=l}}}for(l=0;l<s.length;++l)s[l]!=null&&"n?".indexOf(s[l].t)>-1&&(P=a>1&&t<0&&l>0&&s[l-1].v==="-"?-t:t,s[l].v=_d(s[l].t,s[l].v,P),s[l].t="t");var H="";for(l=0;l!==s.length;++l)s[l]!=null&&(H+=s[l].v);return H}var OC=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function FC(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function vG(e,t){var r=xG(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(OC),o=r[1].match(OC);return FC(t,l)?[a,r[0]]:FC(t,o)?[a,r[1]]:[a,r[l!=null&&o!=null?2:1]]}return[a,i]}function Qo(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:fr)[e],a==null&&(a=r.table&&r.table[EC[e]]||fr[EC[e]]),a==null&&(a=eG[e]||"General");break}if(Oy(a,0))return uh(t,r);t instanceof Date&&(t=rP(t,r.date1904));var s=vG(a,t);if(Oy(s[1]))return uh(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return gG(s[1],t,r,s[0])}function Sd(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(fr[r]==null){t<0&&(t=r);continue}if(fr[r]==e){t=r;break}}t<0&&(t=391)}return fr[t]=e,t}function Hb(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Sd(e[t],t)}function Op(){fr=JK()}var yG={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function bG(e){var t=typeof e=="number"?fr[e]:e;return t=t.replace(dP,"(\\d+)"),new RegExp("^"+t+"$")}function wG(e,t,r){var a=-1,s=-1,i=-1,l=-1,o=-1,d=-1;(t.match(dP)||[]).forEach(function(m,g){var x=parseInt(r[g+1],10);switch(m.toLowerCase().charAt(0)){case"y":a=x;break;case"d":i=x;break;case"h":l=x;break;case"s":d=x;break;case"m":l>=0?o=x:s=x;break}}),d>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return l==-1&&o==-1&&d==-1?u:a==-1&&s==-1&&i==-1?f:u+"T"+f}var jG=(function(){var e={};e.version="1.2.0";function t(){for(var D=0,M=new Array(256),F=0;F!=256;++F)D=F,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,M[F]=D;return typeof Int32Array<"u"?new Int32Array(M):M}var r=t();function a(D){var M=0,F=0,H=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(H=0;H!=256;++H)L[H]=D[H];for(H=0;H!=256;++H)for(F=D[H],M=256+H;M<4096;M+=256)F=L[M]=F>>>8^D[F&255];var z=[];for(H=1;H!=16;++H)z[H-1]=typeof Int32Array<"u"?L.subarray(H*256,H*256+256):L.slice(H*256,H*256+256);return z}var s=a(r),i=s[0],l=s[1],o=s[2],d=s[3],u=s[4],f=s[5],m=s[6],g=s[7],x=s[8],b=s[9],v=s[10],y=s[11],j=s[12],S=s[13],N=s[14];function C(D,M){for(var F=M^-1,H=0,L=D.length;H<L;)F=F>>>8^r[(F^D.charCodeAt(H++))&255];return~F}function T(D,M){for(var F=M^-1,H=D.length-15,L=0;L<H;)F=N[D[L++]^F&255]^S[D[L++]^F>>8&255]^j[D[L++]^F>>16&255]^y[D[L++]^F>>>24]^v[D[L++]]^b[D[L++]]^x[D[L++]]^g[D[L++]]^m[D[L++]]^f[D[L++]]^u[D[L++]]^d[D[L++]]^o[D[L++]]^l[D[L++]]^i[D[L++]]^r[D[L++]];for(H+=15;L<H;)F=F>>>8^r[(F^D[L++])&255];return~F}function P(D,M){for(var F=M^-1,H=0,L=D.length,z=0,V=0;H<L;)z=D.charCodeAt(H++),z<128?F=F>>>8^r[(F^z)&255]:z<2048?(F=F>>>8^r[(F^(192|z>>6&31))&255],F=F>>>8^r[(F^(128|z&63))&255]):z>=55296&&z<57344?(z=(z&1023)+64,V=D.charCodeAt(H++)&1023,F=F>>>8^r[(F^(240|z>>8&7))&255],F=F>>>8^r[(F^(128|z>>2&63))&255],F=F>>>8^r[(F^(128|V>>6&15|(z&3)<<4))&255],F=F>>>8^r[(F^(128|V&63))&255]):(F=F>>>8^r[(F^(224|z>>12&15))&255],F=F>>>8^r[(F^(128|z>>6&63))&255],F=F>>>8^r[(F^(128|z&63))&255]);return~F}return e.table=r,e.bstr=C,e.buf=T,e.str=P,e})(),sr=(function(){var t={};t.version="1.2.1";function r(le,Ne){for(var me=le.split("/"),pe=Ne.split("/"),be=0,Se=0,ze=Math.min(me.length,pe.length);be<ze;++be){if(Se=me[be].length-pe[be].length)return Se;if(me[be]!=pe[be])return me[be]<pe[be]?-1:1}return me.length-pe.length}function a(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:a(le.slice(0,-1));var Ne=le.lastIndexOf("/");return Ne===-1?le:le.slice(0,Ne+1)}function s(le){if(le.charAt(le.length-1)=="/")return s(le.slice(0,-1));var Ne=le.lastIndexOf("/");return Ne===-1?le:le.slice(Ne+1)}function i(le,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var me=Ne.getHours();me=me<<6|Ne.getMinutes(),me=me<<5|Ne.getSeconds()>>>1,le.write_shift(2,me);var pe=Ne.getFullYear()-1980;pe=pe<<4|Ne.getMonth()+1,pe=pe<<5|Ne.getDate(),le.write_shift(2,pe)}function l(le){var Ne=le.read_shift(2)&65535,me=le.read_shift(2)&65535,pe=new Date,be=me&31;me>>>=5;var Se=me&15;me>>>=4,pe.setMilliseconds(0),pe.setFullYear(me+1980),pe.setMonth(Se-1),pe.setDate(be);var ze=Ne&31;Ne>>>=5;var tt=Ne&63;return Ne>>>=6,pe.setHours(Ne),pe.setMinutes(tt),pe.setSeconds(ze<<1),pe}function o(le){fi(le,0);for(var Ne={},me=0;le.l<=le.length-4;){var pe=le.read_shift(2),be=le.read_shift(2),Se=le.l+be,ze={};switch(pe){case 21589:me=le.read_shift(1),me&1&&(ze.mtime=le.read_shift(4)),be>5&&(me&2&&(ze.atime=le.read_shift(4)),me&4&&(ze.ctime=le.read_shift(4))),ze.mtime&&(ze.mt=new Date(ze.mtime*1e3));break}le.l=Se,Ne[pe]=ze}return Ne}var d;function u(){return d||(d={})}function f(le,Ne){if(le[0]==80&&le[1]==75)return _a(le,Ne);if((le[0]|32)==109&&(le[1]|32)==105)return Jt(le,Ne);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var me=3,pe=512,be=0,Se=0,ze=0,tt=0,$e=0,He=[],We=le.slice(0,512);fi(We,0);var vt=m(We);switch(me=vt[0],me){case 3:pe=512;break;case 4:pe=4096;break;case 0:if(vt[1]==0)return _a(le,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+me)}pe!==512&&(We=le.slice(0,pe),fi(We,28));var jt=le.slice(0,pe);g(We,me);var Ot=We.read_shift(4,"i");if(me===3&&Ot!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ot);We.l+=4,ze=We.read_shift(4,"i"),We.l+=4,We.chk("00100000","Mini Stream Cutoff Size: "),tt=We.read_shift(4,"i"),be=We.read_shift(4,"i"),$e=We.read_shift(4,"i"),Se=We.read_shift(4,"i");for(var bt=-1,kt=0;kt<109&&(bt=We.read_shift(4,"i"),!(bt<0));++kt)He[kt]=bt;var zt=x(le,pe);y($e,Se,zt,pe,He);var xa=S(zt,ze,He,pe);xa[ze].name="!Directory",be>0&&tt!==V&&(xa[tt].name="!MiniFAT"),xa[He[0]].name="!FAT",xa.fat_addrs=He,xa.ssz=pe;var Br={},ja=[],ei=[],zl=[];N(ze,xa,zt,ja,be,Br,ei,tt),b(ei,zl,ja),ja.shift();var Ul={FileIndex:ei,FullPaths:zl};return Ne&&Ne.raw&&(Ul.raw={header:jt,sectors:zt}),Ul}function m(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(G,"Header Signature: "),le.l+=16;var Ne=le.read_shift(2,"u");return[le.read_shift(2,"u"),Ne]}function g(le,Ne){var me=9;switch(le.l+=2,me=le.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+me);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+me)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function x(le,Ne){for(var me=Math.ceil(le.length/Ne)-1,pe=[],be=1;be<me;++be)pe[be-1]=le.slice(be*Ne,(be+1)*Ne);return pe[me-1]=le.slice(me*Ne),pe}function b(le,Ne,me){for(var pe=0,be=0,Se=0,ze=0,tt=0,$e=me.length,He=[],We=[];pe<$e;++pe)He[pe]=We[pe]=pe,Ne[pe]=me[pe];for(;tt<We.length;++tt)pe=We[tt],be=le[pe].L,Se=le[pe].R,ze=le[pe].C,He[pe]===pe&&(be!==-1&&He[be]!==be&&(He[pe]=He[be]),Se!==-1&&He[Se]!==Se&&(He[pe]=He[Se])),ze!==-1&&(He[ze]=pe),be!==-1&&pe!=He[pe]&&(He[be]=He[pe],We.lastIndexOf(be)<tt&&We.push(be)),Se!==-1&&pe!=He[pe]&&(He[Se]=He[pe],We.lastIndexOf(Se)<tt&&We.push(Se));for(pe=1;pe<$e;++pe)He[pe]===pe&&(Se!==-1&&He[Se]!==Se?He[pe]=He[Se]:be!==-1&&He[be]!==be&&(He[pe]=He[be]));for(pe=1;pe<$e;++pe)if(le[pe].type!==0){if(tt=pe,tt!=He[tt])do tt=He[tt],Ne[pe]=Ne[tt]+"/"+Ne[pe];while(tt!==0&&He[tt]!==-1&&tt!=He[tt]);He[pe]=-1}for(Ne[0]+="/",pe=1;pe<$e;++pe)le[pe].type!==2&&(Ne[pe]+="/")}function v(le,Ne,me){for(var pe=le.start,be=le.size,Se=[],ze=pe;me&&be>0&&ze>=0;)Se.push(Ne.slice(ze*z,ze*z+z)),be-=z,ze=$0(me,ze*4);return Se.length===0?nt(0):Ys(Se).slice(0,le.size)}function y(le,Ne,me,pe,be){var Se=V;if(le===V){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var ze=me[le],tt=(pe>>>2)-1;if(!ze)return;for(var $e=0;$e<tt&&(Se=$0(ze,$e*4))!==V;++$e)be.push(Se);y($0(ze,pe-4),Ne-1,me,pe,be)}}function j(le,Ne,me,pe,be){var Se=[],ze=[];be||(be=[]);var tt=pe-1,$e=0,He=0;for($e=Ne;$e>=0;){be[$e]=!0,Se[Se.length]=$e,ze.push(le[$e]);var We=me[Math.floor($e*4/pe)];if(He=$e*4&tt,pe<4+He)throw new Error("FAT boundary crossed: "+$e+" 4 "+pe);if(!le[We])break;$e=$0(le[We],He)}return{nodes:Se,data:VC([ze])}}function S(le,Ne,me,pe){var be=le.length,Se=[],ze=[],tt=[],$e=[],He=pe-1,We=0,vt=0,jt=0,Ot=0;for(We=0;We<be;++We)if(tt=[],jt=We+Ne,jt>=be&&(jt-=be),!ze[jt]){$e=[];var bt=[];for(vt=jt;vt>=0;){bt[vt]=!0,ze[vt]=!0,tt[tt.length]=vt,$e.push(le[vt]);var kt=me[Math.floor(vt*4/pe)];if(Ot=vt*4&He,pe<4+Ot)throw new Error("FAT boundary crossed: "+vt+" 4 "+pe);if(!le[kt]||(vt=$0(le[kt],Ot),bt[vt]))break}Se[jt]={nodes:tt,data:VC([$e])}}return Se}function N(le,Ne,me,pe,be,Se,ze,tt){for(var $e=0,He=pe.length?2:0,We=Ne[le].data,vt=0,jt=0,Ot;vt<We.length;vt+=128){var bt=We.slice(vt,vt+128);fi(bt,64),jt=bt.read_shift(2),Ot=B4(bt,0,jt-He),pe.push(Ot);var kt={name:Ot,type:bt.read_shift(1),color:bt.read_shift(1),L:bt.read_shift(4,"i"),R:bt.read_shift(4,"i"),C:bt.read_shift(4,"i"),clsid:bt.read_shift(16),state:bt.read_shift(4,"i"),start:0,size:0},zt=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);zt!==0&&(kt.ct=C(bt,bt.l-8));var xa=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);xa!==0&&(kt.mt=C(bt,bt.l-8)),kt.start=bt.read_shift(4,"i"),kt.size=bt.read_shift(4,"i"),kt.size<0&&kt.start<0&&(kt.size=kt.type=0,kt.start=V,kt.name=""),kt.type===5?($e=kt.start,be>0&&$e!==V&&(Ne[$e].name="!StreamData")):kt.size>=4096?(kt.storage="fat",Ne[kt.start]===void 0&&(Ne[kt.start]=j(me,kt.start,Ne.fat_addrs,Ne.ssz)),Ne[kt.start].name=kt.name,kt.content=Ne[kt.start].data.slice(0,kt.size)):(kt.storage="minifat",kt.size<0?kt.size=0:$e!==V&&kt.start!==V&&Ne[$e]&&(kt.content=v(kt,Ne[$e].data,(Ne[tt]||{}).data))),kt.content&&fi(kt.content,0),Se[Ot]=kt,ze.push(kt)}}function C(le,Ne){return new Date((ao(le,Ne+4)/1e7*Math.pow(2,32)+ao(le,Ne)/1e7-11644473600)*1e3)}function T(le,Ne){return u(),f(d.readFileSync(le),Ne)}function P(le,Ne){var me=Ne&&Ne.type;switch(me||zr&&Buffer.isBuffer(le)&&(me="buffer"),me||"base64"){case"file":return T(le,Ne);case"base64":return f(so(ho(le)),Ne);case"binary":return f(so(le),Ne)}return f(le,Ne)}function D(le,Ne){var me=Ne||{},pe=me.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=pe+"/",le.FileIndex[0]={name:pe,type:5}),me.CLSID&&(le.FileIndex[0].clsid=me.CLSID),M(le)}function M(le){var Ne="Sh33tJ5";if(!sr.find(le,"/"+Ne)){var me=nt(4);me[0]=55,me[1]=me[3]=50,me[2]=54,le.FileIndex.push({name:Ne,type:2,content:me,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+Ne),F(le)}}function F(le,Ne){D(le);for(var me=!1,pe=!1,be=le.FullPaths.length-1;be>=0;--be){var Se=le.FileIndex[be];switch(Se.type){case 0:pe?me=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:pe=!0,isNaN(Se.R*Se.L*Se.C)&&(me=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(me=!0);break;default:me=!0;break}}if(!(!me&&!Ne)){var ze=new Date(1987,1,19),tt=0,$e=Object.create?Object.create(null):{},He=[];for(be=0;be<le.FullPaths.length;++be)$e[le.FullPaths[be]]=!0,le.FileIndex[be].type!==0&&He.push([le.FullPaths[be],le.FileIndex[be]]);for(be=0;be<He.length;++be){var We=a(He[be][0]);pe=$e[We],pe||(He.push([We,{name:s(We).replace("/",""),type:1,clsid:Z,ct:ze,mt:ze,content:null}]),$e[We]=!0)}for(He.sort(function(Ot,bt){return r(Ot[0],bt[0])}),le.FullPaths=[],le.FileIndex=[],be=0;be<He.length;++be)le.FullPaths[be]=He[be][0],le.FileIndex[be]=He[be][1];for(be=0;be<He.length;++be){var vt=le.FileIndex[be],jt=le.FullPaths[be];if(vt.name=s(jt).replace("/",""),vt.L=vt.R=vt.C=-(vt.color=1),vt.size=vt.content?vt.content.length:0,vt.start=0,vt.clsid=vt.clsid||Z,be===0)vt.C=He.length>1?1:-1,vt.size=0,vt.type=5;else if(jt.slice(-1)=="/"){for(tt=be+1;tt<He.length&&a(le.FullPaths[tt])!=jt;++tt);for(vt.C=tt>=He.length?-1:tt,tt=be+1;tt<He.length&&a(le.FullPaths[tt])!=a(jt);++tt);vt.R=tt>=He.length?-1:tt,vt.type=1}else a(le.FullPaths[be+1]||"")==a(jt)&&(vt.R=be+1),vt.type=2}}}function H(le,Ne){var me=Ne||{};if(me.fileType=="mad")return Bl(le,me);switch(F(le),me.fileType){case"zip":return ea(le,me)}var pe=(function(Ot){for(var bt=0,kt=0,zt=0;zt<Ot.FileIndex.length;++zt){var xa=Ot.FileIndex[zt];if(xa.content){var Br=xa.content.length;Br>0&&(Br<4096?bt+=Br+63>>6:kt+=Br+511>>9)}}for(var ja=Ot.FullPaths.length+3>>2,ei=bt+7>>3,zl=bt+127>>7,Ul=ei+kt+ja+zl,zi=Ul+127>>7,Qc=zi<=109?0:Math.ceil((zi-109)/127);Ul+zi+Qc+127>>7>zi;)Qc=++zi<=109?0:Math.ceil((zi-109)/127);var Kn=[1,Qc,zi,zl,ja,kt,bt,0];return Ot.FileIndex[0].size=bt<<6,Kn[7]=(Ot.FileIndex[0].start=Kn[0]+Kn[1]+Kn[2]+Kn[3]+Kn[4]+Kn[5])+(Kn[6]+7>>3),Kn})(le),be=nt(pe[7]<<9),Se=0,ze=0;{for(Se=0;Se<8;++Se)be.write_shift(1,ie[Se]);for(Se=0;Se<8;++Se)be.write_shift(2,0);for(be.write_shift(2,62),be.write_shift(2,3),be.write_shift(2,65534),be.write_shift(2,9),be.write_shift(2,6),Se=0;Se<3;++Se)be.write_shift(2,0);for(be.write_shift(4,0),be.write_shift(4,pe[2]),be.write_shift(4,pe[0]+pe[1]+pe[2]+pe[3]-1),be.write_shift(4,0),be.write_shift(4,4096),be.write_shift(4,pe[3]?pe[0]+pe[1]+pe[2]-1:V),be.write_shift(4,pe[3]),be.write_shift(-4,pe[1]?pe[0]-1:V),be.write_shift(4,pe[1]),Se=0;Se<109;++Se)be.write_shift(-4,Se<pe[2]?pe[1]+Se:-1)}if(pe[1])for(ze=0;ze<pe[1];++ze){for(;Se<236+ze*127;++Se)be.write_shift(-4,Se<pe[2]?pe[1]+Se:-1);be.write_shift(-4,ze===pe[1]-1?V:ze+1)}var tt=function(Ot){for(ze+=Ot;Se<ze-1;++Se)be.write_shift(-4,Se+1);Ot&&(++Se,be.write_shift(-4,V))};for(ze=Se=0,ze+=pe[1];Se<ze;++Se)be.write_shift(-4,X.DIFSECT);for(ze+=pe[2];Se<ze;++Se)be.write_shift(-4,X.FATSECT);tt(pe[3]),tt(pe[4]);for(var $e=0,He=0,We=le.FileIndex[0];$e<le.FileIndex.length;++$e)We=le.FileIndex[$e],We.content&&(He=We.content.length,!(He<4096)&&(We.start=ze,tt(He+511>>9)));for(tt(pe[6]+7>>3);be.l&511;)be.write_shift(-4,X.ENDOFCHAIN);for(ze=Se=0,$e=0;$e<le.FileIndex.length;++$e)We=le.FileIndex[$e],We.content&&(He=We.content.length,!(!He||He>=4096)&&(We.start=ze,tt(He+63>>6)));for(;be.l&511;)be.write_shift(-4,X.ENDOFCHAIN);for(Se=0;Se<pe[4]<<2;++Se){var vt=le.FullPaths[Se];if(!vt||vt.length===0){for($e=0;$e<17;++$e)be.write_shift(4,0);for($e=0;$e<3;++$e)be.write_shift(4,-1);for($e=0;$e<12;++$e)be.write_shift(4,0);continue}We=le.FileIndex[Se],Se===0&&(We.start=We.size?We.start-1:V);var jt=Se===0&&me.root||We.name;if(He=2*(jt.length+1),be.write_shift(64,jt,"utf16le"),be.write_shift(2,He),be.write_shift(1,We.type),be.write_shift(1,We.color),be.write_shift(-4,We.L),be.write_shift(-4,We.R),be.write_shift(-4,We.C),We.clsid)be.write_shift(16,We.clsid,"hex");else for($e=0;$e<4;++$e)be.write_shift(4,0);be.write_shift(4,We.state||0),be.write_shift(4,0),be.write_shift(4,0),be.write_shift(4,0),be.write_shift(4,0),be.write_shift(4,We.start),be.write_shift(4,We.size),be.write_shift(4,0)}for(Se=1;Se<le.FileIndex.length;++Se)if(We=le.FileIndex[Se],We.size>=4096)if(be.l=We.start+1<<9,zr&&Buffer.isBuffer(We.content))We.content.copy(be,be.l,0,We.size),be.l+=We.size+511&-512;else{for($e=0;$e<We.size;++$e)be.write_shift(1,We.content[$e]);for(;$e&511;++$e)be.write_shift(1,0)}for(Se=1;Se<le.FileIndex.length;++Se)if(We=le.FileIndex[Se],We.size>0&&We.size<4096)if(zr&&Buffer.isBuffer(We.content))We.content.copy(be,be.l,0,We.size),be.l+=We.size+63&-64;else{for($e=0;$e<We.size;++$e)be.write_shift(1,We.content[$e]);for(;$e&63;++$e)be.write_shift(1,0)}if(zr)be.l=be.length;else for(;be.l<be.length;)be.write_shift(1,0);return be}function L(le,Ne){var me=le.FullPaths.map(function($e){return $e.toUpperCase()}),pe=me.map(function($e){var He=$e.split("/");return He[He.length-($e.slice(-1)=="/"?2:1)]}),be=!1;Ne.charCodeAt(0)===47?(be=!0,Ne=me[0].slice(0,-1)+Ne):be=Ne.indexOf("/")!==-1;var Se=Ne.toUpperCase(),ze=be===!0?me.indexOf(Se):pe.indexOf(Se);if(ze!==-1)return le.FileIndex[ze];var tt=!Se.match(Wx);for(Se=Se.replace(sl,""),tt&&(Se=Se.replace(Wx,"!")),ze=0;ze<me.length;++ze)if((tt?me[ze].replace(Wx,"!"):me[ze]).replace(sl,"")==Se||(tt?pe[ze].replace(Wx,"!"):pe[ze]).replace(sl,"")==Se)return le.FileIndex[ze];return null}var z=64,V=-2,G="d0cf11e0a1b11ae1",ie=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",X={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:G,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function he(le,Ne,me){u();var pe=H(le,me);d.writeFileSync(Ne,pe)}function ce(le){for(var Ne=new Array(le.length),me=0;me<le.length;++me)Ne[me]=String.fromCharCode(le[me]);return Ne.join("")}function ke(le,Ne){var me=H(le,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return u(),d.writeFileSync(Ne.filename,me),me;case"binary":return typeof me=="string"?me:ce(me);case"base64":return yg(typeof me=="string"?me:ce(me));case"buffer":if(zr)return Buffer.isBuffer(me)?me:Bd(me);case"array":return typeof me=="string"?so(me):me}return me}var se;function R(le){try{var Ne=le.InflateRaw,me=new Ne;if(me._processChunk(new Uint8Array([3,0]),me._finishFlushFlag),me.bytesRead)se=le;else throw new Error("zlib does not expose bytesRead")}catch(pe){console.error("cannot use native zlib: "+(pe.message||pe))}}function I(le,Ne){if(!se)return Lr(le,Ne);var me=se.InflateRaw,pe=new me,be=pe._processChunk(le.slice(le.l),pe._finishFlushFlag);return le.l+=pe.bytesRead,be}function q(le){return se?se.deflateRawSync(le):wt(le)}var K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Q(le){var Ne=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var ne=typeof Uint8Array<"u",ye=ne?new Uint8Array(256):[],De=0;De<256;++De)ye[De]=Q(De);function ee(le,Ne){var me=ye[le&255];return Ne<=8?me>>>8-Ne:(me=me<<8|ye[le>>8&255],Ne<=16?me>>>16-Ne:(me=me<<8|ye[le>>16&255],me>>>24-Ne))}function Je(le,Ne){var me=Ne&7,pe=Ne>>>3;return(le[pe]|(me<=6?0:le[pe+1]<<8))>>>me&3}function Oe(le,Ne){var me=Ne&7,pe=Ne>>>3;return(le[pe]|(me<=5?0:le[pe+1]<<8))>>>me&7}function ve(le,Ne){var me=Ne&7,pe=Ne>>>3;return(le[pe]|(me<=4?0:le[pe+1]<<8))>>>me&15}function pt(le,Ne){var me=Ne&7,pe=Ne>>>3;return(le[pe]|(me<=3?0:le[pe+1]<<8))>>>me&31}function et(le,Ne){var me=Ne&7,pe=Ne>>>3;return(le[pe]|(me<=1?0:le[pe+1]<<8))>>>me&127}function Nt(le,Ne,me){var pe=Ne&7,be=Ne>>>3,Se=(1<<me)-1,ze=le[be]>>>pe;return me<8-pe||(ze|=le[be+1]<<8-pe,me<16-pe)||(ze|=le[be+2]<<16-pe,me<24-pe)||(ze|=le[be+3]<<24-pe),ze&Se}function ot(le,Ne,me){var pe=Ne&7,be=Ne>>>3;return pe<=5?le[be]|=(me&7)<<pe:(le[be]|=me<<pe&255,le[be+1]=(me&7)>>8-pe),Ne+3}function Ie(le,Ne,me){var pe=Ne&7,be=Ne>>>3;return me=(me&1)<<pe,le[be]|=me,Ne+1}function ge(le,Ne,me){var pe=Ne&7,be=Ne>>>3;return me<<=pe,le[be]|=me&255,me>>>=8,le[be+1]=me,Ne+8}function Te(le,Ne,me){var pe=Ne&7,be=Ne>>>3;return me<<=pe,le[be]|=me&255,me>>>=8,le[be+1]=me&255,le[be+2]=me>>>8,Ne+16}function qe(le,Ne){var me=le.length,pe=2*me>Ne?2*me:Ne+5,be=0;if(me>=Ne)return le;if(zr){var Se=kC(pe);if(le.copy)le.copy(Se);else for(;be<le.length;++be)Se[be]=le[be];return Se}else if(ne){var ze=new Uint8Array(pe);if(ze.set)ze.set(le);else for(;be<me;++be)ze[be]=le[be];return ze}return le.length=pe,le}function xt(le){for(var Ne=new Array(le),me=0;me<le;++me)Ne[me]=0;return Ne}function gt(le,Ne,me){var pe=1,be=0,Se=0,ze=0,tt=0,$e=le.length,He=ne?new Uint16Array(32):xt(32);for(Se=0;Se<32;++Se)He[Se]=0;for(Se=$e;Se<me;++Se)le[Se]=0;$e=le.length;var We=ne?new Uint16Array($e):xt($e);for(Se=0;Se<$e;++Se)He[be=le[Se]]++,pe<be&&(pe=be),We[Se]=0;for(He[0]=0,Se=1;Se<=pe;++Se)He[Se+16]=tt=tt+He[Se-1]<<1;for(Se=0;Se<$e;++Se)tt=le[Se],tt!=0&&(We[Se]=He[tt+16]++);var vt=0;for(Se=0;Se<$e;++Se)if(vt=le[Se],vt!=0)for(tt=ee(We[Se],pe)>>pe-vt,ze=(1<<pe+4-vt)-1;ze>=0;--ze)Ne[tt|ze<<vt]=vt&15|Se<<4;return pe}var Mt=ne?new Uint16Array(512):xt(512),mr=ne?new Uint16Array(32):xt(32);if(!ne){for(var Pt=0;Pt<512;++Pt)Mt[Pt]=0;for(Pt=0;Pt<32;++Pt)mr[Pt]=0}(function(){for(var le=[],Ne=0;Ne<32;Ne++)le.push(5);gt(le,mr,32);var me=[];for(Ne=0;Ne<=143;Ne++)me.push(8);for(;Ne<=255;Ne++)me.push(9);for(;Ne<=279;Ne++)me.push(7);for(;Ne<=287;Ne++)me.push(8);gt(me,Mt,288)})();var Rt=(function(){for(var Ne=ne?new Uint8Array(32768):[],me=0,pe=0;me<J.length-1;++me)for(;pe<J[me+1];++pe)Ne[pe]=me;for(;pe<32768;++pe)Ne[pe]=29;var be=ne?new Uint8Array(259):[];for(me=0,pe=0;me<te.length-1;++me)for(;pe<te[me+1];++pe)be[pe]=me;function Se(tt,$e){for(var He=0;He<tt.length;){var We=Math.min(65535,tt.length-He),vt=He+We==tt.length;for($e.write_shift(1,+vt),$e.write_shift(2,We),$e.write_shift(2,~We&65535);We-- >0;)$e[$e.l++]=tt[He++]}return $e.l}function ze(tt,$e){for(var He=0,We=0,vt=ne?new Uint16Array(32768):[];We<tt.length;){var jt=Math.min(65535,tt.length-We);if(jt<10){for(He=ot($e,He,+(We+jt==tt.length)),He&7&&(He+=8-(He&7)),$e.l=He/8|0,$e.write_shift(2,jt),$e.write_shift(2,~jt&65535);jt-- >0;)$e[$e.l++]=tt[We++];He=$e.l*8;continue}He=ot($e,He,+(We+jt==tt.length)+2);for(var Ot=0;jt-- >0;){var bt=tt[We];Ot=(Ot<<5^bt)&32767;var kt=-1,zt=0;if((kt=vt[Ot])&&(kt|=We&-32768,kt>We&&(kt-=32768),kt<We))for(;tt[kt+zt]==tt[We+zt]&&zt<250;)++zt;if(zt>2){bt=be[zt],bt<=22?He=ge($e,He,ye[bt+1]>>1)-1:(ge($e,He,3),He+=5,ge($e,He,ye[bt-23]>>5),He+=3);var xa=bt<8?0:bt-4>>2;xa>0&&(Te($e,He,zt-te[bt]),He+=xa),bt=Ne[We-kt],He=ge($e,He,ye[bt]>>3),He-=3;var Br=bt<4?0:bt-2>>1;Br>0&&(Te($e,He,We-kt-J[bt]),He+=Br);for(var ja=0;ja<zt;++ja)vt[Ot]=We&32767,Ot=(Ot<<5^tt[We])&32767,++We;jt-=zt-1}else bt<=143?bt=bt+48:He=Ie($e,He,1),He=ge($e,He,ye[bt]),vt[Ot]=We&32767,++We}He=ge($e,He,0)-1}return $e.l=(He+7)/8|0,$e.l}return function($e,He){return $e.length<8?Se($e,He):ze($e,He)}})();function wt(le){var Ne=nt(50+Math.floor(le.length*1.1)),me=Rt(le,Ne);return Ne.slice(0,me)}var Ct=ne?new Uint16Array(32768):xt(32768),ur=ne?new Uint16Array(32768):xt(32768),Lt=ne?new Uint16Array(128):xt(128),Dt=1,tr=1;function wr(le,Ne){var me=pt(le,Ne)+257;Ne+=5;var pe=pt(le,Ne)+1;Ne+=5;var be=ve(le,Ne)+4;Ne+=4;for(var Se=0,ze=ne?new Uint8Array(19):xt(19),tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,He=ne?new Uint8Array(8):xt(8),We=ne?new Uint8Array(8):xt(8),vt=ze.length,jt=0;jt<be;++jt)ze[K[jt]]=Se=Oe(le,Ne),$e<Se&&($e=Se),He[Se]++,Ne+=3;var Ot=0;for(He[0]=0,jt=1;jt<=$e;++jt)We[jt]=Ot=Ot+He[jt-1]<<1;for(jt=0;jt<vt;++jt)(Ot=ze[jt])!=0&&(tt[jt]=We[Ot]++);var bt=0;for(jt=0;jt<vt;++jt)if(bt=ze[jt],bt!=0){Ot=ye[tt[jt]]>>8-bt;for(var kt=(1<<7-bt)-1;kt>=0;--kt)Lt[Ot|kt<<bt]=bt&7|jt<<3}var zt=[];for($e=1;zt.length<me+pe;)switch(Ot=Lt[et(le,Ne)],Ne+=Ot&7,Ot>>>=3){case 16:for(Se=3+Je(le,Ne),Ne+=2,Ot=zt[zt.length-1];Se-- >0;)zt.push(Ot);break;case 17:for(Se=3+Oe(le,Ne),Ne+=3;Se-- >0;)zt.push(0);break;case 18:for(Se=11+et(le,Ne),Ne+=7;Se-- >0;)zt.push(0);break;default:zt.push(Ot),$e<Ot&&($e=Ot);break}var xa=zt.slice(0,me),Br=zt.slice(me);for(jt=me;jt<286;++jt)xa[jt]=0;for(jt=pe;jt<30;++jt)Br[jt]=0;return Dt=gt(xa,Ct,286),tr=gt(Br,ur,30),Ne}function ir(le,Ne){if(le[0]==3&&!(le[1]&3))return[Vf(Ne),2];for(var me=0,pe=0,be=kC(Ne||1<<18),Se=0,ze=be.length>>>0,tt=0,$e=0;(pe&1)==0;){if(pe=Oe(le,me),me+=3,pe>>>1)pe>>1==1?(tt=9,$e=5):(me=wr(le,me),tt=Dt,$e=tr);else{me&7&&(me+=8-(me&7));var He=le[me>>>3]|le[(me>>>3)+1]<<8;if(me+=32,He>0)for(!Ne&&ze<Se+He&&(be=qe(be,Se+He),ze=be.length);He-- >0;)be[Se++]=le[me>>>3],me+=8;continue}for(;;){!Ne&&ze<Se+32767&&(be=qe(be,Se+32767),ze=be.length);var We=Nt(le,me,tt),vt=pe>>>1==1?Mt[We]:Ct[We];if(me+=vt&15,vt>>>=4,(vt>>>8&255)===0)be[Se++]=vt;else{if(vt==256)break;vt-=257;var jt=vt<8?0:vt-4>>2;jt>5&&(jt=0);var Ot=Se+te[vt];jt>0&&(Ot+=Nt(le,me,jt),me+=jt),We=Nt(le,me,$e),vt=pe>>>1==1?mr[We]:ur[We],me+=vt&15,vt>>>=4;var bt=vt<4?0:vt-2>>1,kt=J[vt];for(bt>0&&(kt+=Nt(le,me,bt),me+=bt),!Ne&&ze<Ot&&(be=qe(be,Ot+100),ze=be.length);Se<Ot;)be[Se]=be[Se-kt],++Se}}}return Ne?[be,me+7>>>3]:[be.slice(0,Se),me+7>>>3]}function Lr(le,Ne){var me=le.slice(le.l||0),pe=ir(me,Ne);return le.l+=pe[1],pe[0]}function pr(le,Ne){if(le)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function _a(le,Ne){var me=le;fi(me,0);var pe=[],be=[],Se={FileIndex:pe,FullPaths:be};D(Se,{root:Ne.root});for(var ze=me.length-4;(me[ze]!=80||me[ze+1]!=75||me[ze+2]!=5||me[ze+3]!=6)&&ze>=0;)--ze;me.l=ze+4,me.l+=4;var tt=me.read_shift(2);me.l+=6;var $e=me.read_shift(4);for(me.l=$e,ze=0;ze<tt;++ze){me.l+=20;var He=me.read_shift(4),We=me.read_shift(4),vt=me.read_shift(2),jt=me.read_shift(2),Ot=me.read_shift(2);me.l+=8;var bt=me.read_shift(4),kt=o(me.slice(me.l+vt,me.l+vt+jt));me.l+=vt+jt+Ot;var zt=me.l;me.l=bt+4,Xa(me,He,We,Se,kt),me.l=zt}return Se}function Xa(le,Ne,me,pe,be){le.l+=2;var Se=le.read_shift(2),ze=le.read_shift(2),tt=l(le);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var $e=le.read_shift(4),He=le.read_shift(4),We=le.read_shift(4),vt=le.read_shift(2),jt=le.read_shift(2),Ot="",bt=0;bt<vt;++bt)Ot+=String.fromCharCode(le[le.l++]);if(jt){var kt=o(le.slice(le.l,le.l+jt));(kt[21589]||{}).mt&&(tt=kt[21589].mt),((be||{})[21589]||{}).mt&&(tt=be[21589].mt)}le.l+=jt;var zt=le.slice(le.l,le.l+He);switch(ze){case 8:zt=I(le,We);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ze)}var xa=!1;Se&8&&($e=le.read_shift(4),$e==134695760&&($e=le.read_shift(4),xa=!0),He=le.read_shift(4),We=le.read_shift(4)),He!=Ne&&pr(xa,"Bad compressed size: "+Ne+" != "+He),We!=me&&pr(xa,"Bad uncompressed size: "+me+" != "+We),ys(pe,Ot,zt,{unsafe:!0,mt:tt})}function ea(le,Ne){var me=Ne||{},pe=[],be=[],Se=nt(1),ze=me.compression?8:0,tt=0,$e=0,He=0,We=0,vt=0,jt=le.FullPaths[0],Ot=jt,bt=le.FileIndex[0],kt=[],zt=0;for($e=1;$e<le.FullPaths.length;++$e)if(Ot=le.FullPaths[$e].slice(jt.length),bt=le.FileIndex[$e],!(!bt.size||!bt.content||Ot=="Sh33tJ5")){var xa=We,Br=nt(Ot.length);for(He=0;He<Ot.length;++He)Br.write_shift(1,Ot.charCodeAt(He)&127);Br=Br.slice(0,Br.l),kt[vt]=jG.buf(bt.content,0);var ja=bt.content;ze==8&&(ja=q(ja)),Se=nt(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,tt),Se.write_shift(2,ze),bt.mt?i(Se,bt.mt):Se.write_shift(4,0),Se.write_shift(-4,kt[vt]),Se.write_shift(4,ja.length),Se.write_shift(4,bt.content.length),Se.write_shift(2,Br.length),Se.write_shift(2,0),We+=Se.length,pe.push(Se),We+=Br.length,pe.push(Br),We+=ja.length,pe.push(ja),Se=nt(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,tt),Se.write_shift(2,ze),Se.write_shift(4,0),Se.write_shift(-4,kt[vt]),Se.write_shift(4,ja.length),Se.write_shift(4,bt.content.length),Se.write_shift(2,Br.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,xa),zt+=Se.l,be.push(Se),zt+=Br.length,be.push(Br),++vt}return Se=nt(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,vt),Se.write_shift(2,vt),Se.write_shift(4,zt),Se.write_shift(4,We),Se.write_shift(2,0),Ys([Ys(pe),Ys(be),Se])}var Zt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function $r(le,Ne){if(le.ctype)return le.ctype;var me=le.name||"",pe=me.match(/\.([^\.]+)$/);return pe&&Zt[pe[1]]||Ne&&(pe=(me=Ne).match(/[\.\\]([^\.\\])+$/),pe&&Zt[pe[1]])?Zt[pe[1]]:"application/octet-stream"}function Bi(le){for(var Ne=yg(le),me=[],pe=0;pe<Ne.length;pe+=76)me.push(Ne.slice(pe,pe+76));return me.join(`\r
`)+`\r
`}function ls(le){var Ne=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(He){var We=He.charCodeAt(0).toString(16).toUpperCase();return"="+(We.length==1?"0"+We:We)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var me=[],pe=Ne.split(`\r
`),be=0;be<pe.length;++be){var Se=pe[be];if(Se.length==0){me.push("");continue}for(var ze=0;ze<Se.length;){var tt=76,$e=Se.slice(ze,ze+tt);$e.charAt(tt-1)=="="?tt--:$e.charAt(tt-2)=="="?tt-=2:$e.charAt(tt-3)=="="&&(tt-=3),$e=Se.slice(ze,ze+tt),ze+=tt,ze<Se.length&&($e+="="),me.push($e)}}return me.join(`\r
`)}function ul(le){for(var Ne=[],me=0;me<le.length;++me){for(var pe=le[me];me<=le.length&&pe.charAt(pe.length-1)=="=";)pe=pe.slice(0,pe.length-1)+le[++me];Ne.push(pe)}for(var be=0;be<Ne.length;++be)Ne[be]=Ne[be].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return so(Ne.join(`\r
`))}function vi(le,Ne,me){for(var pe="",be="",Se="",ze,tt=0;tt<10;++tt){var $e=Ne[tt];if(!$e||$e.match(/^\s*$/))break;var He=$e.match(/^(.*?):\s*([^\s].*)$/);if(He)switch(He[1].toLowerCase()){case"content-location":pe=He[2].trim();break;case"content-type":Se=He[2].trim();break;case"content-transfer-encoding":be=He[2].trim();break}}switch(++tt,be.toLowerCase()){case"base64":ze=so(ho(Ne.slice(tt).join("")));break;case"quoted-printable":ze=ul(Ne.slice(tt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+be)}var We=ys(le,pe.slice(me.length),ze,{unsafe:!0});Se&&(We.ctype=Se)}function Jt(le,Ne){if(ce(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var me=Ne&&Ne.root||"",pe=(zr&&Buffer.isBuffer(le)?le.toString("binary"):ce(le)).split(`\r
`),be=0,Se="";for(be=0;be<pe.length;++be)if(Se=pe[be],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),me||(me=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,me.length)!=me))for(;me.length>0&&(me=me.slice(0,me.length-1),me=me.slice(0,me.lastIndexOf("/")+1),Se.slice(0,me.length)!=me););var ze=(pe[1]||"").match(/boundary="(.*?)"/);if(!ze)throw new Error("MAD cannot find boundary");var tt="--"+(ze[1]||""),$e=[],He=[],We={FileIndex:$e,FullPaths:He};D(We);var vt,jt=0;for(be=0;be<pe.length;++be){var Ot=pe[be];Ot!==tt&&Ot!==tt+"--"||(jt++&&vi(We,pe.slice(vt,be),me),vt=be)}return We}function Bl(le,Ne){var me=Ne||{},pe=me.boundary||"SheetJS";pe="------="+pe;for(var be=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+pe.slice(2)+'"',"","",""],Se=le.FullPaths[0],ze=Se,tt=le.FileIndex[0],$e=1;$e<le.FullPaths.length;++$e)if(ze=le.FullPaths[$e].slice(Se.length),tt=le.FileIndex[$e],!(!tt.size||!tt.content||ze=="Sh33tJ5")){ze=ze.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(zt){return"_x"+zt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(zt){return"_u"+zt.charCodeAt(0).toString(16)+"_"});for(var He=tt.content,We=zr&&Buffer.isBuffer(He)?He.toString("binary"):ce(He),vt=0,jt=Math.min(1024,We.length),Ot=0,bt=0;bt<=jt;++bt)(Ot=We.charCodeAt(bt))>=32&&Ot<128&&++vt;var kt=vt>=jt*4/5;be.push(pe),be.push("Content-Location: "+(me.root||"file:///C:/SheetJS/")+ze),be.push("Content-Transfer-Encoding: "+(kt?"quoted-printable":"base64")),be.push("Content-Type: "+$r(tt,ze)),be.push(""),be.push(kt?ls(We):Bi(We))}return be.push(pe+`--\r
`),be.join(`\r
`)}function dl(le){var Ne={};return D(Ne,le),Ne}function ys(le,Ne,me,pe){var be=pe&&pe.unsafe;be||D(le);var Se=!be&&sr.find(le,Ne);if(!Se){var ze=le.FullPaths[0];Ne.slice(0,ze.length)==ze?ze=Ne:(ze.slice(-1)!="/"&&(ze+="/"),ze=(ze+Ne).replace("//","/")),Se={name:s(Ne),type:2},le.FileIndex.push(Se),le.FullPaths.push(ze),be||sr.utils.cfb_gc(le)}return Se.content=me,Se.size=me?me.length:0,pe&&(pe.CLSID&&(Se.clsid=pe.CLSID),pe.mt&&(Se.mt=pe.mt),pe.ct&&(Se.ct=pe.ct)),Se}function Js(le,Ne){D(le);var me=sr.find(le,Ne);if(me){for(var pe=0;pe<le.FileIndex.length;++pe)if(le.FileIndex[pe]==me)return le.FileIndex.splice(pe,1),le.FullPaths.splice(pe,1),!0}return!1}function Pa(le,Ne,me){D(le);var pe=sr.find(le,Ne);if(pe){for(var be=0;be<le.FileIndex.length;++be)if(le.FileIndex[be]==pe)return le.FileIndex[be].name=s(me),le.FullPaths[be]=me,!0}return!1}function un(le){F(le,!0)}return t.find=L,t.read=P,t.parse=f,t.write=ke,t.writeFile=he,t.utils={cfb_new:dl,cfb_add:ys,cfb_del:Js,cfb_mov:Pa,cfb_gc:un,ReadShift:eg,CheckField:FP,prep_blob:fi,bconcat:Ys,use_zlib:R,_deflateRaw:wt,_inflateRaw:Lr,consts:X},t})();function NG(e){return typeof e=="string"?$b(e):Array.isArray(e)?YK(e):e}function Qg(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=$b(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?ju(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([NG(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=r0(t)),o.write(t),o.close(),t}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+e)}function _G(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Wn(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function PC(e,t){for(var r=[],a=Wn(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function Vb(e){for(var t=[],r=Wn(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function Wb(e){for(var t=[],r=Wn(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function SG(e){for(var t=[],r=Wn(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var Py=new Date(1899,11,30,0,0,0);function Fs(e,t){var r=e.getTime(),a=Py.getTime()+(e.getTimezoneOffset()-Py.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var fP=new Date,kG=Py.getTime()+(fP.getTimezoneOffset()-Py.getTimezoneOffset())*6e4,MC=fP.getTimezoneOffset();function Kb(e){var t=new Date;return t.setTime(e*24*60*60*1e3+kG),t.getTimezoneOffset()!==MC&&t.setTime(t.getTime()+(t.getTimezoneOffset()-MC)*6e4),t}function AG(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var LC=new Date("2017-02-19T19:06:09.000Z"),hP=isNaN(LC.getFullYear())?new Date("2/19/17"):LC,CG=hP.getFullYear()==2017;function on(e,t){var r=new Date(e);if(CG)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(hP.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function dh(e,t){if(zr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return ju(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return ju(eP(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return ju(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return ju(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function cn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=cn(e[r]));return t}function $n(e,t){for(var r="";r.length<t;)r+=e;return r}function Lc(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var EG=["january","february","march","april","may","june","july","august","september","october","november","december"];function mp(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&EG.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var TG=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),l=[i[0]],o=1;o<i.length;++o)l.push(s),l.push(i[o]);return l}})();function mP(e){return e?e.content&&e.type?dh(e.content,!0):e.data?Vx(e.data):e.asNodeBuffer&&zr?Vx(e.asNodeBuffer().toString("binary")):e.asBinary?Vx(e.asBinary()):e._data&&e._data.getContent?Vx(dh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function pP(e){if(!e)return null;if(e.data)return _C(e.data);if(e.asNodeBuffer&&zr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?_C(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function DG(e){return e&&e.name.slice(-4)===".bin"?pP(e):mP(e)}function $o(e,t){for(var r=e.FullPaths||Wn(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==l||s==l)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function F4(e,t){var r=$o(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function hs(e,t,r){if(!r)return DG(F4(e,t));if(!t)return null;try{return hs(e,t)}catch{return null}}function io(e,t,r){if(!r)return mP(F4(e,t));if(!t)return null;try{return io(e,t)}catch{return null}}function OG(e,t,r){return pP(F4(e,t))}function RC(e){for(var t=e.FullPaths||Wn(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function Dr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return zr?a=Bd(r):a=XK(r),sr.utils.cfb_add(e,t,a)}sr.utils.cfb_add(e,t,r)}else e.file(t,r)}function P4(){return sr.utils.cfb_new()}function xP(e,t){switch(t.type){case"base64":return sr.read(e,{type:"base64"});case"binary":return sr.read(e,{type:"binary"});case"buffer":case"array":return sr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Kx(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var is=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,FG=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,IC=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,PG=/<[^>]*>/g,Ii=is.match(IC)?IC:PG,MG=/<\w*:/,LG=/<(\/?)\w+:/;function gr(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var l=e.match(FG),o=0,d="",u=0,f="",m="",g=1;if(l)for(u=0;u!=l.length;++u){for(m=l[u],i=0;i!=m.length&&m.charCodeAt(i)!==61;++i);for(f=m.slice(0,i).trim();m.charCodeAt(i+1)==32;)++i;for(g=(s=m.charCodeAt(i+1))==34||s==39?1:0,d=m.slice(i+1+g,m.length-g),o=0;o!=f.length&&f.charCodeAt(o)!==58;++o);if(o===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),a[f]=d,a[f.toLowerCase()]=d;else{var x=(o===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(o+1);if(a[x]&&f.slice(o-3,o)=="ext")continue;a[x]=d,a[x.toLowerCase()]=d}}return a}function Fu(e){return e.replace(LG,"<$1")}var gP={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},M4=Vb(gP),ca=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(o,d){return gP[o]||String.fromCharCode(parseInt(d,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,d){return String.fromCharCode(parseInt(d,16))});var l=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,l)+r(s.slice(l+3))}})(),L4=/[&<>'"]/g,RG=/[\u0000-\u0008\u000b-\u001f]/g;function Oa(e){var t=e+"";return t.replace(L4,function(r){return M4[r]}).replace(RG,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function BC(e){return Oa(e).replace(/ /g,"_x0020_")}var vP=/[\u0000-\u001f]/g;function R4(e){var t=e+"";return t.replace(L4,function(r){return M4[r]}).replace(/\n/g,"<br/>").replace(vP,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function IG(e){var t=e+"";return t.replace(L4,function(r){return M4[r]}).replace(vP,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var zC=(function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function BG(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function sn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function d5(e){for(var t="",r=0,a=0,s=0,i=0,l=0,o=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){l=(a&31)<<6,l|=s&63,t+=String.fromCharCode(l);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}l=e.charCodeAt(r++),o=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function UC(e){var t=Vf(2*e.length),r,a,s=1,i=0,l=0,o;for(a=0;a<e.length;a+=s)s=1,(o=e.charCodeAt(a))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(a+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[i++]=l&255,t[i++]=l>>>8,l=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function qC(e){return Bd(e,"binary").toString("utf8")}var A1="foo bar baz",qa=zr&&(qC(A1)==d5(A1)&&qC||UC(A1)==d5(A1)&&UC)||d5,ju=zr?function(e){return Bd(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},wg=(function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}})(),yP=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}})(),zG=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),UG=/<\/?(?:vt:)?variant>/g,qG=/<(?:vt:)([^>]*)>([\s\S]*)</;function $C(e,t){var r=gr(e),a=e.match(zG(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var l=i.replace(UG,"").match(qG);l&&s.push({v:qa(l[2]),t:l[1]})}),s}var bP=/(^\s|\s$|\n)/;function mi(e,t){return"<"+e+(t.match(bP)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function jg(e){return Wn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function _t(e,t,r){return"<"+e+(r!=null?jg(r):"")+(t!=null?(t.match(bP)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function IN(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function $G(e,t){switch(typeof e){case"string":var r=_t("vt:lpwstr",Oa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return _t((e|0)==e?"vt:i4":"vt:r8",Oa(String(e)));case"boolean":return _t("vt:bool",e?"true":"false")}if(e instanceof Date)return _t("vt:filetime",IN(e));throw new Error("Unable to serialize "+e)}function I4(e){if(zr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return qa(r0(T4(e)));throw new Error("Bad input format: expected Buffer or string")}var Ng=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Os={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ch=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ro={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function HG(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function VG(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,l=a?-t:t;isFinite(l)?l==0?s=i=0:(s=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var HC=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},VC=zr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Bd(t)})):HC(e)}:HC,WC=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(gd(e,s)));return a.join("").replace(sl,"")},B4=zr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(sl,""):WC(e,t,r)}:WC,KC=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},wP=zr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):KC(e,t,r)}:KC,GC=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(qm(e,s)));return a.join("")},Zg=zr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):GC(t,r,a)}:GC,jP=function(e,t){var r=ao(e,t);return r>0?Zg(e,t+4,t+4+r-1):""},NP=jP,_P=function(e,t){var r=ao(e,t);return r>0?Zg(e,t+4,t+4+r-1):""},SP=_P,kP=function(e,t){var r=2*ao(e,t);return r>0?Zg(e,t+4,t+4+r-1):""},AP=kP,CP=function(t,r){var a=ao(t,r);return a>0?B4(t,r+4,r+4+a):""},EP=CP,TP=function(e,t){var r=ao(e,t);return r>0?Zg(e,t+4,t+4+r):""},DP=TP,OP=function(e,t){return HG(e,t)},My=OP,z4=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};zr&&(NP=function(t,r){if(!Buffer.isBuffer(t))return jP(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},SP=function(t,r){if(!Buffer.isBuffer(t))return _P(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},AP=function(t,r){if(!Buffer.isBuffer(t))return kP(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},EP=function(t,r){if(!Buffer.isBuffer(t))return CP(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},DP=function(t,r){if(!Buffer.isBuffer(t))return TP(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},My=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):OP(t,r)},z4=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var qm=function(e,t){return e[t]},gd=function(e,t){return e[t+1]*256+e[t]},WG=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ao=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},$0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},KG=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function eg(e,t){var r="",a,s,i=[],l,o,d,u;switch(t){case"dbcs":if(u=this.l,zr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)r+=String.fromCharCode(gd(this,u)),u+=2;e*=2;break;case"utf8":r=Zg(this,this.l,this.l+e);break;case"utf16le":e*=2,r=B4(this,this.l,this.l+e);break;case"wstr":return eg.call(this,e,"dbcs");case"lpstr-ansi":r=NP(this,this.l),e=4+ao(this,this.l);break;case"lpstr-cp":r=SP(this,this.l),e=4+ao(this,this.l);break;case"lpwstr":r=AP(this,this.l),e=4+2*ao(this,this.l);break;case"lpp4":e=4+ao(this,this.l),r=EP(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ao(this,this.l),r=DP(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=qm(this,this.l+e++))!==0;)i.push(k1(l));r=i.join("");break;case"_wstr":for(e=0,r="";(l=gd(this,this.l+e))!==0;)i.push(k1(l)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return l=qm(this,u),this.l=u+1,o=eg.call(this,e-d,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(k1(gd(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return l=qm(this,u),this.l=u+1,o=eg.call(this,e-d,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(k1(qm(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return a=qm(this,this.l),this.l++,a;case 2:return a=(t==="i"?WG:gd)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?$0:KG)(this,this.l),this.l+=4,a):(s=ao(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=My(this,this.l):s=My([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=wP(this,this.l,e);break}}return this.l+=e,r}var GG=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},YG=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},XG=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function QG(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)XG(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var l=t.charCodeAt(s);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,GG(this,t,this.l);break;case 8:if(a=8,r==="f"){VG(this,t,this.l);break}case 16:break;case-4:a=4,YG(this,t,this.l);break}return this.l+=a,this}function FP(e,t){var r=wP(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function fi(e,t){e.l=t,e.read_shift=eg,e.chk=FP,e.write_shift=QG}function Li(e,t){e.l+=t}function nt(e){var t=Vf(e);return fi(t,0),t}function zd(e,t,r){if(e){var a,s,i;fi(e,e.l||0);for(var l=e.length,o=0,d=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Eg[o]||Eg[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;d=e.l+i;var f=u.f&&u.f(e,i,r);if(e.l=d,t(f,u,o))return}}}function Fl(){var e=[],t=zr?256:2048,r=function(u){var f=nt(u);return fi(f,0),f},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(s(),a=r(Math.max(u+1,t)))},l=function(){return s(),Ys(e)},o=function(u){s(),a=u,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:o,end:l,_bufs:e}}function mt(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=Eg[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var l=e.next(i);s<=127?l.write_shift(1,s):(l.write_shift(1,(s&127)+128),l.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(a>=128)l.write_shift(1,(a&127)+128),a>>=7;else{l.write_shift(1,a);break}a>0&&z4(r)&&e.push(r)}}function tg(e,t,r){var a=cn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function YC(e,t,r){var a=cn(e);return a.s=tg(a.s,t.s,r),a.e=tg(a.e,t.s,r),a}function rg(e,t){if(e.cRel&&e.c<0)for(e=cn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=cn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=hr(e);return!e.cRel&&e.cRel!=null&&(r=eY(r)),!e.rRel&&e.rRel!=null&&(r=ZG(r)),r}function f5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Dn(e.s.c)+":"+(e.e.cRel?"":"$")+Dn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ss(e.s.r)+":"+(e.e.rRel?"":"$")+ss(e.e.r):rg(e.s,t.biff)+":"+rg(e.e,t.biff)}function U4(e){return parseInt(JG(e),10)-1}function ss(e){return""+(e+1)}function ZG(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function JG(e){return e.replace(/\$(\d+)$/,"$1")}function q4(e){for(var t=tY(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function Dn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function eY(e){return e.replace(/^([A-Z])/,"$$$1")}function tY(e){return e.replace(/^\$([A-Z])/,"$1")}function rY(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function On(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Rl(e){var t=e.indexOf(":");return t==-1?{s:On(e),e:On(e)}:{s:On(e.slice(0,t)),e:On(e.slice(t+1))}}function Cr(e,t){return typeof t>"u"||typeof t=="number"?Cr(e.s,e.e):(typeof e!="string"&&(e=hr(e)),typeof t!="string"&&(t=hr(t)),e==t?e:e+":"+t)}function ua(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function XC(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Qo(e.z,r?Fs(t):t)}catch{}try{return e.w=Qo((e.XF||{}).numFmtId||(r?14:0),r?Fs(t):t)}catch{return""+t}}function Dd(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Ud[e.v]||e.v:t==null?XC(e,e.v):XC(e,t))}function a0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function PP(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),l=0,o=0;if(i&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var d=typeof a.origin=="string"?On(a.origin):a.origin;l=d.r,o=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=ua(i["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),l==-1&&(u.e.r=l=f.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=t[m].length;++g)if(!(typeof t[m][g]>"u")){var x={v:t[m][g]},b=l+m,v=o+g;if(u.s.r>b&&(u.s.r=b),u.s.c>v&&(u.s.c=v),u.e.r<b&&(u.e.r=b),u.e.c<v&&(u.e.c=v),t[m][g]&&typeof t[m][g]=="object"&&!Array.isArray(t[m][g])&&!(t[m][g]instanceof Date))x=t[m][g];else if(Array.isArray(x.v)&&(x.f=t[m][g][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(a.nullError)x.t="e",x.v=0;else if(a.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?x.t="n":typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=a.dateNF||fr[14],a.cellDates?(x.t="d",x.w=Qo(x.z,Fs(x.v))):(x.t="n",x.v=Fs(x.v),x.w=Qo(x.z,x.v))):x.t="s";if(s)i[b]||(i[b]=[]),i[b][v]&&i[b][v].z&&(x.z=i[b][v].z),i[b][v]=x;else{var y=hr({c:v,r:b});i[y]&&i[y].z&&(x.z=i[y].z),i[y]=x}}}return u.s.c<1e7&&(i["!ref"]=Cr(u)),i}function Fp(e,t){return PP(null,e,t)}function aY(e){return e.read_shift(4,"i")}function Rc(e,t){return t||(t=nt(4)),t.write_shift(4,e),t}function Pi(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Xs(e,t){var r=!1;return t==null&&(r=!0,t=nt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function nY(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function sY(e,t){return t||(t=nt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function $4(e,t){var r=e.l,a=e.read_shift(1),s=Pi(e),i=[],l={t:s,h:s};if((a&1)!==0){for(var o=e.read_shift(4),d=0;d!=o;++d)i.push(nY(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}function iY(e,t){var r=!1;return t==null&&(r=!0,t=nt(15+4*e.t.length)),t.write_shift(1,0),Xs(e.t,t),r?t.slice(0,t.l):t}var lY=$4;function oY(e,t){var r=!1;return t==null&&(r=!0,t=nt(23+4*e.t.length)),t.write_shift(1,1),Xs(e.t,t),t.write_shift(4,1),sY({},t),r?t.slice(0,t.l):t}function rc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Eh(e,t){return t==null&&(t=nt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Th(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Dh(e,t){return t==null&&(t=nt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var cY=Pi,MP=Xs;function H4(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Ly(e,t){var r=!1;return t==null&&(r=!0,t=nt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var uY=Pi,BN=H4,V4=Ly;function W4(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?My([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):$0(t,0)>>2;return r?s/100:s}function LP(e,t){t==null&&(t=nt(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function RP(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function dY(e,t){return t||(t=nt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Oh=RP,Pp=dY;function Fi(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function fh(e,t){return(t||nt(8)).write_shift(8,e,"f")}function fY(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),d=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var u=Q0[s];u&&(t.rgb=Sg(u));break;case 2:t.rgb=Sg([l,o,d]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Ry(e,t){if(t||(t=nt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function hY(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function mY(e,t){t||(t=nt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function IP(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function pY(e){return IP(e,1)}function xY(e){return IP(e,2)}var K4=2,El=3,C1=11,QC=12,Iy=19,E1=64,gY=65,vY=71,yY=4108,bY=4126,Ws=80,BP=81,wY=[Ws,BP],zN={1:{n:"CodePage",t:K4},2:{n:"Category",t:Ws},3:{n:"PresentationFormat",t:Ws},4:{n:"ByteCount",t:El},5:{n:"LineCount",t:El},6:{n:"ParagraphCount",t:El},7:{n:"SlideCount",t:El},8:{n:"NoteCount",t:El},9:{n:"HiddenCount",t:El},10:{n:"MultimediaClipCount",t:El},11:{n:"ScaleCrop",t:C1},12:{n:"HeadingPairs",t:yY},13:{n:"TitlesOfParts",t:bY},14:{n:"Manager",t:Ws},15:{n:"Company",t:Ws},16:{n:"LinksUpToDate",t:C1},17:{n:"CharacterCount",t:El},19:{n:"SharedDoc",t:C1},22:{n:"HyperlinksChanged",t:C1},23:{n:"AppVersion",t:El,p:"version"},24:{n:"DigSig",t:gY},26:{n:"ContentType",t:Ws},27:{n:"ContentStatus",t:Ws},28:{n:"Language",t:Ws},29:{n:"Version",t:Ws},255:{},2147483648:{n:"Locale",t:Iy},2147483651:{n:"Behavior",t:Iy},1919054434:{}},UN={1:{n:"CodePage",t:K4},2:{n:"Title",t:Ws},3:{n:"Subject",t:Ws},4:{n:"Author",t:Ws},5:{n:"Keywords",t:Ws},6:{n:"Comments",t:Ws},7:{n:"Template",t:Ws},8:{n:"LastAuthor",t:Ws},9:{n:"RevNumber",t:Ws},10:{n:"EditTime",t:E1},11:{n:"LastPrinted",t:E1},12:{n:"CreatedDate",t:E1},13:{n:"ModifiedDate",t:E1},14:{n:"PageCount",t:El},15:{n:"WordCount",t:El},16:{n:"CharCount",t:El},17:{n:"Thumbnail",t:vY},18:{n:"Application",t:Ws},19:{n:"DocSecurity",t:El},255:{},2147483648:{n:"Locale",t:Iy},2147483651:{n:"Behavior",t:Iy},1919054434:{}},ZC={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},jY=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function NY(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var _Y=NY([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Q0=cn(_Y),Ud={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zP={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},qN={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},T1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function G4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function SY(e){var t=G4();if(!e||!e.match)return t;var r={};if((e.match(Ii)||[]).forEach(function(a){var s=gr(a);switch(s[0].replace(MG,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[qN[s.ContentType]]!==void 0&&t[qN[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Os.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function UP(e,t){var r=SG(qN),a=[],s;a[a.length]=is,a[a.length]=_t("Types",null,{xmlns:Os.CT,"xmlns:xsd":Os.xsd,"xmlns:xsi":Os.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(d){return _t("Default",null,{Extension:d[0],ContentType:d[1]})}));var i=function(d){e[d]&&e[d].length>0&&(s=e[d][0],a[a.length]=_t("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:T1[d][t.bookType]||T1[d].xlsx}))},l=function(d){(e[d]||[]).forEach(function(u){a[a.length]=_t("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:T1[d][t.bookType]||T1[d].xlsx})})},o=function(d){(e[d]||[]).forEach(function(u){a[a.length]=_t("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[d][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var qr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function _g(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ag(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Ii)||[]).forEach(function(s){var i=gr(s);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Kx(i.Target,t);r[o]=l,a[i.Id]=l}}),r["!id"]=a,r}function Jm(e){var t=[is,_t("Relationships",null,{xmlns:Os.RELS})];return Wn(e["!id"]).forEach(function(r){t[t.length]=_t("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ea(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,[qr.HLINK,qr.XPATH,qr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var kY="application/vnd.oasis.opendocument.spreadsheet";function AY(e,t){for(var r=I4(e),a,s;a=Ng.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=gr(a[0],!1),s.path=="/"&&s.type!==kY)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function CY(e){var t=[is];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function JC(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function EY(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function TY(e){var t=[is];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(JC(e[r][0],e[r][1])),t.push(EY("",e[r][0]));return t.push(JC("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function qP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Ty.version+"</meta:generator></office:meta></office:document-meta>"}var Go=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],DY=(function(){for(var e=new Array(Go.length),t=0;t<Go.length;++t){var r=Go[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function $P(e){var t={};e=qa(e);for(var r=0;r<Go.length;++r){var a=Go[r],s=e.match(DY[r]);s!=null&&s.length>0&&(t[a[1]]=ca(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=on(t[a[1]]))}return t}function h5(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Oa(t),a[a.length]=r?_t(e,t,r):mi(e,t))}function HP(e,t){var r=t||{},a=[is,_t("cp:coreProperties",null,{"xmlns:cp":Os.CORE_PROPS,"xmlns:dc":Os.dc,"xmlns:dcterms":Os.dcterms,"xmlns:dcmitype":Os.dcmitype,"xmlns:xsi":Os.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&h5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:IN(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&h5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:IN(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=Go.length;++i){var l=Go[i],o=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&h5(l[0],o,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var Z0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],VP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function WP(e,t,r,a){var s=[];if(typeof e=="string")s=$C(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var l=typeof t=="string"?$C(t,a).map(function(f){return f.v}):t,o=0,d=0;if(l.length>0)for(var u=0;u!==s.length;u+=2){switch(d=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=d,r.SheetNames=l.slice(o,o+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=d,r.DefinedNames=l.slice(o,o+d);break;case"Charts":case"Diagramme":r.Chartsheets=d,r.ChartNames=l.slice(o,o+d);break}o+=d}}function OY(e,t,r){var a={};return t||(t={}),e=qa(e),Z0.forEach(function(s){var i=(e.match(wg(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=ca(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));l&&l.length>0&&(a[s[1]]=l[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&WP(a.HeadingPairs,a.TitlesOfParts,t,r),t}function KP(e){var t=[],r=_t;return e||(e={}),e.Application="SheetJS",t[t.length]=is,t[t.length]=_t("Properties",null,{xmlns:Os.EXT_PROPS,"xmlns:vt":Os.vt}),Z0.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=Oa(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Oa(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var FY=/<[^>]+>[^<]*/g;function PY(e,t){var r={},a="",s=e.match(FY);if(s)for(var i=0;i!=s.length;++i){var l=s[i],o=gr(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":a=ca(o.name);break;case"</property>":a=null;break;default:if(l.indexOf("<vt:")===0){var d=l.split(">"),u=d[0].slice(4),f=d[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=ca(f);break;case"bool":r[a]=sn(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(f);break;case"filetime":case"date":r[a]=on(f);break;case"cy":case"error":r[a]=ca(f);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",l,u,d)}}else if(l.slice(0,2)!=="</"){if(t.WTF)throw new Error(l)}}}return r}function GP(e){var t=[is,_t("Properties",null,{xmlns:Os.CUST_PROPS,"xmlns:vt":Os.vt})];if(!e)return t.join("");var r=1;return Wn(e).forEach(function(s){++r,t[t.length]=_t("property",$G(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Oa(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var $N={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},m5;function MY(e,t,r){m5||(m5=Vb($N)),t=m5[t]||t,e[t]=r}function LY(e,t){var r=[];return Wn($N).map(function(a){for(var s=0;s<Go.length;++s)if(Go[s][1]==a)return Go[s];for(s=0;s<Z0.length;++s)if(Z0[s][1]==a)return Z0[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(mi($N[a[1]]||a[1],s))}}),_t("DocumentProperties",r.join(""),{xmlns:ro.o})}function RY(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&Wn(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<Go.length;++l)if(i==Go[l][1])return;for(l=0;l<Z0.length;++l)if(i==Z0[l][1])return;for(l=0;l<r.length;++l)if(i==r[l])return;var o=e[i],d="string";typeof o=="number"?(d="float",o=String(o)):o===!0||o===!1?(d="boolean",o=o?"1":"0"):o=String(o),s.push(_t(BC(i),o,{"dt:dt":d}))}}),t&&Wn(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=t[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),s.push(_t(BC(i),l,{"dt:dt":o}))}}),"<"+a+' xmlns="'+ro.o+'">'+s.join("")+"</"+a+">"}function Y4(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function IY(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var l=nt(8);return l.write_shift(4,a),l.write_shift(4,s),l}function YP(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function XP(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function QP(e,t,r){return t===31?XP(e):YP(e,t,r)}function HN(e,t,r){return QP(e,t,r===!1?0:4)}function BY(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return QP(e,t,0)}function zY(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(sl,""),e.l-s&2&&(e.l+=2)}return r}function UY(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(sl,"");return r}function qY(e){var t=e.l,r=By(e,BP);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=By(e,El);return[r,a]}function $Y(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(qY(e));return r}function eE(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),l=e.read_shift(4);a[i]=e.read_shift(l,t===1200?"utf16le":"utf8").replace(sl,"").replace(Wx,"!"),t===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function ZP(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function HY(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function By(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==QC&&a!==t&&wY.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===QC?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return YP(e,a,4).replace(sl,"");case 31:return XP(e);case 64:return Y4(e);case 65:return ZP(e);case 71:return HY(e);case 80:return HN(e,a,!i.raw).replace(sl,"");case 81:return BY(e,a).replace(sl,"");case 4108:return $Y(e);case 4126:case 4127:return a==4127?zY(e):UY(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function tE(e,t){var r=nt(4),a=nt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=nt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=IY(t);break;case 31:case 80:for(a=nt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ys([r,a])}function rE(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],l=0,o=0,d=-1,u={};for(l=0;l!=s;++l){var f=e.read_shift(4),m=e.read_shift(4);i[l]=[f,m+r]}i.sort(function(S,N){return S[1]-N[1]});var g={};for(l=0;l!=s;++l){if(e.l!==i[l][1]){var x=!0;if(l>0&&t)switch(t[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,x=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],x=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],x=!1);break}if((!t||l==0)&&e.l<=i[l][1]&&(x=!1,e.l=i[l][1]),x)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(t){var b=t[i[l][0]];if(g[b.n]=By(e,b.t,{raw:!0}),b.p==="version"&&(g[b.n]=String(g[b.n]>>16)+"."+("0000"+String(g[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(g[b.n]){case 0:g[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Oc(o=g[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[b.n])}}else if(i[l][0]===1){if(o=g.CodePage=By(e,K4),Oc(o),d!==-1){var v=e.l;e.l=i[d][1],u=eE(e,o),e.l=v}}else if(i[l][0]===0){if(o===0){d=l,e.l=i[l+1][1];continue}u=eE(e,o)}else{var y=u[i[l][0]],j;switch(e[e.l]){case 65:e.l+=4,j=ZP(e);break;case 30:e.l+=4,j=HN(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,j=HN(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,j=e.read_shift(4,"i");break;case 19:e.l+=4,j=e.read_shift(4);break;case 5:e.l+=4,j=e.read_shift(8,"f");break;case 11:e.l+=4,j=Qn(e,4);break;case 64:e.l+=4,j=on(Y4(e));break;default:throw new Error("unparsed value: "+e[e.l])}g[y]=j}}return e.l=r+a,g}var JP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function VY(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function aE(e,t,r){var a=nt(8),s=[],i=[],l=8,o=0,d=nt(8),u=nt(8);if(d.write_shift(4,2),d.write_shift(4,1200),u.write_shift(4,1),i.push(d),s.push(u),l+=8+d.length,!t){u=nt(8),u.write_shift(4,0),s.unshift(u);var f=[nt(4)];for(f[0].write_shift(4,e.length),o=0;o<e.length;++o){var m=e[o][0];for(d=nt(8+2*(m.length+1)+(m.length%2?0:2)),d.write_shift(4,o+2),d.write_shift(4,m.length+1),d.write_shift(0,m,"dbcs");d.l!=d.length;)d.write_shift(1,0);f.push(d)}d=Ys(f),i.unshift(d),l+=8+d.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(JP.indexOf(e[o][0])>-1||VP.indexOf(e[o][0])>-1)&&e[o][1]!=null){var g=e[o][1],x=0;if(t){x=+t[e[o][0]];var b=r[x];if(b.p=="version"&&typeof g=="string"){var v=g.split(".");g=(+v[0]<<16)+(+v[1]||0)}d=tE(b.t,g)}else{var y=VY(g);y==-1&&(y=31,g=String(g)),d=tE(y,g)}i.push(d),u=nt(8),u.write_shift(4,t?x:2+o),s.push(u),l+=8+d.length}var j=8*(i.length+1);for(o=0;o<i.length;++o)s[o].write_shift(4,j),j+=i[o].length;return a.write_shift(4,l),a.write_shift(4,i.length),Ys([a].concat(s).concat(i))}function nE(e,t,r){var a=e.content;if(!a)return{};fi(a,0);var s,i,l,o,d=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),f=a.read_shift(16);if(f!==sr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),o=a.read_shift(4),s===1&&o!==a.l)throw new Error("Length mismatch: "+o+" !== "+a.l);s===2&&(l=a.read_shift(16),d=a.read_shift(4));var m=rE(a,t),g={SystemIdentifier:u};for(var x in m)g[x]=m[x];if(g.FMTID=i,s===1)return g;if(d-a.l==2&&(a.l+=2),a.l!==d)throw new Error("Length mismatch 2: "+a.l+" !== "+d);var b;try{b=rE(a,null)}catch{}for(x in b)g[x]=b[x];return g.FMTID=[i,l],g}function sE(e,t,r,a,s,i){var l=nt(s?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,sr.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,s?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,s?68:48);var d=aE(e,r,a);if(o.push(d),s){var u=aE(s,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+d.length),o.push(u)}return Ys(o)}function Tf(e,t){return e.read_shift(t),null}function WY(e,t){t||(t=nt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function KY(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function Qn(e,t){return e.read_shift(t)===1}function Zi(e,t){return t||(t=nt(2)),t.write_shift(2,+!!e),t}function ms(e){return e.read_shift(2,"u")}function Ho(e,t){return t||(t=nt(2)),t.write_shift(2,e),t}function eM(e,t){return KY(e,t,ms)}function GY(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function tM(e,t,r){return r||(r=nt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Jg(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var l=a?e.read_shift(a,s):"";return l}function YY(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),l=0,o,d={};s&&(l=e.read_shift(2)),a&&(o=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*l),a&&(e.l+=o),d.t=f,s||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function XY(e){var t=e.t||"",r=nt(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=nt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return Ys(s)}function hh(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function ev(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):hh(e,a,r)}function Fh(e,t,r){if(r.biff>5)return ev(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function rM(e,t,r){return r||(r=nt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function QY(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function ZY(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(sl,"");return a&&(e.l+=24),s}function JY(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(sl,"");return r+l}function eX(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return ZY(e);case"0303000000000000c000000000000046":return JY(e);default:throw new Error("Unsupported Moniker "+r)}}function D1(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(sl,""):"";return r}function iE(e,t){t||(t=nt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function tX(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,l,o,d,u="",f,m;s&16&&(i=D1(e,r-e.l)),s&128&&(l=D1(e,r-e.l)),(s&257)===257&&(o=D1(e,r-e.l)),(s&257)===1&&(d=eX(e,r-e.l)),s&8&&(u=D1(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(m=Y4(e)),e.l=r;var g=l||o||d||"";g&&u&&(g+="#"+u),g||(g="#"+u),s&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var x={Target:g};return f&&(x.guid=f),m&&(x.time=m),i&&(x.Tooltip=i),x}function rX(e){var t=nt(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)t.write_shift(4,l[r]);if(i==28)a=a.slice(1),iE(a,t);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));var o=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&iE(s>-1?a.slice(s+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));for(var d=0;a.slice(d*3,d*3+3)=="../"||a.slice(d*3,d*3+3)=="..\\";)++d;for(t.write_shift(2,d),t.write_shift(4,a.length-3*d+1),r=0;r<a.length-3*d;++r)t.write_shift(1,a.charCodeAt(r+3*d)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function aM(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function nM(e,t){var r=aM(e);return r[3]=0,r}function Pu(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function mh(e,t,r,a){return a||(a=nt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function aX(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function nX(e,t,r){return t===0?"":Fh(e,t,r)}function sX(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),l=e.read_shift(a,"i");return[s,i,l]}function sM(e){var t=e.read_shift(2),r=W4(e);return[t,r]}function iX(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Jg(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function Gb(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function iM(e,t){return t||(t=nt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function lM(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var lX=lM;function oM(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function oX(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function cX(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ni(e){e.l+=2,e.l+=e.read_shift(2)}var uX={0:Ni,4:Ni,5:Ni,6:Ni,7:cX,8:Ni,9:Ni,10:Ni,11:Ni,12:Ni,13:oX,14:Ni,15:Ni,16:Ni,17:Ni,18:Ni,19:Ni,20:Ni,21:oM};function dX(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(uX[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function O1(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function X4(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=nt(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function fX(e,t){return t===0||e.read_shift(2),1200}function hX(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=Fh(e,0,r);return e.read_shift(t+a-e.l),s}function mX(e,t){var r=!t||t.biff==8,a=nt(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function pX(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function xX(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=Jg(e,0,r);return l.length===0&&(l="Sheet1"),{pos:a,hs:s,dt:i,name:l}}function gX(e,t){var r=!t||t.biff>=8?2:1,a=nt(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function vX(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],l=0;l!=s&&e.l<r;++l)i.push(YY(e));return i.Count=a,i.Unique=s,i}function yX(e,t){var r=nt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=XY(e[s]);var i=Ys([r].concat(a));return i.parts=[r.length].concat(a.map(function(l){return l.length})),i}function bX(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function wX(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function jX(e){var t=aX(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function NX(e){return e.read_shift(2),e.read_shift(4)}function lE(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function _X(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),d=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:l,FirstTab:o,Selected:d,TabRatio:u}}function SX(){var e=nt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function kX(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function AX(e){var t=nt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function CX(){}function EX(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Jg(e,0,r),a}function TX(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=nt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function DX(e){var t=Pu(e);return t.isst=e.read_shift(4),t}function OX(e,t,r,a){var s=nt(10);return mh(e,t,a,s),s.write_shift(4,r),s}function FX(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=Pu(e);r.biff==2&&e.l++;var i=ev(e,a-e.l,r);return s.val=i,s}function PX(e,t,r,a,s){var i=!s||s.biff==8,l=nt(8+ +i+(1+i)*r.length);return mh(e,t,a,l),l.write_shift(2,r.length),i&&l.write_shift(1,1),l.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),l}function MX(e,t,r){var a=e.read_shift(2),s=Fh(e,0,r);return[a,s]}function LX(e,t,r,a){var s=r&&r.biff==5;a||(a=nt(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var RX=Fh;function oE(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),l=e.read_shift(s),o=e.read_shift(2),d=e.read_shift(2);return e.l=a,{s:{r:i,c:o},e:{r:l,c:d}}}function IX(e,t){var r=t.biff==8||!t.biff?4:2,a=nt(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function BX(e){var t=e.read_shift(2),r=e.read_shift(2),a=sM(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function zX(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(sM(e));if(e.l!==r)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:l,rkrec:i}}function UX(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:l,ixfe:i}}function qX(e,t,r,a){var s={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),d=e.read_shift(2);return s.patternType=jY[o>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=l&15,s.dgRight=l>>4&15,s.dgTop=l>>8&15,s.dgBottom=l>>12&15,s.icvLeft=l>>16&127,s.icvRight=l>>23&127,s.grbitDiag=l>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=d&127,s.icvBack=d>>7&127,s.fsxButton=d>>14&1),s}function $X(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=qX(e,t,a.fStyle,r),a}function cE(e,t,r,a){var s=r&&r.biff==5;a||(a=nt(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function HX(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function VX(e){var t=nt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function uE(e,t,r){var a=Pu(e);(r.biff==2||t==9)&&++e.l;var s=GY(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function WX(e,t,r,a,s,i){var l=nt(8);return mh(e,t,a,l),tM(r,i,l),l}function KX(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=Pu(e),s=Fi(e);return a.val=s,a}function GX(e,t,r,a){var s=nt(14);return mh(e,t,a,s),fh(r,s),s}var dE=nX;function YX(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=hh(e,i),o=[];a>e.l;)o.push(ev(e));return[i,s,l,o]}function fE(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=iX(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var XX=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function hE(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),d=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),d=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=hh(e,l,r);s&32&&(u=XX[u.charCodeAt(0)]);var f=a-e.l;r&&r.biff==2&&--f;var m=a==e.l||o===0||!(f>0)?[]:dte(e,f,r,o);return{chKey:i,Name:u,itab:d,rgce:m}}function cM(e,t,r){if(r.biff<8)return QX(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(sX(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function QX(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Jg(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function ZX(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=hh(e,a,r),l=hh(e,s,r);return[i,l]}function JX(e,t,r){var a=lM(e);e.l++;var s=e.read_shift(1);return t-=8,[fte(e,t,r),s,a]}function mE(e,t,r){var a=lX(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,cte(e,t,r)]}function eQ(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function tQ(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=Fh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},o,l,i]}}function rQ(e,t,r){return tQ(e,t,r)}function aQ(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(Gb(e));return r}function nQ(e){var t=nt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)iM(e[r],t);return t}function sQ(e,t,r){if(r&&r.biff<8)return lQ(e,t,r);var a=oM(e),s=dX(e,t-22,a[1]);return{cmo:a,ft:s}}var iQ={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function lQ(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var l=[];return l.push((iQ[a]||Li)(e,t,r)),{cmo:[s,a,i],ft:l}}function oQ(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=QY(e,6,r);var o=e.read_shift(2);e.read_shift(2),ms(e,2);var d=e.read_shift(2);e.l+=d;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var f=e[e.l],m=hh(e,e.lens[u+1]-e.lens[u]-1);if(s+=m,s.length>=(f?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function cQ(e,t){var r=Gb(e);e.l+=16;var a=tX(e,t-24);return[r,a]}function uQ(e){var t=nt(24),r=On(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return Ys([t,rX(e[1])])}function dQ(e,t){e.read_shift(2);var r=Gb(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(sl,""),[r,a]}function fQ(e){var t=e[1].Tooltip,r=nt(10+2*(t.length+1));r.write_shift(2,2048);var a=On(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function hQ(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=ZC[r]||r,r=e.read_shift(2),t[1]=ZC[r]||r,t}function mQ(e){return e||(e=nt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function pQ(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nM(e));return r}function xQ(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nM(e));return r}function gQ(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function uM(e,t,r){if(!r.cellStyles)return Li(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),l=e.read_shift(a),o=e.read_shift(a),d=e.read_shift(2);a==2&&(e.l+=2);var u={s,e:i,w:l,ixfe:o,flags:d};return(r.biff>=5||!r.biff)&&(u.level=d>>8&7),u}function vQ(e,t){var r=nt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function yQ(e,t){var r={};return t<32||(e.l+=16,r.header=Fi(e),r.footer=Fi(e),e.l+=2),r}function bQ(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function wQ(e){for(var t=nt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var jQ=Pu,NQ=eM,_Q=ev;function SQ(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function kQ(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=Pu(e);++e.l;var s=Fh(e,t-7,r);return a.t="str",a.val=s,a}function AQ(e){var t=Pu(e);++e.l;var r=Fi(e);return t.t="n",t.val=r,t}function CQ(e,t,r){var a=nt(15);return nv(a,e,t),a.write_shift(8,r,"f"),a}function EQ(e){var t=Pu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function TQ(e,t,r){var a=nt(9);return nv(a,e,t),a.write_shift(2,r),a}function DQ(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function OQ(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function FQ(e,t,r){var a=e.l+t,s=Pu(e),i=e.read_shift(2),l=hh(e,i,r);return e.l=a,s.t="str",s.val=l,s}var PQ=[2,3,48,49,131,139,140,245],VN=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Vb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,d){var u=[],f=Vf(1);switch(d.type){case"base64":f=so(ho(o));break;case"binary":f=so(o);break;case"buffer":case"array":f=o;break}fi(f,0);var m=f.read_shift(1),g=!!(m&136),x=!1,b=!1;switch(m){case 2:break;case 3:break;case 48:x=!0,g=!0;break;case 49:x=!0,g=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var v=0,y=521;m==2&&(v=f.read_shift(2)),f.l+=3,m!=2&&(v=f.read_shift(4)),v>1048576&&(v=1e6),m!=2&&(y=f.read_shift(2));var j=f.read_shift(2),S=d.codepage||1252;m!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(S=e[f[f.l]]),f.l+=1,f.l+=2),b&&(f.l+=36);for(var N=[],C={},T=Math.min(f.length,m==2?521:y-10-(x?264:0)),P=b?32:11;f.l<T&&f[f.l]!=13;)switch(C={},C.name=vg.utils.decode(S,f.slice(f.l,f.l+P)).replace(/[\u0000\r\n].*$/g,""),f.l+=P,C.type=String.fromCharCode(f.read_shift(1)),m!=2&&!b&&(C.offset=f.read_shift(4)),C.len=f.read_shift(1),m==2&&(C.offset=f.read_shift(2)),C.dec=f.read_shift(1),C.name.length&&N.push(C),m!=2&&(f.l+=b?13:14),C.type){case"B":(!x||C.len!=8)&&d.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+C.type)}if(f[f.l]!==13&&(f.l=y-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=y;var D=0,M=0;for(u[0]=[],M=0;M!=N.length;++M)u[0][M]=N[M].name;for(;v-- >0;){if(f[f.l]===42){f.l+=j;continue}for(++f.l,u[++D]=[],M=0,M=0;M!=N.length;++M){var F=f.slice(f.l,f.l+N[M].len);f.l+=N[M].len,fi(F,0);var H=vg.utils.decode(S,F);switch(N[M].type){case"C":H.trim().length&&(u[D][M]=H.replace(/\s+$/,""));break;case"D":H.length===8?u[D][M]=new Date(+H.slice(0,4),+H.slice(4,6)-1,+H.slice(6,8)):u[D][M]=H;break;case"F":u[D][M]=parseFloat(H.trim());break;case"+":case"I":u[D][M]=b?F.read_shift(-4,"i")^2147483648:F.read_shift(4,"i");break;case"L":switch(H.trim().toUpperCase()){case"Y":case"T":u[D][M]=!0;break;case"N":case"F":u[D][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+H+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));u[D][M]="##MEMO##"+(b?parseInt(H.trim(),10):F.read_shift(4));break;case"N":H=H.replace(/\u0000/g,"").trim(),H&&H!="."&&(u[D][M]=+H||0);break;case"@":u[D][M]=new Date(F.read_shift(-8,"f")-621356832e5);break;case"T":u[D][M]=new Date((F.read_shift(4)-2440588)*864e5+F.read_shift(4));break;case"Y":u[D][M]=F.read_shift(4,"i")/1e4+F.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[D][M]=-F.read_shift(-8,"f");break;case"B":if(x&&N[M].len==8){u[D][M]=F.read_shift(8,"f");break}case"G":case"P":F.l+=N[M].len;break;case"0":if(N[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[M].type)}}}if(m!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return d&&d.sheetRows&&(u=u.slice(0,d.sheetRows)),d.DBF=N,u}function a(o,d){var u=d||{};u.dateNF||(u.dateNF="yyyymmdd");var f=Fp(r(o,u),u);return f["!cols"]=u.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete u.DBF,f}function s(o,d){try{return a0(a(o,d),d)}catch(u){if(d&&d.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,d){var u=d||{};if(+u.codepage>=0&&Oc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=Fl(),m=qy(o,{header:1,raw:!0,cellDates:!0}),g=m[0],x=m.slice(1),b=o["!cols"]||[],v=0,y=0,j=0,S=1;for(v=0;v<g.length;++v){if(((b[v]||{}).DBF||{}).name){g[v]=b[v].DBF.name,++j;continue}if(g[v]!=null){if(++j,typeof g[v]=="number"&&(g[v]=g[v].toString(10)),typeof g[v]!="string")throw new Error("DBF Invalid column name "+g[v]+" |"+typeof g[v]+"|");if(g.indexOf(g[v])!==v){for(y=0;y<1024;++y)if(g.indexOf(g[v]+"_"+y)==-1){g[v]+="_"+y;break}}}}var N=ua(o["!ref"]),C=[],T=[],P=[];for(v=0;v<=N.e.c-N.s.c;++v){var D="",M="",F=0,H=[];for(y=0;y<x.length;++y)x[y][v]!=null&&H.push(x[y][v]);if(H.length==0||g[v]==null){C[v]="?";continue}for(y=0;y<H.length;++y){switch(typeof H[y]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=H[y]instanceof Date?"D":"C";break;default:M="C"}F=Math.max(F,String(H[y]).length),D=D&&D!=M?"C":M}F>250&&(F=250),M=((b[v]||{}).DBF||{}).type,M=="C"&&b[v].DBF.len>F&&(F=b[v].DBF.len),D=="B"&&M=="N"&&(D="N",P[v]=b[v].DBF.dec,F=b[v].DBF.len),T[v]=D=="C"||M=="N"?F:i[D]||0,S+=T[v],C[v]=D}var L=f.next(32);for(L.write_shift(4,318902576),L.write_shift(4,x.length),L.write_shift(2,296+32*j),L.write_shift(2,S),v=0;v<4;++v)L.write_shift(4,0);for(L.write_shift(4,0|(+t[JF]||3)<<8),v=0,y=0;v<g.length;++v)if(g[v]!=null){var z=f.next(32),V=(g[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);z.write_shift(1,V,"sbcs"),z.write_shift(1,C[v]=="?"?"C":C[v],"sbcs"),z.write_shift(4,y),z.write_shift(1,T[v]||i[C[v]]||0),z.write_shift(1,P[v]||0),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(1,0),z.write_shift(4,0),z.write_shift(4,0),y+=T[v]||i[C[v]]||0}var G=f.next(264);for(G.write_shift(4,13),v=0;v<65;++v)G.write_shift(4,0);for(v=0;v<x.length;++v){var ie=f.next(S);for(ie.write_shift(1,0),y=0;y<g.length;++y)if(g[y]!=null)switch(C[y]){case"L":ie.write_shift(1,x[v][y]==null?63:x[v][y]?84:70);break;case"B":ie.write_shift(8,x[v][y]||0,"f");break;case"N":var Z="0";for(typeof x[v][y]=="number"&&(Z=x[v][y].toFixed(P[y]||0)),j=0;j<T[y]-Z.length;++j)ie.write_shift(1,32);ie.write_shift(1,Z,"sbcs");break;case"D":x[v][y]?(ie.write_shift(4,("0000"+x[v][y].getFullYear()).slice(-4),"sbcs"),ie.write_shift(2,("00"+(x[v][y].getMonth()+1)).slice(-2),"sbcs"),ie.write_shift(2,("00"+x[v][y].getDate()).slice(-2),"sbcs")):ie.write_shift(8,"00000000","sbcs");break;case"C":var X=String(x[v][y]!=null?x[v][y]:"").slice(0,T[y]);for(ie.write_shift(1,X,"sbcs"),j=0;j<T[y]-X.length;++j)ie.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:a,from_sheet:l}})(),dM=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Wn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,x){var b=e[x];return typeof b=="number"?SC(b):b},a=function(g,x,b){var v=x.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return v==59?g:SC(v)};e["|"]=254;function s(g,x){switch(x.type){case"base64":return i(ho(g),x);case"binary":return i(g,x);case"buffer":return i(zr&&Buffer.isBuffer(g)?g.toString("binary"):r0(g),x);case"array":return i(dh(g),x)}throw new Error("Unrecognized type "+x.type)}function i(g,x){var b=g.split(/[\n\r]+/),v=-1,y=-1,j=0,S=0,N=[],C=[],T=null,P={},D=[],M=[],F=[],H=0,L;for(+x.codepage>=0&&Oc(+x.codepage);j!==b.length;++j){H=0;var z=b[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),V=z.replace(/;;/g,"\0").split(";").map(function(K){return K.replace(/\u0000/g,";")}),G=V[0],ie;if(z.length>0)switch(G){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&C.push(z.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,X=!1,he=!1,ce=!1,ke=-1,se=-1;for(S=1;S<V.length;++S)switch(V[S].charAt(0)){case"A":break;case"X":y=parseInt(V[S].slice(1))-1,X=!0;break;case"Y":for(v=parseInt(V[S].slice(1))-1,X||(y=0),L=N.length;L<=v;++L)N[L]=[];break;case"K":ie=V[S].slice(1),ie.charAt(0)==='"'?ie=ie.slice(1,ie.length-1):ie==="TRUE"?ie=!0:ie==="FALSE"?ie=!1:isNaN(Lc(ie))?isNaN(mp(ie).getDate())||(ie=on(ie)):(ie=Lc(ie),T!==null&&Dp(T)&&(ie=Kb(ie))),Z=!0;break;case"E":ce=!0;var R=ep(V[S].slice(1),{r:v,c:y});N[v][y]=[N[v][y],R];break;case"S":he=!0,N[v][y]=[N[v][y],"S5S"];break;case"G":break;case"R":ke=parseInt(V[S].slice(1))-1;break;case"C":se=parseInt(V[S].slice(1))-1;break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+z)}if(Z&&(N[v][y]&&N[v][y].length==2?N[v][y][0]=ie:N[v][y]=ie,T=null),he){if(ce)throw new Error("SYLK shared formula cannot have own formula");var I=ke>-1&&N[ke][se];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");N[v][y][1]=EM(I[1],{r:v-ke,c:y-se})}break;case"F":var q=0;for(S=1;S<V.length;++S)switch(V[S].charAt(0)){case"X":y=parseInt(V[S].slice(1))-1,++q;break;case"Y":for(v=parseInt(V[S].slice(1))-1,L=N.length;L<=v;++L)N[L]=[];break;case"M":H=parseInt(V[S].slice(1))/20;break;case"F":break;case"G":break;case"P":T=C[parseInt(V[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(F=V[S].slice(1).split(" "),L=parseInt(F[0],10);L<=parseInt(F[1],10);++L)H=parseInt(F[2],10),M[L-1]=H===0?{hidden:!0}:{wch:H},Wf(M[L-1]);break;case"C":y=parseInt(V[S].slice(1))-1,M[y]||(M[y]={});break;case"R":v=parseInt(V[S].slice(1))-1,D[v]||(D[v]={}),H>0?(D[v].hpt=H,D[v].hpx=xp(H)):H===0&&(D[v].hidden=!0);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+z)}q<1&&(T=null);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+z)}}return D.length>0&&(P["!rows"]=D),M.length>0&&(P["!cols"]=M),x&&x.sheetRows&&(N=N.slice(0,x.sheetRows)),[N,P]}function l(g,x){var b=s(g,x),v=b[0],y=b[1],j=Fp(v,x);return Wn(y).forEach(function(S){j[S]=y[S]}),j}function o(g,x){return a0(l(g,x),x)}function d(g,x,b,v){var y="C;Y"+(b+1)+";X"+(v+1)+";K";switch(g.t){case"n":y+=g.v||0,g.f&&!g.F&&(y+=";E"+r3(g.f,{r:b,c:v}));break;case"b":y+=g.v?"TRUE":"FALSE";break;case"e":y+=g.w||g.v;break;case"d":y+='"'+(g.w||g.v)+'"';break;case"s":y+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(g,x){x.forEach(function(b,v){var y="F;W"+(v+1)+" "+(v+1)+" ";b.hidden?y+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=kg(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=Ag(b.wpx)),typeof b.wch=="number"&&(y+=Math.round(b.wch))),y.charAt(y.length-1)!=" "&&g.push(y)})}function f(g,x){x.forEach(function(b,v){var y="F;";b.hidden?y+="M0;":b.hpt?y+="M"+20*b.hpt+";":b.hpx&&(y+="M"+20*Cg(b.hpx)+";"),y.length>2&&g.push(y+"R"+(v+1))})}function m(g,x){var b=["ID;PWXL;N;E"],v=[],y=ua(g["!ref"]),j,S=Array.isArray(g),N=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),g["!cols"]&&u(b,g["!cols"]),g["!rows"]&&f(b,g["!rows"]),b.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var C=y.s.r;C<=y.e.r;++C)for(var T=y.s.c;T<=y.e.c;++T){var P=hr({r:C,c:T});j=S?(g[C]||[])[T]:g[P],!(!j||j.v==null&&(!j.f||j.F))&&v.push(d(j,g,C,T))}return b.join(N)+N+v.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:l,from_sheet:m}})(),fM=(function(){function e(i,l){switch(l.type){case"base64":return t(ho(i),l);case"binary":return t(i,l);case"buffer":return t(zr&&Buffer.isBuffer(i)?i.toString("binary"):r0(i),l);case"array":return t(dh(i),l)}throw new Error("Unrecognized type "+l.type)}function t(i,l){for(var o=i.split(`
`),d=-1,u=-1,f=0,m=[];f!==o.length;++f){if(o[f].trim()==="BOT"){m[++d]=[],u=0;continue}if(!(d<0)){var g=o[f].trim().split(","),x=g[0],b=g[1];++f;for(var v=o[f]||"";(v.match(/["]/g)||[]).length&1&&f<o.length-1;)v+=`
`+o[++f];switch(v=v.trim(),+x){case-1:if(v==="BOT"){m[++d]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?m[d][u]=!0:v==="FALSE"?m[d][u]=!1:isNaN(Lc(b))?isNaN(mp(b).getDate())?m[d][u]=b:m[d][u]=on(b):m[d][u]=Lc(b),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),m[d][u++]=v!==""?v:null;break}if(v==="EOD")break}}return l&&l.sheetRows&&(m=m.slice(0,l.sheetRows)),m}function r(i,l){return Fp(e(i,l),l)}function a(i,l){return a0(r(i,l),l)}var s=(function(){var i=function(d,u,f,m,g){d.push(u),d.push(f+","+m),d.push('"'+g.replace(/"/g,'""')+'"')},l=function(d,u,f,m){d.push(u+","+f),d.push(u==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(d){var u=[],f=ua(d["!ref"]),m,g=Array.isArray(d);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,f.e.r-f.s.r+1,""),i(u,"TUPLES",0,f.e.c-f.s.c+1,""),i(u,"DATA",0,0,"");for(var x=f.s.r;x<=f.e.r;++x){l(u,-1,0,"BOT");for(var b=f.s.c;b<=f.e.c;++b){var v=hr({r:x,c:b});if(m=g?(d[x]||[])[b]:d[v],!m){l(u,1,0,"");continue}switch(m.t){case"n":var y=m.w;!y&&m.v!=null&&(y=m.v),y==null?m.f&&!m.F?l(u,1,0,"="+m.f):l(u,1,0,""):l(u,0,y,"V");break;case"b":l(u,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":l(u,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=Qo(m.z||fr[14],Fs(on(m.v)))),l(u,0,m.w,"V");break;default:l(u,1,0,"")}}}l(u,-1,0,"EOD");var j=`\r
`,S=u.join(j);return S}})();return{to_workbook:a,to_sheet:r,from_sheet:s}})(),hM=(function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,g){for(var x=m.split(`
`),b=-1,v=-1,y=0,j=[];y!==x.length;++y){var S=x[y].trim().split(":");if(S[0]==="cell"){var N=On(S[1]);if(j.length<=N.r)for(b=j.length;b<=N.r;++b)j[b]||(j[b]=[]);switch(b=N.r,v=N.c,S[2]){case"t":j[b][v]=e(S[3]);break;case"v":j[b][v]=+S[3];break;case"vtf":var C=S[S.length-1];case"vtc":switch(S[3]){case"nl":j[b][v]=!!+S[4];break;default:j[b][v]=+S[4];break}S[2]=="vtf"&&(j[b][v]=[j[b][v],C])}}}return g&&g.sheetRows&&(j=j.slice(0,g.sheetRows)),j}function a(m,g){return Fp(r(m,g),g)}function s(m,g){return a0(a(m,g),g)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function u(m){if(!m||!m["!ref"])return"";for(var g=[],x=[],b,v="",y=Rl(m["!ref"]),j=Array.isArray(m),S=y.s.r;S<=y.e.r;++S)for(var N=y.s.c;N<=y.e.c;++N)if(v=hr({r:S,c:N}),b=j?(m[S]||[])[N]:m[v],!(!b||b.v==null||b.t==="z")){switch(x=["cell",v,"t"],b.t){case"s":case"str":x.push(t(b.v));break;case"n":b.f?(x[2]="vtf",x[3]="n",x[4]=b.v,x[5]=t(b.f)):(x[2]="v",x[3]=b.v);break;case"b":x[2]="vt"+(b.f?"f":"c"),x[3]="nl",x[4]=b.v?"1":"0",x[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var C=Fs(on(b.v));x[2]="vtc",x[3]="nd",x[4]=""+C,x[5]=b.w||Qo(b.z||fr[14],C);break;case"e":continue}g.push(x.join(":"))}return g.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function f(m){return[i,l,o,l,u(m),d].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:f}})(),pp=(function(){function e(f,m,g,x,b){b.raw?m[g][x]=f:f===""||(f==="TRUE"?m[g][x]=!0:f==="FALSE"?m[g][x]=!1:isNaN(Lc(f))?isNaN(mp(f).getDate())?m[g][x]=f:m[g][x]=on(f):m[g][x]=Lc(f))}function t(f,m){var g=m||{},x=[];if(!f||f.length===0)return x;for(var b=f.split(/[\r\n]/),v=b.length-1;v>=0&&b[v].length===0;)--v;for(var y=10,j=0,S=0;S<=v;++S)j=b[S].indexOf(" "),j==-1?j=b[S].length:j++,y=Math.max(y,j);for(S=0;S<=v;++S){x[S]=[];var N=0;for(e(b[S].slice(0,y).trim(),x,S,N,g),N=1;N<=(b[S].length-y)/10+1;++N)e(b[S].slice(y+(N-1)*10,y+N*10).trim(),x,S,N,g)}return g.sheetRows&&(x=x.slice(0,g.sheetRows)),x}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(f){for(var m={},g=!1,x=0,b=0;x<f.length;++x)(b=f.charCodeAt(x))==34?g=!g:!g&&b in r&&(m[b]=(m[b]||0)+1);b=[];for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&b.push([m[x],x]);if(!b.length){m=a;for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&b.push([m[x],x])}return b.sort(function(v,y){return v[0]-y[0]||a[v[1]]-a[y[1]]}),r[b.pop()[1]]||44}function i(f,m){var g=m||{},x="",b=g.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(x=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(x=f.charAt(4),f=f.slice(6)):x=s(f.slice(0,1024)):g&&g.FS?x=g.FS:x=s(f.slice(0,1024));var y=0,j=0,S=0,N=0,C=0,T=x.charCodeAt(0),P=!1,D=0,M=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var F=g.dateNF!=null?bG(g.dateNF):null;function H(){var L=f.slice(N,C),z={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)z.t="z";else if(g.raw)z.t="s",z.v=L;else if(L.trim().length===0)z.t="s",z.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(z.t="s",z.v=L.slice(2,-1).replace(/""/g,'"')):YJ(L)?(z.t="n",z.f=L.slice(1)):(z.t="s",z.v=L);else if(L=="TRUE")z.t="b",z.v=!0;else if(L=="FALSE")z.t="b",z.v=!1;else if(!isNaN(S=Lc(L)))z.t="n",g.cellText!==!1&&(z.w=L),z.v=S;else if(!isNaN(mp(L).getDate())||F&&L.match(F)){z.z=g.dateNF||fr[14];var V=0;F&&L.match(F)&&(L=wG(L,g.dateNF,L.match(F)||[]),V=1),g.cellDates?(z.t="d",z.v=on(L,V)):(z.t="n",z.v=Fs(on(L,V))),g.cellText!==!1&&(z.w=Qo(z.z,z.v instanceof Date?Fs(z.v):z.v)),g.cellNF||delete z.z}else z.t="s",z.v=L;if(z.t=="z"||(g.dense?(b[y]||(b[y]=[]),b[y][j]=z):b[hr({c:j,r:y})]=z),N=C+1,M=f.charCodeAt(N),v.e.c<j&&(v.e.c=j),v.e.r<y&&(v.e.r=y),D==T)++j;else if(j=0,++y,g.sheetRows&&g.sheetRows<=y)return!0}e:for(;C<f.length;++C)switch(D=f.charCodeAt(C)){case 34:M===34&&(P=!P);break;case T:case 10:case 13:if(!P&&H())break e;break}return C-N>0&&H(),b["!ref"]=Cr(v),b}function l(f,m){return!(m&&m.PRN)||m.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,m):Fp(t(f,m),m)}function o(f,m){var g="",x=m.type=="string"?[0,0,0,0]:u3(f,m);switch(m.type){case"base64":g=ho(f);break;case"binary":g=f;break;case"buffer":m.codepage==65001?g=f.toString("utf8"):m.codepage&&typeof vg<"u"||(g=zr&&Buffer.isBuffer(f)?f.toString("binary"):r0(f));break;case"array":g=dh(f);break;case"string":g=f;break;default:throw new Error("Unrecognized type "+m.type)}return x[0]==239&&x[1]==187&&x[2]==191?g=qa(g.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?g=qa(g):m.type=="binary"&&typeof vg<"u",g.slice(0,19)=="socialcalc:version:"?hM.to_sheet(m.type=="string"?g:qa(g),m):l(g,m)}function d(f,m){return a0(o(f,m),m)}function u(f){for(var m=[],g=ua(f["!ref"]),x,b=Array.isArray(f),v=g.s.r;v<=g.e.r;++v){for(var y=[],j=g.s.c;j<=g.e.c;++j){var S=hr({r:v,c:j});if(x=b?(f[v]||[])[j]:f[S],!x||x.v==null){y.push("          ");continue}for(var N=(x.w||(Dd(x),x.w)||"").slice(0,10);N.length<10;)N+=" ";y.push(N+(j===0?" ":""))}m.push(y.join(""))}return m.join(`
`)}return{to_workbook:d,to_sheet:o,from_sheet:u}})();function MQ(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=dM.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return pp.to_workbook(e,t)}}var J0=(function(){function e(R,I,q){if(R){fi(R,R.l||0);for(var K=q.Enum||ke;R.l<R.length;){var te=R.read_shift(2),J=K[te]||K[65535],Q=R.read_shift(2),ne=R.l+Q,ye=J.f&&J.f(R,Q,q);if(R.l=ne,I(ye,J,te))return}}}function t(R,I){switch(I.type){case"base64":return r(so(ho(R)),I);case"binary":return r(so(R),I);case"buffer":case"array":return r(R,I)}throw"Unsupported type "+I.type}function r(R,I){if(!R)return R;var q=I||{},K=q.dense?[]:{},te="Sheet1",J="",Q=0,ne={},ye=[],De=[],ee={s:{r:0,c:0},e:{r:0,c:0}},Je=q.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)q.Enum=ke,e(R,function(et,Nt,ot){switch(ot){case 0:q.vers=et,et>=4096&&(q.qpro=!0);break;case 6:ee=et;break;case 204:et&&(J=et);break;case 222:J=et;break;case 15:case 51:q.qpro||(et[1].v=et[1].v.slice(1));case 13:case 14:case 16:ot==14&&(et[2]&112)==112&&(et[2]&15)>1&&(et[2]&15)<15&&(et[1].z=q.dateNF||fr[14],q.cellDates&&(et[1].t="d",et[1].v=Kb(et[1].v))),q.qpro&&et[3]>Q&&(K["!ref"]=Cr(ee),ne[te]=K,ye.push(te),K=q.dense?[]:{},ee={s:{r:0,c:0},e:{r:0,c:0}},Q=et[3],te=J||"Sheet"+(Q+1),J="");var Ie=q.dense?(K[et[0].r]||[])[et[0].c]:K[hr(et[0])];if(Ie){Ie.t=et[1].t,Ie.v=et[1].v,et[1].z!=null&&(Ie.z=et[1].z),et[1].f!=null&&(Ie.f=et[1].f);break}q.dense?(K[et[0].r]||(K[et[0].r]=[]),K[et[0].r][et[0].c]=et[1]):K[hr(et[0])]=et[1];break}},q);else if(R[2]==26||R[2]==14)q.Enum=se,R[2]==14&&(q.qpro=!0,R.l=0),e(R,function(et,Nt,ot){switch(ot){case 204:te=et;break;case 22:et[1].v=et[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(et[3]>Q&&(K["!ref"]=Cr(ee),ne[te]=K,ye.push(te),K=q.dense?[]:{},ee={s:{r:0,c:0},e:{r:0,c:0}},Q=et[3],te="Sheet"+(Q+1)),Je>0&&et[0].r>=Je)break;q.dense?(K[et[0].r]||(K[et[0].r]=[]),K[et[0].r][et[0].c]=et[1]):K[hr(et[0])]=et[1],ee.e.c<et[0].c&&(ee.e.c=et[0].c),ee.e.r<et[0].r&&(ee.e.r=et[0].r);break;case 27:et[14e3]&&(De[et[14e3][0]]=et[14e3][1]);break;case 1537:De[et[0]]=et[1],et[0]==Q&&(te=et[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(K["!ref"]=Cr(ee),ne[J||te]=K,ye.push(J||te),!De.length)return{SheetNames:ye,Sheets:ne};for(var Oe={},ve=[],pt=0;pt<De.length;++pt)ne[ye[pt]]?(ve.push(De[pt]||ye[pt]),Oe[De[pt]]=ne[De[pt]]||ne[ye[pt]]):(ve.push(De[pt]),Oe[De[pt]]={"!ref":"A1"});return{SheetNames:ve,Sheets:Oe}}function a(R,I){var q=I||{};if(+q.codepage>=0&&Oc(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var K=Fl(),te=ua(R["!ref"]),J=Array.isArray(R),Q=[];At(K,0,i(1030)),At(K,6,d(te));for(var ne=Math.min(te.e.r,8191),ye=te.s.r;ye<=ne;++ye)for(var De=ss(ye),ee=te.s.c;ee<=te.e.c;++ee){ye===te.s.r&&(Q[ee]=Dn(ee));var Je=Q[ee]+De,Oe=J?(R[ye]||[])[ee]:R[Je];if(!(!Oe||Oe.t=="z"))if(Oe.t=="n")(Oe.v|0)==Oe.v&&Oe.v>=-32768&&Oe.v<=32767?At(K,13,x(ye,ee,Oe.v)):At(K,14,v(ye,ee,Oe.v));else{var ve=Dd(Oe);At(K,15,m(ye,ee,ve.slice(0,239)))}}return At(K,1),K.end()}function s(R,I){var q=I||{};if(+q.codepage>=0&&Oc(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var K=Fl();At(K,0,l(R));for(var te=0,J=0;te<R.SheetNames.length;++te)(R.Sheets[R.SheetNames[te]]||{})["!ref"]&&At(K,27,ce(R.SheetNames[te],J++));var Q=0;for(te=0;te<R.SheetNames.length;++te){var ne=R.Sheets[R.SheetNames[te]];if(!(!ne||!ne["!ref"])){for(var ye=ua(ne["!ref"]),De=Array.isArray(ne),ee=[],Je=Math.min(ye.e.r,8191),Oe=ye.s.r;Oe<=Je;++Oe)for(var ve=ss(Oe),pt=ye.s.c;pt<=ye.e.c;++pt){Oe===ye.s.r&&(ee[pt]=Dn(pt));var et=ee[pt]+ve,Nt=De?(ne[Oe]||[])[pt]:ne[et];if(!(!Nt||Nt.t=="z"))if(Nt.t=="n")At(K,23,H(Oe,pt,Q,Nt.v));else{var ot=Dd(Nt);At(K,22,D(Oe,pt,Q,ot.slice(0,239)))}}++Q}}return At(K,1),K.end()}function i(R){var I=nt(2);return I.write_shift(2,R),I}function l(R){var I=nt(26);I.write_shift(2,4096),I.write_shift(2,4),I.write_shift(4,0);for(var q=0,K=0,te=0,J=0;J<R.SheetNames.length;++J){var Q=R.SheetNames[J],ne=R.Sheets[Q];if(!(!ne||!ne["!ref"])){++te;var ye=Rl(ne["!ref"]);q<ye.e.r&&(q=ye.e.r),K<ye.e.c&&(K=ye.e.c)}}return q>8191&&(q=8191),I.write_shift(2,q),I.write_shift(1,te),I.write_shift(1,K),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(1,1),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(4,0),I}function o(R,I,q){var K={s:{c:0,r:0},e:{c:0,r:0}};return I==8&&q.qpro?(K.s.c=R.read_shift(1),R.l++,K.s.r=R.read_shift(2),K.e.c=R.read_shift(1),R.l++,K.e.r=R.read_shift(2),K):(K.s.c=R.read_shift(2),K.s.r=R.read_shift(2),I==12&&q.qpro&&(R.l+=2),K.e.c=R.read_shift(2),K.e.r=R.read_shift(2),I==12&&q.qpro&&(R.l+=2),K.s.c==65535&&(K.s.c=K.e.c=K.s.r=K.e.r=0),K)}function d(R){var I=nt(8);return I.write_shift(2,R.s.c),I.write_shift(2,R.s.r),I.write_shift(2,R.e.c),I.write_shift(2,R.e.r),I}function u(R,I,q){var K=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(K[0].c=R.read_shift(1),K[3]=R.read_shift(1),K[0].r=R.read_shift(2),R.l+=2):(K[2]=R.read_shift(1),K[0].c=R.read_shift(2),K[0].r=R.read_shift(2)),K}function f(R,I,q){var K=R.l+I,te=u(R,I,q);if(te[1].t="s",q.vers==20768){R.l++;var J=R.read_shift(1);return te[1].v=R.read_shift(J,"utf8"),te}return q.qpro&&R.l++,te[1].v=R.read_shift(K-R.l,"cstr"),te}function m(R,I,q){var K=nt(7+q.length);K.write_shift(1,255),K.write_shift(2,I),K.write_shift(2,R),K.write_shift(1,39);for(var te=0;te<K.length;++te){var J=q.charCodeAt(te);K.write_shift(1,J>=128?95:J)}return K.write_shift(1,0),K}function g(R,I,q){var K=u(R,I,q);return K[1].v=R.read_shift(2,"i"),K}function x(R,I,q){var K=nt(7);return K.write_shift(1,255),K.write_shift(2,I),K.write_shift(2,R),K.write_shift(2,q,"i"),K}function b(R,I,q){var K=u(R,I,q);return K[1].v=R.read_shift(8,"f"),K}function v(R,I,q){var K=nt(13);return K.write_shift(1,255),K.write_shift(2,I),K.write_shift(2,R),K.write_shift(8,q,"f"),K}function y(R,I,q){var K=R.l+I,te=u(R,I,q);if(te[1].v=R.read_shift(8,"f"),q.qpro)R.l=K;else{var J=R.read_shift(2);C(R.slice(R.l,R.l+J),te),R.l+=J}return te}function j(R,I,q){var K=I&32768;return I&=-32769,I=(K?R:0)+(I>=8192?I-16384:I),(K?"":"$")+(q?Dn(I):ss(I))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function C(R,I){fi(R,0);for(var q=[],K=0,te="",J="",Q="",ne="";R.l<R.length;){var ye=R[R.l++];switch(ye){case 0:q.push(R.read_shift(8,"f"));break;case 1:J=j(I[0].c,R.read_shift(2),!0),te=j(I[0].r,R.read_shift(2),!1),q.push(J+te);break;case 2:{var De=j(I[0].c,R.read_shift(2),!0),ee=j(I[0].r,R.read_shift(2),!1);J=j(I[0].c,R.read_shift(2),!0),te=j(I[0].r,R.read_shift(2),!1),q.push(De+ee+":"+J+te)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(R.read_shift(2));break;case 6:{for(var Je="";ye=R[R.l++];)Je+=String.fromCharCode(ye);q.push('"'+Je.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:ne=q.pop(),Q=q.pop(),q.push(["AND","OR"][ye-20]+"("+Q+","+ne+")");break;default:if(ye<32&&N[ye])ne=q.pop(),Q=q.pop(),q.push(Q+N[ye]+ne);else if(S[ye]){if(K=S[ye][1],K==69&&(K=R[R.l++]),K>q.length){console.error("WK1 bad formula parse 0x"+ye.toString(16)+":|"+q.join("|")+"|");return}var Oe=q.slice(-K);q.length-=K,q.push(S[ye][0]+"("+Oe.join(",")+")")}else return ye<=7?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=24?console.error("WK1 unsupported op "+ye.toString(16)):ye<=30?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=115?console.error("WK1 unsupported function opcode "+ye.toString(16)):console.error("WK1 unrecognized opcode "+ye.toString(16))}}q.length==1?I[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function T(R){var I=[{c:0,r:0},{t:"n",v:0},0];return I[0].r=R.read_shift(2),I[3]=R[R.l++],I[0].c=R[R.l++],I}function P(R,I){var q=T(R);return q[1].t="s",q[1].v=R.read_shift(I-4,"cstr"),q}function D(R,I,q,K){var te=nt(6+K.length);te.write_shift(2,R),te.write_shift(1,q),te.write_shift(1,I),te.write_shift(1,39);for(var J=0;J<K.length;++J){var Q=K.charCodeAt(J);te.write_shift(1,Q>=128?95:Q)}return te.write_shift(1,0),te}function M(R,I){var q=T(R);q[1].v=R.read_shift(2);var K=q[1].v>>1;if(q[1].v&1)switch(K&7){case 0:K=(K>>3)*5e3;break;case 1:K=(K>>3)*500;break;case 2:K=(K>>3)/20;break;case 3:K=(K>>3)/200;break;case 4:K=(K>>3)/2e3;break;case 5:K=(K>>3)/2e4;break;case 6:K=(K>>3)/16;break;case 7:K=(K>>3)/64;break}return q[1].v=K,q}function F(R,I){var q=T(R),K=R.read_shift(4),te=R.read_shift(4),J=R.read_shift(2);if(J==65535)return K===0&&te===3221225472?(q[1].t="e",q[1].v=15):K===0&&te===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var Q=J&32768;return J=(J&32767)-16446,q[1].v=(1-Q*2)*(te*Math.pow(2,J+32)+K*Math.pow(2,J)),q}function H(R,I,q,K){var te=nt(14);if(te.write_shift(2,R),te.write_shift(1,q),te.write_shift(1,I),K==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var J=0,Q=0,ne=0,ye=0;return K<0&&(J=1,K=-K),Q=Math.log2(K)|0,K/=Math.pow(2,Q-31),ye=K>>>0,(ye&2147483648)==0&&(K/=2,++Q,ye=K>>>0),K-=ye,ye|=2147483648,ye>>>=0,K*=Math.pow(2,32),ne=K>>>0,te.write_shift(4,ne),te.write_shift(4,ye),Q+=16383+(J?32768:0),te.write_shift(2,Q),te}function L(R,I){var q=F(R);return R.l+=I-14,q}function z(R,I){var q=T(R),K=R.read_shift(4);return q[1].v=K>>6,q}function V(R,I){var q=T(R),K=R.read_shift(8,"f");return q[1].v=K,q}function G(R,I){var q=V(R);return R.l+=I-10,q}function ie(R,I){return R[R.l+I-1]==0?R.read_shift(I,"cstr"):""}function Z(R,I){var q=R[R.l++];q>I-1&&(q=I-1);for(var K="";K.length<q;)K+=String.fromCharCode(R[R.l++]);return K}function X(R,I,q){if(!(!q.qpro||I<21)){var K=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var te=R.read_shift(I-21,"cstr");return[K,te]}}function he(R,I){for(var q={},K=R.l+I;R.l<K;){var te=R.read_shift(2);if(te==14e3){for(q[te]=[0,""],q[te][0]=R.read_shift(2);R[R.l];)q[te][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return q}function ce(R,I){var q=nt(5+R.length);q.write_shift(2,14e3),q.write_shift(2,I);for(var K=0;K<R.length;++K){var te=R.charCodeAt(K);q[q.l++]=te>127?95:te}return q[q.l++]=0,q}var ke={0:{n:"BOF",f:ms},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:b},15:{n:"LABEL",f},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ie},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:F},24:{n:"NUMBER18",f:M},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:he},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:z},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:G},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}})();function LQ(e){var t={},r=e.match(Ii),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=gr(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=A4[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var RQ=(function(){var e=wg("t"),t=wg("rPr");function r(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:ca(l[1])},d=i.match(t);return d&&(o.s=LQ(d[1])),o}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(l){return l.replace(a,"").split(s).map(r).filter(function(o){return o.v})}})(),IQ=(function(){var t=/(\r\n|\n)/g;function r(s,i,l){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),l.push("</b>")),s.i&&(i.push("<i>"),l.push("</i>")),s.strike&&(i.push("<s>"),l.push("</s>"));var d=s.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(i.push("<"+d+">"),l.push("</"+d+">")),l.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}})(),BQ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,zQ=/<(?:\w+:)?r>/,UQ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Q4(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=ca(qa(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=qa(e),r&&(a.h=R4(a.t))):e.match(zQ)&&(a.r=qa(e),a.t=ca(qa((e.replace(UQ,"").match(BQ)||[]).join("").replace(Ii,""))),r&&(a.h=IQ(RQ(a.r)))),a):{t:""}}var qQ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,$Q=/<(?:\w+:)?(?:si|sstItem)>/g,HQ=/<\/(?:\w+:)?(?:si|sstItem)>/;function VQ(e,t){var r=[],a="";if(!e)return r;var s=e.match(qQ);if(s){a=s[2].replace($Q,"").split(HQ);for(var i=0;i!=a.length;++i){var l=Q4(a[i].trim(),t);l!=null&&(r[r.length]=l)}s=gr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var WQ=/^\s|\s$|[\t\n\r]/;function mM(e,t){if(!t.bookSST)return"";var r=[is];r[r.length]=_t("sst",null,{xmlns:Ch[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(WQ)&&(i+=' xml:space="preserve"'),i+=">"+Oa(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function KQ(e){return[e.read_shift(4),e.read_shift(4)]}function GQ(e,t){var r=[],a=!1;return zd(e,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(l.T,!a||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function YQ(e,t){return t||(t=nt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var XQ=iY;function QQ(e){var t=Fl();mt(t,159,YQ(e));for(var r=0;r<e.length;++r)mt(t,19,XQ(e[r]));return mt(t,160),t.end()}function pM(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function kd(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function ZQ(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=kd(e,4),t.U=kd(e,4),t.W=kd(e,4),t}function JQ(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function eZ(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(JQ(e));return t}function tZ(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function rZ(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=kd(e,4),t.U=kd(e,4),t.W=kd(e,4),t}function aZ(e){var t=rZ(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function xM(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function gM(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function nZ(e){var t=kd(e);switch(t.Minor){case 2:return[t.Minor,sZ(e)];case 3:return[t.Minor,iZ()];case 4:return[t.Minor,lZ(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function sZ(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=xM(e,r),s=gM(e,e.length-e.l);return{t:"Std",h:a,v:s}}function iZ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function lZ(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(Ii,function(i){var l=gr(i);switch(Fu(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){a[o]=l[o]});break;case"<dataIntegrity":a.encryptedHmacKey=l.encryptedHmacKey,a.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(l);break;default:throw l[0]}}),a}function oZ(e,t){var r={},a=r.EncryptionVersionInfo=kd(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=xM(e,s),t-=s,r.EncryptionVerifier=gM(e,t),r}function cZ(e){var t={},r=t.EncryptionVersionInfo=kd(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function Z4(e){var t=0,r,a=pM(e),s=a.length+1,i,l,o,d,u;for(r=Vf(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)l=r[i],o=(t&16384)===0?0:1,d=t<<1&32767,u=o|d,t=u^l;return t^52811}var vM=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(l){return(l/2|l*128)&255},s=function(l,o){return a(l^o)},i=function(l){for(var o=t[l.length-1],d=104,u=l.length-1;u>=0;--u)for(var f=l[u],m=0;m!=7;++m)f&64&&(o^=r[d]),f*=2,--d;return o};return function(l){for(var o=pM(l),d=i(o),u=o.length,f=Vf(16),m=0;m!=16;++m)f[m]=0;var g,x,b;for((u&1)===1&&(g=d>>8,f[u]=s(e[0],g),--u,g=d&255,x=o[o.length-1],f[u]=s(x,g));u>0;)--u,g=d>>8,f[u]=s(o[u],g),--u,g=d&255,f[u]=s(o[u],g);for(u=15,b=15-o.length;b>0;)g=d>>8,f[u]=s(e[b],g),--u,--b,g=d&255,f[u]=s(o[u],g),--u,--b;return f}})(),uZ=function(e,t,r,a,s){s||(s=t),a||(a=vM(e));var i,l;for(i=0;i!=t.length;++i)l=t[i],l^=a[r],l=(l>>5|l<<3)&255,s[i]=l,++r;return[s,r,a]},dZ=function(e){var t=0,r=vM(e);return function(a){var s=uZ("",a,t,r);return t=s[1],s[0]}};function fZ(e,t,r,a){var s={key:ms(e),verificationBytes:ms(e)};return r.password&&(s.verifier=Z4(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=dZ(r.password)),s}function hZ(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=cZ(e):a.Data=oZ(e,t),a}function mZ(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?hZ(e,t-2,a):fZ(e,r.biff>=8?t:t-2,r,a),a}var yM=(function(){function e(s,i){switch(i.type){case"base64":return t(ho(s),i);case"binary":return t(s,i);case"buffer":return t(zr&&Buffer.isBuffer(s)?s.toString("binary"):r0(s),i);case"array":return t(dh(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var l=i||{},o=l.dense?[]:{},d=s.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(f,m){Array.isArray(o)&&(o[m]=[]);for(var g=/\\\w+\b/g,x=0,b,v=-1;b=g.exec(f);){switch(b[0]){case"\\cell":var y=f.slice(x,g.lastIndex-b[0].length);if(y[0]==" "&&(y=y.slice(1)),++v,y.length){var j={v:y,t:"s"};Array.isArray(o)?o[m][v]=j:o[hr({r:m,c:v})]=j}break}x=g.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=Cr(u),o}function r(s,i){return a0(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],l=ua(s["!ref"]),o,d=Array.isArray(s),u=l.s.r;u<=l.e.r;++u){i.push("\\trowd\\trautofit1");for(var f=l.s.c;f<=l.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=l.s.c;f<=l.e.c;++f){var m=hr({r:u,c:f});o=d?(s[u]||[])[f]:s[m],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Dd(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function pZ(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Sg(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function xZ(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),l=s-i;if(l===0)return[0,0,t];var o=0,d=0,u=s+i;switch(d=l/(u>1?2-u:u),s){case t:o=((r-a)/l+6)%6;break;case r:o=(a-t)/l+2;break;case a:o=(t-r)/l+4;break}return[o/6,d,u/2]}function gZ(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,l=[i,i,i],o=6*t,d;if(r!==0)switch(o|0){case 0:case 6:d=s*o,l[0]+=s,l[1]+=d;break;case 1:d=s*(2-o),l[0]+=d,l[1]+=s;break;case 2:d=s*(o-2),l[1]+=s,l[2]+=d;break;case 3:d=s*(4-o),l[1]+=d,l[2]+=s;break;case 4:d=s*(o-4),l[2]+=s,l[0]+=d;break;case 5:d=s*(6-o),l[2]+=d,l[0]+=s;break}for(var u=0;u!=3;++u)l[u]=Math.round(l[u]*255);return l}function zy(e,t){if(t===0)return e;var r=xZ(pZ(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Sg(gZ(r))}var bM=6,vZ=15,yZ=1,Di=bM;function kg(e){return Math.floor((e+Math.round(128/Di)/256)*Di)}function Ag(e){return Math.floor((e-5)/Di*100+.5)/100}function Uy(e){return Math.round((e*Di+5)/Di*256)/256}function p5(e){return Uy(Ag(kg(e)))}function J4(e){var t=Math.abs(e-p5(e)),r=Di;if(t>.005)for(Di=yZ;Di<vZ;++Di)Math.abs(e-p5(e))<=t&&(t=Math.abs(e-p5(e)),r=Di);Di=r}function Wf(e){e.width?(e.wpx=kg(e.width),e.wch=Ag(e.wpx),e.MDW=Di):e.wpx?(e.wch=Ag(e.wpx),e.width=Uy(e.wch),e.MDW=Di):typeof e.wch=="number"&&(e.width=Uy(e.wch),e.wpx=kg(e.width),e.MDW=Di),e.customWidth&&delete e.customWidth}var bZ=96,wM=bZ;function Cg(e){return e*96/wM}function xp(e){return e*wM/96}var wZ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function jZ(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(Ii)||[]).forEach(function(l){var o=gr(l);switch(Fu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=sn(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=sn(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function NZ(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(Ii)||[]).forEach(function(l){var o=gr(l);switch(Fu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function _Z(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(Ii)||[]).forEach(function(l){var o=gr(l);switch(Fu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=qa(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?sn(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?sn(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?sn(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?sn(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?sn(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?sn(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?sn(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=A4[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=sn(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var d=Q0[s.color.index];s.color.index==81&&(d=Q0[1]),d||(d=Q0[1]),s.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=zy(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function SZ(e,t,r){t.NumberFmt=[];for(var a=Wn(fr),s=0;s<a.length;++s)t.NumberFmt[a[s]]=fr[a[s]];var i=e[0].match(Ii);if(i)for(s=0;s<i.length;++s){var l=gr(i[s]);switch(Fu(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=ca(qa(l.formatCode)),d=parseInt(l.numFmtId,10);if(t.NumberFmt[d]=o,d>0){if(d>392){for(d=392;d>60&&t.NumberFmt[d]!=null;--d);t.NumberFmt[d]=o}Sd(o,d)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function kZ(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=_t("numFmt",null,{numFmtId:a,formatCode:Oa(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=_t("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var F1=["numFmtId","fillId","fontId","borderId","xfId"],P1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function AZ(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(Ii)||[]).forEach(function(i){var l=gr(i),o=0;switch(Fu(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=l,delete a[0],o=0;o<F1.length;++o)a[F1[o]]&&(a[F1[o]]=parseInt(a[F1[o]],10));for(o=0;o<P1.length;++o)a[P1[o]]&&(a[P1[o]]=sn(a[P1[o]]));if(t.NumberFmt&&a.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[o]){a.numFmtId=o;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};l.vertical&&(d.vertical=l.vertical),l.horizontal&&(d.horizontal=l.horizontal),l.textRotation!=null&&(d.textRotation=l.textRotation),l.indent&&(d.indent=l.indent),l.wrapText&&(d.wrapText=sn(l.wrapText)),a.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function CZ(e){var t=[];return t[t.length]=_t("cellXfs",null),e.forEach(function(r){t[t.length]=_t("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=_t("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var EZ=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,d,u){var f={};if(!o)return f;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=o.match(t))&&SZ(m,f,u),(m=o.match(s))&&_Z(m,f,d,u),(m=o.match(a))&&NZ(m,f,d,u),(m=o.match(i))&&jZ(m,f,d,u),(m=o.match(r))&&AZ(m,f,u),f}})();function jM(e,t){var r=[is,_t("styleSheet",null,{xmlns:Ch[0],"xmlns:vt":Os.vt})],a;return e.SSF&&(a=kZ(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=CZ(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function TZ(e,t){var r=e.read_shift(2),a=Pi(e);return[r,a]}function DZ(e,t,r){r||(r=nt(6+4*t.length)),r.write_shift(2,e),Xs(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function OZ(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=hY(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(a.underline=l);var o=e.read_shift(1);o>0&&(a.family=o);var d=e.read_shift(1);switch(d>0&&(a.charset=d),e.l++,a.color=fY(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Pi(e),a}function FZ(e,t){t||(t=nt(153)),t.write_shift(2,e.sz*20),mY(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Ry(e.color,t);var a=0;return a=2,t.write_shift(1,a),Xs(e.name,t),t.length>t.l?t.slice(0,t.l):t}var PZ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],x5,MZ=Li;function pE(e,t){t||(t=nt(84)),x5||(x5=Vb(PZ));var r=x5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(Ry({auto:1},t),Ry({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function LZ(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function NM(e,t,r){r||(r=nt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Px(e,t){return t||(t=nt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var RZ=Li;function IZ(e,t){return t||(t=nt(51)),t.write_shift(1,0),Px(null,t),Px(null,t),Px(null,t),Px(null,t),Px(null,t),t.length>t.l?t.slice(0,t.l):t}function BZ(e,t){return t||(t=nt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Ly(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function zZ(e,t,r){var a=nt(2052);return a.write_shift(4,e),Ly(t,a),Ly(r,a),a.length>a.l?a.slice(0,a.l):a}function UZ(e,t,r){var a={};a.NumberFmt=[];for(var s in fr)a.NumberFmt[s]=fr[s];a.CellXf=[],a.Fonts=[];var i=[],l=!1;return zd(e,function(d,u,f){switch(f){case 44:a.NumberFmt[d[0]]=d[1],Sd(d[1],d[0]);break;case 43:a.Fonts.push(d),d.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(d.color.rgb=zy(t.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(f),l=!0;break;case 38:i.pop(),l=!1;break;default:if(u.T>0)i.push(f);else if(u.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),a}function qZ(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(mt(e,615,Rc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&mt(e,44,DZ(s,t[s]))}),mt(e,616))}}function $Z(e){var t=1;mt(e,611,Rc(t)),mt(e,43,FZ({sz:12,color:{theme:1},name:"Calibri",family:2})),mt(e,612)}function HZ(e){var t=2;mt(e,603,Rc(t)),mt(e,45,pE({patternType:"none"})),mt(e,45,pE({patternType:"gray125"})),mt(e,604)}function VZ(e){var t=1;mt(e,613,Rc(t)),mt(e,46,IZ()),mt(e,614)}function WZ(e){var t=1;mt(e,626,Rc(t)),mt(e,47,NM({numFmtId:0},65535)),mt(e,627)}function KZ(e,t){mt(e,617,Rc(t.length)),t.forEach(function(r){mt(e,47,NM(r,0))}),mt(e,618)}function GZ(e){var t=1;mt(e,619,Rc(t)),mt(e,48,BZ({xfId:0,name:"Normal"})),mt(e,620)}function YZ(e){var t=0;mt(e,505,Rc(t)),mt(e,506)}function XZ(e){var t=0;mt(e,508,zZ(t,"TableStyleMedium9","PivotStyleMedium4")),mt(e,509)}function QZ(e,t){var r=Fl();return mt(r,278),qZ(r,e.SSF),$Z(r),HZ(r),VZ(r),WZ(r),KZ(r,t.cellXfs),GZ(r),YZ(r),XZ(r),mt(r,279),r.end()}var ZZ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function JZ(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(Ii)||[]).forEach(function(s){var i=gr(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[ZZ.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function eJ(){}function tJ(){}var rJ=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,aJ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,nJ=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function sJ(e,t,r){t.themeElements={};var a;[["clrScheme",rJ,JZ],["fontScheme",aJ,eJ],["fmtScheme",nJ,tJ]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var iJ=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function _M(e,t){(!e||e.length===0)&&(e=e3());var r,a={};if(!(r=e.match(iJ)))throw new Error("themeElements not found in theme");return sJ(r[0],a,t),a.raw=e,a}function e3(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[is];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function lJ(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var l;try{l=xP(i,{type:"array"})}catch{return}var o=io(l,"theme/theme/theme1.xml",!0);if(o)return _M(o,r)}}function oJ(e){return e.read_shift(4)}function cJ(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=uJ(e,4);break;case 2:t.xclrValue=aM(e);break;case 3:t.xclrValue=oJ(e);break;case 4:e.l+=4;break}return e.l+=8,t}function uJ(e,t){return Li(e,t)}function dJ(e,t){return Li(e,t)}function fJ(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=cJ(e);break;case 6:a[1]=dJ(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function hJ(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(fJ(e,r-e.l));return{ixfe:a,ext:i}}function mJ(e,t){t.forEach(function(r){r[0]})}function pJ(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Pi(e)}}function xJ(e){var t=nt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Xs(e.name,t),t.slice(0,t.l)}function gJ(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function vJ(e){var t=nt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function yJ(e,t){var r=nt(8+2*t.length);return r.write_shift(4,e),Xs(t,r),r.slice(0,r.l)}function bJ(e){return e.l+=4,e.read_shift(4)!=0}function wJ(e,t){var r=nt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function jJ(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],l=!1,o=2;return zd(e,function(d,u,f){switch(f){case 335:a.Types.push({name:d.name});break;case 51:d.forEach(function(m){o==1?a.Cell.push({type:a.Types[m[0]-1].name,index:m[1]}):o==0&&a.Value.push({type:a.Types[m[0]-1].name,index:m[1]})});break;case 337:o=d?1:0;break;case 338:o=2;break;case 35:i.push(f),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!u.T){if(!l||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),a}function NJ(){var e=Fl();return mt(e,332),mt(e,334,Rc(1)),mt(e,335,xJ({name:"XLDAPR",version:12e4,flags:3496657072})),mt(e,336),mt(e,339,yJ(1,"XLDAPR")),mt(e,52),mt(e,35,Rc(514)),mt(e,4096,Rc(0)),mt(e,4097,Ho(1)),mt(e,36),mt(e,53),mt(e,340),mt(e,337,wJ(1)),mt(e,51,vJ([[1,0]])),mt(e,338),mt(e,333),e.end()}function _J(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,l;return e.replace(Ii,function(o){var d=gr(o);switch(Fu(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==d.name&&(l=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[d.t-1].name,index:+d.v}):i==0&&a.Value.push({type:a.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+d.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return o}),a}function SM(){var e=[is];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function SJ(e){var t=[];if(!e)return t;var r=1;return(e.match(Ii)||[]).forEach(function(a){var s=gr(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function kJ(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=hr(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function AJ(e,t,r){var a=[];return zd(e,function(i,l,o){switch(o){case 63:a.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function CJ(e,t,r,a){if(!e)return e;var s=a||{},i=!1;zd(e,function(o,d,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!d.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function EJ(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Vm=1024;function kM(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[_t("xml",null,{"xmlns:v":ro.v,"xmlns:o":ro.o,"xmlns:x":ro.x,"xmlns:mv":ro.mv}).replace(/\/>/,">"),_t("o:shapelayout",_t("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),_t("v:shapetype",[_t("v:stroke",null,{joinstyle:"miter"}),_t("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];Vm<e*1e3;)Vm+=1e3;return t.forEach(function(i){var l=On(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var d=o.type=="gradient"?_t("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=_t("v:fill",d,o),f={on:"t",obscured:"t"};++Vm,s=s.concat(["<v:shape"+jg({id:"_x0000_s"+Vm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,_t("v:shadow",null,f),_t("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",mi("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),mi("x:AutoFill","False"),mi("x:Row",String(l.r)),mi("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function xE(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(l){var o=On(l.ref);if(s?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},s?e[o.r][o.c]=i:e[l.ref]=i;var d=ua(e["!ref"]||"BDWGO1000001:A1");d.s.r>o.r&&(d.s.r=o.r),d.e.r<o.r&&(d.e.r=o.r),d.s.c>o.c&&(d.s.c=o.c),d.e.c<o.c&&(d.e.c=o.c);var u=Cr(d);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var f={a:l.author,t:l.t,r:l.r,T:r};l.h&&(f.h=l.h);for(var m=i.c.length-1;m>=0;--m){if(!r&&i.c[m].T)return;r&&!i.c[m].T&&i.c.splice(m,1)}if(r&&a){for(m=0;m<a.length;++m)if(f.a==a[m].id){f.a=a[m].name||f.a;break}}i.c.push(f)})}function TJ(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var d=gr(o[0]),u={author:d.authorId&&r[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},f=On(d.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var m=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!m&&!!m[1]&&Q4(m[1])||{r:"",t:"",h:""};u.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),u.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=g.h),a.push(u)}}}}),a}function AM(e){var t=[is,_t("comments",null,{xmlns:Ch[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=Oa(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(d){d.a&&(s=r.indexOf(Oa(d.a))),i.push(d.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(mi("t",Oa(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;t.push(mi("t",Oa(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function DJ(e,t){var r=[],a=!1,s={},i=0;return e.replace(Ii,function(o,d){var u=gr(o);switch(Fu(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=d+o.length;break;case"</text>":s.t=e.slice(i,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function OJ(e,t,r){var a=[is,_t("ThreadedComments",null,{xmlns:Os.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var d={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=d.id:d.parentId=i,l.ID=d.id,l.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),a.push(_t("threadedComment",mi("text",l.t||""),d))})}),a.push("</ThreadedComments>"),a.join("")}function FJ(e,t){var r=[],a=!1;return e.replace(Ii,function(i){var l=gr(i);switch(Fu(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function PJ(e){var t=[is,_t("personList",null,{xmlns:Os.TCMNT,"xmlns:x":Ch[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(_t("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function MJ(e){var t={};t.iauthor=e.read_shift(4);var r=Oh(e);return t.rfx=r.s,t.ref=hr(r.s),e.l+=16,t}function LJ(e,t){return t==null&&(t=nt(36)),t.write_shift(4,e[1].iauthor),Pp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var RJ=Pi;function IJ(e){return Xs(e.slice(0,54))}function BJ(e,t){var r=[],a=[],s={},i=!1;return zd(e,function(o,d,u){switch(u){case 632:a.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function zJ(e){var t=Fl(),r=[];return mt(t,628),mt(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),mt(t,632,IJ(s.a)))})}),mt(t,631),mt(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:On(a[0]),e:On(a[0])};mt(t,635,LJ([i,s])),s.t&&s.t.length>0&&mt(t,637,oY(s)),mt(t,636),delete s.iauthor})}),mt(t,634),mt(t,629),t.end()}var UJ="application/vnd.ms-office.vbaProject";function qJ(e){var t=sr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");sr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),sr.write(t)}function $J(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&sr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var CM=["xlsb","xlsm","xlam","biff8","xla"];function HJ(){return{"!type":"dialog"}}function VJ(){return{"!type":"dialog"}}function WJ(){return{"!type":"macro"}}function KJ(){return{"!type":"macro"}}var ep=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,l){var o=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,f=l.length>0?parseInt(l,10)|0:0;return o?f+=t.c:--f,d?u+=t.r:--u,s+(o?"":"$")+Dn(f)+(d?"":"$")+ss(u)}return function(s,i){return t=i,s.replace(e,r)}})(),t3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,r3=(function(){return function(t,r){return t.replace(t3,function(a,s,i,l,o,d){var u=q4(l)-(i?0:r.c),f=U4(d)-(o?0:r.r),m=f==0?"":o?f+1:"["+f+"]",g=u==0?"":i?u+1:"["+u+"]";return s+"R"+m+"C"+g})}})();function EM(e,t){return e.replace(t3,function(r,a,s,i,l,o){return a+(s=="$"?s+i:Dn(q4(i)+t.c))+(l=="$"?l+o:ss(U4(o)+t.r))})}function GJ(e,t,r){var a=Rl(t),s=a.s,i=On(r),l={r:i.r-s.r,c:i.c-s.c};return EM(e,l)}function YJ(e){return e.length!=1}function gE(e){return e.replace(/_xlfn\./g,"")}function fs(e){e.l+=1}function Kf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function TM(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return DM(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),l=Kf(e),o=Kf(e);return{s:{r:s,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function DM(e){var t=Kf(e),r=Kf(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function XJ(e,t,r){if(r.biff<8)return DM(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Kf(e),l=Kf(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function OM(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return QJ(e);var a=e.read_shift(r&&r.biff==12?4:2),s=Kf(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function QJ(e){var t=Kf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function ZJ(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function JJ(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return eee(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:l,rRel:o}}function eee(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function tee(e,t,r){var a=(e[e.l++]&96)>>5,s=TM(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function ree(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=TM(e,i,r);return[a,s,l]}function aee(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function nee(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function see(e,t,r){var a=(e[e.l++]&96)>>5,s=XJ(e,t-1,r);return[a,s]}function iee(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function vE(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function lee(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function oee(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function cee(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function uee(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function dee(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function FM(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function fee(e){return e.read_shift(2),FM(e)}function hee(e){return e.read_shift(2),FM(e)}function mee(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=OM(e,0,r);return[a,s]}function pee(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=JJ(e,0,r);return[a,s]}function xee(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=OM(e,0,r);return[a,s,i]}function gee(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[bte[s],LM[s],a]}function vee(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:yee(e);return[s,(i[0]===0?LM:yte)[i[1]]]}function yee(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function bee(e,t,r){e.l+=r&&r.biff==2?3:4}function wee(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function jee(e){return e.l++,Ud[e.read_shift(1)]}function Nee(e){return e.l++,e.read_shift(2)}function _ee(e){return e.l++,e.read_shift(1)!==0}function See(e){return e.l++,Fi(e)}function kee(e,t,r){return e.l++,Jg(e,t-1,r)}function Aee(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Qn(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Ud[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Fi(e);break;case 2:r[1]=Fh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Cee(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?Oh:Gb)(e));return s}function Eee(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,l=[];i!=a&&(l[i]=[]);++i)for(var o=0;o!=s;++o)l[i][o]=Aee(e,r.biff);return l}function Tee(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function Dee(e,t,r){if(r.biff==5)return Oee(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function Oee(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function Fee(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Pee(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Mee(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function Lee(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var Ree=Li,Iee=Li,Bee=Li;function tv(e,t,r){return e.l+=2,[ZJ(e)]}function a3(e){return e.l+=6,[]}var zee=tv,Uee=a3,qee=a3,$ee=tv;function PM(e){return e.l+=2,[ms(e),e.read_shift(2)&1]}var Hee=tv,Vee=PM,Wee=a3,Kee=tv,Gee=tv,Yee=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Xee(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),l=Yee[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:a,c:s,C:i}}function Qee(e){return e.l+=2,[e.read_shift(4)]}function Zee(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Jee(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function ete(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function tte(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function rte(e){return e.l+=4,[0,0]}var yE={1:{n:"PtgExp",f:wee},2:{n:"PtgTbl",f:Bee},3:{n:"PtgAdd",f:fs},4:{n:"PtgSub",f:fs},5:{n:"PtgMul",f:fs},6:{n:"PtgDiv",f:fs},7:{n:"PtgPower",f:fs},8:{n:"PtgConcat",f:fs},9:{n:"PtgLt",f:fs},10:{n:"PtgLe",f:fs},11:{n:"PtgEq",f:fs},12:{n:"PtgGe",f:fs},13:{n:"PtgGt",f:fs},14:{n:"PtgNe",f:fs},15:{n:"PtgIsect",f:fs},16:{n:"PtgUnion",f:fs},17:{n:"PtgRange",f:fs},18:{n:"PtgUplus",f:fs},19:{n:"PtgUminus",f:fs},20:{n:"PtgPercent",f:fs},21:{n:"PtgParen",f:fs},22:{n:"PtgMissArg",f:fs},23:{n:"PtgStr",f:kee},26:{n:"PtgSheet",f:Zee},27:{n:"PtgEndSheet",f:Jee},28:{n:"PtgErr",f:jee},29:{n:"PtgBool",f:_ee},30:{n:"PtgInt",f:Nee},31:{n:"PtgNum",f:See},32:{n:"PtgArray",f:iee},33:{n:"PtgFunc",f:gee},34:{n:"PtgFuncVar",f:vee},35:{n:"PtgName",f:Tee},36:{n:"PtgRef",f:mee},37:{n:"PtgArea",f:tee},38:{n:"PtgMemArea",f:Fee},39:{n:"PtgMemErr",f:Ree},40:{n:"PtgMemNoMem",f:Iee},41:{n:"PtgMemFunc",f:Pee},42:{n:"PtgRefErr",f:Mee},43:{n:"PtgAreaErr",f:aee},44:{n:"PtgRefN",f:pee},45:{n:"PtgAreaN",f:see},46:{n:"PtgMemAreaN",f:ete},47:{n:"PtgMemNoMemN",f:tte},57:{n:"PtgNameX",f:Dee},58:{n:"PtgRef3d",f:xee},59:{n:"PtgArea3d",f:ree},60:{n:"PtgRefErr3d",f:Lee},61:{n:"PtgAreaErr3d",f:nee},255:{}},ate={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},nte={1:{n:"PtgElfLel",f:PM},2:{n:"PtgElfRw",f:Kee},3:{n:"PtgElfCol",f:zee},6:{n:"PtgElfRwV",f:Gee},7:{n:"PtgElfColV",f:$ee},10:{n:"PtgElfRadical",f:Hee},11:{n:"PtgElfRadicalS",f:Wee},13:{n:"PtgElfColS",f:Uee},15:{n:"PtgElfColSV",f:qee},16:{n:"PtgElfRadicalLel",f:Vee},25:{n:"PtgList",f:Xee},29:{n:"PtgSxName",f:Qee},255:{}},ste={0:{n:"PtgAttrNoop",f:rte},1:{n:"PtgAttrSemi",f:dee},2:{n:"PtgAttrIf",f:cee},4:{n:"PtgAttrChoose",f:lee},8:{n:"PtgAttrGoto",f:oee},16:{n:"PtgAttrSum",f:bee},32:{n:"PtgAttrBaxcel",f:vE},33:{n:"PtgAttrBaxcel",f:vE},64:{n:"PtgAttrSpace",f:fee},65:{n:"PtgAttrSpaceSemi",f:hee},128:{n:"PtgAttrIfError",f:uee},255:{}};function rv(e,t,r,a){if(a.biff<8)return Li(e,t);for(var s=e.l+t,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=Eee(e,0,a),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=Cee(e,r[l][1],a),i.push(r[l][2]);break;case"PtgExp":a&&a.biff==12&&(r[l][1][1]=e.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=s-e.l,t!==0&&i.push(Li(e,t)),i}function av(e,t,r){for(var a=e.l+t,s,i,l=[];a!=e.l;)t=a-e.l,i=e[e.l],s=yE[i]||yE[ate[i]],(i===24||i===25)&&(s=(i===24?nte:ste)[e[e.l+1]]),!s||!s.f?Li(e,t):l.push([s.n,s.f(e,t,r)]);return l}function ite(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var l=a[i];if(l)switch(l[0]){case 2:s.push('"'+l[1].replace(/"/g,'""')+'"');break;default:s.push(l[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var lte={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ote(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function MM(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function bE(e,t,r){var a=MM(e,t,r);return a=="#REF"?a:ote(a,r)}function Ti(e,t,r,a,s){var i=s&&s.biff||8,l={s:{c:0,r:0}},o=[],d,u,f,m=0,g=0,x,b="";if(!e[0]||!e[0][0])return"";for(var v=-1,y="",j=0,S=e[0].length;j<S;++j){var N=e[0][j];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=o.pop(),u=o.pop(),v>=0){switch(e[0][v][1][0]){case 0:y=$n(" ",e[0][v][1][1]);break;case 1:y=$n("\r",e[0][v][1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}u=u+y,v=-1}o.push(u+lte[N[0]]+d);break;case"PtgIsect":d=o.pop(),u=o.pop(),o.push(u+" "+d);break;case"PtgUnion":d=o.pop(),u=o.pop(),o.push(u+","+d);break;case"PtgRange":d=o.pop(),u=o.pop(),o.push(u+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=tg(N[1][1],l,s),o.push(rg(f,i));break;case"PtgRefN":f=r?tg(N[1][1],r,s):N[1][1],o.push(rg(f,i));break;case"PtgRef3d":m=N[1][1],f=tg(N[1][2],l,s),b=bE(a,m,s),o.push(b+"!"+rg(f,i));break;case"PtgFunc":case"PtgFuncVar":var C=N[1][0],T=N[1][1];C||(C=0),C&=127;var P=C==0?[]:o.slice(-C);o.length-=C,T==="User"&&(T=P.shift()),o.push(T+"("+P.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":x=YC(N[1][1],r?{s:r}:l,s),o.push(f5(x,s));break;case"PtgArea":x=YC(N[1][1],l,s),o.push(f5(x,s));break;case"PtgArea3d":m=N[1][1],x=N[1][2],b=bE(a,m,s),o.push(b+"!"+f5(x,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=N[1][2];var D=(a.names||[])[g-1]||(a[0]||[])[g],M=D?D.Name:"SH33TJSNAME"+String(g);M&&M.slice(0,6)=="_xlfn."&&!s.xlfn&&(M=M.slice(6)),o.push(M);break;case"PtgNameX":var F=N[1][1];g=N[1][2];var H;if(s.biff<=5)F<0&&(F=-F),a[F]&&(H=a[F][g]);else{var L="";if(((a[F]||[])[0]||[])[0]==14849||(((a[F]||[])[0]||[])[0]==1025?a[F][g]&&a[F][g].itab>0&&(L=a.SheetNames[a[F][g].itab-1]+"!"):L=a.SheetNames[g-1]+"!"),a[F]&&a[F][g])L+=a[F][g].Name;else if(a[0]&&a[0][g])L+=a[0][g].Name;else{var z=(MM(a,F,s)||"").split(";;");z[g-1]?L=z[g-1]:L+="SH33TJSERRX"}o.push(L);break}H||(H={Name:"SH33TJSERRY"}),o.push(H.Name);break;case"PtgParen":var V="(",G=")";if(v>=0){switch(y="",e[0][v][1][0]){case 2:V=$n(" ",e[0][v][1][1])+V;break;case 3:V=$n("\r",e[0][v][1][1])+V;break;case 4:G=$n(" ",e[0][v][1][1])+G;break;case 5:G=$n("\r",e[0][v][1][1])+G;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}o.push(V+o.pop()+G);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:N[1][1],r:N[1][0]};var ie={c:r.c,r:r.r};if(a.sharedf[hr(f)]){var Z=a.sharedf[hr(f)];o.push(Ti(Z,l,ie,a,s))}else{var X=!1;for(d=0;d!=a.arrayf.length;++d)if(u=a.arrayf[d],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){o.push(Ti(u[1],l,ie,a,s)),X=!0;break}X||o.push(N[1])}break;case"PtgArray":o.push("{"+ite(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var he=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&he.indexOf(e[0][j][0])==-1){N=e[0][v];var ce=!0;switch(N[1][0]){case 4:ce=!1;case 0:y=$n(" ",N[1][1]);break;case 5:ce=!1;case 1:y=$n("\r",N[1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((ce?y:"")+o.pop()+(ce?"":y)),v=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function cte(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,l=e.read_shift(s);if(l==65535)return[[],Li(e,t-2)];var o=av(e,l,r);return t!==l+s&&(i=rv(e,t-l-s,o,r)),e.l=a,[o,i]}function ute(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,l=e.read_shift(s);if(l==65535)return[[],Li(e,t-2)];var o=av(e,l,r);return t!==l+s&&(i=rv(e,t-l-s,o,r)),e.l=a,[o,i]}function dte(e,t,r,a){var s=e.l+t,i=av(e,a,r),l;return s!==e.l&&(l=rv(e,s-e.l,i,r)),[i,l]}function fte(e,t,r){var a=e.l+t,s,i=e.read_shift(2),l=av(e,i,r);return i==65535?[[],Li(e,t-2)]:(t!==i+2&&(s=rv(e,a-i-2,l,r)),[l,s])}function hte(e){var t;if(gd(e,e.l+6)!==65535)return[Fi(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function mte(e){if(e==null){var t=nt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return fh(e);return fh(0)}function g5(e,t,r){var a=e.l+t,s=Pu(e);r.biff==2&&++e.l;var i=hte(e),l=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=ute(e,a-e.l,r);return{cell:s,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function pte(e,t,r,a,s){var i=mh(t,r,s),l=mte(e.v),o=nt(6),d=33;o.write_shift(2,d),o.write_shift(4,0);for(var u=nt(e.bf.length),f=0;f<e.bf.length;++f)u[f]=e.bf[f];var m=Ys([i,l,o,u]);return m}function Yb(e,t,r){var a=e.read_shift(4),s=av(e,a,r),i=e.read_shift(4),l=i>0?rv(e,i,s,r):null;return[s,l]}var xte=Yb,Xb=Yb,gte=Yb,vte=Yb,yte={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},LM={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},bte={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function wE(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function wte(e){var t="of:="+e.replace(t3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function v5(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function jte(e){return e.replace(/\./,"!")}var ng={},tp={},sg=typeof Map<"u";function n3(e,t,r){var a=0,s=e.length;if(r){if(sg?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=sg?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(sg?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function Qb(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(Di=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=Ag(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=Uy(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function eh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function n0(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Sd(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function RM(e,t,r,a,s,i){try{a.cellNF&&(e.z=fr[t])}catch(o){if(a.WTF)throw o}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=on(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(fr[t]==null&&Sd(yG[t]||"General",t),e.t==="e")e.w=e.w||Ud[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=bg(e.v);else if(e.t==="d"){var l=Fs(e.v);(l|0)===l?e.w=l.toString(10):e.w=bg(l)}else{if(e.v===void 0)return"";e.w=uh(e.v,tp)}else e.t==="d"?e.w=Qo(t,Fs(e.v),tp):e.w=Qo(t,e.v,tp)}catch(o){if(a.WTF)throw o}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=zy(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=zy(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(a.WTF&&i.Fills)throw o}}}function Nte(e,t,r){if(e&&e["!ref"]){var a=ua(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function _te(e,t){var r=ua(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Cr(r))}var Ste=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,kte=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Ate=/<(?:\w:)?hyperlink [^>]*>/mg,Cte=/"(\w*:\w*)"/,Ete=/<(?:\w:)?col\b[^>]*[\/]?>/g,Tte=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Dte=/<(?:\w:)?pageMargins[^>]*\/>/g,IM=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Ote=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Fte=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Pte(e,t,r,a,s,i,l){if(!e)return e;a||(a={"!id":{}});var o=t.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",m=e.match(kte);m?(u=e.slice(0,m.index),f=e.slice(m.index+m[0].length)):u=f=e;var g=u.match(IM);g?s3(g[0],o,s,r):(g=u.match(Ote))&&Lte(g[0],g[1]||"",o,s,r);var x=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(x>0){var b=u.slice(x,x+50).match(Cte);b&&_te(o,b[1])}var v=u.match(Fte);v&&v[1]&&Yte(v[1],s);var y=[];if(t.cellStyles){var j=u.match(Ete);j&&Hte(y,j)}m&&Zte(m[1],o,t,d,i,l);var S=f.match(Tte);S&&(o["!autofilter"]=Wte(S[0]));var N=[],C=f.match(Ste);if(C)for(x=0;x!=C.length;++x)N[x]=ua(C[x].slice(C[x].indexOf('"')+1));var T=f.match(Ate);T&&Ute(o,T,a);var P=f.match(Dte);if(P&&(o["!margins"]=qte(gr(P[0]))),!o["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(o["!ref"]=Cr(d)),t.sheetRows>0&&o["!ref"]){var D=ua(o["!ref"]);t.sheetRows<=+D.e.r&&(D.e.r=t.sheetRows-1,D.e.r>d.e.r&&(D.e.r=d.e.r),D.e.r<D.s.r&&(D.s.r=D.e.r),D.e.c>d.e.c&&(D.e.c=d.e.c),D.e.c<D.s.c&&(D.s.c=D.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Cr(D))}return y.length>0&&(o["!cols"]=y),N.length>0&&(o["!merges"]=N),o}function Mte(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Cr(e[r])+'"/>';return t+"</mergeCells>"}function s3(e,t,r,a){var s=gr(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=ca(qa(s.codeName)))}function Lte(e,t,r,a,s){s3(e.slice(0,e.indexOf(">")),r,a,s)}function Rte(e,t,r,a,s){var i=!1,l={},o=null;if(a.bookType!=="xlsx"&&t.vbaraw){var d=t.SheetNames[r];try{t.Workbook&&(d=t.Workbook.Sheets[r].CodeName||d)}catch{}i=!0,l.codeName=ju(Oa(d))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+_t("outlinePr",null,u)}!i&&!o||(s[s.length]=_t("sheetPr",o,l))}var Ite=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Bte=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function zte(e){var t={sheet:1};return Ite.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Bte.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=Z4(e.password).toString(16).toUpperCase()),_t("sheetProtection",null,t)}function Ute(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=gr(qa(t[s]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+ca(i.location))):(i.Target="#"+ca(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=ua(i.ref),d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var f=hr({c:u,r:d});a?(e[d]||(e[d]=[]),e[d][u]||(e[d][u]={t:"z",v:void 0}),e[d][u].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function qte(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function $te(e){return eh(e),_t("pageMargins",null,e)}function Hte(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=gr(t[a],!0);s.hidden&&(s.hidden=sn(s.hidden));var i=parseInt(s.min,10)-1,l=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,J4(s.width)),Wf(s);i<=l;)e[i++]=cn(s)}}function Vte(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=_t("col",null,Qb(s,a)));return r[r.length]="</cols>",r.join("")}function Wte(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Kte(e,t,r,a){var s=typeof e.ref=="string"?e.ref:Cr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=Rl(s);l.s.r==l.e.r&&(l.e.r=Rl(t["!ref"]).e.r,s=Cr(l));for(var o=0;o<i.length;++o){var d=i[o];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),_t("autoFilter",null,{ref:s})}var Gte=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Yte(e,t){t.Views||(t.Views=[{}]),(e.match(Gte)||[]).forEach(function(r,a){var s=gr(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),sn(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function Xte(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),_t("sheetViews",_t("sheetView",null,s),{})}function Qte(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Ud[e.v];break;case"d":a&&a.cellDates?s=on(e.v,-1).toISOString():(e=cn(e),e.t="n",s=""+(e.v=Fs(on(e.v)))),typeof e.z>"u"&&(e.z=fr[14]);break;default:s=e.v;break}var o=mi("v",Oa(s)),d={r:t},u=n0(a.cellXfs,e,a);switch(u!==0&&(d.s=u),e.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){o=mi("v",""+n3(a.Strings,e.v,a.revStrings)),d.t="s";break}d.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var f=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=_t("f",Oa(e.f),f)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(d.cm=1),_t("c",o,d)}var Zte=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=wg("v"),l=wg("f");return function(d,u,f,m,g,x){for(var b=0,v="",y=[],j=[],S=0,N=0,C=0,T="",P,D,M=0,F=0,H,L,z=0,V=0,G=Array.isArray(x.CellXf),ie,Z=[],X=[],he=Array.isArray(u),ce=[],ke={},se=!1,R=!!f.sheetStubs,I=d.split(t),q=0,K=I.length;q!=K;++q){v=I[q].trim();var te=v.length;if(te!==0){var J=0;e:for(b=0;b<te;++b)switch(v[b]){case">":if(v[b-1]!="/"){++b;break e}if(f&&f.cellStyles){if(D=gr(v.slice(J,b),!0),M=D.r!=null?parseInt(D.r,10):M+1,F=-1,f.sheetRows&&f.sheetRows<M)continue;ke={},se=!1,D.ht&&(se=!0,ke.hpt=parseFloat(D.ht),ke.hpx=xp(ke.hpt)),D.hidden=="1"&&(se=!0,ke.hidden=!0),D.outlineLevel!=null&&(se=!0,ke.level=+D.outlineLevel),se&&(ce[M-1]=ke)}break;case"<":J=b;break}if(J>=b)break;if(D=gr(v.slice(J,b),!0),M=D.r!=null?parseInt(D.r,10):M+1,F=-1,!(f.sheetRows&&f.sheetRows<M)){m.s.r>M-1&&(m.s.r=M-1),m.e.r<M-1&&(m.e.r=M-1),f&&f.cellStyles&&(ke={},se=!1,D.ht&&(se=!0,ke.hpt=parseFloat(D.ht),ke.hpx=xp(ke.hpt)),D.hidden=="1"&&(se=!0,ke.hidden=!0),D.outlineLevel!=null&&(se=!0,ke.level=+D.outlineLevel),se&&(ce[M-1]=ke)),y=v.slice(b).split(e);for(var Q=0;Q!=y.length&&y[Q].trim().charAt(0)=="<";++Q);for(y=y.slice(Q),b=0;b!=y.length;++b)if(v=y[b].trim(),v.length!==0){if(j=v.match(r),S=b,N=0,C=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,j!=null&&j.length===2){for(S=0,T=j[1],N=0;N!=T.length&&!((C=T.charCodeAt(N)-64)<1||C>26);++N)S=26*S+C;--S,F=S}else++F;for(N=0;N!=v.length&&v.charCodeAt(N)!==62;++N);if(++N,D=gr(v.slice(0,N),!0),D.r||(D.r=hr({r:M-1,c:F})),T=v.slice(N),P={t:""},(j=T.match(i))!=null&&j[1]!==""&&(P.v=ca(j[1])),f.cellFormula){if((j=T.match(l))!=null&&j[1]!==""){if(P.f=ca(qa(j[1])).replace(/\r\n/g,`
`),f.xlfn||(P.f=gE(P.f)),j[0].indexOf('t="array"')>-1)P.F=(T.match(s)||[])[1],P.F.indexOf(":")>-1&&Z.push([ua(P.F),P.F]);else if(j[0].indexOf('t="shared"')>-1){L=gr(j[0]);var ne=ca(qa(j[1]));f.xlfn||(ne=gE(ne)),X[parseInt(L.si,10)]=[L,ne,D.r]}}else(j=T.match(/<f[^>]*\/>/))&&(L=gr(j[0]),X[L.si]&&(P.f=GJ(X[L.si][1],X[L.si][2],D.r)));var ye=On(D.r);for(N=0;N<Z.length;++N)ye.r>=Z[N][0].s.r&&ye.r<=Z[N][0].e.r&&ye.c>=Z[N][0].s.c&&ye.c<=Z[N][0].e.c&&(P.F=Z[N][1])}if(D.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(R)P.t="z";else continue;else P.t=D.t||"n";switch(m.s.c>F&&(m.s.c=F),m.e.c<F&&(m.e.c=F),P.t){case"n":if(P.v==""||P.v==null){if(!R)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!R)continue;P.t="z"}else H=ng[parseInt(P.v,10)],P.v=H.t,P.r=H.r,f.cellHTML&&(P.h=H.h);break;case"str":P.t="s",P.v=P.v!=null?qa(P.v):"",f.cellHTML&&(P.h=R4(P.v));break;case"inlineStr":j=T.match(a),P.t="s",j!=null&&(H=Q4(j[1]))?(P.v=H.t,f.cellHTML&&(P.h=H.h)):P.v="";break;case"b":P.v=sn(P.v);break;case"d":f.cellDates?P.v=on(P.v,1):(P.v=Fs(on(P.v,1)),P.t="n");break;case"e":(!f||f.cellText!==!1)&&(P.w=P.v),P.v=zP[P.v];break}if(z=V=0,ie=null,G&&D.s!==void 0&&(ie=x.CellXf[D.s],ie!=null&&(ie.numFmtId!=null&&(z=ie.numFmtId),f.cellStyles&&ie.fillId!=null&&(V=ie.fillId))),RM(P,z,V,f,g,x),f.cellDates&&G&&P.t=="n"&&Dp(fr[z])&&(P.t="d",P.v=Kb(P.v)),D.cm&&f.xlmeta){var De=(f.xlmeta.Cell||[])[+D.cm-1];De&&De.type=="XLDAPR"&&(P.D=!0)}if(he){var ee=On(D.r);u[ee.r]||(u[ee.r]=[]),u[ee.r][ee.c]=P}else u[D.r]=P}}}}ce.length>0&&(u["!rows"]=ce)}})();function Jte(e,t,r,a){var s=[],i=[],l=ua(e["!ref"]),o="",d,u="",f=[],m=0,g=0,x=e["!rows"],b=Array.isArray(e),v={r:u},y,j=-1;for(g=l.s.c;g<=l.e.c;++g)f[g]=Dn(g);for(m=l.s.r;m<=l.e.r;++m){for(i=[],u=ss(m),g=l.s.c;g<=l.e.c;++g){d=f[g]+u;var S=b?(e[m]||[])[g]:e[d];S!==void 0&&(o=Qte(S,d,e,t))!=null&&i.push(o)}(i.length>0||x&&x[m])&&(v={r:u},x&&x[m]&&(y=x[m],y.hidden&&(v.hidden=1),j=-1,y.hpx?j=Cg(y.hpx):y.hpt&&(j=y.hpt),j>-1&&(v.ht=j,v.customHeight=1),y.level&&(v.outlineLevel=y.level)),s[s.length]=_t("row",i.join(""),v))}if(x)for(;m<x.length;++m)x&&x[m]&&(v={r:m+1},y=x[m],y.hidden&&(v.hidden=1),j=-1,y.hpx?j=Cg(y.hpx):y.hpt&&(j=y.hpt),j>-1&&(v.ht=j,v.customHeight=1),y.level&&(v.outlineLevel=y.level),s[s.length]=_t("row","",v));return s.join("")}function BM(e,t,r,a){var s=[is,_t("worksheet",null,{xmlns:Ch[0],"xmlns:r":Os.r})],i=r.SheetNames[e],l=0,o="",d=r.Sheets[i];d==null&&(d={});var u=d["!ref"]||"A1",f=ua(u);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=Cr(f)}a||(a={}),d["!comments"]=[];var m=[];Rte(d,r,e,t,s),s[s.length]=_t("dimension",null,{ref:u}),s[s.length]=Xte(d,t,e,r),t.sheetFormat&&(s[s.length]=_t("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(s[s.length]=Vte(d,d["!cols"])),s[l=s.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(o=Jte(d,t),o.length>0&&(s[s.length]=o)),s.length>l+1&&(s[s.length]="</sheetData>",s[l]=s[l].replace("/>",">")),d["!protect"]&&(s[s.length]=zte(d["!protect"])),d["!autofilter"]!=null&&(s[s.length]=Kte(d["!autofilter"],d,r,e)),d["!merges"]!=null&&d["!merges"].length>0&&(s[s.length]=Mte(d["!merges"]));var g=-1,x,b=-1;return d["!links"].length>0&&(s[s.length]="<hyperlinks>",d["!links"].forEach(function(v){v[1].Target&&(x={ref:v[0]},v[1].Target.charAt(0)!="#"&&(b=Ea(a,-1,Oa(v[1].Target).replace(/#.*$/,""),qr.HLINK),x["r:id"]="rId"+b),(g=v[1].Target.indexOf("#"))>-1&&(x.location=Oa(v[1].Target.slice(g+1))),v[1].Tooltip&&(x.tooltip=Oa(v[1].Tooltip)),s[s.length]=_t("hyperlink",null,x))}),s[s.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(s[s.length]=$te(d["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=mi("ignoredErrors",_t("ignoredError",null,{numberStoredAsText:1,sqref:u}))),m.length>0&&(b=Ea(a,-1,"../drawings/drawing"+(e+1)+".xml",qr.DRAW),s[s.length]=_t("drawing",null,{"r:id":"rId"+b}),d["!drawing"]=m),d["!comments"].length>0&&(b=Ea(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",qr.VML),s[s.length]=_t("legacyDrawing",null,{"r:id":"rId"+b}),d["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function ere(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function tre(e,t,r){var a=nt(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=Cg(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var l=0;s.level&&(l|=s.level),s.hidden&&(l|=16),(s.hpx||s.hpt)&&(l|=32),a.write_shift(1,l),a.write_shift(1,0);var o=0,d=a.l;a.l+=4;for(var u={r:e,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var m=-1,g=-1,x=f<<10;x<f+1<<10;++x){u.c=x;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[hr(u)];b&&(m<0&&(m=x),g=x)}m<0||(++o,a.write_shift(4,m),a.write_shift(4,g))}var v=a.l;return a.l=d,a.write_shift(4,o),a.l=v,a.length>a.l?a.slice(0,a.l):a}function rre(e,t,r,a){var s=tre(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&mt(e,0,s)}var are=Oh,nre=Pp;function sre(){}function ire(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=cY(e),r}function lre(e,t,r){r==null&&(r=nt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return Ry({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),MP(e,r),r.slice(0,r.l)}function ore(e){var t=rc(e);return[t]}function cre(e,t,r){return r==null&&(r=nt(8)),Eh(t,r)}function ure(e){var t=Th(e);return[t]}function dre(e,t,r){return r==null&&(r=nt(4)),Dh(t,r)}function fre(e){var t=rc(e),r=e.read_shift(1);return[t,r,"b"]}function hre(e,t,r){return r==null&&(r=nt(9)),Eh(t,r),r.write_shift(1,e.v?1:0),r}function mre(e){var t=Th(e),r=e.read_shift(1);return[t,r,"b"]}function pre(e,t,r){return r==null&&(r=nt(5)),Dh(t,r),r.write_shift(1,e.v?1:0),r}function xre(e){var t=rc(e),r=e.read_shift(1);return[t,r,"e"]}function gre(e,t,r){return r==null&&(r=nt(9)),Eh(t,r),r.write_shift(1,e.v),r}function vre(e){var t=Th(e),r=e.read_shift(1);return[t,r,"e"]}function yre(e,t,r){return r==null&&(r=nt(8)),Dh(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function bre(e){var t=rc(e),r=e.read_shift(4);return[t,r,"s"]}function wre(e,t,r){return r==null&&(r=nt(12)),Eh(t,r),r.write_shift(4,t.v),r}function jre(e){var t=Th(e),r=e.read_shift(4);return[t,r,"s"]}function Nre(e,t,r){return r==null&&(r=nt(8)),Dh(t,r),r.write_shift(4,t.v),r}function _re(e){var t=rc(e),r=Fi(e);return[t,r,"n"]}function Sre(e,t,r){return r==null&&(r=nt(16)),Eh(t,r),fh(e.v,r),r}function zM(e){var t=Th(e),r=Fi(e);return[t,r,"n"]}function kre(e,t,r){return r==null&&(r=nt(12)),Dh(t,r),fh(e.v,r),r}function Are(e){var t=rc(e),r=W4(e);return[t,r,"n"]}function Cre(e,t,r){return r==null&&(r=nt(12)),Eh(t,r),LP(e.v,r),r}function Ere(e){var t=Th(e),r=W4(e);return[t,r,"n"]}function Tre(e,t,r){return r==null&&(r=nt(8)),Dh(t,r),LP(e.v,r),r}function Dre(e){var t=rc(e),r=$4(e);return[t,r,"is"]}function Ore(e){var t=rc(e),r=Pi(e);return[t,r,"str"]}function Fre(e,t,r){return r==null&&(r=nt(12+4*e.v.length)),Eh(t,r),Xs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Pre(e){var t=Th(e),r=Pi(e);return[t,r,"str"]}function Mre(e,t,r){return r==null&&(r=nt(8+4*e.v.length)),Dh(t,r),Xs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Lre(e,t,r){var a=e.l+t,s=rc(e);s.r=r["!row"];var i=e.read_shift(1),l=[s,i,"b"];if(r.cellFormula){e.l+=2;var o=Xb(e,a-e.l,r);l[3]=Ti(o,null,s,r.supbooks,r)}else e.l=a;return l}function Rre(e,t,r){var a=e.l+t,s=rc(e);s.r=r["!row"];var i=e.read_shift(1),l=[s,i,"e"];if(r.cellFormula){e.l+=2;var o=Xb(e,a-e.l,r);l[3]=Ti(o,null,s,r.supbooks,r)}else e.l=a;return l}function Ire(e,t,r){var a=e.l+t,s=rc(e);s.r=r["!row"];var i=Fi(e),l=[s,i,"n"];if(r.cellFormula){e.l+=2;var o=Xb(e,a-e.l,r);l[3]=Ti(o,null,s,r.supbooks,r)}else e.l=a;return l}function Bre(e,t,r){var a=e.l+t,s=rc(e);s.r=r["!row"];var i=Pi(e),l=[s,i,"str"];if(r.cellFormula){e.l+=2;var o=Xb(e,a-e.l,r);l[3]=Ti(o,null,s,r.supbooks,r)}else e.l=a;return l}var zre=Oh,Ure=Pp;function qre(e,t){return t==null&&(t=nt(4)),t.write_shift(4,e),t}function $re(e,t){var r=e.l+t,a=Oh(e),s=H4(e),i=Pi(e),l=Pi(e),o=Pi(e);e.l=r;var d={rfx:a,relId:s,loc:i,display:o};return l&&(d.Tooltip=l),d}function Hre(e,t){var r=nt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Pp({s:On(e[0]),e:On(e[0])},r),V4("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return Xs(s||"",r),Xs(e[1].Tooltip||"",r),Xs("",r),r.slice(0,r.l)}function Vre(){}function Wre(e,t,r){var a=e.l+t,s=RP(e),i=e.read_shift(1),l=[s];if(l[2]=i,r.cellFormula){var o=xte(e,a-e.l,r);l[1]=o}else e.l=a;return l}function Kre(e,t,r){var a=e.l+t,s=Oh(e),i=[s];if(r.cellFormula){var l=vte(e,a-e.l,r);i[1]=l,e.l=a}else e.l=a;return i}function Gre(e,t,r){r==null&&(r=nt(18));var a=Qb(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var UM=["left","right","top","bottom","header","footer"];function Yre(e){var t={};return UM.forEach(function(r){t[r]=Fi(e)}),t}function Xre(e,t){return t==null&&(t=nt(48)),eh(e),UM.forEach(function(r){fh(e[r],t)}),t}function Qre(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Zre(e,t,r){r==null&&(r=nt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Jre(e){var t=nt(24);return t.write_shift(4,4),t.write_shift(4,1),Pp(e,t),t}function eae(e,t){return t==null&&(t=nt(66)),t.write_shift(2,e.password?Z4(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function tae(){}function rae(){}function aae(e,t,r,a,s,i,l){if(!e)return e;var o=t||{};a||(a={"!id":{}});var d=o.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,g=!1,x,b,v,y,j,S,N,C,T,P=[];o.biff=12,o["!row"]=0;var D=0,M=!1,F=[],H={},L=o.supbooks||s.supbooks||[[]];if(L.sharedf=H,L.arrayf=F,L.SheetNames=s.SheetNames||s.Sheets.map(function(he){return he.name}),!o.supbooks&&(o.supbooks=L,s.Names))for(var z=0;z<s.Names.length;++z)L[0][z+1]=s.Names[z];var V=[],G=[],ie=!1;Eg[16]={n:"BrtShortReal",f:zM};var Z;if(zd(e,function(ce,ke,se){if(!g)switch(se){case 148:u=ce;break;case 0:x=ce,o.sheetRows&&o.sheetRows<=x.r&&(g=!0),C=ss(y=x.r),o["!row"]=x.r,(ce.hidden||ce.hpt||ce.level!=null)&&(ce.hpt&&(ce.hpx=xp(ce.hpt)),G[ce.r]=ce);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:ce[2]},ce[2]){case"n":b.v=ce[1];break;case"s":N=ng[ce[1]],b.v=N.t,b.r=N.r;break;case"b":b.v=!!ce[1];break;case"e":b.v=ce[1],o.cellText!==!1&&(b.w=Ud[b.v]);break;case"str":b.t="s",b.v=ce[1];break;case"is":b.t="s",b.v=ce[1].t;break}if((v=l.CellXf[ce[0].iStyleRef])&&RM(b,v.numFmtId,null,o,i,l),j=ce[0].c==-1?j+1:ce[0].c,o.dense?(d[y]||(d[y]=[]),d[y][j]=b):d[Dn(j)+C]=b,o.cellFormula){for(M=!1,D=0;D<F.length;++D){var R=F[D];x.r>=R[0].s.r&&x.r<=R[0].e.r&&j>=R[0].s.c&&j<=R[0].e.c&&(b.F=Cr(R[0]),M=!0)}!M&&ce.length>3&&(b.f=ce[3])}if(f.s.r>x.r&&(f.s.r=x.r),f.s.c>j&&(f.s.c=j),f.e.r<x.r&&(f.e.r=x.r),f.e.c<j&&(f.e.c=j),o.cellDates&&v&&b.t=="n"&&Dp(fr[v.numFmtId])){var I=W0(b.v);I&&(b.t="d",b.v=new Date(I.y,I.m-1,I.d,I.H,I.M,I.S,I.u))}Z&&(Z.type=="XLDAPR"&&(b.D=!0),Z=void 0);break;case 1:case 12:if(!o.sheetStubs||m)break;b={t:"z",v:void 0},j=ce[0].c==-1?j+1:ce[0].c,o.dense?(d[y]||(d[y]=[]),d[y][j]=b):d[Dn(j)+C]=b,f.s.r>x.r&&(f.s.r=x.r),f.s.c>j&&(f.s.c=j),f.e.r<x.r&&(f.e.r=x.r),f.e.c<j&&(f.e.c=j),Z&&(Z.type=="XLDAPR"&&(b.D=!0),Z=void 0);break;case 176:P.push(ce);break;case 49:Z=((o.xlmeta||{}).Cell||[])[ce-1];break;case 494:var q=a["!id"][ce.relId];for(q?(ce.Target=q.Target,ce.loc&&(ce.Target+="#"+ce.loc),ce.Rel=q):ce.relId==""&&(ce.Target="#"+ce.loc),y=ce.rfx.s.r;y<=ce.rfx.e.r;++y)for(j=ce.rfx.s.c;j<=ce.rfx.e.c;++j)o.dense?(d[y]||(d[y]=[]),d[y][j]||(d[y][j]={t:"z",v:void 0}),d[y][j].l=ce):(S=hr({c:j,r:y}),d[S]||(d[S]={t:"z",v:void 0}),d[S].l=ce);break;case 426:if(!o.cellFormula)break;F.push(ce),T=o.dense?d[y][j]:d[Dn(j)+C],T.f=Ti(ce[1],f,{r:x.r,c:j},L,o),T.F=Cr(ce[0]);break;case 427:if(!o.cellFormula)break;H[hr(ce[0].s)]=ce[1],T=o.dense?d[y][j]:d[Dn(j)+C],T.f=Ti(ce[1],f,{r:x.r,c:j},L,o);break;case 60:if(!o.cellStyles)break;for(;ce.e>=ce.s;)V[ce.e--]={width:ce.w/256,hidden:!!(ce.flags&1),level:ce.level},ie||(ie=!0,J4(ce.w/256)),Wf(V[ce.e+1]);break;case 161:d["!autofilter"]={ref:Cr(ce)};break;case 476:d["!margins"]=ce;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),ce.name&&(s.Sheets[r].CodeName=ce.name),(ce.above||ce.left)&&(d["!outline"]={above:ce.above,left:ce.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),ce.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!ke.T){if(!m||o.WTF)throw new Error("Unexpected record 0x"+se.toString(16))}}},o),delete o.supbooks,delete o["!row"],!d["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(d["!ref"]=Cr(u||f)),o.sheetRows&&d["!ref"]){var X=ua(d["!ref"]);o.sheetRows<=+X.e.r&&(X.e.r=o.sheetRows-1,X.e.r>f.e.r&&(X.e.r=f.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>f.e.c&&(X.e.c=f.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),d["!fullref"]=d["!ref"],d["!ref"]=Cr(X))}return P.length>0&&(d["!merges"]=P),V.length>0&&(d["!cols"]=V),G.length>0&&(d["!rows"]=G),d}function nae(e,t,r,a,s,i,l){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=cn(t),t.z=t.z||fr[14],t.v=Fs(on(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var d={r,c:a};switch(d.s=n0(s.cellXfs,t,s),t.l&&i["!links"].push([hr(d),t.l]),t.c&&i["!comments"].push([hr(d),t.c]),t.t){case"s":case"str":return s.bookSST?(o=n3(s.Strings,t.v,s.revStrings),d.t="s",d.v=o,l?mt(e,18,Nre(t,d)):mt(e,7,wre(t,d))):(d.t="str",l?mt(e,17,Mre(t,d)):mt(e,6,Fre(t,d))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?mt(e,13,Tre(t,d)):mt(e,2,Cre(t,d)):l?mt(e,16,kre(t,d)):mt(e,5,Sre(t,d)),!0;case"b":return d.t="b",l?mt(e,15,pre(t,d)):mt(e,4,hre(t,d)),!0;case"e":return d.t="e",l?mt(e,14,yre(t,d)):mt(e,3,gre(t,d)),!0}return l?mt(e,12,dre(t,d)):mt(e,1,cre(t,d)),!0}function sae(e,t,r,a){var s=ua(t["!ref"]||"A1"),i,l="",o=[];mt(e,145);var d=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var f=s.s.r;f<=u;++f){l=ss(f),rre(e,t,s,f);var m=!1;if(f<=s.e.r)for(var g=s.s.c;g<=s.e.c;++g){f===s.s.r&&(o[g]=Dn(g)),i=o[g]+l;var x=d?(t[f]||[])[g]:t[i];if(!x){m=!1;continue}m=nae(e,x,f,g,a,t,m)}}mt(e,146)}function iae(e,t){!t||!t["!merges"]||(mt(e,177,qre(t["!merges"].length)),t["!merges"].forEach(function(r){mt(e,176,Ure(r))}),mt(e,178))}function lae(e,t){!t||!t["!cols"]||(mt(e,390),t["!cols"].forEach(function(r,a){r&&mt(e,60,Gre(a,r))}),mt(e,391))}function oae(e,t){!t||!t["!ref"]||(mt(e,648),mt(e,649,Jre(ua(t["!ref"]))),mt(e,650))}function cae(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Ea(r,-1,a[1].Target.replace(/#.*$/,""),qr.HLINK);mt(e,494,Hre(a,s))}}),delete t["!links"]}function uae(e,t,r,a){if(t["!comments"].length>0){var s=Ea(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",qr.VML);mt(e,551,V4("rId"+s)),t["!legacy"]=s}}function dae(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:Cr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,o=Rl(i);o.s.r==o.e.r&&(o.e.r=Rl(t["!ref"]).e.r,i=Cr(o));for(var d=0;d<l.length;++d){var u=l[d];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+i;break}}d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),mt(e,161,Pp(ua(i))),mt(e,162)}}function fae(e,t,r){mt(e,133),mt(e,137,Zre(t,r)),mt(e,138),mt(e,134)}function hae(e,t){t["!protect"]&&mt(e,535,eae(t["!protect"]))}function mae(e,t,r,a){var s=Fl(),i=r.SheetNames[e],l=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var d=ua(l["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],mt(s,129),(r.vbaraw||l["!outline"])&&mt(s,147,lre(o,l["!outline"])),mt(s,148,nre(d)),fae(s,l,r.Workbook),lae(s,l),sae(s,l,e,t),hae(s,l),dae(s,l,r,e),iae(s,l),cae(s,l,a),l["!margins"]&&mt(s,476,Xre(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&oae(s,l),uae(s,l,e,a),mt(s,130),s.end()}function pae(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(t[+l[1]]=r?+l[2]:l[2])});var s=ca((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function xae(e,t,r,a,s,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,d=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var g=pae(m);f.s.r=f.s.c=0,f.e.c=o,u=Dn(o),g[0].forEach(function(x,b){l[u+ss(b)]={t:"n",v:x,z:g[1]},d=b}),f.e.r<d&&(f.e.r=d),++o}),o>0&&(l["!ref"]=Cr(f)),l}function gae(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(IM);return o&&s3(o[0],i,s,r),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function vae(e,t){e.l+=10;var r=Pi(e);return{name:r}}function yae(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return zd(e,function(d,u,f){switch(f){case 550:i["!rel"]=d;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),d.name&&(s.Sheets[r].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!l||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var i3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],bae=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],wae=[],jae=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function jE(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=sn(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function NE(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=sn(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function qM(e){NE(e.WBProps,i3),NE(e.CalcPr,jae),jE(e.WBView,bae),jE(e.Sheets,wae),tp.date1904=sn(e.WBProps.date1904)}function Nae(e){return!e.Workbook||!e.Workbook.WBProps?"false":sn(e.Workbook.WBProps.date1904)?"true":"false"}var _ae="][*?/\\".split("");function $M(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return _ae.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Sae(e,t,r){e.forEach(function(a,s){$M(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var l=t&&t[s]&&t[s].CodeName||a;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function kae(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Sae(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Nte(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var Aae=/<\w+:workbook/;function Cae(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},l=0;if(e.replace(Ii,function(d,u){var f=gr(d);switch(Fu(f[0])){case"<?xml":break;case"<workbook":d.match(Aae)&&(s="xmlns"+d.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":i3.forEach(function(m){if(f[m[0]]!=null)switch(m[2]){case"bool":r.WBProps[m[0]]=sn(f[m[0]]);break;case"int":r.WBProps[m[0]]=parseInt(f[m[0]],10);break;default:r.WBProps[m[0]]=f[m[0]]}}),f.codeName&&(r.WBProps.CodeName=qa(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=ca(qa(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=qa(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),sn(f.hidden||"0")&&(i.Hidden=!0),l=u+d.length;break;case"</definedName>":i.Ref=ca(qa(e.slice(l,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return d}),Ch.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return qM(r),r}function HM(e){var t=[is];t[t.length]=_t("workbook",null,{xmlns:Ch[0],"xmlns:r":Os.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(i3.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(a[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=_t("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:Oa(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=_t("sheet",null,l)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var d={name:o.Name};o.Comment&&(d.comment=o.Comment),o.Sheet!=null&&(d.localSheetId=""+o.Sheet),o.Hidden&&(d.hidden="1"),o.Ref&&(t[t.length]=_t("definedName",Oa(o.Ref),d))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Eae(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=BN(e),r.name=Pi(e),r}function Tae(e,t){return t||(t=nt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),V4(e.strRelID,t),Xs(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Dae(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Pi(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function Oae(e,t){t||(t=nt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),MP(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Fae(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Pae(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=uY(e),l=gte(e,0,r),o=H4(e);e.l=a;var d={Name:i,Ptg:l};return s<268435455&&(d.Sheet=s),o&&(d.Comment=o),d}function Mae(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],Eg[16]={n:"BrtFRTArchID$",f:Fae},zd(e,function(d,u,f){switch(f){case 156:l.SheetNames.push(d.name),r.Sheets.push(d);break;case 153:r.WBProps=d;break;case 39:d.Sheet!=null&&(t.SID=d.Sheet),d.Ref=Ti(d.Ptg,null,null,l,t),delete t.SID,delete d.Ptg,i.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([f,d]):l[0]=[f,d],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(d),l.XTI=l.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(f),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(f),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),qM(r),r.Names=i,r.supbooks=l,r}function Lae(e,t){mt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};mt(e,156,Tae(s))}mt(e,144)}function Rae(e,t){t||(t=nt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Xs("SheetJS",t),Xs(Ty.version,t),Xs(Ty.version,t),Xs("7262",t),t.length>t.l?t.slice(0,t.l):t}function Iae(e,t){t||(t=nt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Bae(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(mt(e,135),mt(e,158,Iae(s)),mt(e,136))}}function zae(e,t){var r=Fl();return mt(r,131),mt(r,128,Rae()),mt(r,153,Oae(e.Workbook&&e.Workbook.WBProps||null)),Bae(r,e),Lae(r,e),mt(r,132),r.end()}function Uae(e,t,r){return t.slice(-4)===".bin"?Mae(e,r):Cae(e,r)}function qae(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?aae(e,a,r,s,i,l,o):Pte(e,a,r,s,i,l,o)}function $ae(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?yae(e,a,r,s,i):gae(e,a,r,s,i)}function Hae(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?WJ():KJ()}function Vae(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?HJ():VJ()}function Wae(e,t,r,a){return t.slice(-4)===".bin"?UZ(e,r,a):EZ(e,r,a)}function Kae(e,t,r){return _M(e,r)}function Gae(e,t,r){return t.slice(-4)===".bin"?GQ(e,r):VQ(e,r)}function Yae(e,t,r){return t.slice(-4)===".bin"?BJ(e,r):TJ(e,r)}function Xae(e,t,r){return t.slice(-4)===".bin"?AJ(e):SJ(e)}function Qae(e,t,r,a){return r.slice(-4)===".bin"?CJ(e,t,r,a):void 0}function Zae(e,t,r){return t.slice(-4)===".bin"?jJ(e,t,r):_J(e,t,r)}function Jae(e,t,r){return(t.slice(-4)===".bin"?zae:HM)(e)}function ene(e,t,r,a,s){return(t.slice(-4)===".bin"?mae:BM)(e,r,a,s)}function tne(e,t,r){return(t.slice(-4)===".bin"?QZ:jM)(e,r)}function rne(e,t,r){return(t.slice(-4)===".bin"?QQ:mM)(e,r)}function ane(e,t,r){return(t.slice(-4)===".bin"?zJ:AM)(e)}function nne(e){return(e.slice(-4)===".bin"?NJ:SM)()}var VM=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,WM=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ac(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(VM),i,l,o,d;if(s)for(d=0;d!=s.length;++d)i=s[d].match(WM),(l=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),a[o]=i[2].slice(1,i[2].length-1));return a}function sne(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(VM),s,i,l,o;if(a)for(o=0;o!=a.length;++o)s=a[o].match(WM),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),r[l]=s[2].slice(1,s[2].length-1));return r}var ig;function ine(e,t){var r=ig[e]||ca(e);return r==="General"?uh(t):Qo(r,t)}function lne(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=sn(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=on(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[ca(t)]=s}function one(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Ud[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=bg(e.v):e.w=uh(e.v):e.w=ine(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=ig[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&Dp(a)){var s=W0(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function cne(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=wZ[a.Pattern]||a.Pattern)}e[t.ID]=t}function une(e,t,r,a,s,i,l,o,d,u){var f="General",m=a.StyleID,g={};u=u||{};var x=[],b=0;for(m===void 0&&o&&(m=o.StyleID),m===void 0&&l&&(m=l.StyleID);i[m]!==void 0&&(i[m].nf&&(f=i[m].nf),i[m].Interior&&x.push(i[m].Interior),!!i[m].Parent);)m=i[m].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=sn(e);break;case"String":a.t="s",a.r=zC(ca(e)),a.v=e.indexOf("<")>-1?ca(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(on(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=ca(e):a.v<60&&(a.v=a.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=zP[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=zC(t||e));break}if(one(a,f,u),u.cellFormula!==!1)if(a.Formula){var v=ca(a.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),a.f=ep(v,s),delete a.Formula,a.ArrayRange=="RC"?a.F=ep("RC:RC",s):a.ArrayRange&&(a.F=ep(a.ArrayRange,s),d.push([ua(a.F),a.F]))}else for(b=0;b<d.length;++b)s.r>=d[b][0].s.r&&s.r<=d[b][0].e.r&&s.c>=d[b][0].s.c&&s.c<=d[b][0].e.c&&(a.F=d[b][1]);u.cellStyles&&(x.forEach(function(y){!g.patternType&&y.patternType&&(g.patternType=y.patternType)}),a.s=g),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function dne(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function y5(e,t){var r=t||{};Op();var a=Vx(I4(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=qa(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var l=cn(r);return l.type="string",pp.to_workbook(a,l)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Nt){s.indexOf("<"+Nt)>=0&&(i=!0)}),i)return Xne(a,r);ig={"General Number":"General","General Date":fr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":fr[15],"Short Date":fr[14],"Long Time":fr[19],"Medium Time":fr[18],"Short Time":fr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:fr[2],Standard:fr[4],Percent:fr[10],Scientific:fr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,d=[],u,f={},m=[],g=r.dense?[]:{},x="",b={},v={},y=Ac('<Data ss:Type="String">'),j=0,S=0,N=0,C={s:{r:2e6,c:2e6},e:{r:0,c:0}},T={},P={},D="",M=0,F=[],H={},L={},z=0,V=[],G=[],ie={},Z=[],X,he=!1,ce=[],ke=[],se={},R=0,I=0,q={Sheets:[],WBProps:{date1904:!1}},K={};Ng.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";o=Ng.exec(a);)switch(o[3]=(te=o[3]).toLowerCase()){case"data":if(te=="data"){if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break}if(d[d.length-1][1])break;o[1]==="/"?une(a.slice(j,o.index),D,y,d[d.length-1][0]=="comment"?ie:b,{c:S,r:N},T,Z[S],v,ce,r):(D="",y=Ac(o[0]),j=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(G.length>0&&(b.c=G),(!r.sheetRows||r.sheetRows>N)&&b.v!==void 0&&(r.dense?(g[N]||(g[N]=[]),g[N][S]=b):g[Dn(S)+ss(N)]=b),b.HRef&&(b.l={Target:ca(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(R=S+(parseInt(b.MergeAcross,10)|0),I=N+(parseInt(b.MergeDown,10)|0),F.push({s:{c:S,r:N},e:{c:R,r:I}})),!r.sheetStubs)b.MergeAcross?S=R+1:++S;else if(b.MergeAcross||b.MergeDown){for(var J=S;J<=R;++J)for(var Q=N;Q<=I;++Q)(J>S||Q>N)&&(r.dense?(g[Q]||(g[Q]=[]),g[Q][J]={t:"z"}):g[Dn(J)+ss(Q)]={t:"z"});S=R+1}else++S;else b=sne(o[0]),b.Index&&(S=+b.Index-1),S<C.s.c&&(C.s.c=S),S>C.e.c&&(C.e.c=S),o[0].slice(-2)==="/>"&&++S,G=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<C.s.r&&(C.s.r=N),N>C.e.r&&(C.e.r=N),o[0].slice(-2)==="/>"&&(v=Ac(o[0]),v.Index&&(N=+v.Index-1)),S=0,++N):(v=Ac(o[0]),v.Index&&(N=+v.Index-1),se={},(v.AutoFitHeight=="0"||v.Height)&&(se.hpx=parseInt(v.Height,10),se.hpt=Cg(se.hpx),ke[N]=se),v.Hidden=="1"&&(se.hidden=!0,ke[N]=se));break;case"worksheet":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));m.push(x),C.s.r<=C.e.r&&C.s.c<=C.e.c&&(g["!ref"]=Cr(C),r.sheetRows&&r.sheetRows<=C.e.r&&(g["!fullref"]=g["!ref"],C.e.r=r.sheetRows-1,g["!ref"]=Cr(C))),F.length&&(g["!merges"]=F),Z.length>0&&(g["!cols"]=Z),ke.length>0&&(g["!rows"]=ke),f[x]=g}else C={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=S=0,d.push([o[3],!1]),u=Ac(o[0]),x=ca(u.Name),g=r.dense?[]:{},F=[],ce=[],ke=[],K={name:x,Hidden:0},q.Sheets.push(K);break;case"table":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;d.push([o[3],!1]),Z=[],he=!1}break;case"style":o[1]==="/"?cne(T,P,r):P=Ac(o[0]);break;case"numberformat":P.nf=ca(Ac(o[0]).Format||"General"),ig[P.nf]&&(P.nf=ig[P.nf]);for(var ne=0;ne!=392&&fr[ne]!=P.nf;++ne);if(ne==392){for(ne=57;ne!=392;++ne)if(fr[ne]==null){Sd(P.nf,ne);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(X=Ac(o[0]),X.Hidden&&(X.hidden=!0,delete X.Hidden),X.Width&&(X.wpx=parseInt(X.Width,10)),!he&&X.wpx>10){he=!0,Di=bM;for(var ye=0;ye<Z.length;++ye)Z[ye]&&Wf(Z[ye])}he&&Wf(X),Z[X.Index-1||Z.length]=X;for(var De=0;De<+X.Span;++De)Z[Z.length]=cn(X);break;case"namedrange":if(o[1]==="/")break;q.Names||(q.Names=[]);var ee=gr(o[0]),Je={Name:ee.Name,Ref:ep(ee.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(Je.Sheet=q.Sheets.length-1),q.Names.push(Je);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?D+=a.slice(M,o.index):M=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=Ac(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?MY(H,te,a.slice(z,o.index)):z=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else d.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));dne(ie),G.push(ie)}else d.push([o[3],!1]),u=Ac(o[0]),ie={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Oe=Ac(o[0]);g["!autofilter"]={ref:ep(Oe.Range).replace(/\$/g,"")},d.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break;case"null":break;default:if(d.length==0&&o[3]=="document"||d.length==0&&o[3]=="uof")return CE(a,r);var ve=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ve=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ve=!1}break;case"excelworkbook":switch(o[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ve=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ve=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(a.slice(z,o.index)){case"SheetHidden":K.Hidden=1;break;case"SheetVeryHidden":K.Hidden=2;break}else z=o.index+o[0].length;break;case"header":g["!margins"]||eh(g["!margins"]={},"xlml"),isNaN(+gr(o[0]).Margin)||(g["!margins"].header=+gr(o[0]).Margin);break;case"footer":g["!margins"]||eh(g["!margins"]={},"xlml"),isNaN(+gr(o[0]).Margin)||(g["!margins"].footer=+gr(o[0]).Margin);break;case"pagemargins":var pt=gr(o[0]);g["!margins"]||eh(g["!margins"]={},"xlml"),isNaN(+pt.Top)||(g["!margins"].top=+pt.Top),isNaN(+pt.Left)||(g["!margins"].left=+pt.Left),isNaN(+pt.Right)||(g["!margins"].right=+pt.Right),isNaN(+pt.Bottom)||(g["!margins"].bottom=+pt.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ve=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ve=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ve=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ve=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ve=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ve=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ve=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ve=!1}break;case"smarttags":break;default:ve=!1;break}if(ve||o[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?lne(L,te,V,a.slice(z,o.index)):(V=o,z=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+d.join("|")}var et={};return!r.bookSheets&&!r.bookProps&&(et.Sheets=f),et.SheetNames=m,et.Workbook=q,et.SSF=cn(fr),et.Props=H,et.Custprops=L,et}function WN(e,t){switch(o3(t=t||{}),t.type||"base64"){case"base64":return y5(ho(e),t);case"binary":case"buffer":case"file":return y5(e,t);case"array":return y5(r0(e),t)}}function fne(e,t){var r=[];return e.Props&&r.push(LY(e.Props,t)),e.Custprops&&r.push(RY(e.Props,e.Custprops)),r.join("")}function hne(){return""}function mne(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(_t("NumberFormat",null,{"ss:Format":Oa(fr[a.numFmtId])}));var l={"ss:ID":"s"+(21+s)};r.push(_t("Style",i.join(""),l))}),_t("Styles",r.join(""))}function KM(e){return _t("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+r3(e.Ref,{r:0,c:0})})}function pne(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(KM(s)))}return _t("Names",r.join(""))}function xne(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],l=0;l<s.length;++l){var o=s[l];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(KM(o)))}return i.join("")}function gne(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(_t("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(_t("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(_t("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(_t("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(mi("ProtectContents","True")),e["!protect"].objects&&s.push(mi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(mi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(mi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(mi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&s.push("<"+l[1]+"/>")})),s.length==0?"":_t("WorksheetOptions",s.join(""),{xmlns:ro.x})}function vne(e){return e.map(function(t){var r=BG(t.t||""),a=_t("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return _t("Comment",a,{"ss:Author":t.a})}).join("")}function yne(e,t,r,a,s,i,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Oa(r3(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var d=On(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(d.r==l.r?"":"["+(d.r-l.r)+"]")+"C"+(d.c==l.c?"":"["+(d.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Oa(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Oa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],f=0;f!=u.length;++f)u[f].s.c!=l.c||u[f].s.r!=l.r||(u[f].e.c>u[f].s.c&&(o["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(o["ss:MergeDown"]=u[f].e.r-u[f].s.r));var m="",g="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":m="Number",g=String(e.v);break;case"b":m="Boolean",g=e.v?"1":"0";break;case"e":m="Error",g=Ud[e.v];break;case"d":m="DateTime",g=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||fr[14]);break;case"s":m="String",g=IG(e.v||"");break}var x=n0(a.cellXfs,e,a);o["ss:StyleID"]="s"+(21+x),o["ss:Index"]=l.c+1;var b=e.v!=null?g:"",v=e.t=="z"?"":'<Data ss:Type="'+m+'">'+b+"</Data>";return(e.c||[]).length>0&&(v+=vne(e.c)),_t("Cell",v,o)}function bne(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=xp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function wne(e,t,r,a){if(!e["!ref"])return"";var s=ua(e["!ref"]),i=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(y,j){Wf(y);var S=!!y.width,N=Qb(j,y),C={"ss:Index":j+1};S&&(C["ss:Width"]=kg(N.width)),y.hidden&&(C["ss:Hidden"]="1"),o.push(_t("Column",null,C))});for(var d=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var f=[bne(u,(e["!rows"]||[])[u])],m=s.s.c;m<=s.e.c;++m){var g=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>m)&&!(i[l].s.r>u)&&!(i[l].e.c<m)&&!(i[l].e.r<u)){(i[l].s.c!=m||i[l].s.r!=u)&&(g=!0);break}if(!g){var x={r:u,c:m},b=hr(x),v=d?(e[u]||[])[m]:e[b];f.push(yne(v,b,e,t,r,a,x))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function jne(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],l=i?xne(i,t,e,r):"";return l.length>0&&a.push("<Names>"+l+"</Names>"),l=i?wne(i,t,e,r):"",l.length>0&&a.push("<Table>"+l+"</Table>"),a.push(gne(i,t,e,r)),a.join("")}function Nne(e,t){t||(t={}),e.SSF||(e.SSF=cn(fr)),e.SSF&&(Op(),Hb(e.SSF),t.revssf=Wb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],n0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(fne(e,t)),r.push(hne()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(_t("Worksheet",jne(a,t,e),{"ss:Name":Oa(e.SheetNames[a])}));return r[2]=mne(e,t),r[3]=pne(e),is+_t("Workbook",r.join(""),{xmlns:ro.ss,"xmlns:o":ro.o,"xmlns:x":ro.x,"xmlns:ss":ro.ss,"xmlns:dt":ro.dt,"xmlns:html":ro.html})}function _ne(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=pY(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=xY(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Sne=[60,1084,2066,2165,2175];function kne(e,t,r,a,s){var i=a,l=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}l.push(o),r.l+=i;for(var d=gd(r,r.l),u=KN[d],f=0;u!=null&&Sne.indexOf(d)>-1;)i=gd(r,r.l+2),f=r.l+4,d==2066?f+=4:(d==2165||d==2175)&&(f+=12),o=r.slice(f,r.l+4+i),l.push(o),r.l+=4+i,u=KN[d=gd(r,r.l)];var m=Ys(l);fi(m,0);var g=0;m.lens=[];for(var x=0;x<l.length;++x)m.lens.push(g),g+=l[x].length;if(m.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+m.length+" < "+a;return t.f(m,m.length,s)}function gu(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=fr[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Ud[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=bg(e.v):e.w=uh(e.v):e.w=Qo(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&Dp(fr[a]||String(a))){var s=W0(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function M1(e,t,r){return{v:e,ixfe:t,t:r}}function Ane(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},l={},o=null,d=[],u="",f={},m,g="",x,b,v,y,j={},S=[],N,C,T=[],P=[],D={Sheets:[],WBProps:{date1904:!1},Views:[{}]},M={},F=function(wt){return wt<8?Q0[wt]:wt<64&&P[wt-8]||Q0[wt]},H=function(wt,Ct,ur){var Lt=Ct.XF.data;if(!(!Lt||!Lt.patternType||!ur||!ur.cellStyles)){Ct.s={},Ct.s.patternType=Lt.patternType;var Dt;(Dt=Sg(F(Lt.icvFore)))&&(Ct.s.fgColor={rgb:Dt}),(Dt=Sg(F(Lt.icvBack)))&&(Ct.s.bgColor={rgb:Dt})}},L=function(wt,Ct,ur){if(!(se>1)&&!(ur.sheetRows&&wt.r>=ur.sheetRows)){if(ur.cellStyles&&Ct.XF&&Ct.XF.data&&H(wt,Ct,ur),delete Ct.ixfe,delete Ct.XF,m=wt,g=hr(wt),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),wt.r<l.s.r&&(l.s.r=wt.r),wt.c<l.s.c&&(l.s.c=wt.c),wt.r+1>l.e.r&&(l.e.r=wt.r+1),wt.c+1>l.e.c&&(l.e.c=wt.c+1),ur.cellFormula&&Ct.f){for(var Lt=0;Lt<S.length;++Lt)if(!(S[Lt][0].s.c>wt.c||S[Lt][0].s.r>wt.r)&&!(S[Lt][0].e.c<wt.c||S[Lt][0].e.r<wt.r)){Ct.F=Cr(S[Lt][0]),(S[Lt][0].s.c!=wt.c||S[Lt][0].s.r!=wt.r)&&delete Ct.f,Ct.f&&(Ct.f=""+Ti(S[Lt][1],l,wt,ce,z));break}}ur.dense?(s[wt.r]||(s[wt.r]=[]),s[wt.r][wt.c]=Ct):s[g]=Ct}},z={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(z.password=t.password);var V,G=[],ie=[],Z=[],X=[],he=!1,ce=[];ce.SheetNames=z.snames,ce.sharedf=z.sharedf,ce.arrayf=z.arrayf,ce.names=[],ce.XTI=[];var ke=0,se=0,R=0,I=[],q=[],K;z.codepage=1200,Oc(1200);for(var te=!1;e.l<e.length-1;){var J=e.l,Q=e.read_shift(2);if(Q===0&&ke===10)break;var ne=e.l===e.length?0:e.read_shift(2),ye=KN[Q];if(ye&&ye.f){if(t.bookSheets&&ke===133&&Q!==133)break;if(ke=Q,ye.r===2||ye.r==12){var De=e.read_shift(2);if(ne-=2,!z.enc&&De!==Q&&((De&255)<<8|De>>8)!==Q)throw new Error("rt mismatch: "+De+"!="+Q);ye.r==12&&(e.l+=10,ne-=10)}var ee={};if(Q===10?ee=ye.f(e,ne,z):ee=kne(Q,ye,e,ne,z),se==0&&[9,521,1033,2057].indexOf(ke)===-1)continue;switch(Q){case 34:r.opts.Date1904=D.WBProps.date1904=ee;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(z.enc||(e.l=0),z.enc=ee,!t.password)throw new Error("File is password-protected");if(ee.valid==null)throw new Error("Encryption scheme unsupported");if(!ee.valid)throw new Error("Password is incorrect");break;case 92:z.lastuser=ee;break;case 66:var Je=Number(ee);switch(Je){case 21010:Je=1200;break;case 32768:Je=1e4;break;case 32769:Je=1252;break}Oc(z.codepage=Je),te=!0;break;case 317:z.rrtabid=ee;break;case 25:z.winlocked=ee;break;case 439:r.opts.RefreshAll=ee;break;case 12:r.opts.CalcCount=ee;break;case 16:r.opts.CalcDelta=ee;break;case 17:r.opts.CalcIter=ee;break;case 13:r.opts.CalcMode=ee;break;case 14:r.opts.CalcPrecision=ee;break;case 95:r.opts.CalcSaveRecalc=ee;break;case 15:z.CalcRefMode=ee;break;case 2211:r.opts.FullCalc=ee;break;case 129:ee.fDialog&&(s["!type"]="dialog"),ee.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ee.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:T.push(ee);break;case 430:ce.push([ee]),ce[ce.length-1].XTI=[];break;case 35:case 547:ce[ce.length-1].push(ee);break;case 24:case 536:K={Name:ee.Name,Ref:Ti(ee.rgce,l,null,ce,z)},ee.itab>0&&(K.Sheet=ee.itab-1),ce.names.push(K),ce[0]||(ce[0]=[],ce[0].XTI=[]),ce[ce.length-1].push(ee),ee.Name=="_xlnm._FilterDatabase"&&ee.itab>0&&ee.rgce&&ee.rgce[0]&&ee.rgce[0][0]&&ee.rgce[0][0][0]=="PtgArea3d"&&(q[ee.itab-1]={ref:Cr(ee.rgce[0][0][1][2])});break;case 22:z.ExternCount=ee;break;case 23:ce.length==0&&(ce[0]=[],ce[0].XTI=[]),ce[ce.length-1].XTI=ce[ce.length-1].XTI.concat(ee),ce.XTI=ce.XTI.concat(ee);break;case 2196:if(z.biff<8)break;K!=null&&(K.Comment=ee[1]);break;case 18:s["!protect"]=ee;break;case 19:ee!==0&&z.WTF&&console.error("Password verifier: "+ee);break;case 133:i[ee.pos]=ee,z.snames.push(ee.name);break;case 10:{if(--se)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,s["!ref"]=Cr(l),t.sheetRows&&t.sheetRows<=l.e.r){var Oe=l.e.r;l.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Cr(l),l.e.r=Oe}l.e.r++,l.e.c++}G.length>0&&(s["!merges"]=G),ie.length>0&&(s["!objects"]=ie),Z.length>0&&(s["!cols"]=Z),X.length>0&&(s["!rows"]=X),D.Sheets.push(M)}u===""?f=s:a[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(z.biff===8&&(z.biff={9:2,521:3,1033:4}[Q]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ee.BIFFVer]||8),z.biffguess=ee.BIFFVer==0,ee.BIFFVer==0&&ee.dt==4096&&(z.biff=5,te=!0,Oc(z.codepage=28591)),z.biff==8&&ee.BIFFVer==0&&ee.dt==16&&(z.biff=2),se++)break;if(s=t.dense?[]:{},z.biff<8&&!te&&(te=!0,Oc(z.codepage=t.codepage||1252)),z.biff<5||ee.BIFFVer==0&&ee.dt==4096){u===""&&(u="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var ve={pos:e.l-ne,name:u};i[ve.pos]=ve,z.snames.push(u)}else u=(i[J]||{name:""}).name;ee.dt==32&&(s["!type"]="chart"),ee.dt==64&&(s["!type"]="macro"),G=[],ie=[],z.arrayf=S=[],Z=[],X=[],he=!1,M={Hidden:(i[J]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ee.r]||[])[ee.c]:s[hr({c:ee.c,r:ee.r})])&&++ee.c,N={ixfe:ee.ixfe,XF:T[ee.ixfe]||{},v:ee.val,t:"n"},R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:ee.c,r:ee.r},N,t);break;case 5:case 517:N={ixfe:ee.ixfe,XF:T[ee.ixfe],v:ee.val,t:ee.t},R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:ee.c,r:ee.r},N,t);break;case 638:N={ixfe:ee.ixfe,XF:T[ee.ixfe],v:ee.rknum,t:"n"},R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:ee.c,r:ee.r},N,t);break;case 189:for(var pt=ee.c;pt<=ee.C;++pt){var et=ee.rkrec[pt-ee.c][0];N={ixfe:et,XF:T[et],v:ee.rkrec[pt-ee.c][1],t:"n"},R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:pt,r:ee.r},N,t)}break;case 6:case 518:case 1030:{if(ee.val=="String"){o=ee;break}if(N=M1(ee.val,ee.cell.ixfe,ee.tt),N.XF=T[N.ixfe],t.cellFormula){var Nt=ee.formula;if(Nt&&Nt[0]&&Nt[0][0]&&Nt[0][0][0]=="PtgExp"){var ot=Nt[0][0][1][0],Ie=Nt[0][0][1][1],ge=hr({r:ot,c:Ie});j[ge]?N.f=""+Ti(ee.formula,l,ee.cell,ce,z):N.F=((t.dense?(s[ot]||[])[Ie]:s[ge])||{}).F}else N.f=""+Ti(ee.formula,l,ee.cell,ce,z)}R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L(ee.cell,N,t),o=ee}break;case 7:case 519:if(o)o.val=ee,N=M1(ee,o.cell.ixfe,"s"),N.XF=T[N.ixfe],t.cellFormula&&(N.f=""+Ti(o.formula,l,o.cell,ce,z)),R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L(o.cell,N,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(ee);var Te=hr(ee[0].s);if(x=t.dense?(s[ee[0].s.r]||[])[ee[0].s.c]:s[Te],t.cellFormula&&x){if(!o||!Te||!x)break;x.f=""+Ti(ee[1],l,ee[0],ce,z),x.F=Cr(ee[0])}}break;case 1212:{if(!t.cellFormula)break;if(g){if(!o)break;j[hr(o.cell)]=ee[0],x=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[hr(o.cell)],(x||{}).f=""+Ti(ee[0],l,m,ce,z)}}break;case 253:N=M1(d[ee.isst].t,ee.ixfe,"s"),d[ee.isst].h&&(N.h=d[ee.isst].h),N.XF=T[N.ixfe],R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:ee.c,r:ee.r},N,t);break;case 513:t.sheetStubs&&(N={ixfe:ee.ixfe,XF:T[ee.ixfe],t:"z"},R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:ee.c,r:ee.r},N,t));break;case 190:if(t.sheetStubs)for(var qe=ee.c;qe<=ee.C;++qe){var xt=ee.ixfe[qe-ee.c];N={ixfe:xt,XF:T[xt],t:"z"},R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:qe,r:ee.r},N,t)}break;case 214:case 516:case 4:N=M1(ee.val,ee.ixfe,"s"),N.XF=T[N.ixfe],R>0&&(N.z=I[N.ixfe>>8&63]),gu(N,t,r.opts.Date1904),L({c:ee.c,r:ee.r},N,t);break;case 0:case 512:se===1&&(l=ee);break;case 252:d=ee;break;case 1054:if(z.biff==4){I[R++]=ee[1];for(var gt=0;gt<R+163&&fr[gt]!=ee[1];++gt);gt>=163&&Sd(ee[1],R+163)}else Sd(ee[1],ee[0]);break;case 30:{I[R++]=ee;for(var Mt=0;Mt<R+163&&fr[Mt]!=ee;++Mt);Mt>=163&&Sd(ee,R+163)}break;case 229:G=G.concat(ee);break;case 93:ie[ee.cmo[0]]=z.lastobj=ee;break;case 438:z.lastobj.TxO=ee;break;case 127:z.lastobj.ImData=ee;break;case 440:for(y=ee[0].s.r;y<=ee[0].e.r;++y)for(v=ee[0].s.c;v<=ee[0].e.c;++v)x=t.dense?(s[y]||[])[v]:s[hr({c:v,r:y})],x&&(x.l=ee[1]);break;case 2048:for(y=ee[0].s.r;y<=ee[0].e.r;++y)for(v=ee[0].s.c;v<=ee[0].e.c;++v)x=t.dense?(s[y]||[])[v]:s[hr({c:v,r:y})],x&&x.l&&(x.l.Tooltip=ee[1]);break;case 28:{if(z.biff<=5&&z.biff>=2)break;x=t.dense?(s[ee[0].r]||[])[ee[0].c]:s[hr(ee[0])];var mr=ie[ee[2]];x||(t.dense?(s[ee[0].r]||(s[ee[0].r]=[]),x=s[ee[0].r][ee[0].c]={t:"z"}):x=s[hr(ee[0])]={t:"z"},l.e.r=Math.max(l.e.r,ee[0].r),l.s.r=Math.min(l.s.r,ee[0].r),l.e.c=Math.max(l.e.c,ee[0].c),l.s.c=Math.min(l.s.c,ee[0].c)),x.c||(x.c=[]),b={a:ee[1],t:mr.TxO.t},x.c.push(b)}break;case 2173:mJ(T[ee.ixfe],ee.ext);break;case 125:{if(!z.cellStyles)break;for(;ee.e>=ee.s;)Z[ee.e--]={width:ee.w/256,level:ee.level||0,hidden:!!(ee.flags&1)},he||(he=!0,J4(ee.w/256)),Wf(Z[ee.e+1])}break;case 520:{var Pt={};ee.level!=null&&(X[ee.r]=Pt,Pt.level=ee.level),ee.hidden&&(X[ee.r]=Pt,Pt.hidden=!0),ee.hpt&&(X[ee.r]=Pt,Pt.hpt=ee.hpt,Pt.hpx=xp(ee.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||eh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Q]]=ee;break;case 161:s["!margins"]||eh(s["!margins"]={}),s["!margins"].header=ee.header,s["!margins"].footer=ee.footer;break;case 574:ee.RTL&&(D.Views[0].RTL=!0);break;case 146:P=ee;break;case 2198:V=ee;break;case 140:C=ee;break;case 442:u?M.CodeName=ee||M.name:D.WBProps.CodeName=ee||"ThisWorkbook";break}}else ye||console.error("Missing Info for XLS Record 0x"+Q.toString(16)),e.l+=ne}return r.SheetNames=Wn(i).sort(function(Rt,wt){return Number(Rt)-Number(wt)}).map(function(Rt){return i[Rt].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&q.forEach(function(Rt,wt){r.Sheets[r.SheetNames[wt]]["!autofilter"]=Rt}),r.Strings=d,r.SSF=cn(fr),z.enc&&(r.Encryption=z.enc),V&&(r.Themes=V),r.Metadata={},C!==void 0&&(r.Metadata.Country=C),ce.names.length>0&&(D.Names=ce.names),r.Workbook=D,r}var lg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Cne(e,t,r){var a=sr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=nE(a,zN,lg.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var l=sr.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=nE(l,UN,lg.SI);for(var d in o)t[d]==null&&(t[d]=o[d])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(WP(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Ene(e,t){var r=[],a=[],s=[],i=0,l,o=PC(zN,"n"),d=PC(UN,"n");if(e.Props)for(l=Wn(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(d,l[i])?a:s).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=Wn(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(d,l[i])?a:s).push([l[i],e.Custprops[l[i]]]);var u=[];for(i=0;i<s.length;++i)JP.indexOf(s[i][0])>-1||VP.indexOf(s[i][0])>-1||s[i][1]!=null&&u.push(s[i]);a.length&&sr.utils.cfb_add(t,"/SummaryInformation",sE(a,lg.SI,d,UN)),(r.length||u.length)&&sr.utils.cfb_add(t,"/DocumentSummaryInformation",sE(r,lg.DSI,o,zN,u.length?u:null,lg.UDI))}function GM(e,t){t||(t={}),o3(t),E4(),t.codepage&&C4(t.codepage);var r,a;if(e.FullPaths){if(sr.find(e,"/encryption"))throw new Error("File is password-protected");r=sr.find(e,"!CompObj"),a=sr.find(e,"/Workbook")||sr.find(e,"/Book")}else{switch(t.type){case"base64":e=so(ho(e));break;case"binary":e=so(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}fi(e,0),a={content:e}}var s,i;if(r&&_ne(r),t.bookProps&&!t.bookSheets)s={};else{var l=zr?"buffer":"array";if(a&&a.content)s=Ane(a.content,t);else if((i=sr.find(e,"PerfectOffice_MAIN"))&&i.content)s=J0.to_workbook(i.content,(t.type=l,t));else if((i=sr.find(e,"NativeContent_MAIN"))&&i.content)s=J0.to_workbook(i.content,(t.type=l,t));else throw(i=sr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&sr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=qJ(e))}var o={};return e.FullPaths&&Cne(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function Tne(e,t){var r=t||{},a=sr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return sr.utils.cfb_add(a,s,YM(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Ene(e,a),r.biff==8&&e.vbaraw&&$J(a,sr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var Eg={0:{f:ere},1:{f:ore},2:{f:Are},3:{f:xre},4:{f:fre},5:{f:_re},6:{f:Ore},7:{f:bre},8:{f:Bre},9:{f:Ire},10:{f:Lre},11:{f:Rre},12:{f:ure},13:{f:Ere},14:{f:vre},15:{f:mre},16:{f:zM},17:{f:Pre},18:{f:jre},19:{f:$4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Pae},40:{},42:{},43:{f:OZ},44:{f:TZ},45:{f:MZ},46:{f:RZ},47:{f:LZ},48:{},49:{f:aY},50:{},51:{f:gJ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:uM},62:{f:Dre},63:{f:kJ},64:{f:tae},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Li,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Qre},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ire},148:{f:are,p:16},151:{f:Vre},152:{},153:{f:Dae},154:{},155:{},156:{f:Eae},157:{},158:{},159:{T:1,f:KQ},160:{T:-1},161:{T:1,f:Oh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:zre},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:pJ},336:{T:-1},337:{f:bJ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:BN},357:{},358:{},359:{},360:{T:1},361:{},362:{f:cM},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Wre},427:{f:Kre},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Yre},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:sre},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:$re},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:BN},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:RJ},633:{T:1},634:{T:-1},635:{T:1,f:MJ},636:{T:-1},637:{f:lY},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:vae},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:rae},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},KN={6:{f:g5},10:{f:Tf},12:{f:ms},13:{f:ms},14:{f:Qn},15:{f:Qn},16:{f:Fi},17:{f:Qn},18:{f:Qn},19:{f:ms},20:{f:dE},21:{f:dE},23:{f:cM},24:{f:hE},25:{f:Qn},26:{},27:{},28:{f:rQ},29:{},34:{f:Qn},35:{f:fE},38:{f:Fi},39:{f:Fi},40:{f:Fi},41:{f:Fi},42:{f:Qn},43:{f:Qn},47:{f:mZ},49:{f:EX},51:{f:ms},60:{},61:{f:_X},64:{f:Qn},65:{f:CX},66:{f:ms},77:{},80:{},81:{},82:{},85:{f:ms},89:{},90:{},91:{},92:{f:hX},93:{f:sQ},94:{},95:{f:Qn},96:{},97:{},99:{f:Qn},125:{f:uM},128:{f:HX},129:{f:pX},130:{f:ms},131:{f:Qn},132:{f:Qn},133:{f:xX},134:{},140:{f:hQ},141:{f:ms},144:{},146:{f:xQ},151:{},152:{},153:{},154:{},155:{},156:{f:ms},157:{},158:{},160:{f:NQ},161:{f:yQ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:zX},190:{f:UX},193:{f:Tf},197:{},198:{},199:{},200:{},201:{},202:{f:Qn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ms},220:{},221:{f:Qn},222:{},224:{f:$X},225:{f:fX},226:{f:Tf},227:{},229:{f:aQ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:vX},253:{f:DX},255:{f:bX},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:eM},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Qn},353:{f:Tf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:YX},431:{f:Qn},432:{},433:{},434:{},437:{},438:{f:oQ},439:{f:Qn},440:{f:cQ},441:{},442:{f:ev},443:{},444:{f:ms},445:{},446:{},448:{f:Tf},449:{f:NX,r:2},450:{f:Tf},512:{f:oE},513:{f:jQ},515:{f:KX},516:{f:FX},517:{f:uE},519:{f:_Q},520:{f:wX},523:{},545:{f:mE},549:{f:lE},566:{},574:{f:kX},638:{f:BX},659:{},1048:{},1054:{f:MX},1084:{},1212:{f:JX},2048:{f:dQ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:O1},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Tf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:gQ,r:12},2173:{f:hJ,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Qn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:ZX,r:12},2197:{},2198:{f:lJ,r:12},2199:{},2200:{},2201:{},2202:{f:eQ,r:12},2203:{f:Tf},2204:{},2205:{},2206:{},2207:{},2211:{f:jX},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ms},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:bQ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:pQ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:oE},1:{},2:{f:EQ},3:{f:AQ},4:{f:kQ},5:{f:uE},7:{f:DQ},8:{},9:{f:O1},11:{},22:{f:ms},30:{f:RX},31:{},32:{},33:{f:mE},36:{},37:{f:lE},50:{f:OQ},62:{},52:{},67:{},68:{f:ms},69:{},86:{},126:{},127:{f:SQ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:FQ},223:{},234:{},354:{},421:{},518:{f:g5},521:{f:O1},536:{f:hE},547:{f:fE},561:{},579:{},1030:{f:g5},1033:{f:O1},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function At(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,l=e.next(4);l.write_shift(2,s),l.write_shift(2,i),i>0&&z4(r)&&e.push(r)}}function Dne(e,t,r,a){var s=(r||[]).length||0;if(s<=8224)return At(e,t,r,s);var i=t;if(!isNaN(i)){for(var l=r.parts||[],o=0,d=0,u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;var f=e.next(4);for(f.write_shift(2,i),f.write_shift(2,u),e.push(r.slice(d,d+u)),d+=u;d<s;){for(f=e.next(4),f.write_shift(2,60),u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;f.write_shift(2,u),e.push(r.slice(d,d+u)),d+=u}}}function nv(e,t,r){return e||(e=nt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function One(e,t,r,a){var s=nt(9);return nv(s,e,t),tM(r,a||"b",s),s}function Fne(e,t,r){var a=nt(8+2*r.length);return nv(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function Pne(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Fs(on(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?At(e,2,TQ(r,a,s)):At(e,3,CQ(r,a,s));return;case"b":case"e":At(e,5,One(r,a,t.v,t.t));return;case"s":case"str":At(e,4,Fne(r,a,(t.v||"").slice(0,255)));return}At(e,1,nv(null,r,a))}function Mne(e,t,r,a){var s=Array.isArray(t),i=ua(t["!ref"]||"A1"),l,o="",d=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=Cr(i)}for(var u=i.s.r;u<=i.e.r;++u){o=ss(u);for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(d[f]=Dn(f)),l=d[f]+o;var m=s?(t[u]||[])[f]:t[l];m&&Pne(e,m,u,f)}}}function Lne(e,t){for(var r=t||{},a=Fl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return At(a,r.biff==4?1033:r.biff==3?521:9,X4(e,16,r)),Mne(a,e.Sheets[e.SheetNames[s]],s,r),At(a,10),a.end()}function Rne(e,t,r){At(e,49,TX({sz:12,name:"Arial"},r))}function Ine(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&At(e,1054,LX(s,t[s],r))})}function Bne(e,t){var r=nt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),At(e,2151,r),r=nt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),iM(ua(t["!ref"]||"A1"),r),r.write_shift(4,4),At(e,2152,r)}function zne(e,t){for(var r=0;r<16;++r)At(e,224,cE({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){At(e,224,cE(a,0,t))})}function Une(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];At(e,440,uQ(a)),a[1].Tooltip&&At(e,2048,fQ(a))}delete t["!links"]}function qne(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&At(e,125,vQ(Qb(s,a),s))})}}function $ne(e,t,r,a,s){var i=16+n0(s.cellXfs,t,s);if(t.v==null&&!t.bf){At(e,513,mh(r,a,i));return}if(t.bf)At(e,6,pte(t,r,a,s,i));else switch(t.t){case"d":case"n":var l=t.t=="d"?Fs(on(t.v)):t.v;At(e,515,GX(r,a,l,i));break;case"b":case"e":At(e,517,WX(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var o=n3(s.Strings,t.v,s.revStrings);At(e,253,OX(r,a,o,i))}else At(e,516,PX(r,a,(t.v||"").slice(0,255),i,s));break;default:At(e,513,mh(r,a,i))}}function Hne(e,t,r){var a=Fl(),s=r.SheetNames[e],i=r.Sheets[s]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[e]||{},d=Array.isArray(i),u=t.biff==8,f,m="",g=[],x=ua(i["!ref"]||"A1"),b=u?65536:16384;if(x.e.c>255||x.e.r>=b){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");x.e.c=Math.min(x.e.c,255),x.e.r=Math.min(x.e.c,b-1)}At(a,2057,X4(r,16,t)),At(a,13,Ho(1)),At(a,12,Ho(100)),At(a,15,Zi(!0)),At(a,17,Zi(!1)),At(a,16,fh(.001)),At(a,95,Zi(!0)),At(a,42,Zi(!1)),At(a,43,Zi(!1)),At(a,130,Ho(1)),At(a,128,VX()),At(a,131,Zi(!1)),At(a,132,Zi(!1)),u&&qne(a,i["!cols"]),At(a,512,IX(x,t)),u&&(i["!links"]=[]);for(var v=x.s.r;v<=x.e.r;++v){m=ss(v);for(var y=x.s.c;y<=x.e.c;++y){v===x.s.r&&(g[y]=Dn(y)),f=g[y]+m;var j=d?(i[v]||[])[y]:i[f];j&&($ne(a,j,v,y,t),u&&j.l&&i["!links"].push([f,j.l]))}}var S=o.CodeName||o.name||s;return u&&At(a,574,AX((l.Views||[])[0])),u&&(i["!merges"]||[]).length&&At(a,229,nQ(i["!merges"])),u&&Une(a,i),At(a,442,rM(S)),u&&Bne(a,i),At(a,10),a.end()}function Vne(e,t,r){var a=Fl(),s=(e||{}).Workbook||{},i=s.Sheets||[],l=s.WBProps||{},o=r.biff==8,d=r.biff==5;if(At(a,2057,X4(e,5,r)),r.bookType=="xla"&&At(a,135),At(a,225,o?Ho(1200):null),At(a,193,WY(2)),d&&At(a,191),d&&At(a,192),At(a,226),At(a,92,mX("SheetJS",r)),At(a,66,Ho(o?1200:1252)),o&&At(a,353,Ho(0)),o&&At(a,448),At(a,317,wQ(e.SheetNames.length)),o&&e.vbaraw&&At(a,211),o&&e.vbaraw){var u=l.CodeName||"ThisWorkbook";At(a,442,rM(u))}At(a,156,Ho(17)),At(a,25,Zi(!1)),At(a,18,Zi(!1)),At(a,19,Ho(0)),o&&At(a,431,Zi(!1)),o&&At(a,444,Ho(0)),At(a,61,SX()),At(a,64,Zi(!1)),At(a,141,Ho(0)),At(a,34,Zi(Nae(e)=="true")),At(a,14,Zi(!0)),o&&At(a,439,Zi(!1)),At(a,218,Ho(0)),Rne(a,e,r),Ine(a,e.SSF,r),zne(a,r),o&&At(a,352,Zi(!1));var f=a.end(),m=Fl();o&&At(m,140,mQ()),o&&r.Strings&&Dne(m,252,yX(r.Strings)),At(m,10);var g=m.end(),x=Fl(),b=0,v=0;for(v=0;v<e.SheetNames.length;++v)b+=(o?12:11)+(o?2:1)*e.SheetNames[v].length;var y=f.length+b+g.length;for(v=0;v<e.SheetNames.length;++v){var j=i[v]||{};At(x,133,gX({pos:y,hs:j.Hidden||0,dt:0,name:e.SheetNames[v]},r)),y+=t[v].length}var S=x.end();if(b!=S.length)throw new Error("BS8 "+b+" != "+S.length);var N=[];return f.length&&N.push(f),S.length&&N.push(S),g.length&&N.push(g),Ys(N)}function Wne(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=cn(fr)),e&&e.SSF&&(Op(),Hb(e.SSF),r.revssf=Wb(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,c3(r),r.cellXfs=[],n0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=Hne(s,r,e);return a.unshift(Vne(e,a,r)),Ys(a)}function YM(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=Rl(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Wne(e,t);case 4:case 3:case 2:return Lne(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function _E(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=s.index,o=i&&i.index||e.length,d=TG(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,m=0,g=0,x={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(l=0;l<d.length;++l){var v=d[l].trim(),y=v.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(y!="<td"&&y!="<th")){var j=v.split(/<\/t[dh]>/i);for(o=0;o<j.length;++o){var S=j[o].trim();if(S.match(/<t[dh]/i)){for(var N=S,C=0;N.charAt(0)=="<"&&(C=N.indexOf(">"))>-1;)N=N.slice(C+1);for(var T=0;T<b.length;++T){var P=b[T];P.s.c==f&&P.s.r<u&&u<=P.e.r&&(f=P.e.c+1,T=-1)}var D=gr(S.slice(0,S.indexOf(">")));g=D.colspan?+D.colspan:1,((m=+D.rowspan)>1||g>1)&&b.push({s:{r:u,c:f},e:{r:u+(m||1)-1,c:f+g-1}});var M=D.t||D["data-t"]||"";if(!N.length){f+=g;continue}if(N=yP(N),x.s.r>u&&(x.s.r=u),x.e.r<u&&(x.e.r=u),x.s.c>f&&(x.s.c=f),x.e.c<f&&(x.e.c=f),!N.length){f+=g;continue}var F={t:"s",v:N};r.raw||!N.trim().length||M=="s"||(N==="TRUE"?F={t:"b",v:!0}:N==="FALSE"?F={t:"b",v:!1}:isNaN(Lc(N))?isNaN(mp(N).getDate())||(F={t:"d",v:on(N)},r.cellDates||(F={t:"n",v:Fs(F.v)}),F.z=r.dateNF||fr[14]):F={t:"n",v:Lc(N)}),r.dense?(a[u]||(a[u]=[]),a[u][f]=F):a[hr({r:u,c:f})]=F,f+=g}}}}return a["!ref"]=Cr(x),b.length&&(a["!merges"]=b),a}function Kne(e,t,r,a){for(var s=e["!merges"]||[],i=[],l=t.s.c;l<=t.e.c;++l){for(var o=0,d=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>l)&&!(s[u].e.r<r||s[u].e.c<l)){if(s[u].s.r<r||s[u].s.c<l){o=-1;break}o=s[u].e.r-s[u].s.r+1,d=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var f=hr({r,c:l}),m=a.dense?(e[r]||[])[l]:e[f],g=m&&m.v!=null&&(m.h||R4(m.w||(Dd(m),m.w)||""))||"",x={};o>1&&(x.rowspan=o),d>1&&(x.colspan=d),a.editable?g='<span contenteditable="true">'+g+"</span>":m&&(x["data-t"]=m&&m.t||"z",m.v!=null&&(x["data-v"]=m.v),m.z!=null&&(x["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+m.l.Target+'">'+g+"</a>")),x.id=(a.id||"sjs")+"-"+f,i.push(_t("td",g,x))}}var b="<tr>";return b+i.join("")+"</tr>"}var Gne='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Yne="</body></html>";function Xne(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return a0(_E(r[0],t),t);var a=f3();return r.forEach(function(s,i){h3(a,_E(s,t),"Sheet"+(i+1))}),a}function Qne(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function XM(e,t){var r=t||{},a=r.header!=null?r.header:Gne,s=r.footer!=null?r.footer:Yne,i=[a],l=Rl(e["!ref"]);r.dense=Array.isArray(e),i.push(Qne(e,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(Kne(e,l,o,r));return i.push("</table>"+s),i.join("")}function QM(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var l=typeof a.origin=="string"?On(a.origin):a.origin;s=l.r,i=l.c}var o=t.getElementsByTagName("tr"),d=Math.min(a.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=Rl(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var m=[],g=0,x=e["!rows"]||(e["!rows"]=[]),b=0,v=0,y=0,j=0,S=0,N=0;for(e["!cols"]||(e["!cols"]=[]);b<o.length&&v<d;++b){var C=o[b];if(SE(C)){if(a.display)continue;x[v]={hidden:!0}}var T=C.children;for(y=j=0;y<T.length;++y){var P=T[y];if(!(a.display&&SE(P))){var D=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):yP(P.innerHTML),M=P.getAttribute("data-z")||P.getAttribute("z");for(g=0;g<m.length;++g){var F=m[g];F.s.c==j+i&&F.s.r<v+s&&v+s<=F.e.r&&(j=F.e.c+1-i,g=-1)}N=+P.getAttribute("colspan")||1,((S=+P.getAttribute("rowspan")||1)>1||N>1)&&m.push({s:{r:v+s,c:j+i},e:{r:v+s+(S||1)-1,c:j+i+(N||1)-1}});var H={t:"s",v:D},L=P.getAttribute("data-t")||P.getAttribute("t")||"";D!=null&&(D.length==0?H.t=L||"z":a.raw||D.trim().length==0||L=="s"||(D==="TRUE"?H={t:"b",v:!0}:D==="FALSE"?H={t:"b",v:!1}:isNaN(Lc(D))?isNaN(mp(D).getDate())||(H={t:"d",v:on(D)},a.cellDates||(H={t:"n",v:Fs(H.v)}),H.z=a.dateNF||fr[14]):H={t:"n",v:Lc(D)})),H.z===void 0&&M!=null&&(H.z=M);var z="",V=P.getElementsByTagName("A");if(V&&V.length)for(var G=0;G<V.length&&!(V[G].hasAttribute("href")&&(z=V[G].getAttribute("href"),z.charAt(0)!="#"));++G);z&&z.charAt(0)!="#"&&(H.l={Target:z}),a.dense?(e[v+s]||(e[v+s]=[]),e[v+s][j+i]=H):e[hr({c:j+i,r:v+s})]=H,u.e.c<j+i&&(u.e.c=j+i),j+=N}}++v}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),u.e.r=Math.max(u.e.r,v-1+s),e["!ref"]=Cr(u),v>=d&&(e["!fullref"]=Cr((u.e.r=o.length-b+v-1+s,u))),e}function ZM(e,t){var r=t||{},a=r.dense?[]:{};return QM(a,e,t)}function Zne(e,t){return a0(ZM(e,t),t)}function SE(e){var t="",r=Jne(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Jne(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function ese(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ca(t.replace(/<[^>]*>/g,""));return[r]}var kE={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function JM(e,t){var r=t||{},a=I4(e),s=[],i,l,o={name:""},d="",u=0,f,m,g={},x=[],b=r.dense?[]:{},v,y,j={value:""},S="",N=0,C=[],T=-1,P=-1,D={s:{r:1e6,c:1e7},e:{r:0,c:0}},M=0,F={},H=[],L={},z=0,V=0,G=[],ie=1,Z=1,X=[],he={Names:[]},ce={},ke=["",""],se=[],R={},I="",q=0,K=!1,te=!1,J=0;for(Ng.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=Ng.exec(a);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(D.e.c>=D.s.c&&D.e.r>=D.s.r?b["!ref"]=Cr(D):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=D.e.r&&(b["!fullref"]=b["!ref"],D.e.r=r.sheetRows-1,b["!ref"]=Cr(D)),H.length&&(b["!merges"]=H),G.length&&(b["!rows"]=G),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),x.push(f.name),g[f.name]=b,te=!1):v[0].charAt(v[0].length-2)!=="/"&&(f=gr(v[0],!1),T=P=-1,D.s.r=D.s.c=1e7,D.e.r=D.e.c=0,b=r.dense?[]:{},H=[],G=[],te=!0);break;case"table-row-group":v[1]==="/"?--M:++M;break;case"table-row":case"":if(v[1]==="/"){T+=ie,ie=1;break}if(m=gr(v[0],!1),m.?T=m.-1:T==-1&&(T=0),ie=+m["number-rows-repeated"]||1,ie<10)for(J=0;J<ie;++J)M>0&&(G[T+J]={level:M});P=-1;break;case"covered-table-cell":v[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(b[T]||(b[T]=[]),b[T][P]={t:"z"}):b[hr({r:T,c:P})]={t:"z"}),S="",C=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++P,j=gr(v[0],!1),Z=parseInt(j["number-columns-repeated"]||"1",10),y={t:"z",v:null},j.formula&&r.cellFormula!=!1&&(y.f=wE(ca(j.formula))),(j.||j["value-type"])=="string"&&(y.t="s",y.v=ca(j["string-value"]||""),r.dense?(b[T]||(b[T]=[]),b[T][P]=y):b[hr({r:T,c:P})]=y),P+=Z-1;else if(v[1]!=="/"){++P,S="",N=0,C=[],Z=1;var Q=ie?T+ie-1:T;if(P>D.e.c&&(D.e.c=P),P<D.s.c&&(D.s.c=P),T<D.s.r&&(D.s.r=T),Q>D.e.r&&(D.e.r=Q),j=gr(v[0],!1),se=[],R={},y={t:j.||j["value-type"],v:null},r.cellFormula)if(j.formula&&(j.formula=ca(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(z=parseInt(j["number-matrix-rows-spanned"],10)||0,V=parseInt(j["number-matrix-columns-spanned"],10)||0,L={s:{r:T,c:P},e:{r:T+z-1,c:P+V-1}},y.F=Cr(L),X.push([L,y.F])),j.formula)y.f=wE(j.formula);else for(J=0;J<X.length;++J)T>=X[J][0].s.r&&T<=X[J][0].e.r&&P>=X[J][0].s.c&&P<=X[J][0].e.c&&(y.F=X[J][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(z=parseInt(j["number-rows-spanned"],10)||0,V=parseInt(j["number-columns-spanned"],10)||0,L={s:{r:T,c:P},e:{r:T+z-1,c:P+V-1}},H.push(L)),j["number-columns-repeated"]&&(Z=parseInt(j["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=sn(j["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(j.value);break;case"percentage":y.t="n",y.v=parseFloat(j.value);break;case"currency":y.t="n",y.v=parseFloat(j.value);break;case"date":y.t="d",y.v=on(j["date-value"]),r.cellDates||(y.t="n",y.v=Fs(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=AG(j["time-value"])/86400,r.cellDates&&(y.t="d",y.v=Kb(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(j.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",j["string-value"]!=null&&(S=ca(j["string-value"]),C=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(K=!1,y.t==="s"&&(y.v=S||"",C.length&&(y.R=C),K=N==0),ce.Target&&(y.l=ce),se.length>0&&(y.c=se,se=[]),S&&r.cellText!==!1&&(y.w=S),K&&(y.t="z",delete y.v),(!K||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=T))for(var ne=0;ne<ie;++ne){if(Z=parseInt(j["number-columns-repeated"]||"1",10),r.dense)for(b[T+ne]||(b[T+ne]=[]),b[T+ne][P]=ne==0?y:cn(y);--Z>0;)b[T+ne][P+Z]=cn(y);else for(b[hr({r:T+ne,c:P})]=y;--Z>0;)b[hr({r:T+ne,c:P+Z})]=cn(y);D.e.c<=P&&(D.e.c=P)}Z=parseInt(j["number-columns-repeated"]||"1",10),P+=Z-1,Z=0,y={},S="",C=[]}ce={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;R.t=S,C.length&&(R.R=C),R.a=I,se.push(R)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);I="",q=0,S="",N=0,C=[];break;case"creator":v[1]==="/"?I=a.slice(q,v.index):q=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);S="",N=0,C=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(F[o.name]=d,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(d="",o=gr(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":l=gr(v[0],!1),d+=kE[v[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":l=gr(v[0],!1),d+=kE[v[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":d+=a.slice(u,v.index);break}else u=v.index+v[0].length;break;case"named-range":l=gr(v[0],!1),ke=v5(l["cell-range-address"]);var ye={Name:l.name,Ref:ke[0]+"!"+ke[1]};te&&(ye.Sheet=x.length),he.Names.push(ye);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!j||!j["string-value"])){var De=ese(a.slice(N,v.index));S=(S.length>0?S+`
`:"")+De[0]}else gr(v[0],!1),N=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{ke=v5(gr(v[0])["target-range-address"]),g[ke[0]]["!autofilter"]={ref:ke[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(ce=gr(v[0],!1),!ce.href)break;ce.Target=ca(ce.href),delete ce.href,ce.Target.charAt(0)=="#"&&ce.Target.indexOf(".")>-1?(ke=v5(ce.Target.slice(1)),ce.Target="#"+ke[0]+"!"+ke[1]):ce.Target.match(/^\.\.[\\\/]/)&&(ce.Target=ce.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var ee={Sheets:g,SheetNames:x,Workbook:he};return r.bookSheets&&delete ee.Sheets,ee}function AE(e,t){t=t||{},$o(e,"META-INF/manifest.xml")&&AY(hs(e,"META-INF/manifest.xml"),t);var r=io(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=JM(qa(r),t);return $o(e,"meta.xml")&&(a.Props=$P(hs(e,"meta.xml"))),a}function CE(e,t){return JM(e,t)}var tse=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+jg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return is+t}})(),EE=(function(){var e=function(i){return Oa(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,l,o){var d=[];d.push('      <table:table table:name="'+Oa(l.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,f=0,m=Rl(i["!ref"]||"A1"),g=i["!merges"]||[],x=0,b=Array.isArray(i);if(i["!cols"])for(f=0;f<=m.e.c;++f)d.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var v="",y=i["!rows"]||[];for(u=0;u<m.s.r;++u)v=y[u]?' table:style-name="ro'+y[u].ods+'"':"",d.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=m.e.r;++u){for(v=y[u]?' table:style-name="ro'+y[u].ods+'"':"",d.push("        <table:table-row"+v+`>
`),f=0;f<m.s.c;++f)d.push(t);for(;f<=m.e.c;++f){var j=!1,S={},N="";for(x=0;x!=g.length;++x)if(!(g[x].s.c>f)&&!(g[x].s.r>u)&&!(g[x].e.c<f)&&!(g[x].e.r<u)){(g[x].s.c!=f||g[x].s.r!=u)&&(j=!0),S["table:number-columns-spanned"]=g[x].e.c-g[x].s.c+1,S["table:number-rows-spanned"]=g[x].e.r-g[x].s.r+1;break}if(j){d.push(r);continue}var C=hr({r:u,c:f}),T=b?(i[u]||[])[f]:i[C];if(T&&T.f&&(S["table:formula"]=Oa(wte(T.f)),T.F&&T.F.slice(0,C.length)==C)){var P=Rl(T.F);S["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,S["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!T){d.push(t);continue}switch(T.t){case"b":N=T.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=T.v?"true":"false";break;case"n":N=T.w||String(T.v||0),S["office:value-type"]="float",S["office:value"]=T.v||0;break;case"s":case"str":N=T.v==null?"":T.v,S["office:value-type"]="string";break;case"d":N=T.w||on(T.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=on(T.v).toISOString(),S["table:style-name"]="ce1";break;default:d.push(t);continue}var D=e(N);if(T.l&&T.l.Target){var M=T.l.Target;M=M.charAt(0)=="#"?"#"+jte(M.slice(1)):M,M.charAt(0)!="#"&&!M.match(/^\w+:/)&&(M="../"+M),D=_t("text:a",D,{"xlink:href":M.replace(/&/g,"&amp;")})}d.push("          "+_t("table:table-cell",_t("text:p",D,{}),S)+`
`)}d.push(`        </table:table-row>
`)}return d.push(`      </table:table>
`),d.join("")},s=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var m=u["!cols"][f];if(m.width==null&&m.wpx==null&&m.wch==null)continue;Wf(m),m.ods=o;var g=u["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),i.push(`  </style:style>
`),++o}}});var d=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=d;var m=u["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),i.push(`  </style:style>
`),++d}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var d=[is],u=jg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=jg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(d.push("<office:document"+u+f+`>
`),d.push(qP().replace(/office:document-meta/g,"office:meta"))):d.push("<office:document-content"+u+`>
`),s(d,l),d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`);for(var m=0;m!=l.SheetNames.length;++m)d.push(a(l.Sheets[l.SheetNames[m]],l,m));return d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),o.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}})();function eL(e,t){if(t.bookType=="fods")return EE(e,t);var r=P4(),a="",s=[],i=[];return a="mimetype",Dr(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",Dr(r,a,EE(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",Dr(r,a,tse(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",Dr(r,a,is+qP()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",Dr(r,a,TY(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",Dr(r,a,CY(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ph(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function GN(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):qa(r0(e))}function rse(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):so(ju(e))}function ase(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Gf(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function TE(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function nse(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function sse(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function Tg(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Ca(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Vn(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ha(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=Tg(e,r),i=s&7;s=Math.floor(s/8);var l=0,o;if(s==0)break;switch(i){case 0:{for(var d=r[0];e[r[0]++]>=128;);o=e.slice(d,r[0])}break;case 5:l=4,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=Tg(e,r),o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var u={data:o,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function ci(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(Ca(a*8+s.type)),s.type==2&&t.push(Ca(s.data.length)),t.push(s.data))})}),Gf(t)}function l3(e,t){return e?.map(function(r){return t(r.data)})||[]}function zo(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=Tg(e,a),i=ha(e.slice(a[0],a[0]+s));a[0]+=s;var l={id:Vn(i[1][0].data),messages:[]};i[2].forEach(function(o){var d=ha(o.data),u=Vn(d[3][0].data);l.messages.push({meta:d,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=i[3])!=null&&t[0]&&(l.merge=Vn(i[3][0].data)>>>0>0),r.push(l)}return r}function Om(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Ca(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Ca(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(l){s.push(l.data),l.meta[3]=[{type:0,data:Ca(l.data.length)}],a[2].push({data:ci(l.meta),type:2})});var i=ci(a);t.push(Ca(i.length)),t.push(i),s.forEach(function(l){return t.push(l)})}),Gf(t)}function ise(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Tg(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=t[r[0]],o>1&&(l|=t[r[0]+1]<<8),o>2&&(l|=t[r[0]+2]<<16),o>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}s.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var d=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,d=(t[r[0]++]&224)<<3,d|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(d=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(d=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Gf(s)],d==0)throw new Error("Invalid offset 0");if(d>s[0].length)throw new Error("Invalid offset beyond length");if(u>=d)for(s.push(s[0].slice(-d)),u-=d;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-d,-d+u))}}var f=Gf(s);if(f.length!=a)throw new Error("Unexpected length: ".concat(f.length," != ").concat(a));return f}function Uo(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(ise(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Gf(t)}function Fm(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Ca(a),l=i.length;t.push(i),a<=60?(l++,t.push(new Uint8Array([a-1<<2]))):a<=256?(l+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(l+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(l+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(l+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),l+=a,s[0]=0,s[1]=l&255,s[2]=l>>8&255,s[3]=l>>16&255,r+=a}return Gf(t)}function lse(e,t,r,a){var s=ph(e),i=s.getUint32(4,!0),l=(a>1?12:8)+TE(i&(a>1?3470:398))*4,o=-1,d=-1,u=NaN,f=new Date(2001,0,1);i&512&&(o=s.getUint32(l,!0),l+=4),l+=TE(i&(a>1?12288:4096))*4,i&16&&(d=s.getUint32(l,!0),l+=4),i&32&&(u=s.getFloat64(l,!0),l+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(l,!0)*1e3),l+=8);var m;switch(e[2]){case 0:break;case 2:m={t:"n",v:u};break;case 3:m={t:"s",v:t[d]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:r[o]};else if(d>-1)m={t:"s",v:t[d]};else if(!isNaN(u))m={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return m}function ose(e,t,r){var a=ph(e),s=a.getUint32(8,!0),i=12,l=-1,o=-1,d=NaN,u=NaN,f=new Date(2001,0,1);s&1&&(d=nse(e,i),i+=16),s&2&&(u=a.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=a.getUint32(i,!0),i+=4),s&16&&(l=a.getUint32(i,!0),i+=4);var m;switch(e[1]){case 0:break;case 2:m={t:"n",v:d};break;case 3:m={t:"s",v:t[o]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(l>-1)m={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:m={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return m}function b5(e,t){var r=new Uint8Array(32),a=ph(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,sse(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function w5(e,t){var r=new Uint8Array(32),a=ph(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function cse(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return lse(e,t,r,e[0]);case 5:return ose(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ei(e){var t=ha(e);return Tg(t[1][0].data)}function DE(e,t){var r=ha(t.data),a=Vn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(l){var o=ha(l.data),d=Vn(o[1][0].data)>>>0;switch(a){case 1:i[d]=GN(o[3][0].data);break;case 8:{var u=e[Ei(o[9][0].data)][0],f=ha(u.data),m=e[Ei(f[1][0].data)][0],g=Vn(m.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var x=ha(m.data);i[d]=x[3].map(function(b){return GN(b.data)}).join("")}break}}),i}function use(e,t){var r,a,s,i,l,o,d,u,f,m,g,x,b,v,y=ha(e),j=Vn(y[1][0].data)>>>0,S=Vn(y[2][0].data)>>>0,N=((a=(r=y[8])==null?void 0:r[0])==null?void 0:a.data)&&Vn(y[8][0].data)>0||!1,C,T;if((i=(s=y[7])==null?void 0:s[0])!=null&&i.data&&t!=0)C=(o=(l=y[7])==null?void 0:l[0])==null?void 0:o.data,T=(u=(d=y[6])==null?void 0:d[0])==null?void 0:u.data;else if((m=(f=y[4])==null?void 0:f[0])!=null&&m.data&&t!=1)C=(x=(g=y[4])==null?void 0:g[0])==null?void 0:x.data,T=(v=(b=y[3])==null?void 0:b[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=N?4:1,D=ph(C),M=[],F=0;F<C.length/2;++F){var H=D.getUint16(F*2,!0);H<65535&&M.push([F,H])}if(M.length!=S)throw"Expected ".concat(S," cells, found ").concat(M.length);var L=[];for(F=0;F<M.length-1;++F)L[M[F][0]]=T.subarray(M[F][1]*P,M[F+1][1]*P);return M.length>=1&&(L[M[M.length-1][0]]=T.subarray(M[M.length-1][1]*P)),{R:j,cells:L}}function dse(e,t){var r,a=ha(t.data),s=(r=a?.[7])!=null&&r[0]?Vn(a[7][0].data)>>>0>0?1:0:-1,i=l3(a[5],function(l){return use(l,s)});return{nrows:Vn(a[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(d,u){if(l[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));l[o.R][u]=d}),l},[])}}function fse(e,t,r){var a,s=ha(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Vn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Vn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Cr(i);var l=ha(s[4][0].data),o=DE(e,e[Ei(l[4][0].data)][0]),d=(a=l[17])!=null&&a[0]?DE(e,e[Ei(l[17][0].data)][0]):[],u=ha(l[3][0].data),f=0;u[1].forEach(function(m){var g=ha(m.data),x=e[Ei(g[2][0].data)][0],b=Vn(x.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var v=dse(e,x);v.data.forEach(function(y,j){y.forEach(function(S,N){var C=hr({r:f+j,c:N}),T=cse(S,o,d);T&&(r[C]=T)})}),f+=v.nrows})}function hse(e,t){var r=ha(t.data),a={"!ref":"A1"},s=e[Ei(r[2][0].data)],i=Vn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return fse(e,s[0],a),a}function mse(e,t){var r,a=ha(t.data),s={name:(r=a[1])!=null&&r[0]?GN(a[1][0].data):"",sheets:[]},i=l3(a[2],Ei);return i.forEach(function(l){e[l].forEach(function(o){var d=Vn(o.meta[1][0].data);d==6e3&&s.sheets.push(hse(e,o))})}),s}function pse(e,t){var r=f3(),a=ha(t.data),s=l3(a[1],Ei);if(s.forEach(function(i){e[i].forEach(function(l){var o=Vn(l.meta[1][0].data);if(o==2){var d=mse(e,l);d.sheets.forEach(function(u,f){h3(r,u,f==0?d.name:d.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function j5(e){var t,r,a,s,i={},l=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var u;try{u=Uo(d.content)}catch(m){return console.log("?? "+d.content.length+" "+(m.message||m))}var f;try{f=zo(u)}catch(m){return console.log("## "+(m.message||m))}f.forEach(function(m){i[m.id]=m.messages,l.push(m.id)})}}),!l.length)throw new Error("File has no messages");var o=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&Vn(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(d){i[d].forEach(function(u){var f=Vn(u.meta[1][0].data)>>>0;if(f==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return pse(i,o)}function xse(e,t,r){var a,s,i,l;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&Vn(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var d=0,u=ph(e[7][0].data),f=0,m=[],g=ph(e[4][0].data),x=0,b=[],v=0;v<t.length;++v){if(t[v]==null){u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535);continue}u.setUint16(v*2,f,!0),g.setUint16(v*2,x,!0);var y,j;switch(typeof t[v]){case"string":y=b5({t:"s",v:t[v]},r),j=w5({t:"s",v:t[v]},r);break;case"number":y=b5({t:"n",v:t[v]},r),j=w5({t:"n",v:t[v]},r);break;case"boolean":y=b5({t:"b",v:t[v]},r),j=w5({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}m.push(y),f+=y.length,b.push(j),x+=j.length,++d}for(e[2][0].data=Ca(d);v<e[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535,!0);return e[6][0].data=Gf(m),e[3][0].data=Gf(b),d}function gse(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Rl(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Cr(a)));var i=qy(r,{range:a,header:1}),l=["~Sh33tJ5~"];i.forEach(function(I){return I.forEach(function(q){typeof q=="string"&&l.push(q)})});var o={},d=[],u=sr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(I,q){return[I,u.FullPaths[q]]}).forEach(function(I){var q=I[0],K=I[1];if(q.type==2&&q.name.match(/\.iwa/)){var te=q.content,J=Uo(te),Q=zo(J);Q.forEach(function(ne){d.push(ne.id),o[ne.id]={deps:[],location:K,type:Vn(ne.messages[0].meta[1][0].data)}})}}),d.sort(function(I,q){return I-q});var f=d.filter(function(I){return I>1}).map(function(I){return[I,Ca(I)]});u.FileIndex.map(function(I,q){return[I,u.FullPaths[q]]}).forEach(function(I){var q=I[0];if(I[1],!!q.name.match(/\.iwa/)){var K=zo(Uo(q.content));K.forEach(function(te){te.messages.forEach(function(J){f.forEach(function(Q){te.messages.some(function(ne){return Vn(ne.meta[1][0].data)!=11006&&ase(ne.data,Q[1])})&&o[Q[0]].deps.push(te.id)})})})}});for(var m=sr.find(u,o[1].location),g=zo(Uo(m.content)),x,b=0;b<g.length;++b){var v=g[b];v.id==1&&(x=v)}var y=Ei(ha(x.messages[0].data)[1][0].data);for(m=sr.find(u,o[y].location),g=zo(Uo(m.content)),b=0;b<g.length;++b)v=g[b],v.id==y&&(x=v);for(y=Ei(ha(x.messages[0].data)[2][0].data),m=sr.find(u,o[y].location),g=zo(Uo(m.content)),b=0;b<g.length;++b)v=g[b],v.id==y&&(x=v);for(y=Ei(ha(x.messages[0].data)[2][0].data),m=sr.find(u,o[y].location),g=zo(Uo(m.content)),b=0;b<g.length;++b)v=g[b],v.id==y&&(x=v);var j=ha(x.messages[0].data);{j[6][0].data=Ca(a.e.r+1),j[7][0].data=Ca(a.e.c+1);var S=Ei(j[46][0].data),N=sr.find(u,o[S].location),C=zo(Uo(N.content));{for(var T=0;T<C.length&&C[T].id!=S;++T);if(C[T].id!=S)throw"Bad ColumnRowUIDMapArchive";var P=ha(C[T].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var D=0;D<=a.e.c;++D){var M=[];M[1]=M[2]=[{type:0,data:Ca(D+420690)}],P[1].push({type:2,data:ci(M)}),P[2].push({type:0,data:Ca(D)}),P[3].push({type:0,data:Ca(D)})}P[4]=[],P[5]=[],P[6]=[];for(var F=0;F<=a.e.r;++F)M=[],M[1]=M[2]=[{type:0,data:Ca(F+726270)}],P[4].push({type:2,data:ci(M)}),P[5].push({type:0,data:Ca(F)}),P[6].push({type:0,data:Ca(F)});C[T].messages[0].data=ci(P)}N.content=Fm(Om(C)),N.size=N.content.length,delete j[46];var H=ha(j[4][0].data);{H[7][0].data=Ca(a.e.r+1);var L=ha(H[1][0].data),z=Ei(L[2][0].data);N=sr.find(u,o[z].location),C=zo(Uo(N.content));{if(C[0].id!=z)throw"Bad HeaderStorageBucket";var V=ha(C[0].messages[0].data);for(F=0;F<i.length;++F){var G=ha(V[2][0].data);G[1][0].data=Ca(F),G[4][0].data=Ca(i[F].length),V[2][F]={type:V[2][0].type,data:ci(G)}}C[0].messages[0].data=ci(V)}N.content=Fm(Om(C)),N.size=N.content.length;var ie=Ei(H[2][0].data);N=sr.find(u,o[ie].location),C=zo(Uo(N.content));{if(C[0].id!=ie)throw"Bad HeaderStorageBucket";for(V=ha(C[0].messages[0].data),D=0;D<=a.e.c;++D)G=ha(V[2][0].data),G[1][0].data=Ca(D),G[4][0].data=Ca(a.e.r+1),V[2][D]={type:V[2][0].type,data:ci(G)};C[0].messages[0].data=ci(V)}N.content=Fm(Om(C)),N.size=N.content.length;var Z=Ei(H[4][0].data);(function(){for(var I=sr.find(u,o[Z].location),q=zo(Uo(I.content)),K,te=0;te<q.length;++te){var J=q[te];J.id==Z&&(K=J)}var Q=ha(K.messages[0].data);{Q[3]=[];var ne=[];l.forEach(function(ee,Je){ne[1]=[{type:0,data:Ca(Je)}],ne[2]=[{type:0,data:Ca(1)}],ne[3]=[{type:2,data:rse(ee)}],Q[3].push({type:2,data:ci(ne)})})}K.messages[0].data=ci(Q);var ye=Om(q),De=Fm(ye);I.content=De,I.size=I.content.length})();var X=ha(H[3][0].data);{var he=X[1][0];delete X[2];var ce=ha(he.data);{var ke=Ei(ce[2][0].data);(function(){for(var I=sr.find(u,o[ke].location),q=zo(Uo(I.content)),K,te=0;te<q.length;++te){var J=q[te];J.id==ke&&(K=J)}var Q=ha(K.messages[0].data);{delete Q[6],delete X[7];var ne=new Uint8Array(Q[5][0].data);Q[5]=[];for(var ye=0,De=0;De<=a.e.r;++De){var ee=ha(ne);ye+=xse(ee,i[De],l),ee[1][0].data=Ca(De),Q[5].push({data:ci(ee),type:2})}Q[1]=[{type:0,data:Ca(a.e.c+1)}],Q[2]=[{type:0,data:Ca(a.e.r+1)}],Q[3]=[{type:0,data:Ca(ye)}],Q[4]=[{type:0,data:Ca(a.e.r+1)}]}K.messages[0].data=ci(Q);var Je=Om(q),Oe=Fm(Je);I.content=Oe,I.size=I.content.length})()}he.data=ci(ce)}H[3][0].data=ci(X)}j[4][0].data=ci(H)}x.messages[0].data=ci(j);var se=Om(g),R=Fm(se);return m.content=R,m.size=m.content.length,u}function tL(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function o3(e){tL([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function c3(e){tL([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function vse(e){return qr.WS.indexOf(e)>-1?"sheet":e==qr.CS?"chart":e==qr.DS?"dialog":e==qr.MS?"macro":e&&e.length?e:"sheet"}function yse(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,vse(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function bse(e,t,r,a,s,i,l,o,d,u,f,m){try{i[a]=ag(io(e,r,!0),t);var g=hs(e,t),x;switch(o){case"sheet":x=qae(g,t,s,d,i[a],u,f,m);break;case"chart":if(x=$ae(g,t,s,d,i[a],u,f,m),!x||!x["!drawel"])break;var b=Kx(x["!drawel"].Target,t),v=_g(b),y=EJ(io(e,b,!0),ag(io(e,v,!0),b)),j=Kx(y,b),S=_g(j);x=xae(io(e,j,!0),j,d,ag(io(e,S,!0),j),u,x);break;case"macro":x=Hae(g,t,s,d,i[a],u,f,m);break;case"dialog":x=Vae(g,t,s,d,i[a],u,f,m);break;default:throw new Error("Unrecognized sheet type "+o)}l[a]=x;var N=[];i&&i[a]&&Wn(i[a]).forEach(function(C){var T="";if(i[a][C].Type==qr.CMNT){T=Kx(i[a][C].Target,t);var P=Yae(hs(e,T,!0),T,d);if(!P||!P.length)return;xE(x,P,!1)}i[a][C].Type==qr.TCMNT&&(T=Kx(i[a][C].Target,t),N=N.concat(DJ(hs(e,T,!0),d)))}),N&&N.length&&xE(x,N,!0,d.people||[])}catch(C){if(d.WTF)throw C}}function Mo(e){return e.charAt(0)=="/"?e.slice(1):e}function wse(e,t){if(Op(),t=t||{},o3(t),$o(e,"META-INF/manifest.xml")||$o(e,"objectdata.xml"))return AE(e,t);if($o(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof j5<"u"){if(e.FileIndex)return j5(e);var r=sr.utils.cfb_new();return RC(e).forEach(function(G){Dr(r,G,OG(e,G))}),j5(r)}throw new Error("Unsupported NUMBERS file")}if(!$o(e,"[Content_Types].xml"))throw $o(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):$o(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=RC(e),s=SY(io(e,"[Content_Types].xml")),i=!1,l,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",hs(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!hs(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var d={},u={};if(!t.bookSheets&&!t.bookProps){if(ng=[],s.sst)try{ng=Gae(hs(e,Mo(s.sst)),s.sst,t)}catch(G){if(t.WTF)throw G}t.cellStyles&&s.themes.length&&(d=Kae(io(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Wae(hs(e,Mo(s.style)),s.style,d,t))}s.links.map(function(G){try{var ie=ag(io(e,_g(Mo(G))),G);return Qae(hs(e,Mo(G)),ie,G,t)}catch{}});var f=Uae(hs(e,Mo(s.workbooks[0])),s.workbooks[0],t),m={},g="";s.coreprops.length&&(g=hs(e,Mo(s.coreprops[0]),!0),g&&(m=$P(g)),s.extprops.length!==0&&(g=hs(e,Mo(s.extprops[0]),!0),g&&OY(g,m,t)));var x={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(g=io(e,Mo(s.custprops[0]),!0),g&&(x=PY(g,t)));var b={};if((t.bookSheets||t.bookProps)&&(f.Sheets?l=f.Sheets.map(function(ie){return ie.name}):m.Worksheets&&m.SheetNames.length>0&&(l=m.SheetNames),t.bookProps&&(b.Props=m,b.Custprops=x),t.bookSheets&&typeof l<"u"&&(b.SheetNames=l),t.bookSheets?b.SheetNames:t.bookProps))return b;l={};var v={};t.bookDeps&&s.calcchain&&(v=Xae(hs(e,Mo(s.calcchain)),s.calcchain));var y=0,j={},S,N;{var C=f.Sheets;m.Worksheets=C.length,m.SheetNames=[];for(var T=0;T!=C.length;++T)m.SheetNames[T]=C[T].name}var P=i?"bin":"xml",D=s.workbooks[0].lastIndexOf("/"),M=(s.workbooks[0].slice(0,D+1)+"_rels/"+s.workbooks[0].slice(D+1)+".rels").replace(/^\//,"");$o(e,M)||(M="xl/_rels/workbook."+P+".rels");var F=ag(io(e,M,!0),M.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Zae(hs(e,Mo(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=FJ(hs(e,Mo(s.people[0])),t)),F&&(F=yse(F,f.Sheets));var H=hs(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=m.Worksheets;++y){var L="sheet";if(F&&F[y]?(S="xl/"+F[y][1].replace(/[\/]?xl\//,""),$o(e,S)||(S=F[y][1]),$o(e,S)||(S=M.replace(/_rels\/.*$/,"")+F[y][1]),L=F[y][2]):(S="xl/worksheets/sheet"+(y+1-H)+"."+P,S=S.replace(/sheet0\./,"sheet.")),N=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(m.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var z=!1,V=0;V!=t.sheets.length;++V)typeof t.sheets[V]=="number"&&t.sheets[V]==y&&(z=1),typeof t.sheets[V]=="string"&&t.sheets[V].toLowerCase()==m.SheetNames[y].toLowerCase()&&(z=1);if(!z)continue e}}bse(e,S,N,m.SheetNames[y],y,j,l,L,t,f,d,u)}return b={Directory:s,Workbook:f,Props:m,Custprops:x,Deps:v,Sheets:l,SheetNames:m.SheetNames,Strings:ng,Styles:u,Themes:d,SSF:cn(fr)},t&&t.bookFiles&&(e.files?(b.keys=a,b.files=e.files):(b.keys=[],b.files={},e.FullPaths.forEach(function(G,ie){G=G.replace(/^Root Entry[\/]/,""),b.keys.push(G),b.files[G]=e.FileIndex[ie]}))),t&&t.bookVBA&&(s.vba.length>0?b.vbaraw=hs(e,Mo(s.vba[0]),!0):s.defaults&&s.defaults.bin===UJ&&(b.vbaraw=hs(e,"xl/vbaProject.bin",!0))),b}function jse(e,t){var r=t||{},a="Workbook",s=sr.find(e,a);try{if(a="/!DataSpaces/Version",s=sr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(ZQ(s.content),a="/!DataSpaces/DataSpaceMap",s=sr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=eZ(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=sr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=tZ(s.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=sr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);aZ(s.content)}catch{}if(a="/EncryptionInfo",s=sr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=nZ(s.content);if(a="/EncryptedPackage",s=sr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Nse(e,t){return t.bookType=="ods"?eL(e,t):t.bookType=="numbers"?gse(e,t):t.bookType=="xlsb"?_se(e,t):Sse(e,t)}function _se(e,t){Vm=1024,e&&!e.SSF&&(e.SSF=cn(fr)),e&&e.SSF&&(Op(),Hb(e.SSF),t.revssf=Wb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,sg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=CM.indexOf(t.bookType)>-1,s=G4();c3(t=t||{});var i=P4(),l="",o=0;if(t.cellXfs=[],n0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",Dr(i,l,HP(e.Props,t)),s.coreprops.push(l),Ea(t.rels,2,l,qr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&d.push(e.SheetNames[u]);e.Props.SheetNames=d}for(e.Props.Worksheets=e.Props.SheetNames.length,Dr(i,l,KP(e.Props)),s.extprops.push(l),Ea(t.rels,3,l,qr.EXT_PROPS),e.Custprops!==e.Props&&Wn(e.Custprops||{}).length>0&&(l="docProps/custom.xml",Dr(i,l,GP(e.Custprops)),s.custprops.push(l),Ea(t.rels,4,l,qr.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},m=e.Sheets[e.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Dr(i,l,ene(o-1,l,t,e,f)),s.sheets.push(l),Ea(t.wbrels,-1,"worksheets/sheet"+o+"."+r,qr.WS[0])}if(m){var x=m["!comments"],b=!1,v="";x&&x.length>0&&(v="xl/comments"+o+"."+r,Dr(i,v,ane(x,v)),s.comments.push(v),Ea(f,-1,"../comments"+o+"."+r,qr.CMNT),b=!0),m["!legacy"]&&b&&Dr(i,"xl/drawings/vmlDrawing"+o+".vml",kM(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&Dr(i,_g(l),Jm(f))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,Dr(i,l,rne(t.Strings,l,t)),s.strs.push(l),Ea(t.wbrels,-1,"sharedStrings."+r,qr.SST)),l="xl/workbook."+r,Dr(i,l,Jae(e,l)),s.workbooks.push(l),Ea(t.rels,1,l,qr.WB),l="xl/theme/theme1.xml",Dr(i,l,e3(e.Themes,t)),s.themes.push(l),Ea(t.wbrels,-1,"theme/theme1.xml",qr.THEME),l="xl/styles."+r,Dr(i,l,tne(e,l,t)),s.styles.push(l),Ea(t.wbrels,-1,"styles."+r,qr.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",Dr(i,l,e.vbaraw),s.vba.push(l),Ea(t.wbrels,-1,"vbaProject.bin",qr.VBA)),l="xl/metadata."+r,Dr(i,l,nne(l)),s.metadata.push(l),Ea(t.wbrels,-1,"metadata."+r,qr.XLMETA),Dr(i,"[Content_Types].xml",UP(s,t)),Dr(i,"_rels/.rels",Jm(t.rels)),Dr(i,"xl/_rels/workbook."+r+".rels",Jm(t.wbrels)),delete t.revssf,delete t.ssf,i}function Sse(e,t){Vm=1024,e&&!e.SSF&&(e.SSF=cn(fr)),e&&e.SSF&&(Op(),Hb(e.SSF),t.revssf=Wb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,sg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=CM.indexOf(t.bookType)>-1,s=G4();c3(t=t||{});var i=P4(),l="",o=0;if(t.cellXfs=[],n0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",Dr(i,l,HP(e.Props,t)),s.coreprops.push(l),Ea(t.rels,2,l,qr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&d.push(e.SheetNames[u]);e.Props.SheetNames=d}e.Props.Worksheets=e.Props.SheetNames.length,Dr(i,l,KP(e.Props)),s.extprops.push(l),Ea(t.rels,3,l,qr.EXT_PROPS),e.Custprops!==e.Props&&Wn(e.Custprops||{}).length>0&&(l="docProps/custom.xml",Dr(i,l,GP(e.Custprops)),s.custprops.push(l),Ea(t.rels,4,l,qr.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var m={"!id":{}},g=e.Sheets[e.SheetNames[o-1]],x=(g||{})["!type"]||"sheet";switch(x){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Dr(i,l,BM(o-1,t,e,m)),s.sheets.push(l),Ea(t.wbrels,-1,"worksheets/sheet"+o+"."+r,qr.WS[0])}if(g){var b=g["!comments"],v=!1,y="";if(b&&b.length>0){var j=!1;b.forEach(function(S){S[1].forEach(function(N){N.T==!0&&(j=!0)})}),j&&(y="xl/threadedComments/threadedComment"+o+"."+r,Dr(i,y,OJ(b,f,t)),s.threadedcomments.push(y),Ea(m,-1,"../threadedComments/threadedComment"+o+"."+r,qr.TCMNT)),y="xl/comments"+o+"."+r,Dr(i,y,AM(b)),s.comments.push(y),Ea(m,-1,"../comments"+o+"."+r,qr.CMNT),v=!0}g["!legacy"]&&v&&Dr(i,"xl/drawings/vmlDrawing"+o+".vml",kM(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}m["!id"].rId1&&Dr(i,_g(l),Jm(m))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,Dr(i,l,mM(t.Strings,t)),s.strs.push(l),Ea(t.wbrels,-1,"sharedStrings."+r,qr.SST)),l="xl/workbook."+r,Dr(i,l,HM(e)),s.workbooks.push(l),Ea(t.rels,1,l,qr.WB),l="xl/theme/theme1.xml",Dr(i,l,e3(e.Themes,t)),s.themes.push(l),Ea(t.wbrels,-1,"theme/theme1.xml",qr.THEME),l="xl/styles."+r,Dr(i,l,jM(e,t)),s.styles.push(l),Ea(t.wbrels,-1,"styles."+r,qr.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",Dr(i,l,e.vbaraw),s.vba.push(l),Ea(t.wbrels,-1,"vbaProject.bin",qr.VBA)),l="xl/metadata."+r,Dr(i,l,SM()),s.metadata.push(l),Ea(t.wbrels,-1,"metadata."+r,qr.XLMETA),f.length>1&&(l="xl/persons/person.xml",Dr(i,l,PJ(f)),s.people.push(l),Ea(t.wbrels,-1,"persons/person.xml",qr.PEOPLE)),Dr(i,"[Content_Types].xml",UP(s,t)),Dr(i,"_rels/.rels",Jm(t.rels)),Dr(i,"xl/_rels/workbook."+r+".rels",Jm(t.wbrels)),delete t.revssf,delete t.ssf,i}function u3(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=ho(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function kse(e,t){return sr.find(e,"EncryptedPackage")?jse(e,t):GM(e,t)}function Ase(e,t){var r,a=e,s=t||{};return s.type||(s.type=zr&&Buffer.isBuffer(e)?"buffer":"base64"),r=xP(a,s),wse(r,s)}function rL(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return WN(e.slice(r),t);default:break e}return pp.to_workbook(e,t)}function Cse(e,t){var r="",a=u3(e,t);switch(t.type){case"base64":r=ho(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=dh(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=qa(r)),t.type="binary",rL(r,t)}function Ese(e,t){var r=e;return t.type=="base64"&&(r=ho(r)),r=vg.utils.decode(1200,r.slice(2),"str"),t.type="binary",rL(r,t)}function Tse(e){return e.match(/[^\x00-\x7F]/)?ju(e):e}function N5(e,t,r,a){return a?(r.type="string",pp.to_workbook(e,r)):pp.to_workbook(t,r)}function YN(e,t){E4();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return YN(new Uint8Array(e),(r=cn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),tp={},r.dateNF&&(tp.dateNF=r.dateNF),r.type||(r.type=zr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=zr?"buffer":"binary",a=_G(e),typeof Uint8Array<"u"&&!zr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=Tse(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=cn(r),r.type="array",YN(T4(a),r)}switch((s=u3(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return kse(sr.read(a,r),r);break;case 9:if(s[1]<=8)return GM(a,r);break;case 60:return WN(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return MQ(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return fM.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Ase(a,r):N5(e,a,r,i);case 239:return s[3]===60?WN(a,r):N5(e,a,r,i);case 255:if(s[1]===254)return Ese(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return J0.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return J0.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return VN.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return yM.to_workbook(a,r);break;case 10:case 13:case 32:return Cse(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return PQ.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?VN.to_workbook(a,r):N5(e,a,r,i)}function aL(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Qg(t.file,sr.write(e,{type:zr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return sr.write(e,t)}function Dse(e,t){var r=cn(t||{}),a=Nse(e,r);return Ose(a,r)}function Ose(e,t){var r={},a=zr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?sr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array($b(s))}return t.password&&typeof encrypt_agile<"u"?aL(encrypt_agile(s,t.password),t):t.type==="file"?Qg(t.file,s):t.type=="string"?qa(s):s}function Fse(e,t){var r=t||{},a=Tne(e,r);return aL(a,r)}function bu(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return yg(ju(a));case"binary":return ju(a);case"string":return e;case"file":return Qg(t.file,a,"utf8");case"buffer":return zr?Bd(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):bu(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Pse(e,t){switch(t.type){case"base64":return yg(e);case"binary":return e;case"string":return e;case"file":return Qg(t.file,e,"binary");case"buffer":return zr?Bd(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function L1(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?yg(r):t.type=="string"?qa(r):r;case"file":return Qg(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function nL(e,t){E4(),kae(e);var r=cn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=nL(e,r);return r.type="array",$b(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return bu(Nne(e,r),r);case"slk":case"sylk":return bu(dM.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return bu(XM(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Pse(sL(e.Sheets[e.SheetNames[s]],r),r);case"csv":return bu(d3(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return bu(fM.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return L1(VN.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return bu(pp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return bu(yM.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return bu(hM.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return bu(eL(e,r),r);case"wk1":return L1(J0.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return L1(J0.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),L1(YM(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Fse(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Dse(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Mse(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Lse(e,t,r){var a={};return a.type="file",a.file=t,Mse(a),nL(e,a)}function Rse(e,t,r,a,s,i,l,o){var d=ss(r),u=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),m=!0,g=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!l||e[r])for(var x=t.s.c;x<=t.e.c;++x){var b=l?e[r][x]:e[a[x]+d];if(b===void 0||b.t===void 0){if(u===void 0)continue;i[x]!=null&&(g[i[x]]=u);continue}var v=b.v;switch(b.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(i[x]!=null){if(v==null)if(b.t=="e"&&v===null)g[i[x]]=null;else if(u!==void 0)g[i[x]]=u;else if(f&&v===null)g[i[x]]=null;else continue;else g[i[x]]=f&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?v:Dd(b,v,o);v!=null&&(m=!1)}}return{row:g,isempty:m}}function qy(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],l=0,o="",d={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof f){case"string":d=ua(f);break;case"number":d=ua(e["!ref"]),d.s.r=f;break;default:d=f}a>0&&(s=0);var m=ss(d.s.r),g=[],x=[],b=0,v=0,y=Array.isArray(e),j=d.s.r,S=0,N={};y&&!e[j]&&(e[j]=[]);var C=u.skipHidden&&e["!cols"]||[],T=u.skipHidden&&e["!rows"]||[];for(S=d.s.c;S<=d.e.c;++S)if(!(C[S]||{}).hidden)switch(g[S]=Dn(S),r=y?e[j][S]:e[g[S]+m],a){case 1:i[S]=S-d.s.c;break;case 2:i[S]=g[S];break;case 3:i[S]=u.header[S-d.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Dd(r,null,u),v=N[l]||0,!v)N[l]=1;else{do o=l+"_"+v++;while(N[o]);N[l]=v,N[o]=1}i[S]=o}for(j=d.s.r+s;j<=d.e.r;++j)if(!(T[j]||{}).hidden){var P=Rse(e,d,j,g,a,i,y,u);(P.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(x[b++]=P.row)}return x.length=b,x}var OE=/"/g;function Ise(e,t,r,a,s,i,l,o){for(var d=!0,u=[],f="",m=ss(r),g=t.s.c;g<=t.e.c;++g)if(a[g]){var x=o.dense?(e[r]||[])[g]:e[a[g]+m];if(x==null)f="";else if(x.v!=null){d=!1,f=""+(o.rawNumbers&&x.t=="n"?x.v:Dd(x,null,o));for(var b=0,v=0;b!==f.length;++b)if((v=f.charCodeAt(b))===s||v===i||v===34||o.forceQuotes){f='"'+f.replace(OE,'""')+'"';break}f=="ID"&&(f='"ID"')}else x.f!=null&&!x.F?(d=!1,f="="+x.f,f.indexOf(",")>=0&&(f='"'+f.replace(OE,'""')+'"')):f="";u.push(f)}return o.blankrows===!1&&d?null:u.join(l)}function d3(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=ua(e["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),o=a.RS!==void 0?a.RS:`
`,d=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),f="",m=[];a.dense=Array.isArray(e);for(var g=a.skipHidden&&e["!cols"]||[],x=a.skipHidden&&e["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(g[b]||{}).hidden||(m[b]=Dn(b));for(var v=0,y=s.s.r;y<=s.e.r;++y)(x[y]||{}).hidden||(f=Ise(e,s,y,m,l,d,i,a),f!=null&&(a.strip&&(f=f.replace(u,"")),(f||a.blankrows!==!1)&&r.push((v++?o:"")+f)));return delete a.dense,r.join("")}function sL(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=d3(e,t);return r}function Bse(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=ua(e["!ref"]),i="",l=[],o,d=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)l[o]=Dn(o);for(var f=s.s.r;f<=s.e.r;++f)for(i=ss(f),o=s.s.c;o<=s.e.c;++o)if(t=l[o]+i,r=u?(e[f]||[])[o]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}d[d.length]=t+"="+a}return d}function iL(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},l=0,o=0;if(i&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var d=typeof a.origin=="string"?On(a.origin):a.origin;l=d.r,o=d.c}var u,f={s:{c:0,r:0},e:{c:o,r:l+t.length-1+s}};if(i["!ref"]){var m=ua(i["!ref"]);f.e.c=Math.max(f.e.c,m.e.c),f.e.r=Math.max(f.e.r,m.e.r),l==-1&&(l=m.e.r+1,f.e.r=l+t.length-1+s)}else l==-1&&(l=0,f.e.r=t.length-1+s);var g=a.header||[],x=0;t.forEach(function(v,y){Wn(v).forEach(function(j){(x=g.indexOf(j))==-1&&(g[x=g.length]=j);var S=v[j],N="z",C="",T=hr({c:o+x,r:l+y+s});u=Dg(i,T),S&&typeof S=="object"&&!(S instanceof Date)?i[T]=S:(typeof S=="number"?N="n":typeof S=="boolean"?N="b":typeof S=="string"?N="s":S instanceof Date?(N="d",a.cellDates||(N="n",S=Fs(S)),C=a.dateNF||fr[14]):S===null&&a.nullError&&(N="e",S=0),u?(u.t=N,u.v=S,delete u.w,delete u.R,C&&(u.z=C)):i[T]=u={t:N,v:S},C&&(u.z=C))})}),f.e.c=Math.max(f.e.c,o+g.length-1);var b=ss(l);if(s)for(x=0;x<g.length;++x)i[Dn(x+o)+b]={t:"s",v:g[x]};return i["!ref"]=Cr(f),i}function zse(e,t){return iL(null,e,t)}function Dg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=On(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Dg(e,hr(t)):Dg(e,hr({r:t,c:r||0}))}function Use(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function f3(){return{SheetNames:[],Sheets:{}}}function h3(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var l=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=l+s)!=-1;++s);}if($M(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function qse(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=Use(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function $se(e,t){return e.z=t,e}function lL(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Hse(e,t,r){return lL(e,"#"+t,r)}function Vse(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Wse(e,t,r,a){for(var s=typeof t!="string"?t:ua(t),i=typeof t=="string"?t:Cr(t),l=s.s.r;l<=s.e.r;++l)for(var o=s.s.c;o<=s.e.c;++o){var d=Dg(e,l,o);d.t="n",d.F=i,delete d.v,l==s.s.r&&o==s.s.c&&(d.f=r,a&&(d.D=!0))}return e}var R1={encode_col:Dn,encode_row:ss,encode_cell:hr,encode_range:Cr,decode_col:q4,decode_row:U4,split_cell:rY,decode_cell:On,decode_range:Rl,format_cell:Dd,sheet_add_aoa:PP,sheet_add_json:iL,sheet_add_dom:QM,aoa_to_sheet:Fp,json_to_sheet:zse,table_to_sheet:ZM,table_to_book:Zne,sheet_to_csv:d3,sheet_to_txt:sL,sheet_to_json:qy,sheet_to_html:XM,sheet_to_formulae:Bse,sheet_to_row_object_array:qy,sheet_get_cell:Dg,book_new:f3,book_append_sheet:h3,book_set_sheet_visibility:qse,cell_set_number_format:$se,cell_set_hyperlink:lL,cell_set_internal_link:Hse,cell_add_comment:Vse,sheet_set_array_formula:Wse,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Uc={async getAll(){return Ce.get("/cities")},async getById(e){try{return await Ce.get(`/cities/${e}`)}catch(t){if(t instanceof Error&&"status"in t&&t.status===404)return null;throw t}},async getBySegment(e){return Ce.get(`/cities/by-segment/${e}`)},async create(e,t){return Ce.post("/cities",{id:e,...t})},async update(e){const{id:t,...r}=e;return Ce.put(`/cities/${t}`,r)},async delete(e){return Ce.delete(`/cities/${e}`)}},oi=[];for(let e=0;e<256;++e)oi.push((e+256).toString(16).slice(1));function Kse(e,t=0){return(oi[e[t+0]]+oi[e[t+1]]+oi[e[t+2]]+oi[e[t+3]]+"-"+oi[e[t+4]]+oi[e[t+5]]+"-"+oi[e[t+6]]+oi[e[t+7]]+"-"+oi[e[t+8]]+oi[e[t+9]]+"-"+oi[e[t+10]]+oi[e[t+11]]+oi[e[t+12]]+oi[e[t+13]]+oi[e[t+14]]+oi[e[t+15]]).toLowerCase()}let _5;const Gse=new Uint8Array(16);function Yse(){if(!_5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_5=crypto.getRandomValues.bind(crypto)}return _5(Gse)}const Xse=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),FE={randomUUID:Xse};function Qse(e,t,r){e=e||{};const a=e.random??e.rng?.()??Yse();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Kse(a)}function s0(e,t,r){return FE.randomUUID&&!e?FE.randomUUID():Qse(e)}const sv=()=>Ft({queryKey:["cities"],queryFn:()=>Uc.getAll()}),Zse=e=>Ft({queryKey:["cities",e],queryFn:()=>Uc.getById(e),enabled:!!e}),Jse=()=>{const e=Tt();return St({mutationFn:async t=>{const r=s0();return Uc.create(r,t)},onSuccess:()=>{e.invalidateQueries({queryKey:["cities"]})}})},eie=()=>{const e=Tt();return St({mutationFn:t=>Uc.update(t),onSuccess:()=>{e.invalidateQueries({queryKey:["cities"]})}})},tie=()=>{const e=Tt();return St({mutationFn:t=>Uc.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["cities"]})}})},rie=()=>{const e=Tt();return St({mutationFn:async t=>{const r={success:0,errors:[]},a=await Uc.getAll();for(let s=0;s<t.length;s++){const i=t[s];try{if(!i.name||!i.code||!i.segment_id){r.errors.push({row:s+2,error:"Donnes manquantes (nom, code ou segment)",data:i});continue}if(a.find(d=>d.name.trim()===i.name.trim()&&d.segment_id===i.segment_id)){r.errors.push({row:s+2,error:`Une ville avec le nom "${i.name}" existe dj dans ce segment`,data:i});continue}const o=s0();await Uc.create(o,{name:i.name.trim(),code:i.code.trim(),segment_id:i.segment_id}),r.success++}catch(l){r.errors.push({row:s+2,error:l instanceof Error?l.message:"Erreur inconnue",data:i})}}return r},onSuccess:()=>{e.invalidateQueries({queryKey:["cities"]})}})};function aie({segmentId:e,segmentName:t,onClose:r}){const[a,s]=k.useState(null),[i,l]=k.useState(!1),[o,d]=k.useState(null),u=k.useRef(null),f=rie(),m=b=>{b.target.files&&b.target.files[0]&&(s(b.target.files[0]),d(null))},g=async()=>{if(a){l(!0),d(null);try{const b=await a.arrayBuffer(),v=YN(b),y=v.Sheets[v.SheetNames[0]],S=R1.sheet_to_json(y).map(C=>({name:C.Ville?.toString().trim()||"",code:C.code?.toString().trim().toUpperCase()||"",segment_id:e})),N=await f.mutateAsync(S);d(N)}catch(b){console.error("Erreur lors de l'import:",b),alert("Erreur lors de la lecture du fichier Excel")}finally{l(!1)}}},x=()=>{const b=[{Ville:"Casablanca",code:"A1P07"},{Ville:"Rabat",code:"A1P01"},{Ville:"Tanger",code:"A1P05"}],v=R1.json_to_sheet(b),y=R1.book_new();R1.book_append_sheet(y,v,"Villes"),v["!cols"]=[{wch:25},{wch:15}],Lse(y,"template_import_villes.xlsx")};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(up,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Import en masse"}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Importer des villes pour : ",n.jsx("strong",{children:t})]})]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Format du fichier Excel"}),n.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Le fichier doit contenir seulement 2 colonnes :"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Ville"})," : Nom de la ville (Ex: Casablanca)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"code"})," : Code de la ville (Ex: A1P07)"]})]}),n.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[" Toutes les villes seront automatiquement associes au segment : ",n.jsx("strong",{children:t})]})]}),n.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[n.jsx(ps,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-blue-600 font-medium",children:"Tlcharger le fichier template"})]}),n.jsxs("div",{children:[n.jsx("input",{ref:u,type:"file",accept:".xlsx,.xls",onChange:m,className:"hidden"}),n.jsxs("button",{onClick:()=>u.current?.click(),className:"w-full flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[n.jsx(zc,{className:"w-8 h-8 text-green-600"}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-green-600 font-medium",children:a?a.name:"Cliquez pour slectionner un fichier Excel"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Formats accepts : .xlsx, .xls"})]})]})]}),o&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsx(Xr,{className:"w-5 h-5 text-green-600"}),n.jsxs("span",{className:"text-green-800 font-medium",children:[o.success," ville(s) importe(s) avec succs"]})]}),o.errors.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-600"}),n.jsxs("span",{className:"text-red-800 font-medium",children:[o.errors.length," erreur(s) dtecte(s)"]})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:o.errors.map((b,v)=>n.jsxs("div",{className:"p-3 bg-white border border-red-200 rounded-lg text-sm",children:[n.jsxs("p",{className:"font-medium text-red-800",children:["Ligne ",b.row]}),n.jsx("p",{className:"text-red-600",children:b.error}),n.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:["Ville: ",b.data.name||"N/A"," | Code: ",b.data.code||"N/A"]})]},v))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:o?"Fermer":"Annuler"}),!o&&n.jsx("button",{onClick:g,disabled:!a||i,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Import en cours...":"Importer"})]})]})]})})}const i0={async getAll(){return Ce.get("/segments")},async getById(e){try{return await Ce.get(`/segments/${e}`)}catch(t){if(t instanceof Error&&"status"in t&&t.status===404)return null;throw t}},async create(e,t){return Ce.post("/segments",{id:e,...t})},async update(e){const{id:t,...r}=e;return Ce.put(`/segments/${t}`,r)},async delete(e){return Ce.delete(`/segments/${e}`)}},qd=()=>Ft({queryKey:["segments"],queryFn:()=>i0.getAll()}),nie=()=>{const e=Tt();return St({mutationFn:async t=>{const r=s0();return i0.create(r,t)},onSuccess:()=>{e.invalidateQueries({queryKey:["segments"]})}})},sie=()=>{const e=Tt();return St({mutationFn:t=>i0.update(t),onSuccess:()=>{e.invalidateQueries({queryKey:["segments"]})}})},iie=()=>{const e=Tt();return St({mutationFn:t=>i0.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["segments"]})}})};function Mp(){const{user:e,permissions:t}=jn(),r=k.useCallback(g=>e?.role==="admin"||t.includes("*")?!0:t.includes(g),[e,t]),a=k.useCallback((...g)=>e?.role==="admin"||t.includes("*")?!0:g.some(x=>t.includes(x)),[e,t]),s=k.useCallback((...g)=>e?.role==="admin"||t.includes("*")?!0:g.every(x=>t.includes(x)),[e,t]),i=k.useCallback((g,x)=>{const b=`${g}.${x}.view_page`;return r(b)},[r]),l=k.useCallback((g,x,b)=>{const v=`${g}.${x}.${b}`;return r(v)},[r]),o=k.useMemo(()=>e?.role==="admin"||t.includes("*")?["*"]:t.filter(g=>g.endsWith(".view_page")),[e,t]),d=k.useCallback(g=>e?.role==="admin"||t.includes("*")?!0:t.some(x=>x.startsWith(`${g}.`)&&x.endsWith(".view_page")),[e,t]),u=k.useMemo(()=>({canViewDashboard:r("accounting.dashboard.view_page"),canViewSegments:r("accounting.segments.view_page"),canCreateSegment:r("accounting.segments.create"),canUpdateSegment:r("accounting.segments.update"),canDeleteSegment:r("accounting.segments.delete"),canImportCities:r("accounting.segments.import_cities"),canViewCities:r("accounting.cities.view_page"),canCreateCity:r("accounting.cities.create"),canUpdateCity:r("accounting.cities.update"),canDeleteCity:r("accounting.cities.delete"),canBulkDeleteCities:r("accounting.cities.bulk_delete"),canViewUsers:r("accounting.users.view_page"),canCreateUser:r("accounting.users.create"),canUpdateUser:r("accounting.users.update"),canDeleteUser:r("accounting.users.delete"),canAssignSegments:r("accounting.users.assign_segments"),canAssignCities:r("accounting.users.assign_cities"),canAssignRoles:r("accounting.users.assign_roles"),canViewRoles:r("accounting.roles.view_page"),canCreateRole:r("accounting.roles.create"),canUpdateRole:r("accounting.roles.update"),canDeleteRole:r("accounting.roles.delete"),canViewSheets:r("accounting.calculation_sheets.view_page"),canCreateSheet:r("accounting.calculation_sheets.create"),canUpdateSheet:r("accounting.calculation_sheets.update"),canDeleteSheet:r("accounting.calculation_sheets.delete"),canPublishSheet:r("accounting.calculation_sheets.publish"),canDuplicateSheet:r("accounting.calculation_sheets.duplicate"),canExportSheet:r("accounting.calculation_sheets.export"),canManageSheetSettings:r("accounting.calculation_sheets.settings"),canAccessCreateDeclaration:r("accounting.create_declaration.view_page"),canViewDeclarations:r("accounting.declarations.view_page"),canViewAllDeclarations:r("accounting.declarations.view_all"),canCreateDeclarationForOther:r("accounting.declarations.create"),canUpdateDeclaration:r("accounting.declarations.update"),canDeleteDeclaration:r("accounting.declarations.delete"),canApproveDeclaration:r("accounting.declarations.approve"),canRejectDeclaration:r("accounting.declarations.reject"),canRequestModification:r("accounting.declarations.request_modification")}),[r]),f=k.useMemo(()=>({canViewEmployees:r("hr.employees.view_page"),canCreateEmployee:r("hr.employees.create"),canUpdateEmployee:r("hr.employees.update"),canDeleteEmployee:r("hr.employees.delete"),canViewContracts:r("hr.employees.view_contracts"),canManageDocuments:r("hr.employees.manage_documents"),canViewDisciplinary:r("hr.employees.view_disciplinary"),canManageDisciplinary:r("hr.employees.manage_disciplinary"),canViewAttendance:r("hr.attendance.view_page"),canRecordAttendance:r("hr.attendance.record"),canCorrectAttendance:r("hr.attendance.correct"),canValidateAttendance:r("hr.attendance.validate"),canExportAttendance:r("hr.attendance.export"),canRequestOvertime:r("hr.overtime.request"),canApproveOvertime:r("hr.overtime.approve"),canValidateOvertimePayroll:r("hr.overtime.validate_payroll"),canViewOvertimeReports:r("hr.overtime.view_reports"),canViewLeaves:r("hr.leaves.view_page"),canRequestLeave:r("hr.leaves.request"),canApproveLeave:r("hr.leaves.approve"),canManageBalances:r("hr.leaves.manage_balances"),canViewCalendar:r("hr.leaves.view_calendar"),canManageHolidays:r("hr.leaves.manage_holidays"),canExportLeaves:r("hr.leaves.export"),canViewHRDashboard:r("hr.dashboard.view_page"),canViewMonthlyReports:r("hr.dashboard.view_monthly_reports"),canGeneratePayrollSummary:r("hr.dashboard.generate_payroll_summary"),canExportPayroll:r("hr.dashboard.export_payroll"),canViewAlerts:r("hr.dashboard.view_alerts"),canViewSettings:r("hr.settings.view_page"),canUpdateSettings:r("hr.settings.update"),canManageLeaveTypes:r("hr.settings.manage_leave_types"),canManageSchedules:r("hr.settings.manage_schedules")}),[r]),m=k.useMemo(()=>({canViewFormations:r("training.formations.view_page"),canCreateFormation:r("training.formations.create"),canUpdateFormation:r("training.formations.update"),canDeleteFormation:r("training.formations.delete"),canDuplicateFormation:r("training.formations.duplicate"),canCreatePack:r("training.formations.create_pack"),canEditContent:r("training.formations.edit_content"),canCreateCorps:r("training.corps.create"),canUpdateCorps:r("training.corps.update"),canDeleteCorps:r("training.corps.delete"),canViewSessions:r("training.sessions.view_page"),canCreateSession:r("training.sessions.create"),canUpdateSession:r("training.sessions.update"),canDeleteSession:r("training.sessions.delete"),canViewSessionDetails:r("training.sessions.view_details"),canViewAnalytics:r("training.analytics.view_page"),canExportAnalyticsCsv:r("training.analytics.export_csv"),canChangePeriod:r("training.analytics.change_period"),canViewStudentReports:r("training.student_reports.view_page"),canSearchStudents:r("training.student_reports.search"),canExportStudentsCsv:r("training.student_reports.export_csv"),canExportStudentsPdf:r("training.student_reports.export_pdf"),canViewCertificates:r("training.certificates.view_page"),canDownloadCertificate:r("training.certificates.download"),canDeleteCertificate:r("training.certificates.delete"),canSearchCertificates:r("training.certificates.search"),canViewTemplates:r("training.certificate_templates.view_page"),canCreateFolder:r("training.certificate_templates.create_folder"),canCreateTemplate:r("training.certificate_templates.create_template"),canRenameTemplate:r("training.certificate_templates.rename"),canDeleteTemplate:r("training.certificate_templates.delete"),canDuplicateTemplate:r("training.certificate_templates.duplicate"),canEditCanvas:r("training.certificate_templates.edit_canvas"),canOrganizeTemplates:r("training.certificate_templates.organize"),canViewForums:r("training.forums.view_page"),canPinDiscussion:r("training.forums.pin_discussion"),canLockDiscussion:r("training.forums.lock_discussion"),canDeleteForumContent:r("training.forums.delete_content"),canModerate:r("training.forums.moderate")}),[r]);return{can:r,canAny:a,canAll:s,canViewPage:i,canAction:l,canAccessModule:d,viewablePages:o,permissions:t,isAdmin:e?.role==="admin",accounting:u,training:m,hr:f}}function lie(){const{data:e=[],isLoading:t,error:r}=qd(),a=nie(),s=sie(),i=iie(),{accounting:l}=Mp(),[o,d]=k.useState(!1),[u,f]=k.useState(null),[m,g]=k.useState(!1),[x,b]=k.useState(null),[v,y]=k.useState({name:"",color:"#3b82f6"}),j=async P=>{P.preventDefault();try{u?await s.mutateAsync({id:u,name:v.name,color:v.color}):await a.mutateAsync({name:v.name,color:v.color}),C()}catch(D){console.error("Erreur lors de la sauvegarde:",D),alert("Erreur lors de la sauvegarde du segment")}},S=P=>{y({name:P.name,color:P.color}),f(P.id),d(!0)},N=async P=>{if(confirm("tes-vous sr de vouloir supprimer ce segment ?"))try{await i.mutateAsync(P)}catch(D){console.error("Erreur lors de la suppression:",D),alert("Erreur lors de la suppression du segment")}},C=()=>{y({name:"",color:"#3b82f6"}),f(null),d(!1)},T=P=>{b({id:P.id,name:P.name}),g(!0)};return r?n.jsx(Ut,{title:"Gestion des Segments",subtitle:"Grer les segments de formation",children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-red-800",children:["Erreur lors du chargement des segments: ",r.message]})})}):n.jsxs(Ut,{title:"Gestion des Segments",subtitle:"Grer les segments de formation",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:l.canCreateSegment&&n.jsxs(Ye,{onClick:()=>d(!o),className:"w-full sm:w-auto",children:[n.jsx(Jr,{className:"mr-2 h-4 w-4"}),"Nouveau Segment"]})}),o&&n.jsxs(Or,{className:"mb-6",children:[n.jsx(Ic,{children:n.jsxs(Bc,{children:[u?"Modifier":"Nouveau"," Segment"]})}),n.jsx(Fr,{children:n.jsxs("form",{onSubmit:j,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Nom du segment"}),n.jsx(xr,{value:v.name,onChange:P=>y({...v,name:P.target.value}),placeholder:"Ex: Formation Informatique",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Couleur"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xr,{type:"color",value:v.color,onChange:P=>y({...v,color:P.target.value}),className:"w-20"}),n.jsx(xr,{value:v.color,onChange:P=>y({...v,color:P.target.value}),placeholder:"#3b82f6"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsx(Ye,{type:"submit",disabled:a.isPending||s.isPending,className:"w-full sm:w-auto",children:a.isPending||s.isPending?"Enregistrement...":u?"Modifier":"Crer"}),n.jsx(Ye,{type:"button",variant:"outline",onClick:C,className:"w-full sm:w-auto",children:"Annuler"})]})]})})]}),t&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-500",children:"Chargement des segments..."})}),!t&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(P=>n.jsxs(Or,{style:{borderLeft:`4px solid ${P.color}`},children:[n.jsx(Ic,{children:n.jsxs(Bc,{className:"flex items-center justify-between",children:[n.jsx("span",{children:P.name}),n.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:P.color}})]})}),n.jsx(Fr,{children:n.jsxs("div",{className:"flex flex-col gap-2",children:[l.canImportCities&&n.jsxs(Ye,{size:"sm",className:"w-full",onClick:()=>T(P),children:[n.jsx(zc,{className:"h-4 w-4 mr-2"}),"Importer des villes"]}),n.jsxs("div",{className:"flex gap-2",children:[l.canUpdateSegment&&n.jsx(Ye,{size:"sm",variant:"outline",onClick:()=>S(P),children:n.jsx(Mc,{className:"h-4 w-4"})}),l.canDeleteSegment&&n.jsx(Ye,{size:"sm",variant:"destructive",onClick:()=>N(P.id),disabled:i.isPending,children:n.jsx(Pr,{className:"h-4 w-4"})})]})]})})]},P.id))}),!t&&e.length===0&&!o&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-500",children:"Aucun segment cr pour le moment"})})]}),m&&x&&n.jsx(aie,{segmentId:x.id,segmentName:x.name,onClose:()=>{g(!1),b(null)}})]})}function oie({cityId:e,onClose:t}){const[r,a]=k.useState({name:"",code:"",segment_id:""}),{data:s}=Zse(e||""),{data:i=[]}=qd(),l=Jse(),o=eie(),d=!!e;k.useEffect(()=>{s&&a({name:s.name,code:s.code,segment_id:s.segment_id})},[s]);const u=async f=>{if(f.preventDefault(),!r.name.trim()||!r.code.trim()||!r.segment_id){alert("Veuillez remplir tous les champs obligatoires");return}try{d&&e?await o.mutateAsync({id:e,...r}):await l.mutateAsync(r),t()}catch(m){console.error("Erreur lors de la sauvegarde:",m),alert("Erreur lors de la sauvegarde de la ville")}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(ns,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:d?"Modifier la ville":"Nouvelle ville"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:d?"Modifiez les informations":"Ajoutez une nouvelle ville"})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0 ml-2",children:n.jsx(Mr,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),n.jsxs("form",{onSubmit:u,className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de la ville *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",required:!0,value:r.name,onChange:f=>a({...r,name:f.target.value}),placeholder:"Ex: Casablanca",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code de la ville *"}),n.jsxs("div",{className:"relative",children:[n.jsx(zb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",required:!0,value:r.code,onChange:f=>a({...r,code:f.target.value.toUpperCase()}),placeholder:"Ex: CASA",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent uppercase",maxLength:10})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Code court pour identifier la ville (max 10 caractres)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segment de formation *"}),n.jsxs("div",{className:"relative",children:[n.jsx(dp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsxs("select",{required:!0,value:r.segment_id,onChange:f=>a({...r,segment_id:f.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent appearance-none",children:[n.jsx("option",{value:"",children:"Slectionnez un segment"}),i.map(f=>n.jsx("option",{value:f.id,children:f.name},f.id))]})]}),i.length===0&&n.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Aucun segment disponible. Veuillez crer un segment d'abord."})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:l.isPending||o.isPending,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l.isPending||o.isPending?"Enregistrement...":d?"Mettre  jour":"Crer"})]})]})]})})}function cie(){const[e,t]=k.useState(""),[r,a]=k.useState(!1),[s,i]=k.useState(null),[l,o]=k.useState("all"),[d,u]=k.useState([]),{data:f=[],isLoading:m}=sv(),{data:g=[]}=qd(),x=tie(),b=f.filter(T=>{const P=T.name.toLowerCase().includes(e.toLowerCase())||T.code.toLowerCase().includes(e.toLowerCase()),D=l==="all"||T.segment_id===l;return P&&D}),v=T=>{i(T),a(!0)},y=T=>{u(P=>P.includes(T)?P.filter(D=>D!==T):[...P,T])},j=()=>{d.length===b.length&&b.length>0?u([]):u(b.map(T=>T.id))},S=async(T,P)=>{if(window.confirm(`tes-vous sr de vouloir supprimer la ville "${P}" ?`))try{await x.mutateAsync(T)}catch(D){console.error("Erreur lors de la suppression:",D),alert("Erreur lors de la suppression de la ville")}},N=async()=>{if(d.length===0){alert("Veuillez slectionner au moins une ville  supprimer");return}if(window.confirm(`tes-vous sr de vouloir supprimer ${d.length} ville(s) slectionne(s) ?

Cette action est irrversible.`))try{for(const T of d)await x.mutateAsync(T);u([])}catch(T){console.error("Erreur lors de la suppression en masse:",T),alert("Erreur lors de la suppression des villes")}},C=()=>{a(!1),i(null)};return n.jsx(Ut,{title:"Gestion des Villes",subtitle:"Grer les villes et leur affectation",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[n.jsxs("div",{className:"relative flex-1 md:w-80",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Rechercher une ville...",value:e,onChange:T=>t(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),n.jsxs("select",{value:l,onChange:T=>o(T.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"Tous les segments"}),g.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[d.length>0&&n.jsxs("button",{onClick:N,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white px-4 sm:px-6 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[n.jsx(Pr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),n.jsxs("span",{className:"text-sm sm:text-base",children:["Supprimer (",d.length,")"]})]}),n.jsxs("button",{onClick:()=>a(!0),className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white px-4 sm:px-6 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[n.jsx(Jr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Nouvelle Ville"})]})]})]})}),m?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]}):b.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[n.jsx(ns,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 text-lg",children:e||l!=="all"?"Aucune ville trouve":"Aucune ville enregistre"}),n.jsx("p",{className:"text-gray-400 mt-2",children:e||l!=="all"?"Essayez de modifier vos critres de recherche":"Commencez par crer une nouvelle ville"})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left",children:n.jsx("input",{type:"checkbox",checked:d.length===b.length&&b.length>0,onChange:j,className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom de la ville"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de cration"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(T=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:d.includes(T.id),onChange:()=>y(T.id),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:T.code})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(ns,{className:"w-4 h-4 text-green-600 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:T.name})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:T.segment_name||"N/A"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(T.created_at).toLocaleDateString("fr-FR")}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>v(T.id),className:"text-blue-600 hover:text-blue-900 p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifier",children:n.jsx(hp,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S(T.id,T.name),className:"text-red-600 hover:text-red-900 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:n.jsx(Pr,{className:"w-4 h-4"})})]})})]},T.id))})]})}),n.jsx("div",{className:"bg-gray-50 px-6 py-3 border-t border-gray-200",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Affichage de ",b.length," ville(s)",l!=="all"&&" filtre(s)"]})})]}),r&&n.jsx(oie,{cityId:s,onClose:C})]})})}const ol={async getAll(){return Ce.get("/profiles")},async getById(e){try{return await Ce.get(`/profiles/${e}`)}catch(t){if(t instanceof Error&&"status"in t&&t.status===404)return null;throw t}},async create(e){return Ce.post("/profiles",e)},async update(e){const{id:t,...r}=e;return Ce.put(`/profiles/${t}`,r)},async delete(e){return Ce.delete(`/profiles/${e}`)}};function uie(e){return Ft({queryKey:["users",e],queryFn:async()=>{const t=await ol.getAll();return!e||e==="all"?t:t.filter(r=>r.role===e)}})}function die(){const e=Tt();return St({mutationFn:async t=>{const r=s0();return ol.create({id:r,...t})},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})}})}function fie(){const e=Tt();return St({mutationFn:t=>ol.update(t),onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["user"]})}})}function hie(){const e=Tt();return St({mutationFn:t=>ol.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["users"]})}})}function mie(){const e=Tt();return St({mutationFn:async t=>ol.update({id:t.user_id,segment_ids:t.segment_ids}),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["user",r.user_id]}),e.invalidateQueries({queryKey:["users"]})}})}function pie(){const e=Tt();return St({mutationFn:async t=>ol.update({id:t.user_id,city_ids:t.city_ids}),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["user",r.user_id]}),e.invalidateQueries({queryKey:["users"]})}})}function oL(){return Ft({queryKey:["segments"],queryFn:()=>i0.getAll()})}function xie(){return Ft({queryKey:["cities"],queryFn:()=>Uc.getAll()})}function gie(e){return Ft({queryKey:["user",e,"segments"],queryFn:async()=>{const t=await ol.getById(e);return!t||!t.segment_ids?[]:(await i0.getAll()).filter(a=>t.segment_ids?.includes(a.id))},enabled:!!e})}function vie(e){return Ft({queryKey:["user",e,"cities"],queryFn:async()=>{const t=await ol.getById(e);return!t||!t.city_ids?[]:(await Uc.getAll()).filter(a=>t.city_ids?.includes(a.id))},enabled:!!e})}const hd={async getAllRoles(){return Ce.get("/roles")},async getRole(e){return Ce.get(`/roles/${e}`)},async createRole(e){return Ce.post("/roles",e)},async updateRole(e,t){return Ce.put(`/roles/${e}`,t)},async deleteRole(e){return Ce.delete(`/roles/${e}`)},async getAllPermissions(){return Ce.get("/roles/permissions/all")},async assignRoleToUser(e,t){return Ce.put(`/roles/user/${e}/role`,{role_id:t})},async checkMigrationStatus(){return Ce.get("/migration-029/status")},async runMigration(){return Ce.post("/migration-029/run",{})}},yie=()=>{const[e,t]=k.useState("all"),[r,a]=k.useState(!1),[s,i]=k.useState(!1),[l,o]=k.useState(!1),[d,u]=k.useState(!1),[f,m]=k.useState(null),[g,x]=k.useState([]),{data:b,isLoading:v}=uie(e),y=die(),j=fie(),S=hie();k.useEffect(()=>{(async()=>{try{const D=await hd.getAllRoles();D.success&&x(D.roles)}catch(D){console.error("Error fetching roles:",D)}})()},[]);const N=async P=>{if(window.confirm("tes-vous sr de vouloir supprimer cet utilisateur ?"))try{await S.mutateAsync(P)}catch(D){console.error("Error deleting user:",D),alert("Erreur lors de la suppression")}},C=P=>{const M={admin:{label:"Administrateur",color:"bg-red-100 text-red-800",icon:X0},professor:{label:"Professeur",color:"bg-blue-100 text-blue-800",icon:il},gerant:{label:"Grant",color:"bg-green-100 text-green-800",icon:Ya},assistante:{label:"Assistante",color:"bg-purple-100 text-purple-800",icon:mg},comptable:{label:"Comptable",color:"bg-yellow-100 text-yellow-800",icon:cp},superviseur:{label:"Superviseur",color:"bg-orange-100 text-orange-800",icon:MN}}[P];if(!M)return n.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[n.jsx(il,{className:"w-3.5 h-3.5"}),P]});const F=M.icon;return n.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium ${M.color}`,children:[n.jsx(F,{className:"w-3.5 h-3.5"}),M.label]})},T={total:b?.length||0,admin:b?.filter(P=>P.role==="admin").length||0,professor:b?.filter(P=>P.role==="professor").length||0,gerant:b?.filter(P=>P.role==="gerant").length||0};return n.jsx(Ut,{title:"Gestion des Utilisateurs",subtitle:"Crer et grer les comptes utilisateurs (admin, professeur, grant)",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs(Ye,{onClick:()=>a(!0),className:"w-full sm:w-auto",children:[n.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Nouvel utilisateur"]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.total}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:T.admin}),n.jsx("p",{className:"text-sm text-gray-600",children:"Administrateurs"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:T.professor}),n.jsx("p",{className:"text-sm text-gray-600",children:"Professeurs"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:T.gerant}),n.jsx("p",{className:"text-sm text-gray-600",children:"Grants"})]})})})]}),n.jsxs(Or,{className:"mb-6",children:[n.jsx(Ic,{children:n.jsx(Bc,{children:"Filtrer par rle"})}),n.jsx(Fr,{children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(Ye,{variant:e==="all"?"default":"outline",size:"sm",onClick:()=>t("all"),children:["Tous (",T.total,")"]}),n.jsxs(Ye,{variant:e==="admin"?"default":"outline",size:"sm",onClick:()=>t("admin"),children:["Administrateurs (",T.admin,")"]}),n.jsxs(Ye,{variant:e==="professor"?"default":"outline",size:"sm",onClick:()=>t("professor"),children:["Professeurs (",T.professor,")"]}),n.jsxs(Ye,{variant:e==="gerant"?"default":"outline",size:"sm",onClick:()=>t("gerant"),children:["Grants (",T.gerant,")"]})]})})]}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:v?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Chargement..."})]}):!b||b.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ya,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"Aucun utilisateur trouv"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom complet"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom d'utilisateur"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date cration"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(P=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.full_name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.username}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(P.role)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(P.created_at).toLocaleDateString("fr-FR")}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[P.role!=="admin"&&n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>{m(P),o(!0)},title:"Assigner segments",children:n.jsx(Eu,{className:"w-4 h-4"})}),P.role!=="admin"&&n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>{m(P),u(!0)},title:"Assigner villes",children:n.jsx(ns,{className:"w-4 h-4"})}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>{m(P),i(!0)},children:n.jsx(Mc,{className:"w-4 h-4"})}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>N(P.id),className:"text-red-600 hover:text-red-700",children:n.jsx(Pr,{className:"w-4 h-4"})})]})})]},P.id))})]})})})}),r&&n.jsx(bie,{onClose:()=>a(!1),createUser:y,availableRoles:g}),s&&f&&n.jsx(wie,{user:f,onClose:()=>{i(!1),m(null)},updateUser:j,availableRoles:g}),l&&f&&n.jsx(jie,{user:f,onClose:()=>{o(!1),m(null)}}),d&&f&&n.jsx(Nie,{user:f,onClose:()=>{u(!1),m(null)}})]})})},bie=({onClose:e,createUser:t,availableRoles:r})=>{const[a,s]=k.useState({username:"",password:"",full_name:"",role:"professor"}),[i,l]=k.useState(!1),o=async d=>{if(d.preventDefault(),!a.username||!a.password||!a.full_name){alert("Veuillez remplir tous les champs");return}try{await t.mutateAsync(a),e()}catch(u){console.error("Error creating user:",u),alert("Erreur lors de la cration de l'utilisateur")}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Nouvel utilisateur"}),n.jsxs("form",{onSubmit:o,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom complet ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.full_name,onChange:d=>s({...a,full_name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jean Dupont",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom d'utilisateur ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.username,onChange:d=>s({...a,username:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"jeandupont",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mot de passe ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:i?"text":"password",value:a.password,onChange:d=>s({...a,password:d.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"",required:!0}),n.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:-1,children:i?n.jsx(Ji,{className:"w-5 h-5"}):n.jsx(pi,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rle ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{value:a.role,onChange:d=>s({...a,role:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:r.map(d=>n.jsx("option",{value:d.name,children:d.name.charAt(0).toUpperCase()+d.name.slice(1)},d.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:e,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:t.isPending,children:t.isPending?"Cration...":"Crer"})]})]})]})})},wie=({user:e,onClose:t,updateUser:r,availableRoles:a})=>{const[s,i]=k.useState({username:e.username,password:"",full_name:e.full_name,role:e.role}),[l,o]=k.useState(!1),d=async u=>{u.preventDefault();try{const f={id:e.id,username:s.username,full_name:s.full_name,role:s.role};s.password&&(f.password=s.password),await r.mutateAsync(f),t()}catch(f){console.error("Error updating user:",f),alert("Erreur lors de la mise  jour")}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Modifier l'utilisateur"}),n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),n.jsx("input",{type:"text",value:s.full_name,onChange:u=>i({...s,full_name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom d'utilisateur"}),n.jsx("input",{type:"text",value:s.username,onChange:u=>i({...s,username:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe (laisser vide pour ne pas modifier)"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:l?"text":"password",value:s.password,onChange:u=>i({...s,password:u.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""}),n.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:-1,children:l?n.jsx(Ji,{className:"w-5 h-5"}):n.jsx(pi,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rle"}),n.jsx("select",{value:s.role,onChange:u=>i({...s,role:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:a.map(u=>n.jsx("option",{value:u.name,children:u.name.charAt(0).toUpperCase()+u.name.slice(1)},u.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:r.isPending,children:r.isPending?"Mise  jour...":"Mettre  jour"})]})]})]})})},jie=({user:e,onClose:t})=>{const{data:r}=oL(),{data:a}=gie(e.id),s=mie(),[i,l]=k.useState([]);Kr.useEffect(()=>{a&&l(a.map(u=>u.id))},[a]);const o=async u=>{u.preventDefault();try{await s.mutateAsync({user_id:e.id,segment_ids:i,role:e.role}),t()}catch(f){console.error("Error assigning segments:",f),alert("Erreur lors de l'assignation")}},d=u=>{l(f=>f.includes(u)?f.filter(m=>m!==u):[...f,u])};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Assigner des segments  ",e.full_name]}),n.jsxs("form",{onSubmit:o,children:[n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:r?.map(u=>n.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.includes(u.id),onChange:()=>d(u.id),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("div",{className:"flex-1",children:n.jsx("span",{className:"font-medium text-gray-900",children:u.name})}),n.jsx("div",{className:"w-4 h-4 rounded-full ml-2",style:{backgroundColor:u.color}})]},u.id))}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:s.isPending,children:s.isPending?"Assignation...":"Assigner"})]})]})]})})},Nie=({user:e,onClose:t})=>{const{data:r}=xie(),{data:a}=oL(),{data:s}=vie(e.id),i=pie(),[l,o]=k.useState([]);Kr.useEffect(()=>{s&&o(s.map(m=>m.id))},[s]);const d=async m=>{m.preventDefault();try{await i.mutateAsync({user_id:e.id,city_ids:l,role:e.role}),t()}catch(g){console.error("Error assigning cities:",g),alert("Erreur lors de l'assignation")}},u=m=>{o(g=>g.includes(m)?g.filter(x=>x!==m):[...g,m])},f=m=>a?.find(g=>g.id===m)?.name||"";return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Assigner des villes  ",e.full_name]}),n.jsxs("form",{onSubmit:d,children:[n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:r?.map(m=>n.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:l.includes(m.id),onChange:()=>u(m.id),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"font-medium text-gray-900",children:m.name}),n.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",f(m.segment_id),")"]})]})]},m.id))}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:i.isPending,children:i.isPending?"Assignation...":"Assigner"})]})]})]})})};class _ie{input="";pos=0;currentChar=null;parse(t){try{if(this.input=t.trim(),this.pos=0,this.currentChar=this.input.length>0?this.input[0]:null,!this.currentChar)return{success:!1,error:"Expression vide"};const r=this.parseExpression();return this.skipWhitespace(),this.currentChar!==null?{success:!1,error:`Caractre inattendu: ${this.currentChar}`}:{success:!0,ast:r}}catch(r){return{success:!1,error:r.message||"Erreur de parsing"}}}advance(){this.pos++,this.currentChar=this.pos<this.input.length?this.input[this.pos]:null}peek(t=1){const r=this.pos+t;return r<this.input.length?this.input[r]:null}skipWhitespace(){for(;this.currentChar&&/\s/.test(this.currentChar);)this.advance()}parseExpression(){let t=this.parseTerm();for(this.skipWhitespace();this.currentChar==="+"||this.currentChar==="-";){const r=this.currentChar;this.advance(),this.skipWhitespace();const a=this.parseTerm();this.skipWhitespace(),t={type:"binary",operator:r,left:t,right:a}}return t}parseTerm(){let t=this.parseFactor();for(this.skipWhitespace();this.currentChar==="*"||this.currentChar==="/";){const r=this.currentChar;this.advance(),this.skipWhitespace();const a=this.parseFactor();this.skipWhitespace(),t={type:"binary",operator:r,left:t,right:a}}return t}parsePostfix(){let t=this.parsePrimary();return this.skipWhitespace(),this.currentChar==="%"&&(this.advance(),t={type:"postfix",operator:"%",operand:t}),t}parseFactor(){let t=this.parseUnary();for(this.skipWhitespace();this.currentChar==="^";){this.advance(),this.skipWhitespace();const r=this.parseUnary();this.skipWhitespace(),t={type:"binary",operator:"^",left:t,right:r}}return t}parseUnary(){if(this.currentChar==="-"||this.currentChar==="+"){const t=this.currentChar;this.advance();const r=this.parseUnary();return{type:"unary",operator:t,operand:r}}return this.parsePostfix()}parsePrimary(){if(this.skipWhitespace(),this.currentChar&&/[0-9.]/.test(this.currentChar))return this.parseNumber();if(this.currentChar==='"')return this.parseString();if(this.currentChar&&/[A-Za-z_]/.test(this.currentChar))return this.parseIdentifier();if(this.currentChar==="("){this.advance();const t=this.parseExpression();if(this.skipWhitespace(),this.currentChar!==")")throw new Error("Parenthse fermante manquante");return this.advance(),t}if(this.currentChar===">"||this.currentChar==="<"||this.currentChar==="=")return this.parseComparison();throw new Error(`Caractre inattendu: ${this.currentChar}`)}parseNumber(){let t="",r=!1;for(;this.currentChar&&(/[0-9]/.test(this.currentChar)||this.currentChar===".");){if(this.currentChar==="."){if(r)throw new Error("Nombre invalide: deux points dcimaux");r=!0}t+=this.currentChar,this.advance()}const a=parseFloat(t);if(isNaN(a))throw new Error(`Nombre invalide: ${t}`);return{type:"number",value:a}}parseString(){this.advance();let t="";for(;this.currentChar&&this.currentChar!=='"';)this.currentChar==="\\"&&this.peek()==='"'?(this.advance(),t+='"',this.advance()):(t+=this.currentChar,this.advance());if(this.currentChar!=='"')throw new Error("Guillemet fermant manquant");return this.advance(),{type:"string",value:t}}parseIdentifier(){let t="";for(;this.currentChar&&/[A-Za-z0-9_]/.test(this.currentChar);)t+=this.currentChar,this.advance();return this.skipWhitespace(),t.toUpperCase()==="TRUE"?{type:"boolean",value:!0}:t.toUpperCase()==="FALSE"?{type:"boolean",value:!1}:this.currentChar==="("?this.parseFunction(t):{type:"reference",name:t}}parseFunction(t){this.advance();const r=[];if(this.skipWhitespace(),this.currentChar===")")return this.advance(),{type:"function",name:t.toUpperCase(),args:r};for(;;){if(r.push(this.parseExpression()),this.skipWhitespace(),this.currentChar===")"){this.advance();break}if(this.currentChar===","){this.advance(),this.skipWhitespace();continue}throw new Error("Virgule ou parenthse fermante attendue dans la fonction")}return{type:"function",name:t.toUpperCase(),args:r}}parseComparison(){throw new Error("Comparaisons not yet implemented")}}function cL(e){return new _ie().parse(e)}const XN={SUM:e=>{let t=0;for(const r of e)if(typeof r=="number")t+=r;else if(typeof r=="string"){const a=parseFloat(r);isNaN(a)||(t+=a)}return t},AVG:e=>{if(e.length===0)return"#ERR";const t=XN.SUM(e);return typeof t=="number"?t/e.length:"#ERR"},MIN:e=>{const t=e.filter(r=>typeof r=="number");return t.length>0?Math.min(...t):"#ERR"},MAX:e=>{const t=e.filter(r=>typeof r=="number");return t.length>0?Math.max(...t):"#ERR"},COUNT:e=>e.filter(t=>t!=null).length,IF:e=>{if(e.length<2)return"#ERR";const t=e[0],r=e[1],a=e.length>2?e[2]:null;return t?r:a},ROUND:e=>{if(e.length===0)return"#ERR";const t=typeof e[0]=="number"?e[0]:parseFloat(String(e[0])),r=e.length>1&&typeof e[1]=="number"?e[1]:0;if(isNaN(t))return"#TYPE!";const a=Math.pow(10,r);return Math.round(t*a)/a},FLOOR:e=>{if(e.length===0)return"#ERR";const t=typeof e[0]=="number"?e[0]:parseFloat(String(e[0]));return isNaN(t)?"#TYPE!":Math.floor(t)},CEIL:e=>{if(e.length===0)return"#ERR";const t=typeof e[0]=="number"?e[0]:parseFloat(String(e[0]));return isNaN(t)?"#TYPE!":Math.ceil(t)},ABS:e=>{if(e.length===0)return"#ERR";const t=typeof e[0]=="number"?e[0]:parseFloat(String(e[0]));return isNaN(t)?"#TYPE!":Math.abs(t)},LEN:e=>e.length===0?"#ERR":String(e[0]||"").length,CONCAT:e=>e.map(t=>String(t||"")).join(""),COALESCE:e=>{for(const t of e)if(t!=null&&t!=="")return t;return null},TODAY:()=>new Date().toISOString().split("T")[0],DATE:e=>{if(e.length<3)return"#ERR";const t=Number(e[0]),r=Number(e[1]),a=Number(e[2]);return isNaN(t)||isNaN(r)||isNaN(a)?"#TYPE!":new Date(t,r-1,a).toISOString().split("T")[0]},YEAR:e=>{if(e.length===0)return"#ERR";const t=String(e[0]),r=new Date(t);return isNaN(r.getTime())?"#TYPE!":r.getFullYear()},MONTH:e=>{if(e.length===0)return"#ERR";const t=String(e[0]),r=new Date(t);return isNaN(r.getTime())?"#TYPE!":r.getMonth()+1},DAY:e=>{if(e.length===0)return"#ERR";const t=String(e[0]),r=new Date(t);return isNaN(r.getTime())?"#TYPE!":r.getDate()},NUMBER:e=>{if(e.length===0)return"#ERR";const t=parseFloat(String(e[0]));return isNaN(t)?"#TYPE!":t}};class Sie{context;constructor(t={}){this.context=t}setContext(t){this.context=t}evaluate(t){try{const r=this.evaluateNode(t),a=typeof r=="string"&&r.startsWith("#");return{value:r,isError:a}}catch{return{value:"#ERR",isError:!0}}}evaluateNode(t){switch(t.type){case"number":return t.value;case"string":return t.value;case"boolean":return t.value;case"reference":return this.evaluateReference(t.name);case"binary":return this.evaluateBinary(t.operator,t.left,t.right);case"unary":return this.evaluateUnary(t.operator,t.operand);case"postfix":return this.evaluatePostfix(t.operator,t.operand);case"function":return this.evaluateFunction(t.name,t.args);case"error":return t.error;default:return"#ERR"}}evaluateReference(t){return t in this.context?this.context[t]:"#REF!"}evaluateBinary(t,r,a){const s=this.evaluateNode(r),i=this.evaluateNode(a);if(typeof s=="string"&&s.startsWith("#"))return s;if(typeof i=="string"&&i.startsWith("#"))return i;const l=typeof s=="number"?s:parseFloat(String(s)),o=typeof i=="number"?i:parseFloat(String(i));if(isNaN(l)||isNaN(o))return"#TYPE!";switch(t){case"+":return l+o;case"-":return l-o;case"*":return l*o;case"/":return o===0?"#DIV/0!":l/o;case"^":return Math.pow(l,o);case">":return l>o;case"<":return l<o;case">=":return l>=o;case"<=":return l<=o;case"=":case"==":return l===o;case"!=":case"<>":return l!==o;default:return"#ERR"}}evaluateUnary(t,r){const a=this.evaluateNode(r);if(typeof a=="string"&&a.startsWith("#"))return a;const s=typeof a=="number"?a:parseFloat(String(a));if(isNaN(s))return"#TYPE!";switch(t){case"-":return-s;case"+":return s;default:return"#ERR"}}evaluatePostfix(t,r){const a=this.evaluateNode(r);if(typeof a=="string"&&a.startsWith("#"))return a;const s=typeof a=="number"?a:parseFloat(String(a));if(isNaN(s))return"#TYPE!";switch(t){case"%":return s/100;default:return"#ERR"}}evaluateFunction(t,r){const a=t.toUpperCase();if(!(a in XN))return"#ERR";const s=[];for(const i of r){const l=this.evaluateNode(i);if(typeof l=="string"&&l.startsWith("#")&&!["SUM","COUNT","COALESCE"].includes(a))return l;s.push(l)}return XN[a](s)}}function kie(e,t={}){return new Sie(t).evaluate(e)}class Aie{graph={nodes:new Set,edges:new Map,reversEdges:new Map};buildGraph(t){this.graph={nodes:new Set,edges:new Map,reversEdges:new Map};for(const r of t)r.ref&&(this.graph.nodes.add(r.ref),this.graph.edges.set(r.ref,new Set),this.graph.reversEdges.set(r.ref,new Set));for(const r of t)if(r.type==="formula"&&r.ref&&r.props.expression){const a=this.extractDependencies(r.props.expression);this.graph.edges.set(r.ref,new Set(a));for(const s of a)this.graph.reversEdges.has(s)||this.graph.reversEdges.set(s,new Set),this.graph.reversEdges.get(s).add(r.ref)}}extractDependencies(t){const r=[],a=cL(t);return a.success&&a.ast&&this.extractReferencesFromAST(a.ast,r),[...new Set(r)]}extractReferencesFromAST(t,r){if(t){if(t.type==="reference")r.push(t.name);else if(t.type==="binary")this.extractReferencesFromAST(t.left,r),this.extractReferencesFromAST(t.right,r);else if(t.type==="unary")this.extractReferencesFromAST(t.operand,r);else if(t.type==="postfix")this.extractReferencesFromAST(t.operand,r);else if(t.type==="function")for(const a of t.args)this.extractReferencesFromAST(a,r)}}detectCycle(){const t=new Set,r=new Set,a=[];for(const s of this.graph.nodes)if(!t.has(s)&&this.detectCycleDFS(s,t,r,a))return a;return null}detectCycleDFS(t,r,a,s){r.add(t),a.add(t),s.push(t);const i=this.graph.edges.get(t)||new Set;for(const l of i)if(r.has(l)){if(a.has(l))return s.push(l),!0}else if(this.detectCycleDFS(l,r,a,s))return!0;return a.delete(t),s.pop(),!1}getEvaluationOrder(){if(this.detectCycle())return null;const r=new Set,a=[];for(const s of this.graph.nodes)r.has(s)||this.topologicalSortDFS(s,r,a);return a.reverse()}topologicalSortDFS(t,r,a){r.add(t);const s=this.graph.reversEdges.get(t)||new Set;for(const i of s)r.has(i)||this.topologicalSortDFS(i,r,a);a.push(t)}getDependents(t){const r=new Set,a=[t];for(;a.length>0;){const s=a.shift(),i=this.graph.reversEdges.get(s)||new Set;for(const l of i)r.has(l)||(r.add(l),a.push(l))}return r}}function m3(e,t={}){const r=new Aie;r.buildGraph(e);const a=r.detectCycle();if(a){const l={...t};for(const o of a)l[o]="#CYCLE!";return l}const s=r.getEvaluationOrder();if(!s)return t;const i={...t};for(const l of s){const o=e.find(d=>d.ref===l);if(o)if(o.type==="formula"&&o.props.expression){const d=cL(o.props.expression);if(!d.success||!d.ast){i[l]="#ERR";continue}const u=kie(d.ast,i);i[l]=u.value}else o.type==="number"&&i[l]===void 0?i[l]=o.props.default!==void 0?o.props.default:0:o.type==="text"&&i[l]===void 0&&(i[l]=o.props.default!==void 0?o.props.default:"")}return i}const qc={async getAll(){return Ce.get("/calculation-sheets")},async getById(e){try{return await Ce.get(`/calculation-sheets/${e}`)}catch(t){if(t instanceof Error&&"status"in t&&t.status===404)return null;throw t}},async create(e){return Ce.post("/calculation-sheets",e)},async update(e){const{id:t,...r}=e;return Ce.put(`/calculation-sheets/${t}`,r)},async delete(e){return Ce.delete(`/calculation-sheets/${e}`)}},Cie=()=>Ft({queryKey:["calculation-sheets"],queryFn:()=>qc.getAll()}),uL=e=>Ft({queryKey:["calculation-sheet",e],queryFn:()=>qc.getById(e),enabled:!!e}),Eie=()=>{const e=Tt();return St({mutationFn:async t=>{const r=s0(),a=new Date().toISOString();return qc.create({id:r,title:t.title,template_data:t.template_data||"{}",status:t.status||"draft",sheet_date:t.sheet_date||a,segment_ids:t.segment_ids,city_ids:t.city_ids})},onSuccess:()=>{e.invalidateQueries({queryKey:["calculation-sheets"]})}})},dL=()=>{const e=Tt();return St({mutationFn:t=>qc.update(t),onSuccess:()=>{e.invalidateQueries({queryKey:["calculation-sheets"]}),e.invalidateQueries({queryKey:["calculation-sheet"]})}})},Tie=()=>{const e=Tt();return St({mutationFn:t=>qc.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["calculation-sheets"]})}})},Die=()=>{const e=Tt();return St({mutationFn:async t=>{const r=await qc.getById(t);if(!r)throw new Error("Fiche non trouve");const a=r.status==="published"?"draft":"published";return qc.update({id:t,title:r.title,template_data:r.template_data,status:a,sheet_date:r.sheet_date,segment_ids:r.segment_ids,city_ids:r.city_ids})},onSuccess:()=>{e.invalidateQueries({queryKey:["calculation-sheets"]}),e.invalidateQueries({queryKey:["calculation-sheet"]})}})},Oie=Die,Fie=()=>{const e=Tt();return St({mutationFn:async t=>{const r=await qc.getById(t);if(!r)throw new Error("Fiche non trouve");const a=s0();return qc.create({id:a,title:`${r.title} (copie)`,template_data:r.template_data,status:"draft",sheet_date:new Date().toISOString(),segment_ids:r.segment_ids,city_ids:r.city_ids})},onSuccess:()=>{e.invalidateQueries({queryKey:["calculation-sheets"]})}})};function Pie(){const{id:e}=xo(),[t,r]=IF(),a=t.get("mode")||"user",{data:s,isLoading:i}=uL(e||""),[l,o]=k.useState([]),[d,u]=k.useState("Fiche de Calcul"),[f,m]=k.useState({}),[g,x]=k.useState({}),[b,v]=k.useState(null),[y,j]=k.useState({}),[S]=k.useState({width:1200,height:800});k.useEffect(()=>{if(s&&(u(s.title),s.template_data))try{const D=JSON.parse(s.template_data);D.fields&&D.fields.length>0&&o(D.fields)}catch(D){console.error("Erreur lors du chargement du template:",D)}},[s]),k.useEffect(()=>{const D=m3(l,f);x(D)},[f,l]);const N=(D,M)=>{const F=l.find(L=>L.ref===D);if(!F)return;let H=M;F.type==="number"&&(H=M===""?0:parseFloat(M)||0),m(L=>({...L,[D]:H}))},C=(D,M)=>{j(F=>({...F,[D]:M}))},T=()=>{const D={values:f,calculatedValues:g,timestamp:new Date().toISOString()};localStorage.setItem("calculation_sheet_data",JSON.stringify(D)),v("Donnes sauvegardes avec succs!"),setTimeout(()=>v(null),3e3)};k.useEffect(()=>{const D=localStorage.getItem("calculation_sheet_data");if(D)try{const M=JSON.parse(D);m(M.values||{})}catch(M){console.error("Erreur lors du chargement des donnes:",M)}},[]);const P=D=>{const M=D.layout||{x:0,y:0,w:200,h:40};if(a==="user"&&D.visibility?.hidden)return null;const F=D.visibility?.hidden;if(D.type==="label")return n.jsxs("div",{className:`absolute bg-gray-100 border-2 border-gray-300 rounded px-3 py-2 flex items-center font-semibold text-gray-700 ${F?"opacity-60 ring-2 ring-red-400":""}`,style:{left:`${M.x}px`,top:`${M.y}px`,width:`${M.w}px`,height:`${M.h}px`},children:[F&&a==="admin"&&n.jsx(Ji,{className:"w-4 h-4 mr-2 text-red-500"}),D.props.label]},D.id);if(D.type==="text"){const H=f[D.ref],L=typeof H=="string"||typeof H=="number"?String(H):"";return n.jsx("div",{className:`absolute ${F?"ring-2 ring-red-400 opacity-60":""}`,style:{left:`${M.x}px`,top:`${M.y}px`,width:`${M.w}px`,height:`${M.h}px`},children:n.jsx("input",{type:"text",value:L,onChange:z=>N(D.ref,z.target.value),className:"w-full h-full px-3 py-2 border border-blue-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},D.id)}if(D.type==="textarea"){const H=f[D.ref],L=typeof H=="string"||typeof H=="number"?String(H):"";return n.jsx("div",{className:`absolute ${F?"ring-2 ring-red-400 opacity-60":""}`,style:{left:`${M.x}px`,top:`${M.y}px`,width:`${M.w}px`,height:`${M.h}px`},children:n.jsxs("div",{className:"relative w-full h-full",children:[F&&a==="admin"&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(Ji,{className:"w-4 h-4 text-red-500"})}),n.jsx("textarea",{value:L,onChange:z=>N(D.ref,z.target.value),placeholder:D.props.label||"crivez vos commentaires ici...",className:"w-full h-full px-3 py-2 border-2 border-indigo-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"})]})},D.id)}if(D.type==="number"){const H=f[D.ref]!==void 0?f[D.ref]:D.props.default||0,L=typeof H=="number"||typeof H=="string"?H:"";return n.jsx("div",{className:`absolute ${F?"ring-2 ring-red-400 opacity-60":""}`,style:{left:`${M.x}px`,top:`${M.y}px`,width:`${M.w}px`,height:`${M.h}px`},children:n.jsxs("div",{className:"relative w-full h-full",children:[F&&a==="admin"&&n.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 z-10",children:n.jsx(Ji,{className:"w-4 h-4 text-red-500"})}),n.jsx("input",{type:"number",step:"0.01",value:L,onChange:z=>N(D.ref,z.target.value),className:"w-full h-full px-3 py-2 border border-green-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})},D.id)}if(D.type==="formula"){const H=g[D.ref],L=typeof H=="string"&&H.startsWith("#");return n.jsx("div",{className:`absolute flex items-center ${F?"ring-2 ring-red-400 opacity-60":""}`,style:{left:`${M.x}px`,top:`${M.y}px`,width:`${M.w}px`,height:`${M.h}px`},children:n.jsxs("div",{className:`relative w-full h-full px-3 py-2 border-2 rounded font-semibold flex items-center ${L?"bg-red-50 border-red-400 text-red-700":"bg-purple-50 border-purple-400 text-purple-900"}`,children:[F&&a==="admin"&&n.jsx(Ji,{className:"w-4 h-4 text-red-500 mr-2 flex-shrink-0"}),typeof H=="number"?H.toFixed(D.props.decimals||2):String(H||"0")]})},D.id)}if(D.type==="frame")return n.jsx("div",{className:`absolute border-2 border-orange-400 rounded-lg bg-orange-50/30 ${F?"ring-2 ring-red-400 opacity-60":""}`,style:{left:`${M.x}px`,top:`${M.y}px`,width:`${M.w}px`,height:`${M.h}px`},children:n.jsxs("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-t font-semibold text-sm flex items-center",children:[F&&a==="admin"&&n.jsx(Ji,{className:"w-3 h-3 mr-2"}),D.props.label||"Cadre"]})},D.id);if(D.type==="file"){const H=y[D.ref];return n.jsx("div",{className:`absolute ${F?"ring-2 ring-red-400 opacity-60":""}`,style:{left:`${M.x}px`,top:`${M.y}px`,width:`${M.w}px`,height:`${M.h}px`},children:H?n.jsxs("div",{className:"w-full h-full border-2 border-teal-400 bg-teal-50 rounded px-3 py-2 flex items-center justify-between gap-2",children:[F&&a==="admin"&&n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ji,{className:"w-4 h-4 text-red-500"})}),n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx(Fa,{className:"w-5 h-5 text-teal-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium text-teal-900 truncate",children:H.name}),n.jsxs("div",{className:"text-xs text-teal-600",children:[(H.size/1024/1024).toFixed(2)," MB"]})]})]}),n.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[n.jsx("button",{onClick:()=>{const L=URL.createObjectURL(H);window.open(L,"_blank")},className:"p-1.5 hover:bg-teal-200 rounded transition-colors",title:"Prvisualiser",children:n.jsx(pi,{className:"w-4 h-4 text-teal-700"})}),n.jsx("button",{onClick:()=>{const L=URL.createObjectURL(H),z=document.createElement("a");z.href=L,z.download=H.name,z.click(),URL.revokeObjectURL(L)},className:"p-1.5 hover:bg-teal-200 rounded transition-colors",title:"Tlcharger",children:n.jsx(ps,{className:"w-4 h-4 text-teal-700"})}),n.jsx("button",{onClick:()=>C(D.ref,null),className:"p-1.5 hover:bg-red-200 rounded transition-colors",title:"Supprimer",children:n.jsx(Mr,{className:"w-4 h-4 text-red-600"})})]})]}):n.jsxs("label",{className:"w-full h-full border-2 border-dashed border-teal-300 bg-teal-50/50 rounded px-3 py-2 flex flex-col items-center justify-center cursor-pointer hover:bg-teal-100/50 transition-colors relative",children:[F&&a==="admin"&&n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx(Ji,{className:"w-4 h-4 text-red-500"})}),n.jsx(zc,{className:"w-6 h-6 text-teal-600 mb-1"}),n.jsx("span",{className:"text-sm font-medium text-teal-700",children:D.props.label||"Tlcharger un fichier"}),n.jsxs("span",{className:"text-xs text-teal-600 mt-1",children:[D.props.accept||"Tous les fichiers"," (max ",D.props.maxSize||5," MB)"]}),n.jsx("input",{type:"file",accept:D.props.accept,onChange:L=>{const z=L.target.files?.[0];if(z){const V=(D.props.maxSize||5)*1024*1024;if(z.size>V){alert(`Le fichier est trop volumineux. Taille maximum: ${D.props.maxSize||5} MB`);return}C(D.ref,z)}},className:"hidden"})]})},D.id)}return null};return i?n.jsx(Ut,{title:"Test Fiche de Calcul",subtitle:"Chargement en cours...",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Chargement de la fiche..."})]})})}):!s||l.length===0?n.jsx(Ut,{title:"Test Fiche de Calcul",subtitle:"Aucune fiche trouve",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Eu,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucune fiche trouve"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"Cette fiche n'existe pas ou n'a pas encore de champs."}),n.jsx(Ml,{to:"/admin/calculation-sheets",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retour  la liste"})]})})}):n.jsx(Ut,{title:d,subtitle:a==="admin"?"Tous les champs visibles - Simulation complte":"Mode Test - Vrifiez vos calculs",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("span",{className:`px-2.5 sm:px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 w-fit ${a==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:a==="admin"?n.jsxs(n.Fragment,{children:[n.jsx(X0,{className:"w-3 h-3"}),"Mode Admin"]}):n.jsxs(n.Fragment,{children:[n.jsx(il,{className:"w-3 h-3"}),"Mode Utilisateur"]})})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>r({mode:"admin"}),className:`px-3 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm ${a==="admin"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(X0,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Admin"})]}),n.jsxs("button",{onClick:()=>r({mode:"user"}),className:`px-3 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm ${a==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(il,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Utilisateur"})]})]}),b&&n.jsxs("div",{className:"flex items-center gap-2 bg-green-100 text-green-800 px-3 sm:px-4 py-2 rounded-lg",children:[n.jsx(VF,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),n.jsx("span",{className:"text-xs sm:text-sm font-medium",children:b})]}),n.jsxs("button",{onClick:T,className:"px-3 sm:px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2 text-sm sm:text-base",children:[n.jsx(Td,{className:"w-4 h-4 sm:w-5 sm:h-5"}),n.jsx("span",{children:"Sauvegarder Test"})]}),n.jsxs(Ml,{to:`/admin/calculation-sheets/${e}/editor`,className:"px-3 sm:px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2 text-sm sm:text-base",children:[n.jsx(Ah,{className:"w-4 h-4 sm:w-5 sm:h-5"}),n.jsx("span",{children:"Modifier"})]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-auto",children:n.jsx("div",{className:"relative bg-white",style:{width:`${S.width}px`,minHeight:`${S.height}px`},children:l.map(D=>P(D))})}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[n.jsx(Eu,{className:"w-5 h-5"}),"Mode Test - Comment utiliser"]}),n.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[n.jsxs("p",{children:[" Saisissez des valeurs dans les champs ",n.jsx("strong",{children:"Nombre"})," et ",n.jsx("strong",{children:"Texte"})]}),n.jsx("p",{children:" Les formules se calculent automatiquement en temps rel"}),n.jsx("p",{children:" Vrifiez que les calculs sont corrects avant d'utiliser en production"}),n.jsx("p",{children:` Cliquez sur "Modifier" pour retourner  l'diteur et ajuster les champs`}),n.jsx("p",{children:" Les donnes de test sont sauvegardes temporairement"})]})]})]})})}function Mie(){const[e,t]=k.useState(!1),[r,a]=k.useState(null),{data:s=[],isLoading:i}=Cie(),{data:l=[]}=qd(),{data:o=[]}=sv(),d=Tie(),u=Oie(),f=Fie(),m=s.map(y=>({...y,segments:l.filter(j=>y.segment_ids?.includes(j.id)),cities:o.filter(j=>y.city_ids?.includes(j.id))})),g=async(y,j)=>{if(window.confirm(`tes-vous sr de vouloir supprimer "${j}" ?`))try{await d.mutateAsync(y)}catch(S){console.error("Erreur lors de la suppression:",S),alert("Erreur lors de la suppression de la fiche")}},x=async(y,j,S)=>{const N=j==="published"?"dpublier":"publier",C=j==="published"?`tes-vous sr de vouloir dpublier "${S}" ?

Les professeurs ne pourront plus l'utiliser.`:`tes-vous sr de vouloir publier "${S}" ?

Les professeurs pourront utiliser cette fiche.`;if(window.confirm(C))try{await u.mutateAsync(y)}catch(T){console.error(`Erreur lors de la ${N}ication:`,T),alert(`Erreur lors de la ${N}ication de la fiche`)}},b=async(y,j)=>{if(window.confirm(`Voulez-vous dupliquer "${j}" ?

Une copie en brouillon sera cre.`))try{await f.mutateAsync(y)}catch(S){console.error("Erreur lors de la duplication:",S),alert("Erreur lors de la duplication de la fiche")}},v=y=>{try{const j=JSON.parse(y.template_data),S={name:y.title,fields:j.fields||[],version:j.version||"1.0.0"},N=JSON.stringify(S,null,2),C=new Blob([N],{type:"application/json"}),T=URL.createObjectURL(C),P=document.createElement("a");P.href=T,P.download=`${y.title.replace(/\s+/g,"-").toLowerCase()}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(T)}catch(j){console.error("Erreur lors de l'export:",j),alert("Erreur lors de l'export de la fiche")}};return n.jsx(Ut,{title:"Gestion des Fiches de Calcul",subtitle:"Crer et grer les templates de fiches de calcul pour les sessions",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:()=>t(!0),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Jr,{className:"w-5 h-5"}),"Nouvelle Fiche"]})}),i?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Chargement des fiches..."})]}):m.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(up,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune fiche cre"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par crer votre premire fiche de calcul"}),n.jsxs("button",{onClick:()=>t(!0),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors inline-flex items-center gap-2",children:[n.jsx(Jr,{className:"w-5 h-5"}),"Crer ma premire fiche"]})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(y=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:y.title}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status==="published"?"Publie":"Brouillon"})]}),n.jsx(Eu,{className:"w-8 h-8 text-blue-500"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-2",children:[n.jsx(dp,{className:"w-4 h-4"}),n.jsxs("span",{className:"font-medium",children:["Segments (",y.segments.length,")"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:y.segments.map(j=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:[n.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:j.color}}),j.name]},j.id))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-2",children:[n.jsx(ns,{className:"w-4 h-4"}),n.jsxs("span",{className:"font-medium",children:["Villes (",y.cities.length,")"]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.cities.slice(0,3).map(j=>n.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:j.name},j.id)),y.cities.length>3&&n.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",y.cities.length-3," autres"]})]})]}),n.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Modifi le ",new Date(y.updated_at).toLocaleDateString("fr-FR")]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>x(y.id,y.status,y.title),disabled:u.isPending,className:`w-full px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors ${y.status==="published"?"bg-orange-50 hover:bg-orange-100 text-orange-700 border border-orange-200":"bg-green-50 hover:bg-green-100 text-green-700 border border-green-200"}`,children:y.status==="published"?n.jsxs(n.Fragment,{children:[n.jsx(fo,{className:"w-4 h-4"}),"Dpublier"]}):n.jsxs(n.Fragment,{children:[n.jsx(zc,{className:"w-4 h-4"}),"Publier"]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ml,{to:`/admin/calculation-sheets/${y.id}`,className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-1 transition-colors",children:[n.jsx(pi,{className:"w-4 h-4"}),"Voir"]}),n.jsx("button",{onClick:()=>a(y),className:"px-3 py-2 bg-purple-50 hover:bg-purple-100 text-purple-600 rounded-lg text-sm transition-colors",title:"Modifier les informations",children:n.jsx(Xg,{className:"w-4 h-4"})}),n.jsxs(Ml,{to:`/admin/calculation-sheets/${y.id}/editor`,className:"flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium flex items-center justify-center gap-1 transition-colors",children:[n.jsx(Ah,{className:"w-4 h-4"}),"Modifier"]})]}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsxs("button",{onClick:()=>v(y),className:"flex-1 px-3 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 rounded-lg text-sm font-medium flex items-center justify-center gap-1 transition-colors",title:"Exporter en JSON",children:[n.jsx(ps,{className:"w-4 h-4"}),"Exporter"]}),n.jsx("button",{onClick:()=>b(y.id,y.title),className:"px-3 py-2 bg-cyan-50 hover:bg-cyan-100 text-cyan-700 rounded-lg text-sm transition-colors",title:"Dupliquer",children:n.jsx(Dl,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>g(y.id,y.title),className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm transition-colors",title:"Supprimer",children:n.jsx(Pr,{className:"w-4 h-4"})})]})]})]})},y.id))}),e&&n.jsx(Lie,{onClose:()=>t(!1)}),r&&n.jsx(Rie,{sheet:r,onClose:()=>a(null)})]})})}function Lie({onClose:e}){const[t,r]=k.useState(1),[a,s]=k.useState(""),[i,l]=k.useState([]),[o,d]=k.useState([]),u=$a(),f=Eie(),{data:m=[]}=qd(),{data:g=[]}=sv(),x=g.filter(v=>i.includes(v.segment_id)),b=async()=>{try{const v=await f.mutateAsync({title:a,segment_ids:i,city_ids:o});e(),u(`/admin/calculation-sheets/${v.id}/editor`)}catch(v){console.error("Erreur lors de la cration:",v),alert("Erreur lors de la cration de la fiche")}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Crer une Fiche de Calcul"}),n.jsxs("p",{className:"text-green-100 text-sm",children:["tape ",t," sur 3"]})]}),n.jsx("button",{onClick:e,className:"text-white hover:bg-white/10 p-2 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[t===1&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Informations gnrales"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre de la fiche"}),n.jsx("input",{type:"text",value:a,onChange:v=>s(v.target.value),placeholder:"Ex: Fiche Formation Professionnelle",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",autoFocus:!0})]})]}),t===2&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-4",children:["Slectionner les segments (",i.length," slectionn",i.length>1?"s":"",")"]}),n.jsx("div",{className:"space-y-2",children:m.map(v=>n.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.includes(v.id),onChange:y=>{if(y.target.checked)l([...i,v.id]);else{l(i.filter(S=>S!==v.id));const j=g.filter(S=>S.segment_id===v.id).map(S=>S.id);d(o.filter(S=>!j.includes(S)))}},className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.color}}),n.jsx("span",{className:"flex-1 font-medium text-gray-900",children:v.name})]},v.id))})]}),t===3&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-4",children:["Slectionner les villes (",o.length," slectionne",o.length>1?"s":"",")"]}),i.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Vous devez d'abord slectionner au moins un segment"}):x.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune ville disponible pour les segments slectionns"}):n.jsx("div",{className:"space-y-2",children:x.map(v=>n.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.includes(v.id),onChange:y=>{y.target.checked?d([...o,v.id]):d(o.filter(j=>j!==v.id))},className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsx(ns,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"flex-1 font-medium text-gray-900",children:v.name}),n.jsx("span",{className:"text-sm text-gray-500",children:m.find(y=>y.id===v.segment_id)?.name})]},v.id))})]})]}),n.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-between",children:[n.jsx("button",{onClick:()=>t>1?r(t-1):e(),className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors",children:t===1?"Annuler":"Prcdent"}),n.jsx("button",{onClick:()=>{t<3?r(t+1):b()},disabled:t===1&&!a,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t===3?"Crer la fiche":"Suivant"})]})]})})}function Rie({sheet:e,onClose:t}){const[r,a]=k.useState(1),[s,i]=k.useState(e.title),[l,o]=k.useState(e.segment_ids||[]),[d,u]=k.useState(e.city_ids||[]),f=dL(),{data:m=[]}=qd(),{data:g=[]}=sv(),x=g.filter(v=>l.includes(v.segment_id)),b=async()=>{try{await f.mutateAsync({id:e.id,title:s,template_data:e.template_data,status:e.status,sheet_date:e.sheet_date,segment_ids:l,city_ids:d}),t()}catch(v){console.error("Erreur lors de la modification:",v),alert("Erreur lors de la modification de la fiche")}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Modifier la Fiche de Calcul"}),n.jsxs("p",{className:"text-purple-100 text-sm",children:["tape ",r," sur 3"]})]}),n.jsx("button",{onClick:t,className:"text-white hover:bg-white/10 p-2 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[r===1&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Informations gnrales"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre de la fiche"}),n.jsx("input",{type:"text",value:s,onChange:v=>i(v.target.value),placeholder:"Ex: Fiche Formation Professionnelle",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",autoFocus:!0})]})]}),r===2&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-4",children:["Slectionner les segments (",l.length," slectionn",l.length>1?"s":"",")"]}),n.jsx("div",{className:"space-y-2",children:m.map(v=>n.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:l.includes(v.id),onChange:y=>{if(y.target.checked)o([...l,v.id]);else{o(l.filter(S=>S!==v.id));const j=g.filter(S=>S.segment_id===v.id).map(S=>S.id);u(d.filter(S=>!j.includes(S)))}},className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.color}}),n.jsx("span",{className:"flex-1 font-medium text-gray-900",children:v.name})]},v.id))})]}),r===3&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-4",children:["Slectionner les villes (",d.length," slectionne",d.length>1?"s":"",")"]}),l.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Vous devez d'abord slectionner au moins un segment"}):x.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune ville disponible pour les segments slectionns"}):n.jsx("div",{className:"space-y-2",children:x.map(v=>n.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:d.includes(v.id),onChange:y=>{y.target.checked?u([...d,v.id]):u(d.filter(j=>j!==v.id))},className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),n.jsx(ns,{className:"w-4 h-4 text-purple-600"}),n.jsx("span",{className:"flex-1 font-medium text-gray-900",children:v.name}),n.jsx("span",{className:"text-sm text-gray-500",children:m.find(y=>y.id===v.segment_id)?.name})]},v.id))})]})]}),n.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-between",children:[n.jsx("button",{onClick:()=>r>1?a(r-1):t(),className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors",children:r===1?"Annuler":"Prcdent"}),n.jsx("button",{onClick:()=>{r<3?a(r+1):b()},disabled:r===1&&!s||f.isPending,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?"Sauvegarde...":r===3?"Enregistrer":"Suivant"})]})]})})}function Iie(){const{id:e}=xo(),t=$a(),[r,a]=k.useState([]),[s,i]=k.useState(null),[l,o]=k.useState(null),[d,u]=k.useState(null),[f,m]=k.useState(1),[g,x]=k.useState("Nouvelle Fiche"),[b,v]=k.useState(!0),[y,j]=k.useState(null),[S,N]=k.useState({width:1200,height:800}),C=k.useRef(null),T=dL(),{data:P}=uL(e||"");k.useEffect(()=>{if(P&&(P.title&&x(P.title),P.template_data))try{const I=JSON.parse(P.template_data);if(I.fields&&I.fields.length>0){a(I.fields);const q=Math.max(...I.fields.map(K=>{const te=K.id.match(/field_(\d+)/);return te?parseInt(te[1]):0}));m(q+1)}}catch(I){console.error("Erreur lors du chargement des donnes:",I)}},[P]);const D=[{type:"label",icon:Qm,label:"Label",color:"bg-gray-500"},{type:"text",icon:QF,label:"Texte",color:"bg-blue-500"},{type:"number",icon:zb,label:"Nombre",color:"bg-green-500"},{type:"formula",icon:Eu,label:"Formule",color:"bg-purple-500"},{type:"textarea",icon:as,label:"Texte libre",color:"bg-indigo-500"},{type:"frame",icon:mV,label:"Cadre",color:"bg-orange-500"},{type:"file",icon:WW,label:"Pice jointe",color:"bg-teal-500"},{type:"link",icon:xg,label:"Lien",color:"bg-cyan-500"}],M=r.find(I=>I.id===s),F=(I,q,K)=>{const te=`field_${f}`;m(f+1);const J={id:te,type:I,layout:{x:q,y:K,w:200,h:40}};switch(I){case"label":return{...J,props:{label:"Nouveau label"}};case"text":return{...J,ref:`TEXT_${f}`,props:{label:"Texte"}};case"number":return{...J,ref:`NUM_${f}`,props:{label:"Nombre",decimals:2,default:0}};case"formula":return{...J,ref:`FORMULA_${f}`,props:{label:"Formule",expression:"",decimals:2}};case"frame":return{...J,props:{label:"Cadre"},children:[]};case"file":return{...J,ref:`FILE_${f}`,props:{label:"Pice jointe",accept:".pdf,.jpg,.jpeg,.png",maxSize:5}};case"textarea":return{...J,layout:{x:q,y:K,w:400,h:120},ref:`TEXTAREA_${f}`,props:{label:"Commentaires"}};case"link":return{...J,props:{label:"Lien",url:"https://example.com"}};default:return J}},H=I=>{o({type:I,isNew:!0})},L=(I,q)=>{const K=r.find(ne=>ne.id===q);if(!K)return;const te=I.currentTarget.getBoundingClientRect(),J=I.clientX-te.left,Q=I.clientY-te.top;o({type:K.type,isNew:!1,fieldId:q,offsetX:J,offsetY:Q}),i(q)},z=I=>{I.preventDefault()},V=I=>{if(I.preventDefault(),!l||!C.current)return;const q=C.current.getBoundingClientRect(),K=Math.round((I.clientX-q.left-(l.offsetX||0))/10)*10,te=Math.round((I.clientY-q.top-(l.offsetY||0))/10)*10;if(l.isNew){const J=F(l.type,Math.max(0,K),Math.max(0,te));a([...r,J]),i(J.id)}else l.fieldId&&a(r.map(J=>J.id===l.fieldId?{...J,layout:{...J.layout,x:Math.max(0,K),y:Math.max(0,te)}}:J));o(null)},G=I=>{if(l&&!l.isNew&&l.fieldId&&C.current){const q=C.current.getBoundingClientRect(),K=Math.round((I.clientX-q.left-(l.offsetX||0))/10)*10,te=Math.round((I.clientY-q.top-(l.offsetY||0))/10)*10;a(r.map(J=>J.id===l.fieldId?{...J,layout:{...J.layout,x:Math.max(0,K),y:Math.max(0,te)}}:J))}if(d&&C.current){const q=C.current.getBoundingClientRect(),K=I.clientX-q.left,te=I.clientY-q.top,J=K-d.startX,Q=te-d.startY;a(r.map(ne=>{if(ne.id!==d.fieldId)return ne;let ye=d.startW,De=d.startH;return d.direction==="se"?(ye=Math.max(100,d.startW+J),De=Math.max(50,d.startH+Q)):d.direction==="s"?De=Math.max(50,d.startH+Q):d.direction==="e"&&(ye=Math.max(100,d.startW+J)),{...ne,layout:{...ne.layout,w:Math.round(ye/10)*10,h:Math.round(De/10)*10}}}))}},ie=()=>{o(null),u(null)},Z=(I,q,K)=>{if(I.stopPropagation(),!C.current)return;const te=r.find(Q=>Q.id===q);if(!te)return;const J=C.current.getBoundingClientRect();u({fieldId:q,direction:K,startX:I.clientX-J.left,startY:I.clientY-J.top,startW:te.layout.w,startH:te.layout.h})},X=(I,q,K)=>{a(r.map(te=>{if(te.id!==I)return te;const J=q.split(".");return J.length===1?{...te,[q]:K}:J[0]==="props"?{...te,props:{...te.props,[J[1]]:K}}:J[0]==="layout"?{...te,layout:{...te.layout,[J[1]]:K}}:te}))},he=I=>{a(r.filter(q=>q.id!==I)),s===I&&i(null)},ce=I=>{const q=r.find(te=>te.id===I);if(!q)return;const K={...q,id:`field_${f}`,ref:q.ref?`${q.ref}_COPY`:void 0,layout:{...q.layout,x:q.layout.x+20,y:q.layout.y+20}};m(f+1),a([...r,K]),i(K.id)},ke=(I,q)=>{const K=r.findIndex(J=>J.id===I);if(K===-1)return;const te=[...r];q==="up"&&K<r.length-1?[te[K],te[K+1]]=[te[K+1],te[K]]:q==="down"&&K>0&&([te[K],te[K-1]]=[te[K-1],te[K]]),a(te)},se=async()=>{if(!e){alert("Aucun ID de fiche trouv");return}try{const I={name:g,fields:r,version:"1.0.0"};await T.mutateAsync({id:e,title:g,template_data:JSON.stringify(I),status:P?.status||"draft",sheet_date:P?.sheet_date||new Date().toISOString()}),j("Fiche sauvegarde avec succs!"),setTimeout(()=>j(null),3e3)}catch(I){console.error("Erreur lors de la sauvegarde:",I),alert("Erreur lors de la sauvegarde de la fiche")}},R=()=>{const q=JSON.stringify({name:g,fields:r,version:"1.0.0"},null,2),K=new Blob([q],{type:"application/json"}),te=URL.createObjectURL(K),J=document.createElement("a");J.href=te,J.download=`${g.toLowerCase().replace(/\s+/g,"-")}.json`,J.click(),URL.revokeObjectURL(te)};return n.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[n.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("input",{type:"text",value:g,onChange:I=>x(I.target.value),className:"text-xl font-bold border-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1"}),n.jsxs("span",{className:"text-sm text-gray-500",children:[r.length," champ(s)"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[y&&n.jsxs("div",{className:"flex items-center gap-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg",children:[n.jsx(oh,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium",children:y})]}),n.jsx("button",{onClick:()=>v(!b),className:`p-2 rounded-lg transition-colors ${b?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,title:"Grille",children:n.jsx(S4,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:se,disabled:T.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Td,{className:"w-5 h-5"}),T.isPending?"Sauvegarde...":"Sauvegarder"]}),n.jsxs("button",{onClick:R,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(ps,{className:"w-5 h-5"}),"Exporter JSON"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>t(`/admin/calculation-sheets/${e}?mode=admin`),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(pi,{className:"w-5 h-5"}),"Voir (Admin)"]}),n.jsxs("button",{onClick:()=>t(`/admin/calculation-sheets/${e}?mode=user`),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(pi,{className:"w-5 h-5"}),"Voir (Utilisateur)"]})]}),n.jsx("button",{onClick:()=>t("/admin/calculation-sheets"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors flex items-center gap-2",children:"Retour  la liste"})]})]}),n.jsxs("div",{className:"flex-1 flex min-h-0",children:[n.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 p-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Composants"}),n.jsx("div",{className:"space-y-2",children:D.map(I=>{const q=I.icon;return n.jsxs("div",{draggable:!0,onDragStart:()=>H(I.type),className:`${I.color} text-white rounded-lg p-3 cursor-move hover:opacity-90 transition-opacity flex items-center gap-2`,children:[n.jsx(q,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:I.label})]},I.type)})}),n.jsxs("div",{className:"mt-6 p-3 bg-blue-50 rounded-lg text-sm text-blue-800",children:[n.jsx("p",{className:"font-medium mb-1",children:" Glisser-dposer"}),n.jsx("p",{className:"text-xs",children:"Faites glisser un composant sur le canvas pour l'ajouter"})]})]}),n.jsx("div",{className:"flex-1 bg-gray-100 overflow-auto p-4 min-w-0",children:n.jsxs("div",{ref:C,onDragOver:z,onDrop:V,onMouseMove:G,onMouseUp:ie,className:"relative bg-white rounded-lg shadow-sm",style:{width:`${S.width}px`,height:`${S.height}px`,backgroundImage:b?"linear-gradient(#e5e7eb 1px, transparent 1px), linear-gradient(90deg, #e5e7eb 1px, transparent 1px)":"none",backgroundSize:b?"20px 20px":"auto"},children:[r.map(I=>{const q=I.id===s,K=D.find(Q=>Q.type===I.type),te=I.type==="frame",J=I.visibility?.hidden;return te?n.jsxs("div",{onMouseDown:Q=>{Q.target.classList.contains("resize-handle")||L(Q,I.id)},onClick:Q=>{Q.stopPropagation(),i(I.id)},className:`absolute border-2 rounded-lg ${J?"opacity-50":""} ${q?"border-orange-500 bg-orange-50/30":"border-orange-300 bg-orange-50/10 hover:border-orange-400"}`,style:{left:I.layout.x,top:I.layout.y,width:I.layout.w,height:I.layout.h},children:[n.jsxs("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-t font-semibold text-sm cursor-move flex items-center justify-between",children:[n.jsx("span",{children:I.props.label||"Cadre"}),J&&n.jsx(Ji,{className:"w-4 h-4"})]}),q&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1",children:[n.jsx("button",{onClick:Q=>{Q.stopPropagation(),ce(I.id)},className:"w-6 h-6 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center",title:"Dupliquer",children:n.jsx(Dl,{className:"w-3 h-3"})}),n.jsx("button",{onClick:Q=>{Q.stopPropagation(),he(I.id)},className:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center",title:"Supprimer",children:n.jsx(Pr,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-orange-500 rounded-full cursor-se-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"se")},title:"Redimensionner"}),n.jsx("div",{className:"resize-handle absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-orange-500 rounded-full cursor-s-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"s")},title:"Redimensionner"}),n.jsx("div",{className:"resize-handle absolute top-1/2 -translate-y-1/2 -right-2 w-4 h-4 bg-orange-500 rounded-full cursor-e-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"e")},title:"Redimensionner"})]})]},I.id):I.type==="link"?n.jsxs("div",{onMouseDown:Q=>{Q.target.classList.contains("resize-handle")||L(Q,I.id)},onClick:Q=>{Q.stopPropagation(),i(I.id)},className:`absolute cursor-move border-2 rounded-lg px-3 py-2 ${J?"opacity-50":""} ${q?"border-cyan-500 bg-cyan-50":"border-cyan-300 bg-white hover:border-cyan-400"}`,style:{left:I.layout.x,top:I.layout.y,width:I.layout.w,height:I.layout.h},children:[n.jsxs("div",{className:"flex items-center gap-2 h-full",children:[n.jsx(xg,{className:"w-4 h-4 text-cyan-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium text-cyan-900 truncate",children:I.props.label||"Lien"}),I.props.url&&n.jsx("div",{className:"text-xs text-cyan-600 truncate",children:I.props.url})]}),J&&n.jsx(Ji,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})]}),q&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1",children:[n.jsx("button",{onClick:Q=>{Q.stopPropagation(),ce(I.id)},className:"w-6 h-6 bg-cyan-500 hover:bg-cyan-600 text-white rounded-full flex items-center justify-center",title:"Dupliquer",children:n.jsx(Dl,{className:"w-3 h-3"})}),n.jsx("button",{onClick:Q=>{Q.stopPropagation(),he(I.id)},className:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center",title:"Supprimer",children:n.jsx(Pr,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-cyan-500 rounded-full cursor-se-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"se")},title:"Redimensionner"}),n.jsx("div",{className:"resize-handle absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-cyan-500 rounded-full cursor-s-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"s")},title:"Redimensionner"}),n.jsx("div",{className:"resize-handle absolute top-1/2 -translate-y-1/2 -right-2 w-4 h-4 bg-cyan-500 rounded-full cursor-e-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"e")},title:"Redimensionner"})]})]},I.id):n.jsxs("div",{onMouseDown:Q=>{Q.target.classList.contains("resize-handle")||L(Q,I.id)},onClick:Q=>{Q.stopPropagation(),i(I.id)},className:`absolute cursor-move border-2 rounded-lg px-3 py-2 ${J?"opacity-50":""} ${q?"border-blue-500 bg-blue-50":"border-gray-300 bg-white hover:border-gray-400"}`,style:{left:I.layout.x,top:I.layout.y,width:I.layout.w,height:I.layout.h},children:[n.jsxs("div",{className:"flex items-center gap-2 h-full",children:[K&&n.jsx(K.icon,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:I.props.label||I.type}),I.ref&&n.jsx("div",{className:"text-xs text-gray-500 truncate",children:I.ref})]}),J&&n.jsx(Ji,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})]}),q&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1",children:[n.jsx("button",{onClick:Q=>{Q.stopPropagation(),ce(I.id)},className:"w-6 h-6 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center",title:"Dupliquer",children:n.jsx(Dl,{className:"w-3 h-3"})}),n.jsx("button",{onClick:Q=>{Q.stopPropagation(),he(I.id)},className:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center",title:"Supprimer",children:n.jsx(Pr,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"se")},title:"Redimensionner"}),n.jsx("div",{className:"resize-handle absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-blue-500 rounded-full cursor-s-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"s")},title:"Redimensionner"}),n.jsx("div",{className:"resize-handle absolute top-1/2 -translate-y-1/2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-e-resize border-2 border-white",onMouseDown:Q=>{Q.stopPropagation(),Z(Q,I.id,"e")},title:"Redimensionner"})]})]},I.id)}),r.length===0&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Jr,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),n.jsx("p",{className:"text-lg font-medium",children:"Glissez des composants ici"}),n.jsx("p",{className:"text-sm mt-1",children:"Commencez par ajouter des champs depuis la barre d'outils"})]})})]})}),n.jsx("div",{className:"w-80 bg-white border-l border-gray-200 flex-shrink-0 overflow-y-auto",children:n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Proprits"}),n.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Taille du Canvas"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Largeur (px)"}),n.jsx("input",{type:"number",value:S.width,onChange:I=>N({...S,width:Math.max(800,parseInt(I.target.value)||1200)}),min:"800",step:"100",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hauteur (px)"}),n.jsx("input",{type:"number",value:S.height,onChange:I=>N({...S,height:Math.max(600,parseInt(I.target.value)||800)}),min:"600",step:"100",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx("button",{onClick:()=>N({width:1200,height:800}),className:"flex-1 px-2 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded text-xs",children:"Standard"}),n.jsx("button",{onClick:()=>N({width:1600,height:1200}),className:"flex-1 px-2 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded text-xs",children:"Large"}),n.jsx("button",{onClick:()=>N({width:2e3,height:1600}),className:"flex-1 px-2 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded text-xs",children:"XL"})]})]}),M?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm font-medium text-gray-900",children:D.find(I=>I.type===M.type)?.label})]}),M.type!=="label"&&M.type!=="frame"&&M.type!=="link"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rfrence"}),n.jsx("input",{type:"text",value:M.ref||"",onChange:I=>X(M.id,"ref",I.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"EX: MONTANT_TOTAL"})]}),M.type==="file"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Types de fichiers accepts"}),n.jsx("input",{type:"text",value:M.props.accept||"",onChange:I=>X(M.id,"props.accept",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:".pdf,.jpg,.png"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sparez par des virgules (ex: .pdf,.jpg,.png)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Taille maximum (MB)"}),n.jsx("input",{type:"number",min:"1",max:"50",value:M.props.maxSize||5,onChange:I=>X(M.id,"props.maxSize",parseInt(I.target.value)||5),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),M.type==="link"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL du lien"}),n.jsx("input",{type:"url",value:M.props.url||"",onChange:I=>X(M.id,"props.url",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Le lien s'ouvrira dans un nouvel onglet"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label"}),n.jsx("input",{type:"text",value:M.props.label||"",onChange:I=>X(M.id,"props.label",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),M.type==="formula"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expression"}),n.jsx("textarea",{value:M.props.expression||"",onChange:I=>X(M.id,"props.expression",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:3,placeholder:"EX: HEURES_REAL*TARIF_H"})]}),(M.type==="number"||M.type==="formula")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dcimales"}),n.jsx("input",{type:"number",min:"0",max:"10",value:M.props.decimals||0,onChange:I=>X(M.id,"props.decimals",parseInt(I.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),M.type==="number"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valeur par dfaut"}),n.jsx("input",{type:"number",step:"0.01",value:typeof M.props.default=="number"||typeof M.props.default=="string"?M.props.default:0,onChange:I=>X(M.id,"props.default",parseFloat(I.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Position & Taille"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"X"}),n.jsx("input",{type:"number",value:M.layout.x,onChange:I=>X(M.id,"layout.x",parseInt(I.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Y"}),n.jsx("input",{type:"number",value:M.layout.y,onChange:I=>X(M.id,"layout.y",parseInt(I.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Largeur"}),n.jsx("input",{type:"number",value:M.layout.w,onChange:I=>X(M.id,"layout.w",parseInt(I.target.value)||50),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hauteur"}),n.jsx("input",{type:"number",value:M.layout.h,onChange:I=>X(M.id,"layout.h",parseInt(I.target.value)||30),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]})]}),n.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Visibilit"}),n.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",children:[n.jsx("input",{type:"checkbox",checked:M.visibility?.hidden||!1,onChange:I=>{const q={...M.visibility,hidden:I.target.checked};X(M.id,"visibility",q)},className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ji,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Masquer pour les professeurs"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ce champ sera invisible dans le mode test et pour les professeurs"})]})]})]}),n.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Actions"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>ke(M.id,"up"),className:"flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm flex items-center justify-center gap-1",children:[n.jsx(iV,{className:"w-4 h-4"}),"Avant"]}),n.jsxs("button",{onClick:()=>ke(M.id,"down"),className:"flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm flex items-center justify-center gap-1",children:[n.jsx(aV,{className:"w-4 h-4"}),"Arrire"]})]})]})]}):n.jsx("div",{className:"text-center py-12 text-gray-400",children:n.jsx("p",{children:"Slectionnez un champ pour voir ses proprits"})})]})})]})]})}const gs={async getAll(e,t,r){const a={};return e&&(a.professor_id=e),t&&(a.filter_by_user="true"),r&&(a.view_all="true"),Ce.get("/declarations",Object.keys(a).length>0?a:void 0)},async getById(e){try{return await Ce.get(`/declarations/${e}`)}catch(t){if(t instanceof Error&&"status"in t&&t.status===404)return null;throw t}},async create(e){return Ce.post("/declarations",e)},async update(e){const{id:t,...r}=e;return Ce.put(`/declarations/${t}`,r)},async delete(e){return Ce.delete(`/declarations/${e}`)}};function Bie(e){return Ft({queryKey:["admin-declarations",e],queryFn:async()=>{const t=await gs.getAll();return e&&e!=="all"?t.filter(r=>r.status===e):t}})}function zie(){const e=Tt();return St({mutationFn:async t=>gs.update({id:t,status:"approuvee"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-declarations"]}),e.invalidateQueries({queryKey:["admin-declaration"]})}})}function fL(){const e=Tt();return St({mutationFn:async({id:t,reason:r})=>gs.update({id:t,status:"refusee",rejection_reason:r}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-declarations"]}),e.invalidateQueries({queryKey:["admin-declaration"]})}})}function Uie(){const e=Tt();return St({mutationFn:async({id:t,reason:r})=>{const a=await gs.getById(t);if(!a)throw new Error("Dclaration non trouve");return gs.update({id:t,form_data:a.form_data,status:"en_cours",rejection_reason:r})},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-declarations"]}),e.invalidateQueries({queryKey:["admin-declaration"]})}})}function qie(e){return Ft({queryKey:["admin-declaration",e],queryFn:()=>gs.getById(e),enabled:!!e})}const hL=Uie;function mL(){const e=Tt();return St({mutationFn:t=>gs.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-declarations"]})}})}function $ie(){return Ft({queryKey:["declaration-stats"],queryFn:async()=>{const e=await gs.getAll();return{total:e.length,soumises:e.filter(t=>t.status==="soumise").length,en_cours:e.filter(t=>t.status==="en_cours").length,approuvees:e.filter(t=>t.status==="approuvee").length,refusees:e.filter(t=>t.status==="refusee").length,brouillon:e.filter(t=>t.status==="brouillon").length,a_declarer:e.filter(t=>t.status==="a_declarer").length}}})}function Hie(){const e=Tt();return St({mutationFn:async t=>gs.update(t),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-declarations"]}),e.invalidateQueries({queryKey:["admin-declaration"]}),e.invalidateQueries({queryKey:["professor-declarations"]})}})}function Vie({declaration:e,onClose:t}){const[r,a]=k.useState({segment_id:e.segment_id,city_id:e.city_id,start_date:e.start_date.split("T")[0],end_date:e.end_date.split("T")[0],status:e.status}),{data:s=[]}=qd(),{data:i=[]}=sv(),l=Hie(),o=i.filter(u=>u.segment_id===r.segment_id);k.useEffect(()=>{r.segment_id&&r.city_id&&(i.find(f=>f.id===r.city_id&&f.segment_id===r.segment_id)||a(f=>({...f,city_id:""})))},[r.segment_id,r.city_id,i]);const d=async u=>{if(u.preventDefault(),!r.segment_id||!r.city_id||!r.start_date||!r.end_date){alert("Veuillez remplir tous les champs obligatoires");return}if(new Date(r.end_date)<new Date(r.start_date)){alert("La date de fin doit tre postrieure  la date de dbut");return}try{await l.mutateAsync({id:e.id,...r}),t()}catch(f){console.error("Erreur lors de la modification:",f),alert("Erreur lors de la modification de la dclaration")}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(Ah,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:"Modifier la dclaration"}),n.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:["Professeur: ",e.professor_name]})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0 ml-2",children:n.jsx(Mr,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),n.jsxs("form",{onSubmit:d,className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segment de formation *"}),n.jsxs("div",{className:"relative",children:[n.jsx(dp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsxs("select",{required:!0,value:r.segment_id,onChange:u=>a({...r,segment_id:u.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[n.jsx("option",{value:"",children:"Slectionnez un segment"}),s.map(u=>n.jsx("option",{value:u.id,children:u.name},u.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsxs("select",{required:!0,value:r.city_id,onChange:u=>a({...r,city_id:u.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",disabled:!r.segment_id,children:[n.jsx("option",{value:"",children:"Slectionnez une ville"}),o.map(u=>n.jsx("option",{value:u.id,children:u.name},u.id))]})]}),!r.segment_id&&n.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Veuillez d'abord slectionner un segment"}),r.segment_id&&o.length===0&&n.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Aucune ville disponible pour ce segment"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de dbut *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",required:!0,value:r.start_date,onChange:u=>a({...r,start_date:u.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",required:!0,value:r.end_date,onChange:u=>a({...r,end_date:u.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut *"}),n.jsxs("div",{className:"relative",children:[n.jsx(qb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsxs("select",{required:!0,value:r.status,onChange:u=>a({...r,status:u.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[n.jsx("option",{value:"brouillon",children:"Brouillon"}),n.jsx("option",{value:"a_declarer",children:" dclarer"}),n.jsx("option",{value:"en_cours",children:"En cours"}),n.jsx("option",{value:"soumise",children:"Soumise"}),n.jsx("option",{value:"approuvee",children:"Approuve"}),n.jsx("option",{value:"refusee",children:"Refuse"})]})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Vous pouvez changer le statut (ex: de brouillon   dclarer)"})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:l.isPending,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l.isPending?"Modification...":"Modifier"})]})]})]})})}const Wie=()=>{const e=$a(),[t,r]=k.useState("all"),[a,s]=k.useState("all"),[i,l]=k.useState("all"),[o,d]=k.useState("all"),[u,f]=k.useState(null),[m,g]=k.useState(""),[x,b]=k.useState(!1),[v,y]=k.useState(!1),[j,S]=k.useState(!1),[N,C]=k.useState(null),{data:T=[],isLoading:P}=Bie(t),{data:D}=$ie(),M=fL(),F=hL(),H=mL(),L=Kr.useMemo(()=>Array.from(new Set(T.map(se=>se.professor_name))).sort(),[T]),z=Kr.useMemo(()=>Array.from(new Set(T.map(se=>se.city_name))).sort(),[T]),V=Kr.useMemo(()=>Array.from(new Set(T.map(se=>se.segment_name))).sort(),[T]),G=Kr.useMemo(()=>T.filter(ke=>!(a!=="all"&&ke.professor_name!==a||i!=="all"&&ke.city_name!==i||o!=="all"&&ke.segment_name!==o)),[T,a,i,o]),ie={brouillon:{label:"Brouillon",color:"bg-gray-100 text-gray-800",bgColor:"bg-gray-50 border-gray-200",hoverColor:"hover:bg-gray-100",icon:Fa},a_declarer:{label:" dclarer",color:"bg-orange-100 text-orange-800",bgColor:"bg-orange-50 border-orange-200",hoverColor:"hover:bg-orange-100",icon:Nr},soumise:{label:"Soumise",color:"bg-blue-100 text-blue-800",bgColor:"bg-blue-50 border-blue-200",hoverColor:"hover:bg-blue-100",icon:na},en_cours:{label:"En cours",color:"bg-yellow-100 text-yellow-800",bgColor:"bg-yellow-50 border-yellow-200",hoverColor:"hover:bg-yellow-100",icon:Nr},approuvee:{label:"Approuve",color:"bg-green-100 text-green-800",bgColor:"bg-green-50 border-green-200",hoverColor:"hover:bg-green-100",icon:Xr},refusee:{label:"Refuse",color:"bg-red-100 text-red-800",bgColor:"bg-red-50 border-red-200",hoverColor:"hover:bg-red-100",icon:fo}},Z=async()=>{if(!u||!m.trim()){alert("Veuillez fournir un motif de refus");return}try{await M.mutateAsync({id:u.id,reason:m}),b(!1),g(""),f(null)}catch(ke){console.error("Error rejecting declaration:",ke),alert("Erreur lors du refus")}},X=async()=>{if(!u||!m.trim()){alert("Veuillez fournir un motif de demande de modification");return}try{await F.mutateAsync({id:u.id,reason:m}),y(!1),g(""),f(null)}catch(ke){console.error("Error requesting modification:",ke),alert("Erreur lors de la demande de modification")}},he=async ke=>{const se=`tes-vous sr de vouloir supprimer cette dclaration de ${ke.professor_name} ?

Cette action est irrversible.`;if(confirm(se))try{await H.mutateAsync(ke.id)}catch(R){console.error("Error deleting declaration:",R),alert("Erreur lors de la suppression de la dclaration")}},ce=ke=>new Date(ke).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return n.jsxs(Ut,{title:"Gestion des Dclarations",subtitle:"Valider, refuser ou demander des modifications",children:[n.jsxs("div",{className:"space-y-6",children:[D&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 mb-6",children:[n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.total}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:D.a_declarer||0}),n.jsx("p",{className:"text-sm text-gray-600",children:" dclarer"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:D.soumises}),n.jsx("p",{className:"text-sm text-gray-600",children:"Soumises"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:D.en_cours}),n.jsx("p",{className:"text-sm text-gray-600",children:"En cours"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:D.approuvees}),n.jsx("p",{className:"text-sm text-gray-600",children:"Approuves"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:D.refusees}),n.jsx("p",{className:"text-sm text-gray-600",children:"Refuses"})]})})})]}),n.jsxs(Or,{className:"mb-6",children:[n.jsx(Ic,{children:n.jsx(Bc,{children:"Filtres"})}),n.jsxs(Fr,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Par statut"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(Ye,{variant:t==="all"?"default":"outline",onClick:()=>r("all"),children:"Toutes"}),n.jsx(Ye,{variant:t==="a_declarer"?"default":"outline",onClick:()=>r("a_declarer"),children:" dclarer"}),n.jsx(Ye,{variant:t==="soumise"?"default":"outline",onClick:()=>r("soumise"),children:"Soumises"}),n.jsx(Ye,{variant:t==="en_cours"?"default":"outline",onClick:()=>r("en_cours"),children:"En cours"}),n.jsx(Ye,{variant:t==="approuvee"?"default":"outline",onClick:()=>r("approuvee"),children:"Approuves"}),n.jsx(Ye,{variant:t==="refusee"?"default":"outline",onClick:()=>r("refusee"),children:"Refuses"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Par professeur"}),n.jsxs("select",{value:a,onChange:ke=>s(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[n.jsx("option",{value:"all",children:"Tous les professeurs"}),L.filter(ke=>ke!==void 0).map(ke=>n.jsx("option",{value:ke,children:ke},ke))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Par ville"}),n.jsxs("select",{value:i,onChange:ke=>l(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[n.jsx("option",{value:"all",children:"Toutes les villes"}),z.filter(ke=>ke!==void 0).map(ke=>n.jsx("option",{value:ke,children:ke},ke))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Par segment"}),n.jsxs("select",{value:o,onChange:ke=>d(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[n.jsx("option",{value:"all",children:"Tous les segments"}),V.filter(ke=>ke!==void 0).map(ke=>n.jsx("option",{value:ke,children:ke},ke))]})]})]})]})]}),n.jsxs(Or,{children:[n.jsx(Ic,{children:n.jsxs(Bc,{children:["Dclarations (",G.length,")"]})}),n.jsx(Fr,{children:P?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Chargement..."})]}):G.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Fa,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-600",children:"Aucune dclaration trouve"})]}):n.jsx("div",{className:"space-y-4",children:G.map(ke=>{const se=ie[ke.status].icon,R=ie[ke.status];return n.jsx("div",{className:`border rounded-lg p-4 transition-all ${R.bgColor} ${R.hoverColor}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:ke.professor_name}),n.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${R.color}`,children:[n.jsx(se,{className:"w-3 h-3"}),R.label]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Segment:"})," ",ke.segment_name]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Ville:"})," ",ke.city_name]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Priode:"})," ",ce(ke.start_date)," - ",ce(ke.end_date)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Soumise le:"})," ",ke.submitted_at?ce(ke.submitted_at):"N/A"]})]}),ke.rejection_reason&&n.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[n.jsx("span",{className:"font-medium",children:"Motif:"})," ",ke.rejection_reason]})]}),n.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>{C(ke),S(!0)},className:"bg-white hover:bg-purple-50 border-purple-300",title:"Modifier les mtadonnes",children:n.jsx(Ah,{className:"w-4 h-4"})}),n.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>e(`/admin/declarations/${ke.id}`),className:"bg-white hover:bg-blue-50 border-blue-300",children:[n.jsx(Bb,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),n.jsx(Ye,{variant:"outline",size:"sm",className:"bg-white text-red-600 hover:bg-red-50 border-red-300",onClick:()=>he(ke),children:n.jsx(Pr,{className:"w-4 h-4"})})]})]})},ke.id)})})})]})]}),u&&!x&&!v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Dtails de la dclaration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Professeur:"})," ",u.professor_name]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Segment:"})," ",u.segment_name]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Ville:"})," ",u.city_name]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Fiche de calcul:"})," ",u.sheet_title]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Priode:"})," ",ce(u.start_date)," - ",ce(u.end_date)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Statut:"})," ",n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ie[u.status].color}`,children:ie[u.status].label})]}),u.form_data&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Donnes du formulaire:"}),n.jsx("pre",{className:"mt-2 p-4 bg-gray-100 rounded text-sm overflow-x-auto",children:JSON.stringify(JSON.parse(u.form_data),null,2)})]})]}),n.jsx("div",{className:"flex justify-end gap-2 mt-6",children:n.jsx(Ye,{variant:"outline",onClick:()=>f(null),children:"Fermer"})})]})})}),x&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Refuser la dclaration"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez fournir un motif de refus pour la dclaration de"," ",n.jsx("strong",{children:u.professor_name})]}),n.jsx("textarea",{value:m,onChange:ke=>g(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:4,placeholder:"Motif du refus..."}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(Ye,{variant:"outline",onClick:()=>{b(!1),g(""),f(null)},children:"Annuler"}),n.jsx(Ye,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:Z,disabled:!m.trim(),children:"Refuser"})]})]})})}),v&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Demander une modification"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez prciser les modifications  apporter pour la dclaration de"," ",n.jsx("strong",{children:u.professor_name})]}),n.jsx("textarea",{value:m,onChange:ke=>g(ke.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",rows:4,placeholder:"Modifications demandes..."}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(Ye,{variant:"outline",onClick:()=>{y(!1),g(""),f(null)},children:"Annuler"}),n.jsx(Ye,{className:"bg-yellow-600 hover:bg-yellow-700 text-white",onClick:X,disabled:!m.trim(),children:"Demander"})]})]})})}),j&&N&&n.jsx(Vie,{declaration:N,onClose:()=>{S(!1),C(null)}})]})};function Kie(){const{user:e,isAdmin:t}=jn();return Ft({queryKey:["professor-declarations",e?.id],queryFn:async()=>{if(!e?.id)return[];const r=await ol.getById(e.id),a=r?.city_ids&&r.city_ids.length>0;return r?.role==="impression"?gs.getAll(void 0,!1,!0):a&&r?.role!=="professor"&&!t?gs.getAll(void 0,!0):gs.getAll(e.id)},enabled:!!e?.id})}function Gie(e){return Ft({queryKey:["professor-declaration",e],queryFn:()=>gs.getById(e),enabled:!!e})}function Yie(){const e=Tt(),{user:t}=jn();return St({mutationFn:async r=>{if(!t?.id)throw new Error("Utilisateur non connect");const a=s0(),s=r.professor_id||t.id;return gs.create({id:a,professor_id:s,calculation_sheet_id:r.calculation_sheet_id,segment_id:r.segment_id,city_id:r.city_id,start_date:r.start_date,end_date:r.end_date,form_data:JSON.stringify(r.form_data||{}),status:r.status})},onSuccess:()=>{e.invalidateQueries({queryKey:["professor-declarations"]})}})}function pL(){const e=Tt();return St({mutationFn:async t=>gs.update({id:t.id,form_data:JSON.stringify(t.form_data)}),onSuccess:()=>{e.invalidateQueries({queryKey:["professor-declarations"]}),e.invalidateQueries({queryKey:["professor-declaration"]})}})}function xL(){const e=Tt();return St({mutationFn:async t=>{const r=await gs.getById(t);if(!r)throw new Error("Dclaration non trouve");return gs.update({id:t,form_data:r.form_data,status:"soumise"})},onSuccess:()=>{e.invalidateQueries({queryKey:["professor-declarations"]}),e.invalidateQueries({queryKey:["professor-declaration"]})}})}function Xie(){const e=Tt();return St({mutationFn:t=>gs.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["professor-declarations"]})}})}function Qie(){return Ft({queryKey:["available-calculation-sheets"],queryFn:async()=>(await qc.getAll()).filter(t=>t.status==="published")})}function Zie(){const{user:e}=jn();return Ft({queryKey:["professor-segments",e?.id],queryFn:async()=>{if(!e?.id)return[];const t=await ol.getById(e.id);return!t||!t.segment_ids?[]:(await i0.getAll()).filter(a=>t.segment_ids?.includes(a.id))},enabled:!!e?.id})}function Jie(){const{user:e}=jn(),t=Ft({queryKey:["professor-cities",e?.id],queryFn:async()=>{if(!e?.id)return[];const r=await ol.getById(e.id);return!r||!r.city_ids?[]:(await Uc.getAll()).filter(s=>r.city_ids?.includes(s.id)).map(s=>({id:s.id,name:s.name,segment_id:s.segment_id,segment_name:s.segment_name}))},enabled:!!e?.id});return{data:t.data,isLoading:t.isLoading}}const ele=({files:e,currentIndex:t,onClose:r,onNavigate:a})=>{const s=e[t];k.useEffect(()=>{const u=f=>{f.key==="Escape"&&r()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[r]),k.useEffect(()=>{const u=f=>{f.key==="ArrowLeft"&&t>0?a(t-1):f.key==="ArrowRight"&&t<e.length-1&&a(t+1)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t,e.length,a]);const i=()=>{try{const u=s.data.split(",")[1],f=s.data.split(",")[0].split(":")[1].split(";")[0],m=atob(u),g=new ArrayBuffer(m.length),x=new Uint8Array(g);for(let j=0;j<m.length;j++)x[j]=m.charCodeAt(j);const b=new Blob([g],{type:f}),v=URL.createObjectURL(b),y=document.createElement("a");y.href=v,y.download=s.name,y.click(),URL.revokeObjectURL(v)}catch(u){console.error("Erreur lors du tlchargement:",u),alert("Erreur lors du tlchargement du fichier")}},l=u=>u<1024?`${u} B`:u<1024*1024?`${(u/1024).toFixed(2)} KB`:`${(u/(1024*1024)).toFixed(2)} MB`,o=s.type.startsWith("image/"),d=s.type==="application/pdf";return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4",onClick:r,children:n.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] flex flex-col",onClick:u=>u.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50 rounded-t-lg",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:[l(s.size),"  ",s.type]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Tlcharger",children:[n.jsx(ps,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Tlcharger"})]}),n.jsx("button",{onClick:r,className:"p-2 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",title:"Fermer (chap)",children:n.jsx(Mr,{className:"w-5 h-5"})})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-6 bg-gray-100",children:o?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("img",{src:s.data,alt:s.name,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"})}):d?n.jsx("iframe",{src:s.data,className:"w-full h-full min-h-[600px] rounded-lg shadow-lg",title:s.name}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(Fa,{className:"w-24 h-24 text-gray-400 mb-4"}),n.jsx("h4",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Prvisualisation non disponible"}),n.jsxs("p",{className:"text-gray-500 mb-6",children:["Ce type de fichier ne peut pas tre prvisualis.",n.jsx("br",{}),`Cliquez sur "Tlcharger" pour l'ouvrir sur votre ordinateur.`]}),n.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(ps,{className:"w-4 h-4"}),"Tlcharger le fichier"]})]})}),e.length>1&&n.jsxs("div",{className:"flex items-center justify-between p-4 border-t bg-gray-50",children:[n.jsxs("button",{onClick:()=>a(t-1),disabled:t===0,className:"flex items-center gap-2 px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(N4,{className:"w-4 h-4"}),"Prcdent"]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[t+1," / ",e.length]}),n.jsxs("button",{onClick:()=>a(t+1),disabled:t===e.length-1,className:"flex items-center gap-2 px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Suivant",n.jsx(rl,{className:"w-4 h-4"})]})]})]})})},tle=()=>{const{id:e}=xo(),t=$a(),{data:r,isLoading:a}=qie(e),s=zie(),i=fL(),l=hL(),o=pL(),d=mL(),[u,f]=k.useState([]),[m,g]=k.useState({}),[x,b]=k.useState({}),[v,y]=k.useState({width:1200,height:800}),[j,S]=k.useState(!1),[N,C]=k.useState(!1),[T,P]=k.useState(""),[D,M]=k.useState(null),[F,H]=k.useState(!1),[L,z]=k.useState([]),[V,G]=k.useState(0);k.useEffect(()=>{if(r?.template_data)try{const I=JSON.parse(r.template_data);I.fields&&I.fields.length>0&&f(I.fields),I.canvasSize&&y(I.canvasSize)}catch(I){console.error("Error parsing template:",I)}if(r?.form_data)try{const I=JSON.parse(r.form_data);g(I)}catch(I){console.error("Error parsing form data:",I)}},[r]),k.useEffect(()=>{const I=m3(u,m);b(I)},[m,u]);const ie=(I,q)=>{const K=u.find(J=>J.ref===I);if(!K)return;let te=q;K.type==="number"&&(te=q===""?0:parseFloat(q)||0),g(J=>({...J,[I]:te}))},Z=async()=>{if(e)try{await o.mutateAsync({id:e,form_data:m}),M("Modifications sauvegardes avec succs!"),setTimeout(()=>M(null),3e3)}catch(I){console.error("Error saving declaration:",I),alert("Erreur lors de la sauvegarde")}},X=async()=>{if(confirm("Voulez-vous vraiment approuver cette dclaration ?"))try{await s.mutateAsync(e),t("/admin/declarations")}catch(I){console.error("Error approving declaration:",I),alert("Erreur lors de l'approbation")}},he=async()=>{if(!T.trim()){alert("Veuillez fournir un motif de refus");return}try{await i.mutateAsync({id:e,reason:T}),t("/admin/declarations")}catch(I){console.error("Error rejecting declaration:",I),alert("Erreur lors du refus")}},ce=async()=>{if(!T.trim()){alert("Veuillez fournir un motif de demande de modification");return}try{await l.mutateAsync({id:e,reason:T}),t("/admin/declarations")}catch(I){console.error("Error requesting modification:",I),alert("Erreur lors de la demande de modification")}},ke=async()=>{const I=`tes-vous sr de vouloir supprimer cette dclaration de ${r?.professor_name} ?

Cette action est irrversible.`;if(confirm(I))try{await d.mutateAsync(e),t("/admin/declarations")}catch(q){console.error("Error deleting declaration:",q),alert("Erreur lors de la suppression de la dclaration")}},se=I=>{const q=I.layout||{x:0,y:0,w:200,h:40},K=I.visibility?.hidden===!0,te=Q=>K?`${Q} ring-2 ring-red-400 ring-offset-2`:Q,J=()=>K?n.jsx("div",{className:"absolute -top-2 -right-2 z-10 px-2 py-0.5 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg",children:"ADMIN"}):null;if(I.type==="label")return n.jsxs("div",{className:"absolute",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsx("div",{className:te("w-full h-full bg-gray-100 border-2 border-gray-300 rounded px-3 py-2 flex items-center font-semibold text-gray-700"),children:I.props.label}),n.jsx(J,{})]},I.id);if(I.type==="text"){const Q=m[I.ref],ne=typeof Q=="string"||typeof Q=="number"?String(Q):"";return n.jsxs("div",{className:"absolute",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsx("input",{type:"text",value:ne,onChange:ye=>ie(I.ref,ye.target.value),className:te("w-full h-full px-3 py-2 border border-blue-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent")}),n.jsx(J,{})]},I.id)}if(I.type==="textarea"){const Q=m[I.ref],ne=typeof Q=="string"||typeof Q=="number"?String(Q):"";return n.jsxs("div",{className:"absolute",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsx("textarea",{value:ne,onChange:ye=>ie(I.ref,ye.target.value),placeholder:I.props.label||"crivez vos commentaires ici...",className:te("w-full h-full px-3 py-2 border-2 border-indigo-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none")}),n.jsx(J,{})]},I.id)}if(I.type==="number"){const Q=m[I.ref]!==void 0?m[I.ref]:I.props.default||0,ne=typeof Q=="number"||typeof Q=="string"?Q:"";return n.jsxs("div",{className:"absolute",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsx("input",{type:"number",step:"0.01",value:ne,onChange:ye=>ie(I.ref,ye.target.value),className:te("w-full h-full px-3 py-2 border border-green-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent")}),n.jsx(J,{})]},I.id)}if(I.type==="formula"){const Q=x[I.ref],ne=typeof Q=="string"&&Q.startsWith("#");return n.jsxs("div",{className:"absolute flex items-center",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsx("div",{className:te(`w-full h-full px-3 py-2 border-2 rounded font-semibold flex items-center ${ne?"bg-red-50 border-red-400 text-red-700":"bg-purple-50 border-purple-400 text-purple-900"}`),children:typeof Q=="number"?Q.toFixed(I.props.decimals||2):String(Q||"0")}),n.jsx(J,{})]},I.id)}if(I.type==="frame")return n.jsxs("div",{className:"absolute",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsx("div",{className:te("w-full h-full border-2 border-orange-400 rounded-lg bg-orange-50/30"),children:n.jsx("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-t font-semibold text-sm",children:I.props.label||"Cadre"})}),n.jsx(J,{})]},I.id);if(I.type==="file"){const Q=m[I.ref],ne=Q&&Array.isArray(Q)&&Q.length>0,ye=Je=>Je<1024?`${Je} B`:Je<1024*1024?`${(Je/1024).toFixed(2)} KB`:`${(Je/(1024*1024)).toFixed(2)} MB`,De=Je=>{try{const Oe=Je.data.split(",")[1],ve=Je.data.split(",")[0].split(":")[1].split(";")[0],pt=atob(Oe),et=new ArrayBuffer(pt.length),Nt=new Uint8Array(et);for(let Te=0;Te<pt.length;Te++)Nt[Te]=pt.charCodeAt(Te);const ot=new Blob([et],{type:ve}),Ie=URL.createObjectURL(ot),ge=document.createElement("a");ge.href=Ie,ge.download=Je.name,ge.click(),URL.revokeObjectURL(Ie)}catch(Oe){console.error("Erreur lors du tlchargement:",Oe),alert("Erreur lors du tlchargement du fichier")}},ee=Je=>{z(Q),G(Je),H(!0)};return n.jsxs("div",{className:"absolute",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsxs("div",{className:te("w-full h-full border-2 border-dashed border-teal-300 bg-teal-50/50 rounded px-3 py-2 overflow-y-auto"),children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Fa,{className:"w-5 h-5 text-teal-600"}),n.jsxs("span",{className:"text-sm font-medium text-teal-700",children:[I.props.label||"Pices jointes"," (",ne?Q.length:0,")"]})]}),ne?n.jsx("div",{className:"space-y-2",children:Q.map((Je,Oe)=>{const pt=Je.type.startsWith("image/")?Qx:Fa;return n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-teal-200 hover:border-teal-400 transition-colors",children:[n.jsx(pt,{className:"w-4 h-4 text-teal-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs font-medium text-teal-900 truncate",children:Je.name}),n.jsx("div",{className:"text-xs text-teal-600",children:ye(Je.size)})]}),n.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[n.jsx("button",{onClick:()=>ee(Oe),className:"p-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",title:"Voir",children:n.jsx(pi,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>De(Je),className:"p-1.5 bg-teal-100 hover:bg-teal-200 text-teal-700 rounded transition-colors",title:"Tlcharger",children:n.jsx(ps,{className:"w-3.5 h-3.5"})})]})]},Oe)})}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx(Fa,{className:"w-8 h-8 text-teal-300 mx-auto mb-2"}),n.jsx("span",{className:"text-xs text-teal-500 italic",children:"Aucune pice jointe"})]})]}),n.jsx(J,{})]},I.id)}if(I.type==="link"){const Q=m[I.ref]||"",ne=Q&&Q.trim()!==""&&(Q.startsWith("http://")||Q.startsWith("https://"));return n.jsxs("div",{className:"absolute",style:{left:`${q.x}px`,top:`${q.y}px`,width:`${q.w}px`,height:`${q.h}px`},children:[n.jsxs("div",{className:te("w-full h-full border-2 border-cyan-400 bg-cyan-50 rounded px-3 py-2 flex items-center gap-2"),children:[n.jsx(xg,{className:"w-5 h-5 text-cyan-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs font-medium text-cyan-700 mb-1",children:I.props.label||"Lien"}),ne?n.jsx("a",{href:Q,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-cyan-900 hover:text-cyan-700 underline truncate block",children:Q}):n.jsx("span",{className:"text-sm text-gray-400 italic",children:"Aucun lien fourni"})]}),ne&&n.jsx("a",{href:Q,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded transition-colors flex-shrink-0",title:"Ouvrir le lien",children:n.jsx(Bb,{className:"w-4 h-4"})})]}),n.jsx(J,{})]},I.id)}return null},R={brouillon:{label:"Brouillon",color:"bg-gray-100 text-gray-800"},soumise:{label:"Soumise",color:"bg-blue-100 text-blue-800"},en_cours:{label:"En cours",color:"bg-yellow-100 text-yellow-800"},approuvee:{label:"Approuve",color:"bg-green-100 text-green-800"},refusee:{label:"Refuse",color:"bg-red-100 text-red-800"}};return a?n.jsx(Ut,{title:"Visualisation Dclaration",subtitle:"Chargement en cours...",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})})}):r?n.jsx(Ut,{title:r.sheet_title,subtitle:`${r.professor_name}  ${r.segment_name}  ${r.city_name}  Du ${new Date(r.start_date).toLocaleDateString("fr-FR")} au ${new Date(r.end_date).toLocaleDateString("fr-FR")}`,children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${R[r.status].color}`,children:R[r.status].label}),n.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium flex items-center gap-1",children:[n.jsx(pi,{className:"w-3 h-3"}),"Mode Admin"]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[D&&n.jsx("div",{className:"flex items-center gap-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg",children:n.jsx("span",{className:"text-sm font-medium",children:D})}),n.jsxs(Ye,{variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:ke,children:[n.jsx(Pr,{className:"w-4 h-4 mr-2"}),"Supprimer"]}),n.jsxs(Ye,{variant:"outline",onClick:Z,disabled:o.isPending,children:[n.jsx(Td,{className:"w-4 h-4 mr-2"}),"Sauvegarder"]}),r.status==="soumise"&&n.jsxs(n.Fragment,{children:[n.jsxs(Ye,{variant:"outline",className:"text-green-600 hover:bg-green-50",onClick:X,children:[n.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Approuver"]}),n.jsxs(Ye,{variant:"outline",className:"text-yellow-600 hover:bg-yellow-50",onClick:()=>C(!0),children:[n.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Demander modification"]}),n.jsxs(Ye,{variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>S(!0),children:[n.jsx(fo,{className:"w-4 h-4 mr-2"}),"Refuser"]})]})]})]}),r.rejection_reason&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-6 py-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-red-800",children:r.status==="refusee"?"Dclaration refuse":"Modifications demandes"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:r.rejection_reason})]})]})}),n.jsx("div",{children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-auto",children:n.jsx("div",{className:"relative bg-white",style:{width:`${v.width}px`,minHeight:`${v.height}px`},children:u.map(I=>se(I))})})}),j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Refuser la dclaration"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez fournir un motif de refus pour la dclaration de"," ",n.jsx("strong",{children:r.professor_name})]}),n.jsx("textarea",{value:T,onChange:I=>P(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:4,placeholder:"Motif du refus..."}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(Ye,{variant:"outline",onClick:()=>{S(!1),P("")},children:"Annuler"}),n.jsx(Ye,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:he,disabled:!T.trim(),children:"Refuser"})]})]})})}),N&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Demander une modification"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez prciser les modifications  apporter pour la dclaration de"," ",n.jsx("strong",{children:r.professor_name})]}),n.jsx("textarea",{value:T,onChange:I=>P(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",rows:4,placeholder:"Modifications demandes..."}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(Ye,{variant:"outline",onClick:()=>{C(!1),P("")},children:"Annuler"}),n.jsx(Ye,{className:"bg-yellow-600 hover:bg-yellow-700 text-white",onClick:ce,disabled:!T.trim(),children:"Demander"})]})]})})}),F&&L.length>0&&n.jsx(ele,{files:L,currentIndex:V,onClose:()=>H(!1),onNavigate:I=>G(I)})]})}):n.jsx(Ut,{title:"Visualisation Dclaration",subtitle:"Mode administrateur",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600",children:"Dclaration introuvable"}),n.jsx(Ye,{onClick:()=>t("/admin/declarations"),className:"mt-4",children:"Retour"})]})})})},rle={brouillon:{label:"Brouillon",color:"bg-gray-100 text-gray-800 border-gray-300",icon:Fa},a_declarer:{label:" dclarer",color:"bg-orange-100 text-orange-800 border-orange-300",icon:Nr},soumise:{label:"Soumise",color:"bg-blue-100 text-blue-800 border-blue-300",icon:na},en_cours:{label:"En cours",color:"bg-yellow-100 text-yellow-800 border-yellow-300",icon:Nr},approuvee:{label:"Approuve",color:"bg-green-100 text-green-800 border-green-300",icon:VF},refusee:{label:"Refuse",color:"bg-red-100 text-red-800 border-red-300",icon:fo}},p3=({status:e,className:t=""})=>{const r=rle[e],a=r.icon;return n.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium border ${r.color} ${t}`,children:[n.jsx(a,{className:"w-3.5 h-3.5"}),r.label]})},ale=({onClose:e})=>{const t=$a(),r=Yie(),{data:a}=Qie(),{user:s}=jn(),i=s?.role==="impression",{data:l=[]}=Ft({queryKey:["all-profiles"],queryFn:()=>ol.getAll(),enabled:i}),o=l.filter(V=>V.id!==s?.id&&(V.role==="professor"||V.segment_ids&&V.segment_ids.length>0)),{data:d=[],isLoading:u}=Zie(),{data:f=[],isLoading:m}=Jie(),[g,x]=k.useState([]),[b,v]=k.useState([]),[y,j]=k.useState(""),[S,N]=k.useState(""),[C,T]=k.useState(""),[P,D]=k.useState(""),[M,F]=k.useState(""),[H,L]=k.useState("");k.useEffect(()=>{if(S){const V=f.filter(G=>G.segment_id===S);x(V),C&&!V.find(G=>G.id===C)&&T("")}else x([]),T("")},[S,f,C]),k.useEffect(()=>{if(i&&S&&C){const V=o.filter(G=>G.segment_ids?.includes(S)&&G.city_ids?.includes(C));v(V),V.length===1?j(V[0].id):(V.length===0||!V.find(G=>G.id===y))&&j("")}else v([]),i&&j("")},[S,C,o,i,y]);const z=async V=>{if(V.preventDefault(),L(""),!S||!C||!P||!M){L("Veuillez remplir tous les champs");return}if(i&&!y){L("Veuillez slectionner un professeur");return}if(i&&b.length===0){L("Aucun professeur n'est assign  ce segment et cette ville");return}if(new Date(M)<=new Date(P)){L("La date de fin doit tre postrieure  la date de dbut");return}const G=a?.find(ie=>ie.segment_ids?.includes(S)&&ie.city_ids?.includes(C));if(!G){L("Aucune fiche de calcul publie n'existe pour ce segment et cette ville");return}try{const ie=await r.mutateAsync({calculation_sheet_id:G.id,segment_id:S,city_id:C,start_date:P,end_date:M,form_data:{},professor_id:i?y:void 0,status:i?"a_declarer":void 0});i?e():t(`/professor/declarations/${ie.id}/fill`)}catch(ie){console.error("Error creating declaration:",ie),L("Erreur lors de la cration de la dclaration")}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nouvelle Dclaration"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[(u||m)&&n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-gray-600",children:"Chargement..."})}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Segment ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:S,onChange:V=>N(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",required:!0,disabled:u,children:[n.jsx("option",{value:"",children:"Slectionner un segment"}),d.map(V=>n.jsx("option",{value:V.id,children:V.name},V.id))]}),!u&&d.length===0&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Aucun segment affect  votre compte"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ville ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:C,onChange:V=>T(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",required:!0,disabled:!S||m,children:[n.jsx("option",{value:"",children:"Slectionner une ville"}),g.map(V=>n.jsx("option",{value:V.id,children:V.name},V.id))]}),!m&&f.length===0&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Aucune ville affecte  votre compte"}),S&&g.length===0&&f.length>0&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aucune ville disponible pour ce segment"})]}),i&&S&&C&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Professeur ",n.jsx("span",{className:"text-red-500",children:"*"})]}),b.length===0?n.jsx("p",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-lg",children:"Aucun professeur trouv pour ce segment et cette ville"}):b.length===1?n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Professeur slectionn automatiquement :"}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:b[0].full_name})]}):n.jsxs("select",{value:y,onChange:V=>j(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsxs("option",{value:"",children:["Slectionner un professeur (",b.length," disponibles)"]}),b.map(V=>n.jsx("option",{value:V.id,children:V.full_name},V.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de dbut ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:P,onChange:V=>D(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de fin ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:M,onChange:V=>F(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:P})]}),H&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:H})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:r.isPending,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed",children:r.isPending?"Cration...":"Crer"})]})]})]})})},nle=()=>{const{data:e,isLoading:t}=Kie(),r=Xie(),a=xL(),{user:s}=jn(),i=s?.role==="impression",[l,o]=k.useState(!1),d=async m=>{if(window.confirm("tes-vous sr de vouloir supprimer cette dclaration ?"))try{await r.mutateAsync(m)}catch(g){console.error("Error deleting declaration:",g),alert("Erreur lors de la suppression de la dclaration")}},u=async m=>{if(window.confirm("Voulez-vous soumettre cette dclaration pour validation ?"))try{await a.mutateAsync(m)}catch(g){console.error("Error submitting declaration:",g),alert("Erreur lors de la soumission de la dclaration")}},f=m=>new Date(m).toLocaleDateString("fr-FR");return t?n.jsx(Ut,{title:"Mes Dclarations",subtitle:"Grez vos dclarations de sessions",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Chargement des dclarations..."})]})})}):n.jsxs(Ut,{title:"Mes Dclarations",subtitle:"Grez vos dclarations de sessions",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(Jr,{className:"w-5 h-5"}),"Nouvelle Dclaration"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e?.length||0})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" modifier"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:e?.filter(m=>m.status==="en_cours").length||0})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" dclarer"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:e?.filter(m=>m.status==="a_declarer").length||0})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Brouillons"}),n.jsx("p",{className:"text-2xl font-bold text-gray-500",children:e?.filter(m=>m.status==="brouillon").length||0})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Soumises"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e?.filter(m=>m.status==="soumise").length||0})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Approuves"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:e?.filter(m=>m.status==="approuvee").length||0})]})]}),!e||e.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(Fa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Aucune dclaration"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par crer votre premire dclaration"}),n.jsxs("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[n.jsx(Jr,{className:"w-5 h-5"}),"Nouvelle Dclaration"]})]}):n.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[i&&n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Professeur"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ville"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Dbut"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Fin"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),!i&&n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(m=>n.jsxs(Kr.Fragment,{children:[n.jsxs("tr",{className:"hover:bg-gray-50",children:[i&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.professor_name||"N/A"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.segment_name})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:m.city_name})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:f(m.start_date)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:f(m.end_date)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(p3,{status:m.status})}),!i&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(Ml,{to:`/professor/declarations/${m.id}/fill`,className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded transition-colors",title:m.status==="brouillon"||m.status==="refusee"||m.status==="a_declarer"||m.status==="en_cours"?"Remplir":"Voir",children:m.status==="brouillon"||m.status==="refusee"||m.status==="a_declarer"||m.status==="en_cours"?n.jsx(Ah,{className:"w-4 h-4"}):n.jsx(pi,{className:"w-4 h-4"})}),(m.status==="brouillon"||m.status==="a_declarer"||m.status==="en_cours")&&n.jsx("button",{onClick:()=>u(m.id),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded transition-colors",title:"Soumettre",children:n.jsx(Xm,{className:"w-4 h-4"})}),m.status==="brouillon"&&n.jsx("button",{onClick:()=>d(m.id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded transition-colors",title:"Supprimer",disabled:r.isPending,children:n.jsx(Pr,{className:"w-4 h-4"})})]})})]}),m.status==="en_cours"&&m.rejection_reason&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-6 py-3 bg-yellow-50 border-l-4 border-yellow-400",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Modifications demandes par l'administrateur"}),n.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:m.rejection_reason})]})]})})})]},m.id))})]})})})]}),l&&n.jsx(ale,{onClose:()=>o(!1)})]})},sle=()=>{const{id:e}=xo(),t=$a(),{data:r,isLoading:a}=Gie(e||""),s=pL(),i=xL(),[l,o]=k.useState([]),[d,u]=k.useState({}),[f,m]=k.useState({}),[g,x]=k.useState(null),[b,v]=k.useState({width:1200,height:800}),y=r?.status!=="brouillon"&&r?.status!=="refusee"&&r?.status!=="en_cours"&&r?.status!=="a_declarer";k.useEffect(()=>{if(r?.template_data)try{const M=JSON.parse(r.template_data);M.fields&&M.fields.length>0&&o(M.fields),M.canvasSize&&v(M.canvasSize)}catch(M){console.error("Error parsing template:",M)}if(r?.form_data)try{const M=JSON.parse(r.form_data);u(M)}catch(M){console.error("Error parsing form data:",M)}},[r]),k.useEffect(()=>{const M=m3(l,d);m(M)},[d,l]);const j=(M,F)=>{const H=l.find(z=>z.ref===M);if(!H)return;let L=F;H.type==="number"&&(L=F===""?0:parseFloat(F)||0),u(z=>({...z,[M]:L}))},S=M=>new Promise((F,H)=>{const L=new FileReader;L.readAsDataURL(M),L.onload=()=>F(L.result),L.onerror=z=>H(z)}),N=async(M,F)=>{if(!F){u(H=>({...H,[M]:[]}));return}try{const H=await S(F),L={name:F.name,size:F.size,type:F.type,data:H,uploadedAt:new Date().toISOString()};u(z=>{const V=Array.isArray(z[M])?z[M]:[];return{...z,[M]:[...V,L]}})}catch(H){console.error("Error converting file to base64:",H),alert("Erreur lors du traitement du fichier")}},C=(M,F)=>{u(H=>{const z=(Array.isArray(H[M])?H[M]:[]).filter((V,G)=>G!==F);return{...H,[M]:z}})},T=async()=>{if(e)try{await s.mutateAsync({id:e,form_data:d}),x("Brouillon sauvegard avec succs!"),setTimeout(()=>x(null),3e3)}catch(M){console.error("Error saving declaration:",M),alert("Erreur lors de la sauvegarde")}},P=async()=>{if(e&&window.confirm("Voulez-vous soumettre cette dclaration pour validation ? Vous ne pourrez plus la modifier aprs soumission."))try{await s.mutateAsync({id:e,form_data:d}),await i.mutateAsync(e),t("/professor/declarations")}catch(M){console.error("Error submitting declaration:",M),alert("Erreur lors de la soumission")}},D=M=>{const F=M.layout||{x:0,y:0,w:200,h:40};if(M.visibility?.hidden)return null;if(M.type==="label")return n.jsx("div",{className:"absolute bg-gray-100 border-2 border-gray-300 rounded px-3 py-2 flex items-center font-semibold text-gray-700",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:M.props.label},M.id);if(M.type==="text"){const H=d[M.ref],L=typeof H=="string"||typeof H=="number"?String(H):"";return n.jsx("div",{className:"absolute",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:n.jsx("input",{type:"text",value:L,onChange:z=>j(M.ref,z.target.value),className:"w-full h-full px-3 py-2 border border-blue-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:y})},M.id)}if(M.type==="textarea"){const H=d[M.ref],L=typeof H=="string"||typeof H=="number"?String(H):"";return n.jsx("div",{className:"absolute",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:n.jsx("textarea",{value:L,onChange:z=>j(M.ref,z.target.value),placeholder:M.props.label||"crivez vos commentaires ici...",className:"w-full h-full px-3 py-2 border-2 border-indigo-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:y})},M.id)}if(M.type==="number"){const H=d[M.ref]!==void 0?d[M.ref]:M.props.default||0,L=typeof H=="number"||typeof H=="string"?H:"";return n.jsx("div",{className:"absolute",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:n.jsx("input",{type:"number",step:"0.01",value:L,onChange:z=>j(M.ref,z.target.value),className:"w-full h-full px-3 py-2 border border-green-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:y})},M.id)}if(M.type==="formula"){const H=f[M.ref],L=typeof H=="string"&&H.startsWith("#");return n.jsx("div",{className:"absolute flex items-center",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:n.jsx("div",{className:`w-full h-full px-3 py-2 border-2 rounded font-semibold flex items-center ${L?"bg-red-50 border-red-400 text-red-700":"bg-purple-50 border-purple-400 text-purple-900"}`,children:typeof H=="number"?H.toFixed(M.props.decimals||2):String(H||"0")})},M.id)}if(M.type==="frame")return n.jsx("div",{className:"absolute border-2 border-orange-400 rounded-lg bg-orange-50/30",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:n.jsx("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-t font-semibold text-sm",children:M.props.label||"Cadre"})},M.id);if(M.type==="file"){const H=Array.isArray(d[M.ref])?d[M.ref]:[],L=H&&H.length>0;return n.jsx("div",{className:"absolute",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:n.jsxs("div",{className:"w-full h-full border-2 border-teal-400 bg-teal-50 rounded px-3 py-2 flex flex-col gap-2 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fa,{className:"w-5 h-5 text-teal-600"}),n.jsxs("span",{className:"text-sm font-medium text-teal-900",children:[M.props.label||"Pices jointes"," (",H.length,")"]})]}),!y&&n.jsxs("label",{className:"cursor-pointer px-2 py-1 bg-teal-600 hover:bg-teal-700 text-white rounded text-xs font-medium transition-colors",children:["+ Ajouter",n.jsx("input",{type:"file",accept:M.props.accept,onChange:z=>{const V=z.target.files?.[0];if(V){const G=(M.props.maxSize||5)*1024*1024;if(V.size>G){alert(`Le fichier est trop volumineux. Taille maximum: ${M.props.maxSize||5} MB`);return}N(M.ref,V)}z.target.value=""},className:"hidden"})]})]}),L?n.jsx("div",{className:"space-y-1 flex-1 overflow-y-auto",children:H.map((z,V)=>n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 bg-white rounded border border-teal-200",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs font-medium text-teal-900 truncate",children:z.name}),n.jsxs("div",{className:"text-xs text-teal-600",children:[(z.size/1024/1024).toFixed(2)," MB"]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>{const G=atob(z.data.split(",")[1]),ie=z.data.split(",")[0].split(":")[1].split(";")[0],Z=new ArrayBuffer(G.length),X=new Uint8Array(Z);for(let se=0;se<G.length;se++)X[se]=G.charCodeAt(se);const he=new Blob([Z],{type:ie}),ce=URL.createObjectURL(he),ke=document.createElement("a");ke.href=ce,ke.download=z.name,ke.click(),URL.revokeObjectURL(ce)},className:"p-1 hover:bg-teal-200 rounded transition-colors",title:"Tlcharger",children:n.jsx(ps,{className:"w-3 h-3 text-teal-700"})}),!y&&n.jsx("button",{onClick:()=>C(M.ref,V),className:"p-1 hover:bg-red-200 rounded transition-colors",title:"Supprimer",children:n.jsx(Mr,{className:"w-3 h-3 text-red-600"})})]})]},V))}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center opacity-60",children:[n.jsx(zc,{className:"w-8 h-8 text-teal-600 mb-2"}),n.jsx("span",{className:"text-xs text-teal-700",children:"Aucune pice jointe"}),n.jsxs("span",{className:"text-xs text-teal-600 mt-1",children:[M.props.accept||"Tous fichiers"," (max ",M.props.maxSize||5," MB)"]})]})]})},M.id)}if(M.type==="link"){const H=d[M.ref]||"",L=H&&H.trim()!==""&&(H.startsWith("http://")||H.startsWith("https://"));return n.jsx("div",{className:"absolute",style:{left:`${F.x}px`,top:`${F.y}px`,width:`${F.w}px`,height:`${F.h}px`},children:n.jsxs("div",{className:"w-full h-full border-2 border-cyan-400 bg-cyan-50 rounded px-3 py-2 flex items-center gap-2",children:[n.jsx(xg,{className:"w-5 h-5 text-cyan-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("label",{className:"block text-xs font-medium text-cyan-700 mb-1",children:M.props.label||"Lien"}),n.jsx("input",{type:"url",value:H,onChange:z=>j(M.ref,z.target.value),disabled:y,placeholder:"https://exemple.com",className:`w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-cyan-500 ${y?"bg-gray-100 border-gray-300 text-gray-600 cursor-not-allowed":"bg-white border-cyan-300 text-cyan-900"}`})]}),L&&n.jsx("button",{onClick:()=>window.open(H,"_blank","noopener,noreferrer"),className:"p-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded transition-colors flex-shrink-0",title:"Ouvrir le lien",children:n.jsx(Bb,{className:"w-4 h-4"})})]})},M.id)}return null};return a?n.jsx(Ut,{title:"Dclaration",subtitle:"Chargement en cours...",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Chargement de la dclaration..."})]})})}):r?n.jsx(Ut,{title:r.sheet_title,subtitle:`${r.segment_name}  ${r.city_name}  Du ${new Date(r.start_date).toLocaleDateString("fr-FR")} au ${new Date(r.end_date).toLocaleDateString("fr-FR")}`,children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(p3,{status:r.status}),y&&n.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium flex items-center gap-1",children:[n.jsx(Ji,{className:"w-3 h-3"}),"Lecture seule"]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[g&&n.jsx("div",{className:"flex items-center gap-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg",children:n.jsx("span",{className:"text-sm font-medium",children:g})}),!y&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:T,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors flex items-center gap-2",disabled:s.isPending,children:[n.jsx(Td,{className:"w-5 h-5"}),"Sauvegarder"]}),n.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2",disabled:i.isPending,children:[n.jsx(Xm,{className:"w-5 h-5"}),"Soumettre"]})]})]})]}),r.status==="a_declarer"&&n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg px-6 py-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-orange-800",children:"Fiche assigne par un grant"}),n.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"Cette fiche de session vous a t assigne. Veuillez la remplir et la soumettre."})]})]})}),r.rejection_reason&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-6 py-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-red-800",children:"Dclaration refuse"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:r.rejection_reason})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-auto",children:n.jsx("div",{className:"relative bg-white",style:{width:`${b.width}px`,minHeight:`${b.height}px`},children:l.map(M=>D(M))})})]})}):n.jsx(Ut,{title:"Dclaration",subtitle:"Formulaire de dclaration",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Nr,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Dclaration introuvable"}),n.jsx(Ml,{to:"/professor/declarations",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retour  la liste"})]})})})};function ile(){const{user:e,isAdmin:t}=jn();return Ft({queryKey:["gerant-segments",e?.id],queryFn:async()=>{if(!e?.id)return[];const r=await i0.getAll();if(t)return r;const a=await ol.getById(e.id);return!a||!a.segment_ids?[]:r.filter(s=>a.segment_ids?.includes(s.id))},enabled:!!e?.id})}function lle(){const{user:e,isAdmin:t}=jn();return Ft({queryKey:["gerant-cities",e?.id],queryFn:async()=>{if(!e?.id)return[];const r=await Uc.getAll();if(t)return r;const a=await ol.getById(e.id);return!a||!a.city_ids?[]:r.filter(s=>a.city_ids?.includes(s.id))},enabled:!!e?.id})}function ole(){const{user:e}=jn();return Ft({queryKey:["gerant-declarations",e?.id],queryFn:async()=>await gs.getAll(void 0,!0),enabled:!!e?.id})}function cle(e,t){return Ft({queryKey:["professors-by-segment-city",e,t],queryFn:async()=>(await ol.getAll()).filter(s=>s.role==="professor").filter(s=>!(e&&!s.segment_ids?.includes(e)||t&&!s.city_ids?.includes(t))).map(s=>({id:s.id,full_name:s.full_name,username:s.username})),enabled:!!e||!!t})}function ule(e){return Ft({queryKey:["published-sheets-segment",e],queryFn:async()=>(await qc.getAll()).filter(r=>!(r.status!=="published"||e&&r.segment_ids&&!r.segment_ids.includes(e))).map(r=>({id:r.id,title:r.title,template_data:r.template_data,sheet_date:r.sheet_date})),enabled:!!e})}function dle(){const e=Tt();return St({mutationFn:async t=>{const r=s0();return gs.create({id:r,...t,form_data:"{}",status:"a_declarer"})},onSuccess:()=>{e.invalidateQueries({queryKey:["gerant-declarations"]}),e.invalidateQueries({queryKey:["professor-declarations"]})}})}const fle=()=>{const{data:e,isLoading:t}=ole(),[r,a]=k.useState("all"),s=e?.filter(o=>r==="all"?!0:o.status===r),i={total:e?.length||0,a_declarer:e?.filter(o=>o.status==="a_declarer").length||0,soumise:e?.filter(o=>o.status==="soumise").length||0,en_cours:e?.filter(o=>o.status==="en_cours").length||0,approuvee:e?.filter(o=>o.status==="approuvee").length||0,refusee:e?.filter(o=>o.status==="refusee").length||0},l=[{label:"Toutes",value:"all",count:i.total},{label:" dclarer",value:"a_declarer",count:i.a_declarer},{label:"Soumises",value:"soumise",count:i.soumise},{label:"En cours",value:"en_cours",count:i.en_cours},{label:"Approuves",value:"approuvee",count:i.approuvee},{label:"Refuses",value:"refusee",count:i.refusee}];return t?n.jsx(Ut,{title:"Mes Dclarations Cres",subtitle:"Suivez les dclarations que vous avez assignes aux professeurs",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-lg text-gray-600",children:"Chargement..."})})}):n.jsx(Ut,{title:"Mes Dclarations Cres",subtitle:"Suivez les dclarations que vous avez assignes aux professeurs",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsx(Ml,{to:"/gerant/create-declaration",children:n.jsxs(Ye,{children:[n.jsx(Tp,{className:"w-4 h-4 mr-2"}),"Crer une dclaration"]})})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.total}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:i.a_declarer}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:" dclarer"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.soumise}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Soumises"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:i.en_cours}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"En cours"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.approuvee}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Approuves"})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.refusee}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Refuses"})]})})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(o=>n.jsxs(Ye,{variant:r===o.value?"default":"outline",size:"sm",onClick:()=>a(o.value),children:[o.label," (",o.count,")"]},o.value))})}),n.jsx("div",{className:"bg-white rounded-lg shadow",children:s&&s.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Professeur"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ville"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fiche de calcul"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date cration"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(o=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.professor_name||"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.segment_name||"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.city_name||"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.sheet_title||"N/A"}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(o.start_date).toLocaleDateString("fr-FR")," - ",new Date(o.end_date).toLocaleDateString("fr-FR")]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(p3,{status:o.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(o.created_at).toLocaleDateString("fr-FR")})]},o.id))})]})}):n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-500",children:"Aucune dclaration trouve."})})})]})})},PE=()=>{const e=$a(),{isAdmin:t}=jn(),{data:r,isLoading:a}=ile(),{data:s,isLoading:i}=lle(),[l,o]=k.useState(""),[d,u]=k.useState(""),[f,m]=k.useState(""),[g,x]=k.useState(""),[b,v]=k.useState(""),[y,j]=k.useState(null),S=t?"/admin/declarations":"/gerant/declarations",N=s?.filter(L=>L.segment_id===l)||[],{data:C,isLoading:T}=cle(l,d),{data:P,isLoading:D}=ule(l),M=P&&P.length>0?P[0]:null,F=dle();k.useEffect(()=>{u(""),m("")},[l]),k.useEffect(()=>{m("")},[d]);const H=async L=>{if(L.preventDefault(),j(null),!l){j("Veuillez slectionner un segment");return}if(!d){j("Veuillez slectionner une ville");return}if(!M){j("Aucune fiche de calcul publie pour ce segment");return}if(!f){j("Veuillez slectionner un professeur");return}if(!g||!b){j("Veuillez renseigner les dates de session");return}if(new Date(g)>new Date(b)){j("La date de dbut doit tre antrieure  la date de fin");return}try{await F.mutateAsync({professor_id:f,calculation_sheet_id:M.id,segment_id:l,city_id:d,start_date:g,end_date:b}),e(S)}catch(z){console.error("Error creating declaration:",z),j("Erreur lors de la cration de la dclaration")}};return a||i?n.jsx(Ut,{title:"Crer une Dclaration",subtitle:"Assigner une fiche de session  un professeur",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-lg text-gray-600",children:"Chargement..."})})}):!r||r.length===0?n.jsx(Ut,{title:"Crer une Dclaration",subtitle:"Assigner une fiche de session  un professeur",children:n.jsx(Or,{children:n.jsx(Fr,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Nr,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),n.jsx("p",{className:"text-lg text-gray-700 font-medium mb-2",children:"Aucun segment assign"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Contactez un administrateur pour vous assigner des segments et villes."})]})})})}):n.jsx(Ut,{title:"Crer une Dclaration",subtitle:"Assigner une fiche de session  un professeur",children:n.jsx("div",{className:"space-y-6",children:n.jsxs("form",{onSubmit:H,children:[n.jsxs(Or,{children:[n.jsx(Ic,{children:n.jsx(Bc,{children:"Informations de la dclaration"})}),n.jsxs(Fr,{className:"space-y-6",children:[y&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-800",children:y})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Segment ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:l,onChange:L=>o(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"Slectionnez un segment"}),r?.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})]}),l&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ville ",n.jsx("span",{className:"text-red-500",children:"*"})]}),N.length>0?n.jsxs("select",{value:d,onChange:L=>u(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"Slectionnez une ville"}),N.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}):n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-yellow-800",children:"Aucune ville assigne pour ce segment. Contactez un administrateur."})})]}),l&&d&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiche de calcul"}),D?n.jsx("div",{className:"text-sm text-gray-500",children:"Chargement..."}):M?n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900",children:M.title}),n.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Date: ",M.sheet_date]})]}):n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-red-800",children:" Aucune fiche de calcul publie pour ce segment"})})]}),l&&d&&M&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Professeur ",n.jsx("span",{className:"text-red-500",children:"*"})]}),T?n.jsx("div",{className:"text-sm text-gray-500",children:"Chargement des professeurs..."}):C&&C.length>0?n.jsxs("select",{value:f,onChange:L=>m(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"Slectionnez un professeur"}),C.map(L=>n.jsxs("option",{value:L.id,children:[L.full_name," (",L.username,")"]},L.id))]}):n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-yellow-800",children:"Aucun professeur n'a  la fois ce segment et cette ville assigns."})})]}),f&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de dbut ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:g,onChange:L=>x(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de fin ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:b,onChange:L=>v(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[n.jsx(Ml,{to:S,children:n.jsx(Ye,{type:"button",variant:"outline",children:"Annuler"})}),n.jsxs(Ye,{type:"submit",disabled:!l||!d||!f||!g||!b||!M||F.isPending,children:[n.jsx(Td,{className:"w-4 h-4 mr-2"}),F.isPending?"Cration...":"Crer la dclaration"]})]})]})})})},Ph={getSessions:()=>Ce.get("/formations/sessions"),getSession:e=>Ce.get(`/formations/sessions/${e}`),createSession:e=>Ce.post("/formations/sessions",e),updateSession:(e,t)=>Ce.put(`/formations/sessions/${e}`,t),deleteSession:e=>Ce.delete(`/formations/sessions/${e}`),getSessionStudents:e=>Ce.get(`/formations/sessions/${e}/students`),enrollStudents:(e,t)=>Ce.post(`/formations/sessions/${e}/enroll`,t),unenrollStudent:(e,t)=>Ce.delete(`/formations/sessions/${e}/enroll/${t}`),getAvailableStudents:e=>{const t=e?`?session_id=${e}`:"";return Ce.get(`/formations/available-students${t}`)},getStats:()=>Ce.get("/formations/stats")},rs={all:["formations"],sessions:()=>[...rs.all,"sessions"],session:e=>[...rs.all,"session",e],sessionStudents:e=>[...rs.all,"session",e,"students"],availableStudents:e=>[...rs.all,"available-students",e||"all"],stats:()=>[...rs.all,"stats"]};function gL(){return Ft({queryKey:rs.sessions(),queryFn:Ph.getSessions})}function hle(e){return Ft({queryKey:rs.session(e),queryFn:()=>Ph.getSession(e),enabled:!!e})}function mle(e){return Ft({queryKey:rs.availableStudents(e),queryFn:()=>Ph.getAvailableStudents(e)})}function ple(){return Ft({queryKey:rs.stats(),queryFn:Ph.getStats})}function xle(){const e=Tt();return St({mutationFn:t=>Ph.deleteSession(t),onSuccess:()=>{e.invalidateQueries({queryKey:rs.sessions()}),e.invalidateQueries({queryKey:rs.stats()})}})}function gle(){const e=Tt();return St({mutationFn:({sessionId:t,data:r})=>Ph.enrollStudents(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:rs.session(r.sessionId)}),e.invalidateQueries({queryKey:rs.sessionStudents(r.sessionId)}),e.invalidateQueries({queryKey:rs.sessions()}),e.invalidateQueries({queryKey:rs.availableStudents()}),e.invalidateQueries({queryKey:rs.stats()})}})}function vle(){const e=Tt();return St({mutationFn:({sessionId:t,studentId:r})=>Ph.unenrollStudent(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:rs.session(r.sessionId)}),e.invalidateQueries({queryKey:rs.sessionStudents(r.sessionId)}),e.invalidateQueries({queryKey:rs.sessions()}),e.invalidateQueries({queryKey:rs.availableStudents()}),e.invalidateQueries({queryKey:rs.stats()})}})}const iv={getAll:async e=>{const t=new URLSearchParams;e?.ville_id&&t.append("ville_id",e.ville_id),e?.segment_id&&t.append("segment_id",e.segment_id),e?.corps_formation_id&&t.append("corps_formation_id",e.corps_formation_id),e?.statut&&t.append("statut",e.statut),e?.annee&&t.append("annee",e.annee);const r=`/sessions-formation${t.toString()?"?"+t.toString():""}`;return(await Ce.get(r)).sessions},getById:async e=>(await Ce.get(`/sessions-formation/${e}`)).session,create:async e=>(await Ce.post("/sessions-formation",e)).session,update:async(e,t)=>(await Ce.put(`/sessions-formation/${e}`,t)).session,delete:async e=>{await Ce.delete(`/sessions-formation/${e}`)},addEtudiant:async e=>(await Ce.post(`/sessions-formation/${e.session_id}/etudiants`,{student_id:e.student_id,formation_id:e.formation_id,montant_total:e.montant_total,statut_paiement:e.statut_paiement})).inscription,updateEtudiant:async(e,t,r)=>(await Ce.put(`/sessions-formation/${e}/etudiants/${t}`,r)).inscription,removeEtudiant:async(e,t)=>{await Ce.delete(`/sessions-formation/${e}/etudiants/${t}`)},addProfesseur:async e=>(await Ce.post(`/sessions-formation/${e.session_id}/professeurs`,{professeur_id:e.professeur_id})).affectation,removeProfesseur:async(e,t)=>{await Ce.delete(`/sessions-formation/${e}/professeurs/${t}`)},addFichier:async e=>(await Ce.post(`/sessions-formation/${e.session_id}/fichiers`,{type:e.type,titre:e.titre,file_url:e.file_url,file_name:e.file_name,file_size:e.file_size})).fichier,deleteFichier:async e=>{await Ce.delete(`/sessions-formation/fichiers/${e}`)}},Nu={all:["sessions-formation"],lists:()=>[...Nu.all,"list"],list:e=>[...Nu.lists(),{filters:e}],details:()=>[...Nu.all,"detail"],detail:e=>[...Nu.details(),e]};function yle(e){return Ft({queryKey:Nu.list(e),queryFn:()=>iv.getAll(e)})}function ble(e){return Ft({queryKey:Nu.detail(e),queryFn:()=>iv.getById(e),enabled:!!e})}function wle(){const e=Tt();return St({mutationFn:t=>iv.create(t),onSuccess:()=>{e.invalidateQueries({queryKey:Nu.lists()})}})}function jle(){const e=Tt();return St({mutationFn:({id:t,data:r})=>iv.update(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:Nu.lists()}),e.invalidateQueries({queryKey:Nu.detail(r)})}})}function Nle(){const e=Tt();return St({mutationFn:t=>iv.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:Nu.lists()})}})}const _le=({selectedSegmentId:e,selectedCityId:t,selectedCorpsId:r,onSegmentChange:a,onCityChange:s,onCorpsChange:i})=>{const[l,o]=k.useState([]),[d,u]=k.useState([]),[f,m]=k.useState([]),[g,x]=k.useState(!0),[b,v]=k.useState(!1),[y,j]=k.useState(!1);k.useEffect(()=>{S()},[]),k.useEffect(()=>{C()},[]),k.useEffect(()=>{e?N(e):(u([]),s(""))},[e]);const S=async()=>{try{x(!0);const D=await Ce.get("/segments");o(D)}catch(D){console.error("Error fetching segments:",D)}finally{x(!1)}},N=async D=>{try{v(!0);const M=await Ce.get(`/cities/by-segment/${D}`);u(M)}catch(M){console.error("Error fetching cities:",M),u([])}finally{v(!1)}},C=async()=>{try{j(!0);const D=await Ce.get("/corps-formation");m(D.corps)}catch(D){console.error("Error fetching corps formations:",D),m([])}finally{j(!1)}},T=D=>{const M=D.target.value;console.log("[SessionFormationSelector] Segment changed:",M),a(M),s("")},P=D=>{s(D.target.value)};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Segment ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:e,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none pr-10",disabled:g,children:[n.jsx("option",{value:"",children:"Slectionner un segment"}),l.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]},`segment-select-${e||"empty"}`),n.jsx(Au,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ville ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:t,onChange:P,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none pr-10 disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:!e||b,children:[n.jsx("option",{value:"",children:e?b?"Chargement...":"Slectionner une ville":"Slectionner d'abord un segment"}),d.map(D=>n.jsxs("option",{value:D.id,children:[D.name," (",D.code,")"]},D.id))]},`city-select-${t||"empty"}`),n.jsx(Au,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Corps de Formation ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:r,onChange:D=>i(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none pr-10 disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:y,children:[n.jsx("option",{value:"",children:"Slectionner un corps de formation"}),f.map(D=>n.jsxs("option",{value:D.id,children:[D.name," ",D.formations_count?`(${D.formations_count})`:""]},D.id))]},`corps-select-${r||"empty"}`),n.jsx(Au,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]})]})},QN=({session:e,onClose:t})=>{const r=!!e,a=wle(),s=jle(),[i,l]=k.useState({name:e?.name||"",description:e?.description||"",corps_formation_id:e?.corps_formation_id||"",start_date:e?.start_date?e.start_date.split("T")[0]:"",end_date:e?.end_date?e.end_date.split("T")[0]:"",segment_id:e?.segment_id||"",city_id:e?.city_id||"",instructor_id:e?.instructor_id||"",max_capacity:e?.max_capacity?.toString()||"",status:e?.status||"planned"}),[o,d]=k.useState({}),[u,f]=k.useState(!1),m=()=>{const x={};return i.name.trim()||(x.name="Le nom est obligatoire"),i.start_date||(x.start_date="La date de dbut est obligatoire"),i.end_date||(x.end_date="La date de fin est obligatoire"),i.start_date&&i.end_date&&i.start_date>i.end_date&&(x.end_date="La date de fin doit tre aprs la date de dbut"),i.max_capacity&&parseInt(i.max_capacity)<1&&(x.max_capacity="La capacit doit tre suprieure  0"),i.corps_formation_id||(x.corps="Le corps de formation est obligatoire"),i.segment_id||(x.segment="Le segment est obligatoire"),i.city_id||(x.city="La ville est obligatoire"),d(x),Object.keys(x).length===0},g=async x=>{if(x.preventDefault(),!!m()){f(!0);try{const b={planned:"planifiee",active:"en_cours",completed:"terminee",cancelled:"annulee"},v={titre:i.name.trim(),description:i.description.trim()||void 0,corps_formation_id:i.corps_formation_id,date_debut:i.start_date,date_fin:i.end_date,segment_id:i.segment_id,ville_id:i.city_id,nombre_places:i.max_capacity?parseInt(i.max_capacity):0,statut:b[i.status],prix_total:0};r&&e?await s.mutateAsync({id:e.id,data:v}):await a.mutateAsync(v),t()}catch(b){console.error("Error saving session:",b),d({submit:b.message||"Erreur lors de l'enregistrement"})}finally{f(!1)}}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ba,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Modifier la session":"Nouvelle session"}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:r?"Mettez  jour les informations de la session":"Crez une nouvelle session de formation"})]})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[o.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:o.submit})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom de la session ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:i.name,onChange:x=>l({...i,name:x.target.value}),placeholder:"Ex: Formation React Avanc",className:o.name?"border-red-300":""}),o.name&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:i.description,onChange:x=>l({...i,description:x.target.value}),placeholder:"Description de la session...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),n.jsx(_le,{selectedSegmentId:i.segment_id,selectedCityId:i.city_id,selectedCorpsId:i.corps_formation_id,onSegmentChange:x=>l(b=>({...b,segment_id:x})),onCityChange:x=>l(b=>({...b,city_id:x})),onCorpsChange:x=>l(b=>({...b,corps_formation_id:x}))}),o.corps&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.corps}),o.segment&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.segment}),o.city&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.city}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de dbut ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"date",value:i.start_date,onChange:x=>l({...i,start_date:x.target.value}),className:o.start_date?"border-red-300":""}),o.start_date&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.start_date})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de fin ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"date",value:i.end_date,onChange:x=>l({...i,end_date:x.target.value}),className:o.end_date?"border-red-300":""}),o.end_date&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.end_date})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacit maximale"}),n.jsx(xr,{type:"number",min:"1",value:i.max_capacity,onChange:x=>l({...i,max_capacity:x.target.value}),placeholder:"Laissez vide pour illimit",className:o.max_capacity?"border-red-300":""}),o.max_capacity&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.max_capacity})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),n.jsxs("select",{value:i.status,onChange:x=>l({...i,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"planned",children:"Planifie"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"completed",children:"Termine"}),n.jsx("option",{value:"cancelled",children:"Annule"})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,disabled:u,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:u,className:"min-w-[100px]",children:u?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"..."})]}):r?"Enregistrer":"Crer"})]})]})]})})},Sle=({student:e,onClose:t})=>{const r=Tt(),[a,s]=k.useState(!1),[i,l]=k.useState({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"especes",note:""}),[o,d]=k.useState({}),{data:u=[],isLoading:f}=Ft({queryKey:["student-payments",e.enrollment_id],queryFn:async()=>{const N=await fetch(`/api/formations/enrollments/${e.enrollment_id}/payments`);if(!N.ok)throw new Error("Failed to fetch payments");return N.json()}}),m=St({mutationFn:async N=>{const C=await fetch(`/api/formations/enrollments/${e.enrollment_id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...N,amount:parseFloat(N.amount)})});if(!C.ok)throw new Error("Failed to add payment");return C.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["student-payments",e.enrollment_id]}),r.invalidateQueries({queryKey:["session-students"]}),l({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"especes",note:""}),s(!1),d({})}}),g=St({mutationFn:async N=>{const C=await fetch(`/api/formations/enrollments/${e.enrollment_id}/payments/${N}`,{method:"DELETE"});if(!C.ok)throw new Error("Failed to delete payment");return C.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["student-payments",e.enrollment_id]}),r.invalidateQueries({queryKey:["session-students"]})}}),x=()=>{const N={};return(!i.amount||parseFloat(i.amount)<=0)&&(N.amount="Le montant doit tre suprieur  0"),i.payment_date||(N.payment_date="La date est obligatoire"),d(N),Object.keys(N).length===0},b=async N=>{if(N.preventDefault(),!!x())try{await m.mutateAsync(i)}catch(C){d({submit:C.message||"Erreur lors de l'ajout du paiement"})}},v=async N=>{if(window.confirm("tes-vous sr de vouloir supprimer ce paiement ?"))try{await g.mutateAsync(N)}catch{alert("Erreur lors de la suppression du paiement")}},y=N=>({paye:"bg-green-100 text-green-700",partiel:"bg-orange-100 text-orange-700",impaye:"bg-red-100 text-red-700",surpaye:"bg-blue-100 text-blue-700"})[N]||"bg-gray-100 text-gray-700",j=N=>({paye:"Pay",partiel:"Partiellement pay",impaye:"Impay",surpaye:"Surpay"})[N]||N,S=N=>new Date(N).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(jd,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestion des paiements"}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:e.student_name})]})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-6 bg-gray-50 border-b",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Prix formation"}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[e.formation_price?parseFloat(String(e.formation_price)).toFixed(2):"0.00"," MAD"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Remise"}),n.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["-",e.discount_amount?parseFloat(String(e.discount_amount)).toFixed(2):"0.00"," MAD"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total pay"}),n.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[e.total_paid?parseFloat(String(e.total_paid)).toFixed(2):"0.00"," MAD"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reste  payer"}),n.jsxs("p",{className:`text-lg font-bold ${parseFloat(String(e.remaining_amount||0))<0?"text-blue-600":parseFloat(String(e.remaining_amount||0))===0?"text-green-600":"text-red-600"}`,children:[e.remaining_amount?parseFloat(String(e.remaining_amount)).toFixed(2):"0.00"," MAD"]}),e.payment_status&&n.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-xs font-medium ${y(e.payment_status)}`,children:j(e.payment_status)})]})]})}),n.jsxs("div",{className:"p-6",children:[!a&&n.jsxs(Ye,{onClick:()=>s(!0),className:"mb-4",size:"sm",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Ajouter un paiement"]}),a&&n.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Nouveau paiement"}),o.submit&&n.jsxs("div",{className:"mb-3 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:o.submit})]}),n.jsxs("form",{onSubmit:b,className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Montant (MAD) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"number",step:"0.01",min:"0.01",value:i.amount,onChange:N=>l({...i,amount:N.target.value}),placeholder:"0.00",className:o.amount?"border-red-300":""}),o.amount&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.amount})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"date",value:i.payment_date,onChange:N=>l({...i,payment_date:N.target.value}),className:o.payment_date?"border-red-300":""}),o.payment_date&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:o.payment_date})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mthode de paiement"}),n.jsxs("select",{value:i.payment_method,onChange:N=>l({...i,payment_method:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"especes",children:"Espces"}),n.jsx("option",{value:"virement",children:"Virement"}),n.jsx("option",{value:"cheque",children:"Chque"}),n.jsx("option",{value:"carte",children:"Carte bancaire"}),n.jsx("option",{value:"autre",children:"Autre"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),n.jsx("textarea",{value:i.note,onChange:N=>l({...i,note:N.target.value}),placeholder:"Note optionnelle...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),n.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[n.jsx(Ye,{type:"button",variant:"outline",size:"sm",onClick:()=>{s(!1),d({}),l({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"especes",note:""})},children:"Annuler"}),n.jsx(Ye,{type:"submit",size:"sm",disabled:m.isPending,children:m.isPending?"Ajout...":"Ajouter"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Historique des paiements"}),f?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Chargement..."}):u.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun paiement enregistr"}):n.jsx("div",{className:"space-y-2",children:u.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:S(N.payment_date)})]}),n.jsxs("span",{className:"text-lg font-bold text-green-600",children:[parseFloat(String(N.amount)).toFixed(2)," MAD"]}),N.payment_method&&n.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:["(",N.payment_method,")"]})]}),N.note&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N.note})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>v(N.id),disabled:g.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Pr,{className:"h-4 w-4"})})]},N.id))})]})]}),n.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t bg-gray-50",children:n.jsx(Ye,{onClick:t,children:"Fermer"})})]})})},kle=({session:e,onClose:t})=>{const{data:r,isLoading:a}=hle(e.id),{data:s=[]}=mle(e.id),i=gle(),l=vle(),[o,d]=k.useState([]),[u,f]=k.useState(""),[m,g]=k.useState(!1),[x,b]=k.useState(null),[v,y]=k.useState(null),j=r?.students||[],S=s.filter(H=>H.full_name.toLowerCase().includes(u.toLowerCase())||H.username.toLowerCase().includes(u.toLowerCase())),N=async()=>{if(o.length===0){b("Veuillez slectionner au moins un tudiant");return}g(!0),b(null);try{await i.mutateAsync({sessionId:e.id,data:{student_ids:o}}),d([]),f("")}catch(H){console.error("Error enrolling students:",H),b(H.message||"Erreur lors de l'inscription des tudiants")}finally{g(!1)}},C=async(H,L)=>{if(window.confirm(`tes-vous sr de vouloir dsinscrire ${L} de cette session ?`))try{await l.mutateAsync({sessionId:e.id,studentId:H})}catch(z){console.error("Error unenrolling student:",z),b(z.message||"Erreur lors de la dsinscription")}},T=H=>{d(L=>L.includes(H)?L.filter(z=>z!==H):[...L,H])},P=H=>{const L={enrolled:{bg:"bg-blue-100",text:"text-blue-700",label:"Inscrit"},completed:{bg:"bg-green-100",text:"text-green-700",label:"Termin"},dropped:{bg:"bg-gray-100",text:"text-gray-700",label:"Abandonn"}},z=L[H]||L.enrolled;return n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${z.bg} ${z.text}`,children:z.label})},D=H=>{if(!H)return null;const z={paye:{bg:"bg-green-100",text:"text-green-700",label:"Pay"},partiel:{bg:"bg-orange-100",text:"text-orange-700",label:"Partiel"},impaye:{bg:"bg-red-100",text:"text-red-700",label:"Impay"},surpaye:{bg:"bg-blue-100",text:"text-blue-700",label:"Surpay"}}[H];return z?n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${z.bg} ${z.text}`,children:z.label}):null},M=async H=>{const L=H.validation_status==="valide"?"non_valide":"valide";try{if(!(await fetch(`/api/formations/enrollments/${H.enrollment_id}/validation`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({validation_status:L,validated_by:L==="valide"?"current_user_id":null})})).ok)throw new Error("Failed to update validation");window.location.reload()}catch{b("Erreur lors de la mise  jour du statut de validation")}},F=e.max_capacity?j.length>=e.max_capacity:!1;return n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] max-w-7xl my-8",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ya,{className:"h-6 w-6 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestion des inscriptions"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.name})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-6 max-h-[calc(95vh-140px)] overflow-y-auto",children:[x&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3 mb-6",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-800",children:x})]}),a?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Inscrits"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[j.length,e.max_capacity&&` / ${e.max_capacity}`]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Formation(s)"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:r?.formations&&r.formations.length>0?r.formations.map(H=>H.title).join(", "):"Aucune"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Segment"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.segment_name||"-"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Ville"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.city_name||"-"})]})]}),F&&n.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded p-2",children:n.jsx("p",{className:"text-xs text-yellow-800",children:" Capacit maximale atteinte"})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["tudiants inscrits (",j.length,")"]}),j.length===0?n.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[n.jsx(Ya,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Aucun tudiant inscrit"})]}):n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"tudiant"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paiement"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Validation"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:H.student_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["@",H.student_username]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"space-y-1",children:[D(H.payment_status),H.remaining_amount!==void 0&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Reste: ",H.remaining_amount.toFixed(2)," MAD"]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>M(H),className:`p-1.5 rounded-full ${H.validation_status==="valide"?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:H.validation_status==="valide"?"Valid":"Non valid",children:H.validation_status==="valide"?n.jsx(Xr,{className:"h-5 w-5"}):n.jsx(fo,{className:"h-5 w-5"})})}),n.jsx("td",{className:"px-4 py-3",children:P(H.enrollment_status)}),n.jsx("td",{className:"px-4 py-3 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx("button",{onClick:()=>y(H),className:"text-green-600 hover:text-green-700 hover:bg-green-50 p-2 rounded",title:"Grer paiements",children:n.jsx(jd,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>C(H.student_id,H.student_name),className:"text-red-600 hover:text-red-700 hover:bg-red-50 p-2 rounded",title:"Dsinscrire",children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},H.enrollment_id))})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ajouter des tudiants"}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",value:u,onChange:H=>f(H.target.value),placeholder:"Rechercher un tudiant...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),S.length===0?n.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:n.jsx("p",{className:"text-sm text-gray-500",children:u?"Aucun tudiant trouv":"Tous les tudiants sont dj inscrits"})}):n.jsx("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:n.jsx("div",{className:"divide-y divide-gray-200",children:S.map(H=>n.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.includes(H.id),onChange:()=>T(H.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.jsxs("div",{className:"ml-3 flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:H.full_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["@",H.username]})]})]},H.id))})}),o.length>0&&n.jsxs("div",{className:"mt-4 flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsxs("p",{className:"text-sm text-blue-800",children:[o.length," tudiant(s) slectionn(s)"]}),n.jsx(Ye,{onClick:N,disabled:m||F,className:"flex items-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Inscription..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(ZF,{className:"h-4 w-4"}),n.jsx("span",{children:"Inscrire"})]})})]})]})]})]}),n.jsx("div",{className:"flex justify-end gap-3 p-6 border-t bg-gray-50",children:n.jsx(Ye,{variant:"outline",onClick:t,children:"Fermer"})})]}),v&&n.jsx(Sle,{student:v,onClose:()=>y(null)})]})},Ale=()=>{const{data:e,isLoading:t,error:r}=gL(),{data:a}=ple(),s=xle(),[i,l]=k.useState(!1),[o,d]=k.useState(null),[u,f]=k.useState(null),m=async b=>{if(window.confirm(`tes-vous sr de vouloir supprimer la session "${b.name}" ?`))try{await s.mutateAsync(b.id)}catch(v){console.error("Error deleting session:",v),alert("Erreur lors de la suppression de la session")}},g=b=>({planned:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",completed:"bg-gray-100 text-gray-700",cancelled:"bg-red-100 text-red-700"})[b]||"bg-gray-100 text-gray-700",x=b=>({planned:"Planifie",active:"Active",completed:"Termine",cancelled:"Annule"})[b]||b;return n.jsxs(Ut,{title:"Sessions de Formation",subtitle:"Grer les sessions et les inscriptions",children:[n.jsxs("div",{className:"space-y-6",children:[a&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ba,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Sessions"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.sessions.total})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ba,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Planifies"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.sessions.planned})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(ba,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Actives"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.sessions.active})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:n.jsx(ba,{className:"h-5 w-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Termines"}),n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:a.sessions.completed})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Ya,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"tudiants Inscrits"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.total_students_enrolled})]})]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Liste des sessions"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Grez les sessions de formation et les inscriptions"})]}),n.jsxs(Ye,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Nouvelle session"]})]}),t&&n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),r&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-800",children:"Erreur de chargement"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:r.message})]})]}),e&&e.length>0&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Formation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ville"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrits"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.name}),b.description&&n.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:b.description})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.formation_title?n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:b.formation_title})}):n.jsx("p",{className:"text-sm text-gray-400",children:"Aucune formation"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("p",{className:"text-sm text-gray-900",children:b.segment_name||"-"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("p",{className:"text-sm text-gray-900",children:b.city_name||"-"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"text-gray-900",children:new Date(b.start_date).toLocaleDateString("fr-FR")}),n.jsx("p",{className:"text-gray-500",children:new Date(b.end_date).toLocaleDateString("fr-FR")})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ya,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{className:"text-sm text-gray-900",children:[b.enrolled_count||0,b.max_capacity&&` / ${b.max_capacity}`]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${g(b.status)}`,children:x(b.status)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>f(b),className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50",children:n.jsx(Ya,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>d(b),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:n.jsx(hp,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>m(b),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},b.id))})]})})}),e&&e.length===0&&!t&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(ba,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune session"}),n.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Commencez par crer votre premire session de formation"}),n.jsxs(Ye,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Crer une session"]})]})]}),i&&n.jsx(QN,{onClose:()=>l(!1)}),o&&n.jsx(QN,{session:o,onClose:()=>d(null)}),u&&n.jsx(kle,{session:u,onClose:()=>f(null)})]})},Ps={getFormations:()=>Ce.get("/cours/formations"),getFormation:e=>Ce.get(`/cours/formations/${e}`),createFormation:e=>Ce.post("/cours/formations",e),updateFormation:(e,t)=>Ce.put(`/cours/formations/${e}`,t),deleteFormation:e=>Ce.delete(`/cours/formations/${e}`),getModules:e=>Ce.get(`/cours/formations/${e}/modules`),createModule:(e,t)=>Ce.post(`/cours/formations/${e}/modules`,t),updateModule:(e,t)=>Ce.put(`/cours/modules/${e}`,t),deleteModule:e=>Ce.delete(`/cours/modules/${e}`),reorderModule:(e,t)=>Ce.put(`/cours/modules/${e}/reorder`,{new_order_index:t}),createVideo:(e,t)=>Ce.post(`/cours/modules/${e}/videos`,t),updateVideo:(e,t)=>Ce.put(`/cours/videos/${e}`,t),deleteVideo:e=>Ce.delete(`/cours/videos/${e}`),createTest:(e,t)=>Ce.post(`/cours/modules/${e}/tests`,t),getTest:e=>Ce.get(`/cours/tests/${e}`),updateTest:(e,t)=>Ce.put(`/cours/tests/${e}`,t),deleteTest:e=>Ce.delete(`/cours/tests/${e}`),createQuestion:(e,t)=>Ce.post(`/cours/tests/${e}/questions`,t),updateQuestion:(e,t)=>Ce.put(`/cours/questions/${e}`,t),deleteQuestion:e=>Ce.delete(`/cours/questions/${e}`),createChoice:(e,t)=>Ce.post(`/cours/questions/${e}/choices`,t),updateChoice:(e,t)=>Ce.put(`/cours/choices/${e}`,t),deleteChoice:e=>Ce.delete(`/cours/choices/${e}`),getStats:()=>Ce.get("/cours/stats"),getFormationTemplates:e=>Ce.get(`/formations/${e}/templates`),addFormationTemplates:(e,t,r="certificat")=>Ce.post(`/formations/${e}/templates`,{template_ids:t,document_type:r}),removeFormationTemplate:(e,t)=>Ce.delete(`/formations/${e}/templates/${t}`),setDefaultTemplate:(e,t)=>Ce.put(`/formations/${e}/templates/${t}/default`,{}),duplicateFormation:async(e,t)=>{const r=await Ce.post(`/cours/formations/${e}/duplicate`,t||{});return{formation:r.formation,duplicated_modules_count:r.duplicated_modules_count}}},Ir={all:["cours"],formations:()=>[...Ir.all,"formations"],formation:e=>[...Ir.formations(),e],formationTemplates:e=>[...Ir.all,"formation-templates",e],modules:e=>[...Ir.all,"modules",e],test:e=>[...Ir.all,"test",e],stats:()=>[...Ir.all,"stats"]};function Zb(){return Ft({queryKey:Ir.formations(),queryFn:()=>Ps.getFormations()})}function Lp(e){return Ft({queryKey:Ir.formation(e),queryFn:()=>Ps.getFormation(e),enabled:!!e})}function Cle(){const e=Tt();return St({mutationFn:t=>Ps.createFormation(t),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.formations()}),e.invalidateQueries({queryKey:Ir.stats()})}})}function Ele(){const e=Tt();return St({mutationFn:({id:t,data:r})=>Ps.updateFormation(t,r),onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:Ir.formations()}),e.invalidateQueries({queryKey:Ir.formation(r)})}})}function Tle(){const e=Tt();return St({mutationFn:t=>Ps.deleteFormation(t),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.formations()}),e.invalidateQueries({queryKey:Ir.stats()})}})}function Dle(e){return Ft({queryKey:Ir.formationTemplates(e),queryFn:()=>Ps.getFormationTemplates(e),enabled:!!e})}function Ole(){const e=Tt();return St({mutationFn:({formationId:t,template_ids:r,document_type:a="certificat"})=>Ps.addFormationTemplates(t,r,a),onSuccess:(t,{formationId:r})=>{e.invalidateQueries({queryKey:Ir.formationTemplates(r)}),e.invalidateQueries({queryKey:Ir.formation(r)}),e.invalidateQueries({queryKey:Ir.formations()})}})}function Fle(){const e=Tt();return St({mutationFn:({id:t,options:r})=>Ps.duplicateFormation(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.formations()}),e.invalidateQueries({queryKey:Ir.stats()})}})}function Ple(){const e=Tt();return St({mutationFn:({formationId:t,data:r})=>Ps.createModule(t,r),onSuccess:(t,{formationId:r})=>{e.invalidateQueries({queryKey:Ir.modules(r)}),e.invalidateQueries({queryKey:Ir.formation(r)}),e.invalidateQueries({queryKey:Ir.stats()})}})}function Mle(){const e=Tt();return St({mutationFn:({id:t,data:r})=>Ps.updateModule(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:Ir.modules(t.formation_id)}),e.invalidateQueries({queryKey:Ir.formation(t.formation_id)})}})}function Lle(){const e=Tt();return St({mutationFn:t=>Ps.deleteModule(t),onSuccess:t=>{const r=t.module.formation_id;e.invalidateQueries({queryKey:Ir.modules(r)}),e.invalidateQueries({queryKey:Ir.formation(r)}),e.invalidateQueries({queryKey:Ir.stats()})}})}function Rle(){const e=Tt();return St({mutationFn:({moduleId:t,data:r})=>Ps.createVideo(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.all})}})}function Ile(){const e=Tt();return St({mutationFn:({id:t,data:r})=>Ps.updateVideo(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.all})}})}function Ble(){const e=Tt();return St({mutationFn:t=>Ps.deleteVideo(t),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.all}),e.invalidateQueries({queryKey:Ir.stats()})}})}function zle(){const e=Tt();return St({mutationFn:({moduleId:t,data:r})=>Ps.createTest(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.all}),e.invalidateQueries({queryKey:Ir.stats()})}})}function Ule(){const e=Tt();return St({mutationFn:t=>Ps.deleteTest(t),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.all}),e.invalidateQueries({queryKey:Ir.stats()})}})}function qle(){const e=Tt();return St({mutationFn:({testId:t,data:r})=>Ps.createQuestion(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:Ir.test(t.test_id)}),e.invalidateQueries({queryKey:Ir.all})}})}function $le(){const e=Tt();return St({mutationFn:({questionId:t,data:r})=>Ps.createChoice(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:Ir.all})}})}function Hle(){return Ft({queryKey:Ir.stats(),queryFn:()=>Ps.getStats()})}const Vle=({formationId:e,module:t,modules:r=[],onClose:a})=>{const s=!!t,i=Ple(),l=Mle(),[o,d]=k.useState({title:t?.title||"",description:t?.description||"",module_type:t?.module_type||"video",prerequisite_module_id:t?.prerequisite_module_id||""}),[u,f]=k.useState({}),m=()=>{const v={};return o.title.trim()||(v.title="Le titre est obligatoire"),f(v),Object.keys(v).length===0},g=async v=>{if(v.preventDefault(),!!m())try{const y={title:o.title.trim(),description:o.description.trim()||void 0,module_type:o.module_type,prerequisite_module_id:o.prerequisite_module_id||void 0};s&&t?await l.mutateAsync({id:t.id,data:y}):await i.mutateAsync({formationId:e,data:y}),a()}catch(y){console.error("Error saving module:",y),f({submit:"Une erreur est survenue lors de la sauvegarde du module"})}},x=r.filter(v=>!s||v.id!==t?.id),b=v=>({video:"Vido",test:"Test",document:"Document"})[v];return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Modifier le module":"Ajouter un module"}),n.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[u.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-800",children:u.submit})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Titre ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"title",value:o.title,onChange:v=>d({...o,title:v.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.title?"border-red-300":"border-gray-300"}`,placeholder:"Ex: Introduction aux bases de donnes"}),u.title&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.title})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",value:o.description,onChange:v=>d({...o,description:v.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dcrivez le contenu de ce module..."})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"module_type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Type de module ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{id:"module_type",value:o.module_type,onChange:v=>d({...o,module_type:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"video",children:"Vido"}),n.jsx("option",{value:"test",children:"Test"}),n.jsx("option",{value:"document",children:"Document"})]}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[o.module_type==="video"&&"Module contenant des vidos de cours",o.module_type==="test"&&"Module contenant des tests et valuations",o.module_type==="document"&&"Module contenant des documents et ressources"]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"prerequisite_module_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Module prrequis"}),n.jsxs("select",{id:"prerequisite_module_id",value:o.prerequisite_module_id,onChange:v=>d({...o,prerequisite_module_id:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Aucun (accessible immdiatement)"}),x.map(v=>n.jsxs("option",{value:v.id,children:["#",v.order_index+1," - ",v.title," (",b(v.module_type),")"]},v.id))]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"L'tudiant devra complter ce module avant d'accder au module actuel"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:a,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:i.isPending||l.isPending,className:"min-w-[120px]",children:i.isPending||l.isPending?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Sauvegarde..."})]}):s?"Modifier":"Ajouter"})]})]})]})})},Wle=({moduleId:e,video:t,onClose:r})=>{const a=!!t,s=Rle(),i=Ile(),[l,o]=k.useState({title:t?.title||"",youtube_url:t?.youtube_url||"",duration_seconds:t?.duration_seconds?.toString()||"",description:t?.description||""}),[d,u]=k.useState({}),f=j=>j.trim()?[/^https?:\/\/(www\.)?youtube\.com\/watch\?v=[\w-]+/,/^https?:\/\/(www\.)?youtu\.be\/[\w-]+/,/^https?:\/\/(www\.)?youtube\.com\/embed\/[\w-]+/,/^https?:\/\/(www\.)?youtube\.com\/v\/[\w-]+/].some(N=>N.test(j)):!1,m=j=>{const S=[/youtube\.com\/watch\?v=([\w-]+)/,/youtu\.be\/([\w-]+)/,/youtube\.com\/embed\/([\w-]+)/,/youtube\.com\/v\/([\w-]+)/];for(const N of S){const C=j.match(N);if(C&&C[1])return C[1]}return null},g=()=>{const j={};return l.title.trim()||(j.title="Le titre est obligatoire"),l.youtube_url.trim()?f(l.youtube_url)||(j.youtube_url="L'URL YouTube n'est pas valide. Formats accepts: youtube.com/watch?v=..., youtu.be/..., youtube.com/embed/..."):j.youtube_url="L'URL YouTube est obligatoire",l.duration_seconds&&parseInt(l.duration_seconds)<0&&(j.duration_seconds="La dure doit tre positive"),u(j),Object.keys(j).length===0},x=async j=>{if(j.preventDefault(),!!g())try{const S={title:l.title.trim(),youtube_url:l.youtube_url.trim(),duration_seconds:l.duration_seconds?parseInt(l.duration_seconds):void 0,description:l.description.trim()||void 0};a&&t?await i.mutateAsync({id:t.id,data:S}):await s.mutateAsync({moduleId:e,data:S}),r()}catch(S){console.error("Error saving video:",S),u({submit:"Une erreur est survenue lors de la sauvegarde de la vido"})}},b=m(l.youtube_url),v=b?`https://img.youtube.com/vi/${b}/mqdefault.jpg`:null,y=j=>{const S=Math.floor(j/60),N=j%60;return`${S}min ${N}s`};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a?"Modifier la vido":"Ajouter une vido"}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[d.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-800",children:d.submit})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Titre de la vido ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"title",value:l.title,onChange:j=>o({...l,title:j.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${d.title?"border-red-300":"border-gray-300"}`,placeholder:"Ex: Introduction  SQL"}),d.title&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.title})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"youtube_url",className:"block text-sm font-medium text-gray-700 mb-2",children:["URL YouTube ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"youtube_url",value:l.youtube_url,onChange:j=>o({...l,youtube_url:j.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${d.youtube_url?"border-red-300":"border-gray-300"}`,placeholder:"https://www.youtube.com/watch?v=..."}),d.youtube_url&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.youtube_url}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Formats accepts: youtube.com/watch?v=..., youtu.be/..., youtube.com/embed/..."}),v&&!d.youtube_url&&n.jsxs("div",{className:"mt-3 border border-gray-200 rounded-lg overflow-hidden",children:[n.jsx("img",{src:v,alt:"Aperu YouTube",className:"w-full"}),n.jsxs("div",{className:"p-2 bg-gray-50 flex items-center justify-between",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Aperu de la vido"}),n.jsxs("a",{href:l.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-600 hover:text-purple-700 flex items-center gap-1",children:["Ouvrir sur YouTube",n.jsx(Bb,{className:"h-3 w-3"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"duration_seconds",className:"block text-sm font-medium text-gray-700 mb-2",children:"Dure (en secondes)"}),n.jsx("input",{type:"number",id:"duration_seconds",value:l.duration_seconds,onChange:j=>o({...l,duration_seconds:j.target.value}),min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${d.duration_seconds?"border-red-300":"border-gray-300"}`,placeholder:"Ex: 300"}),d.duration_seconds&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.duration_seconds}),l.duration_seconds&&parseInt(l.duration_seconds)>0&&n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["quivalent: ",y(parseInt(l.duration_seconds))]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optionnel - Aide les tudiants  planifier leur temps d'apprentissage"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",value:l.description,onChange:j=>o({...l,description:j.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Dcrivez le contenu de cette vido..."}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Rsum du contenu abord dans la vido"})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:r,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:s.isPending||i.isPending,className:"min-w-[120px] bg-purple-600 hover:bg-purple-700",children:s.isPending||i.isPending?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Sauvegarde..."})]}):a?"Modifier":"Ajouter"})]})]})]})})},Kle=({moduleId:e,onClose:t})=>{const r=zle(),a=qle(),s=$le(),[i,l]=k.useState({title:"",description:"",passing_score:60,time_limit_minutes:"",max_attempts:"",show_correct_answers:!0}),[o,d]=k.useState([{tempId:`q-${Date.now()}`,question_text:"",points:1,choices:[{tempId:`c-${Date.now()}-1`,choice_text:"",is_correct:!1},{tempId:`c-${Date.now()}-2`,choice_text:"",is_correct:!1}]}]),[u,f]=k.useState({}),[m,g]=k.useState(!1),x=()=>{d([...o,{tempId:`q-${Date.now()}`,question_text:"",points:1,choices:[{tempId:`c-${Date.now()}-1`,choice_text:"",is_correct:!1},{tempId:`c-${Date.now()}-2`,choice_text:"",is_correct:!1}]}])},b=T=>{if(o.length===1){f({questions:"Un test doit avoir au moins une question"});return}if(d(o.filter(P=>P.tempId!==T)),u.questions){const P={...u};delete P.questions,f(P)}},v=(T,P,D)=>{d(o.map(M=>M.tempId===T?{...M,[P]:D}:M))},y=T=>{d(o.map(P=>P.tempId===T?{...P,choices:[...P.choices,{tempId:`c-${Date.now()}`,choice_text:"",is_correct:!1}]}:P))},j=(T,P)=>{d(o.map(D=>D.tempId===T?D.choices.length<=2?(f({...u,[`choices-${T}`]:"Une question doit avoir au moins 2 choix de rponse"}),D):{...D,choices:D.choices.filter(M=>M.tempId!==P)}:D))},S=(T,P,D,M)=>{d(o.map(F=>F.tempId===T?{...F,choices:F.choices.map(H=>H.tempId===P?{...H,[D]:M}:H)}:F))},N=()=>{const T={};return i.title.trim()||(T.title="Le titre est obligatoire"),(i.passing_score<0||i.passing_score>100)&&(T.passing_score="Le score de russite doit tre entre 0 et 100"),i.time_limit_minutes&&parseInt(i.time_limit_minutes)<1&&(T.time_limit_minutes="La limite de temps doit tre d'au moins 1 minute"),i.max_attempts&&parseInt(i.max_attempts)<1&&(T.max_attempts="Le nombre de tentatives doit tre d'au moins 1"),o.length===0&&(T.questions="Le test doit avoir au moins une question"),o.forEach((P,D)=>{P.question_text.trim()||(T[`question-${P.tempId}`]=`Question ${D+1}: Le texte est obligatoire`),P.points<0&&(T[`points-${P.tempId}`]=`Question ${D+1}: Les points doivent tre positifs`),P.choices.length<2&&(T[`choices-${P.tempId}`]=`Question ${D+1}: Au moins 2 choix requis`),P.choices.some(F=>F.is_correct)||(T[`correct-${P.tempId}`]=`Question ${D+1}: Au moins un choix doit tre marqu comme correct`),P.choices.forEach((F,H)=>{F.choice_text.trim()||(T[`choice-${F.tempId}`]=`Question ${D+1}, Choix ${H+1}: Le texte est obligatoire`)})}),f(T),Object.keys(T).length===0},C=async T=>{if(T.preventDefault(),!!N()){g(!0);try{const P=await r.mutateAsync({moduleId:e,data:{title:i.title.trim(),description:i.description.trim()||void 0,passing_score:i.passing_score,time_limit_minutes:i.time_limit_minutes?parseInt(i.time_limit_minutes):void 0,max_attempts:i.max_attempts?parseInt(i.max_attempts):void 0,show_correct_answers:i.show_correct_answers}});for(let D=0;D<o.length;D++){const M=o[D],F=await a.mutateAsync({testId:P.id,data:{question_text:M.question_text.trim(),points:M.points,order_index:D}});for(let H=0;H<M.choices.length;H++){const L=M.choices[H];await s.mutateAsync({questionId:F.id,data:{choice_text:L.choice_text.trim(),is_correct:L.is_correct,order_index:H}})}}t()}catch(P){console.error("Error creating test:",P),f({submit:"Une erreur est survenue lors de la cration du test"}),g(!1)}}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full my-8",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10 rounded-t-lg",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Crer un test"}),n.jsx("button",{onClick:t,disabled:m,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:C,className:"p-6 space-y-8 max-h-[calc(90vh-140px)] overflow-y-auto",children:[u.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-800",children:u.submit})]}),n.jsxs("div",{className:"space-y-6 bg-gray-50 p-6 rounded-lg",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx("span",{className:"bg-orange-100 text-orange-700 w-7 h-7 rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),"Informations du test"]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Titre du test ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"title",value:i.title,onChange:T=>l({...i,title:T.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${u.title?"border-red-300":"border-gray-300"}`,placeholder:"Ex: Quiz sur les bases de donnes relationnelles"}),u.title&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.title})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",value:i.description,onChange:T=>l({...i,description:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Dcrivez les objectifs et le contenu de ce test..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"passing_score",className:"block text-sm font-medium text-gray-700 mb-2",children:["Score de russite (%) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",id:"passing_score",value:i.passing_score,onChange:T=>l({...i,passing_score:parseInt(T.target.value)||0}),min:"0",max:"100",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${u.passing_score?"border-red-300":"border-gray-300"}`}),u.passing_score&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.passing_score})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"time_limit_minutes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Limite de temps (minutes)"}),n.jsx("input",{type:"number",id:"time_limit_minutes",value:i.time_limit_minutes,onChange:T=>l({...i,time_limit_minutes:T.target.value}),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Optionnel"}),u.time_limit_minutes&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.time_limit_minutes})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"max_attempts",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de tentatives max"}),n.jsx("input",{type:"number",id:"max_attempts",value:i.max_attempts,onChange:T=>l({...i,max_attempts:T.target.value}),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Illimit"}),u.max_attempts&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.max_attempts})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Afficher les bonnes rponses"}),n.jsx("div",{className:"flex items-center gap-4 h-[42px]",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.show_correct_answers,onChange:T=>l({...i,show_correct_answers:T.target.checked}),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Montrer les rponses correctes aprs la soumission"})]})})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx("span",{className:"bg-orange-100 text-orange-700 w-7 h-7 rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),"Questions (",o.length,")"]}),n.jsxs(Ye,{type:"button",onClick:x,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Ajouter une question"]})]}),u.questions&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-red-800",children:u.questions})}),n.jsx("div",{className:"space-y-6",children:o.map((T,P)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 bg-white",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("h4",{className:"font-semibold text-gray-900",children:["Question ",P+1]}),o.length>1&&n.jsx("button",{type:"button",onClick:()=>b(T.tempId),className:"text-red-600 hover:text-red-700 hover:bg-red-50 p-1 rounded",title:"Supprimer cette question",children:n.jsx(Pr,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Texte de la question ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:T.question_text,onChange:D=>v(T.tempId,"question_text",D.target.value),rows:2,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${u[`question-${T.tempId}`]?"border-red-300":"border-gray-300"}`,placeholder:"Entrez la question..."}),u[`question-${T.tempId}`]&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u[`question-${T.tempId}`]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),n.jsx("input",{type:"number",value:T.points,onChange:D=>v(T.tempId,"points",parseInt(D.target.value)||1),min:"0",className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),u[`points-${T.tempId}`]&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u[`points-${T.tempId}`]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Choix de rponse (cochez les bonnes rponses)"}),n.jsxs("button",{type:"button",onClick:()=>y(T.tempId),className:"text-sm text-orange-600 hover:text-orange-700 flex items-center gap-1",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Ajouter un choix"]})]}),u[`choices-${T.tempId}`]&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 mb-3",children:n.jsx("p",{className:"text-sm text-red-800",children:u[`choices-${T.tempId}`]})}),u[`correct-${T.tempId}`]&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 mb-3",children:n.jsx("p",{className:"text-sm text-red-800",children:u[`correct-${T.tempId}`]})}),n.jsx("div",{className:"space-y-2",children:T.choices.map((D,M)=>n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border ${D.is_correct?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:D.is_correct,onChange:F=>S(T.tempId,D.tempId,"is_correct",F.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500",title:"Marquer comme bonne rponse"}),D.is_correct&&n.jsx(oh,{className:"h-4 w-4 text-green-600 ml-1"})]}),n.jsx("input",{type:"text",value:D.choice_text,onChange:F=>S(T.tempId,D.tempId,"choice_text",F.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${u[`choice-${D.tempId}`]?"border-red-300":"border-gray-300"}`,placeholder:`Choix ${M+1}`}),T.choices.length>2&&n.jsx("button",{type:"button",onClick:()=>j(T.tempId,D.tempId),className:"text-red-600 hover:text-red-700 hover:bg-red-100 p-1 rounded",title:"Supprimer ce choix",children:n.jsx(Pr,{className:"h-4 w-4"})})]},D.tempId))})]})]},T.tempId))})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t sticky bottom-0 bg-white",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,disabled:m,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:m,className:"min-w-[180px] bg-orange-600 hover:bg-orange-700",children:m?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Cration en cours..."})]}):"Crer le test"})]})]})]})})};function vL(e,t="MAD"){if(e==null)return"Gratuit";const r=typeof e=="string"?parseFloat(e):e;return isNaN(r)||r<=0?"Gratuit":`${r.toFixed(2)} ${t}`}const Gle=()=>{const{id:e}=xo(),t=$a(),{data:r,isLoading:a,error:s}=Lp(e),i=Lle(),l=Ble(),o=Ule(),[d,u]=k.useState(new Set),[f,m]=k.useState(!1),[g,x]=k.useState(!1),[b,v]=k.useState(!1),[y,j]=k.useState(null),[S,N]=k.useState(null),C=V=>{const G=new Set(d);G.has(V)?G.delete(V):G.add(V),u(G)},T=async V=>{if(window.confirm(`tes-vous sr de vouloir supprimer le module "${V.title}" ? Toutes les vidos et tests associs seront galement supprims.`))try{await i.mutateAsync(V.id)}catch(G){console.error("Error deleting module:",G),alert("Erreur lors de la suppression du module")}},P=async V=>{if(window.confirm(`tes-vous sr de vouloir supprimer la vido "${V.title}" ?`))try{await l.mutateAsync(V.id)}catch(G){console.error("Error deleting video:",G),alert("Erreur lors de la suppression de la vido")}},D=async V=>{if(window.confirm(`tes-vous sr de vouloir supprimer le test "${V.title}" ? Toutes les questions et rponses associes seront galement supprimes.`))try{await o.mutateAsync(V.id)}catch(G){console.error("Error deleting test:",G),alert("Erreur lors de la suppression du test")}},M=V=>V==="published"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",F=V=>V==="published"?"Publie":"Brouillon",H=V=>({video:"bg-purple-50 text-purple-700",test:"bg-orange-50 text-orange-700",document:"bg-blue-50 text-blue-700"})[V]||"bg-gray-50 text-gray-700",L=V=>({video:"Vido",test:"Test",document:"Document"})[V]||V;if(a)return n.jsx(Ut,{title:"Chargement...",subtitle:"Chargement de la formation",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(s||!r)return n.jsxs(Ut,{title:"Erreur",subtitle:"Formation introuvable",children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-800",children:"Formation introuvable"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:s?.message||"Cette formation n'existe pas ou a t supprime."})]})]}),n.jsx("div",{className:"mt-6",children:n.jsxs(Ye,{onClick:()=>t("/admin/formations/cours"),variant:"outline",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour aux formations"]})})]});const z=r.modules||[];return n.jsxs(Ut,{title:r.title,subtitle:"Configuration de la formation",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:n.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs(Ye,{variant:"ghost",size:"sm",onClick:()=>t("/admin/formations/cours"),className:"text-gray-600 hover:text-gray-900",children:[n.jsx(Xo,{className:"h-4 w-4 mr-1"}),"Retour"]}),n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${M(r.status)}`,children:F(r.status)})]}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.title}),r.description&&n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:r.description}),n.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[r.duration_hours&&n.jsxs("span",{children:[r.duration_hours,"h de contenu"]}),r.price&&Number(r.price)>0&&n.jsx("span",{children:vL(r.price)}),n.jsxs("span",{children:[z.length," module(s)"]})]})]})})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsx("div",{className:"flex flex-wrap gap-3",children:n.jsxs(Ye,{onClick:()=>{j(null),m(!0)},className:"flex items-center gap-2",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Ajouter un module"]})})}),z.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(wa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun module"}),n.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Commencez par crer le premier module de votre formation"}),n.jsxs(Ye,{onClick:()=>{j(null),m(!0)},className:"flex items-center gap-2",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Crer un module"]})]}):n.jsx("div",{className:"space-y-3",children:z.map(V=>{const G=d.has(V.id),ie=V.videos||[],Z=V.tests||[],X=ie.length>0||Z.length>0;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx("button",{onClick:()=>C(V.id),className:"text-gray-400 hover:text-gray-600",disabled:!X,children:X?G?n.jsx(Au,{className:"h-5 w-5"}):n.jsx(rl,{className:"h-5 w-5"}):n.jsx("div",{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",V.order_index+1]}),n.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:V.title}),n.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${H(V.module_type)}`,children:L(V.module_type)})]}),V.description&&n.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:V.description}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[n.jsxs("span",{children:[ie.length," vido(s)"]}),n.jsxs("span",{children:[Z.length," test(s)"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>{N(V.id),x(!0)},className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50",title:"Ajouter une vido",children:n.jsx(gg,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>{N(V.id),v(!0)},className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Ajouter un test",children:n.jsx(Nd,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>{j(V),m(!0)},className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"diter le module",children:n.jsx(hp,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>T(V),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Supprimer le module",children:n.jsx(Pr,{className:"h-4 w-4"})})]})]}),G&&X&&n.jsxs("div",{className:"border-t bg-gray-50 px-4 py-3 space-y-2",children:[ie.map(he=>n.jsxs("div",{className:"bg-white rounded border border-purple-100 p-3 flex items-center gap-3",children:[n.jsx(gg,{className:"h-4 w-4 text-purple-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:he.title}),he.duration_seconds&&n.jsxs("p",{className:"text-xs text-gray-500",children:[Math.floor(he.duration_seconds/60),"min"," ",he.duration_seconds%60,"s"]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>P(he),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Pr,{className:"h-3 w-3"})})})]},he.id)),Z.map(he=>n.jsxs("div",{className:"bg-white rounded border border-orange-100 p-3 flex items-center gap-3",children:[n.jsx(Nd,{className:"h-4 w-4 text-orange-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:he.title}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[n.jsxs("span",{children:[he.questions?.length||0," question(s)"]}),he.time_limit_minutes&&n.jsxs("span",{children:[he.time_limit_minutes," min"]}),n.jsxs("span",{children:["Score min: ",he.passing_score,"%"]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>D(he),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Pr,{className:"h-3 w-3"})})})]},he.id))]})]},V.id)})})]}),f&&e&&n.jsx(Vle,{formationId:e,module:y||void 0,modules:z,onClose:()=>{m(!1),j(null)}}),g&&S&&n.jsx(Wle,{moduleId:S,onClose:()=>{x(!1),N(null)}}),b&&S&&n.jsx(Kle,{moduleId:S,onClose:()=>{v(!1),N(null)}})]})},Rp={getAll:async()=>(await Ce.get("/corps-formation")).corps,getById:async e=>(await Ce.get(`/corps-formation/${e}`)).corps,create:async e=>(await Ce.post("/corps-formation",e)).corps,update:async(e,t)=>(await Ce.put(`/corps-formation/${e}`,t)).corps,delete:async e=>{await Ce.delete(`/corps-formation/${e}`)},getFormationsByCorps:async e=>(await Ce.get(`/corps-formation/${e}/formations`)).formations,getStats:async()=>(await Ce.get("/corps-formation/stats/global")).stats,duplicate:async(e,t)=>{const r=await Ce.post(`/corps-formation/${e}/duplicate`,t||{});return{corps:r.corps,duplicated_formations:r.duplicated_formations}}},hi={all:["corps-formation"],lists:()=>[...hi.all,"list"],list:()=>[...hi.lists()],details:()=>[...hi.all,"detail"],detail:e=>[...hi.details(),e],stats:()=>[...hi.all,"stats"],formations:e=>[...hi.detail(e),"formations"]};function x3(){return Ft({queryKey:hi.list(),queryFn:()=>Rp.getAll()})}function Yle(e){return Ft({queryKey:hi.formations(e),queryFn:()=>Rp.getFormationsByCorps(e),enabled:!!e})}function yL(){const e=Tt();return St({mutationFn:t=>Rp.create(t),onSuccess:()=>{e.invalidateQueries({queryKey:hi.lists()}),e.invalidateQueries({queryKey:hi.stats()})}})}function bL(){const e=Tt();return St({mutationFn:({id:t,data:r})=>Rp.update(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:hi.lists()}),e.invalidateQueries({queryKey:hi.detail(r.id)}),e.invalidateQueries({queryKey:hi.stats()})}})}function wL(){const e=Tt();return St({mutationFn:t=>Rp.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:hi.lists()}),e.invalidateQueries({queryKey:hi.stats()})}})}function Xle(){const e=Tt();return St({mutationFn:({id:t,options:r})=>Rp.duplicate(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:hi.lists()}),e.invalidateQueries({queryKey:hi.stats()})}})}const al={getAll:async()=>Ce.get("/certificate-templates"),getById:async e=>Ce.get(`/certificate-templates/${e}`),create:async e=>Ce.post("/certificate-templates",e),update:async(e,t)=>Ce.put(`/certificate-templates/${e}`,t),delete:async e=>Ce.delete(`/certificate-templates/${e}`),duplicate:async e=>Ce.post(`/certificate-templates/${e}/duplicate`),duplicateToFolder:async(e,t)=>Ce.post(`/certificate-templates/${e}/duplicate-to-folder`,{targetFolderId:t}),seedDefaults:async()=>Ce.post("/certificate-templates/seed-defaults"),generatePreview:async(e,t)=>{const r=await fetch(`/api/certificate-templates/${e}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to generate preview");return r.blob()},uploadLogo:async(e,t)=>{const r=new FormData;r.append("logo",t);const a=await fetch(`/api/certificate-templates/${e}/upload-logo`,{method:"POST",body:r});if(!a.ok)throw new Error("Failed to upload logo");return a.json()},uploadSignature:async(e,t)=>{const r=new FormData;r.append("signature",t);const a=await fetch(`/api/certificate-templates/${e}/upload-signature`,{method:"POST",body:r});if(!a.ok)throw new Error("Failed to upload signature");return a.json()},uploadBackground:async(e,t)=>{const r=new FormData;r.append("background",t);const a=await fetch(`/api/certificate-templates/${e}/upload-background`,{method:"POST",body:r});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to upload background image")}return a.json()},setBackgroundUrl:async(e,t)=>Ce.post(`/certificate-templates/${e}/background-url`,{url:t}),deleteBackground:async e=>Ce.delete(`/certificate-templates/${e}/background`),uploadCustomFont:async(e,t)=>{const r=new FormData;r.append("font",e),r.append("fontName",t);const a=await fetch("/api/certificate-templates/custom-fonts/upload",{method:"POST",body:r});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to upload font")}return a.json()},getCustomFonts:async()=>Ce.get("/certificate-templates/custom-fonts"),deleteCustomFont:async e=>Ce.delete(`/certificate-templates/custom-fonts/${e}`)},$c={all:["certificate-templates"],detail:e=>["certificate-templates",e],customFonts:["custom-fonts"]},Jb=()=>Ft({queryKey:$c.all,queryFn:al.getAll,staleTime:300*1e3,select:e=>e.templates}),Qle=e=>Ft({queryKey:$c.detail(e||""),queryFn:()=>al.getById(e),enabled:!!e,staleTime:300*1e3,select:t=>t.template}),Zle=()=>{const e=Tt();return St({mutationFn:t=>al.create(t),onSuccess:()=>{e.invalidateQueries({queryKey:$c.all})}})},jL=()=>{const e=Tt();return St({mutationFn:({id:t,data:r})=>al.update(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:$c.all}),e.invalidateQueries({queryKey:$c.detail(r.id)})}})},Jle=()=>{const e=Tt();return St({mutationFn:t=>al.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:$c.all})}})},eoe=()=>{const e=Tt();return St({mutationFn:t=>al.duplicate(t),onSuccess:()=>{e.invalidateQueries({queryKey:$c.all})}})},toe=()=>{const e=Tt();return St({mutationFn:({id:t,targetFolderId:r})=>al.duplicateToFolder(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:$c.all})}})},roe=()=>Ft({queryKey:$c.customFonts,queryFn:al.getCustomFonts,staleTime:300*1e3,select:e=>e.fonts}),aoe=()=>{const e=Tt();return St({mutationFn:({file:t,fontName:r})=>al.uploadCustomFont(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:$c.customFonts})}})},noe=()=>{const e=Tt();return St({mutationFn:t=>al.deleteCustomFont(t),onSuccess:()=>{e.invalidateQueries({queryKey:$c.customFonts})}})},lv={getAll:async()=>(await Ce.get("/template-folders")).folders,getTree:async()=>(await Ce.get("/template-folders/tree")).tree,getById:async e=>(await Ce.get(`/template-folders/${e}`)).folder,create:async e=>(await Ce.post("/template-folders",e)).folder,update:async(e,t)=>(await Ce.put(`/template-folders/${e}`,t)).folder,delete:async e=>{await Ce.delete(`/template-folders/${e}`)},move:async(e,t)=>(await Ce.post(`/template-folders/${e}/move`,t)).folder},soe=()=>Ft({queryKey:["template-folders"],queryFn:()=>lv.getAll()}),ioe=()=>Ft({queryKey:["template-folders-tree"],queryFn:()=>lv.getTree()}),loe=()=>{const e=Tt();return St({mutationFn:t=>lv.create(t),onSuccess:()=>{e.invalidateQueries({queryKey:["template-folders"]}),e.invalidateQueries({queryKey:["template-folders-tree"]}),e.invalidateQueries({queryKey:["certificate-templates"]})}})},ooe=()=>{const e=Tt();return St({mutationFn:({id:t,data:r})=>lv.update(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["template-folders"]}),e.invalidateQueries({queryKey:["template-folders-tree"]}),e.invalidateQueries({queryKey:["template-folder",r.id]})}})},coe=()=>{const e=Tt();return St({mutationFn:t=>lv.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["template-folders"]}),e.invalidateQueries({queryKey:["template-folders-tree"]}),e.invalidateQueries({queryKey:["certificate-templates"]})}})},uoe=({isOpen:e,onClose:t,onSelect:r,selectedTemplateIds:a=[],title:s="Slectionner des templates"})=>{const[i,l]=k.useState(""),[o,d]=k.useState(null),[u,f]=k.useState(a),{data:m,isLoading:g}=Jb(),{data:x,isLoading:b}=soe(),v=k.useMemo(()=>{if(!m)return[];let P=m;if(o&&(P=P.filter(D=>D.folder_id===o)),i.trim()){const D=i.toLowerCase();P=P.filter(M=>M.name.toLowerCase().includes(D)||M.description?.toLowerCase().includes(D))}return P},[m,o,i]),y=P=>{f(D=>D.includes(P)?D.filter(M=>M!==P):[...D,P])},j=()=>{const P=v.map(M=>M.id),D=[...new Set([...u,...P])];f(D)},S=()=>{const P=v.map(D=>D.id);f(D=>D.filter(M=>!P.includes(M)))},N=k.useMemo(()=>m?m.filter(P=>u.includes(P.id)):[],[m,u]),C=()=>{r(u),t()},T=()=>{f(a),t()};return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[80vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s}),n.jsx("button",{onClick:T,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(Mr,{className:"h-5 w-5 text-gray-500"})})]}),n.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n.jsxs("div",{className:"w-64 border-r border-gray-200 overflow-y-auto bg-gray-50 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:"Dossiers"}),n.jsxs("div",{onClick:()=>d(null),className:`flex items-center gap-2 px-3 py-2 rounded cursor-pointer mb-1 transition-colors ${o===null?"bg-blue-100 text-blue-700":"hover:bg-gray-200 text-gray-700"}`,children:[n.jsx(KF,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Tous les templates"}),n.jsx("span",{className:"ml-auto text-xs text-gray-500",children:m?.length||0})]}),b?n.jsx("div",{className:"text-xs text-gray-500 px-3 py-2",children:"Chargement..."}):x?.map(P=>{const D=m?.filter(M=>M.folder_id===P.id).length||0;return n.jsxs("div",{onClick:()=>d(P.id),className:`flex items-center gap-2 px-3 py-2 rounded cursor-pointer mb-1 transition-colors ${o===P.id?"bg-blue-100 text-blue-700":"hover:bg-gray-200 text-gray-700"}`,children:[n.jsx(ch,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm flex-1 truncate",children:P.name}),n.jsx("span",{className:"text-xs text-gray-500",children:D})]},P.id)})]}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Rechercher un template...",value:i,onChange:P=>l(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),n.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[n.jsx("button",{onClick:j,className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Tout slectionner"}),n.jsx("span",{className:"text-xs text-gray-400",children:""}),n.jsx("button",{onClick:S,className:"text-xs text-gray-600 hover:text-gray-700 font-medium",children:"Tout dslectionner"}),n.jsxs("span",{className:"ml-auto text-xs text-gray-600",children:[u.length," slectionn",u.length>1?"s":""]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("div",{className:"text-gray-500 text-sm",children:"Chargement des templates..."})}):v.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[n.jsx(Fa,{className:"h-12 w-12 mb-2 text-gray-300"}),n.jsx("p",{className:"text-sm",children:"Aucun template trouv"})]}):n.jsx("div",{className:"grid grid-cols-3 gap-4",children:v.map(P=>{const D=u.includes(P.id);return n.jsxs("div",{onClick:()=>y(P.id),className:`relative border rounded-lg p-4 cursor-pointer transition-all ${D?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:[n.jsx("div",{className:`absolute top-3 right-3 w-5 h-5 rounded border-2 flex items-center justify-center ${D?"bg-blue-600 border-blue-600":"border-gray-300 bg-white"}`,children:D&&n.jsx(oh,{className:"h-3 w-3 text-white"})}),n.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[n.jsx(Fn,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:P.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:P.description||"Aucune description"}),n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-gray-600",children:[n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded",children:P.template_config.layout.format.toUpperCase()}),n.jsx("span",{children:P.template_config.layout.orientation==="landscape"?"Paysage":"Portrait"})]})]})]})]},P.id)})})})]})]}),u.length>0&&n.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[n.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:["Templates slectionns (",u.length,")"]}),n.jsx("div",{className:"flex flex-wrap gap-2 max-h-20 overflow-y-auto",children:N.map(P=>n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-xs",children:[n.jsx("span",{className:"font-medium truncate max-w-xs",children:P.name}),n.jsx("button",{onClick:D=>{D.stopPropagation(),y(P.id)},className:"hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:n.jsx(Mr,{className:"h-3 w-3"})})]},P.id))})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-200",children:[n.jsx("button",{onClick:T,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),n.jsxs("button",{onClick:C,disabled:u.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Slectionner (",u.length,")"]})]})]})}):null},doe=({formation:e,onClose:t})=>{const r=!!e?.id,a=Cle(),s=Ele(),i=Ole(),{data:l}=Jb(),{data:o=[]}=x3(),{data:d}=Dle(e?.id),[u,f]=k.useState({title:e?.title||"",description:e?.description||"",price:e?.price?.toString()||"",duration_hours:e?.duration_hours?.toString()||"",level:e?.level||"debutant",thumbnail_url:e?.thumbnail_url||"",status:e?.status||"draft",passing_score_percentage:e?.passing_score_percentage?.toString()||"80",default_certificate_template_id:e?.default_certificate_template_id||"",corps_formation_id:e?.corps_formation_id||""}),[m,g]=k.useState(d?.map(D=>D.template_id)||[]),[x,b]=k.useState(!1),[v,y]=k.useState({}),[j,S]=k.useState(!1),N=()=>{const D={};u.title.trim()||(D.title="Le titre est obligatoire"),u.corps_formation_id||(D.corps_formation_id="Le corps de formation est obligatoire"),u.price&&parseFloat(u.price)<0&&(D.price="Le prix doit tre positif"),u.duration_hours&&parseInt(u.duration_hours)<1&&(D.duration_hours="La dure doit tre suprieure  0");const M=parseInt(u.passing_score_percentage);return(M<0||M>100)&&(D.passing_score_percentage="Le score doit tre entre 0 et 100"),y(D),Object.keys(D).length===0},C=l?.filter(D=>m.includes(D.id))||[],T=D=>{g(M=>M.filter(F=>F!==D))},P=async D=>{if(D.preventDefault(),!!N()){S(!0);try{const M={title:u.title.trim(),description:u.description.trim()||void 0,price:u.price?parseFloat(u.price):void 0,duration_hours:u.duration_hours?parseInt(u.duration_hours):void 0,level:u.level,thumbnail_url:u.thumbnail_url.trim()||void 0,status:u.status,passing_score_percentage:parseInt(u.passing_score_percentage),default_certificate_template_id:u.default_certificate_template_id||void 0,corps_formation_id:u.corps_formation_id};let F;if(r&&e){if(!e.id)throw new Error("ID de formation manquant. Impossible de modifier cette formation.");await s.mutateAsync({id:e.id,data:M}),F=e.id}else F=(await a.mutateAsync(M)).id;m.length>0&&await i.mutateAsync({formationId:F,template_ids:m,document_type:"certificat"}),t()}catch(M){console.error("Error saving formation:",M),y({submit:M.message||"Erreur lors de l'enregistrement"})}finally{S(!1)}}};return n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(wa,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Modifier la formation":"Nouvelle formation"}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:r?"Mettez  jour les informations de la formation":"Crez une nouvelle formation en ligne"})]})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:P,className:"p-6 space-y-6",children:[v.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:v.submit})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Titre de la formation ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:u.title,onChange:D=>f({...u,title:D.target.value}),placeholder:"Ex: Matriser React et TypeScript",className:v.title?"border-red-300":""}),v.title&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:u.description,onChange:D=>f({...u,description:D.target.value}),placeholder:"Description complte de la formation...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Corps de Formation ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:u.corps_formation_id,onChange:D=>f({...u,corps_formation_id:D.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm ${v.corps_formation_id?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Slectionner un corps de formation"}),o.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]}),v.corps_formation_id&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.corps_formation_id}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Catgorie de formation (ex: Bureautique, Dveloppement Web...)"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau"}),n.jsxs("select",{value:u.level,onChange:D=>f({...u,level:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"debutant",children:"Dbutant"}),n.jsx("option",{value:"intermediaire",children:"Intermdiaire"}),n.jsx("option",{value:"avance",children:"Avanc"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),n.jsxs("select",{value:u.status,onChange:D=>f({...u,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"draft",children:"Brouillon"}),n.jsx("option",{value:"published",children:"Publie"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prix (MAD)"}),n.jsx(xr,{type:"number",min:"0",step:"0.01",value:u.price,onChange:D=>f({...u,price:D.target.value}),placeholder:"0.00",className:v.price?"border-red-300":""}),v.price&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.price}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Laissez vide pour gratuit"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dure (heures)"}),n.jsx(xr,{type:"number",min:"1",value:u.duration_hours,onChange:D=>f({...u,duration_hours:D.target.value}),placeholder:"10",className:v.duration_hours?"border-red-300":""}),v.duration_hours&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.duration_hours})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Score de russite (%) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"number",min:"0",max:"100",value:u.passing_score_percentage,onChange:D=>f({...u,passing_score_percentage:D.target.value}),className:v.passing_score_percentage?"border-red-300":""}),v.passing_score_percentage&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.passing_score_percentage}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Score minimum requis pour valider les tests (dfaut: 80%)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL de l'image"}),n.jsx(xr,{type:"url",value:u.thumbnail_url,onChange:D=>f({...u,thumbnail_url:D.target.value}),placeholder:"https://example.com/image.jpg"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Image de prsentation de la formation (optionnel)"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4 text-blue-600"}),"Templates de Certificat"]}),n.jsxs("button",{type:"button",onClick:()=>b(!0),className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors flex items-center justify-center gap-2 text-sm font-medium text-gray-600 hover:text-blue-600",children:[n.jsx(Jr,{className:"h-4 w-4"}),m.length===0?"Slectionner des templates":"Ajouter / Modifier les templates"]}),C.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsxs("p",{className:"text-xs font-medium text-gray-600",children:[C.length," template",C.length>1?"s":""," slectionn",C.length>1?"s":""]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(D=>n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:[n.jsx(Fn,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate max-w-xs",children:D.name}),n.jsx("button",{type:"button",onClick:()=>T(D.id),className:"hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:n.jsx(Mr,{className:"h-3 w-3"})})]},D.id))})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ces templates seront utiliss pour gnrer les certificats de cette formation"})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,disabled:j,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:j,className:"min-w-[100px]",children:j?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"..."})]}):r?"Enregistrer":"Crer"})]})]})]}),n.jsx(uoe,{isOpen:x,onClose:()=>b(!1),onSelect:g,selectedTemplateIds:m,title:"Slectionner des templates de certificat"})]})};function foe({isOpen:e,onClose:t,onSubmit:r,corpsId:a,corpsName:s}){const{data:i=[],isLoading:l}=Yle(a),{data:o=[]}=Jb(),[d,u]=k.useState({title:"",description:"",price:"",level:"intermediaire",certificate_template_id:"",formation_ids:[]}),[f,m]=k.useState(!1);k.useEffect(()=>{e||u({title:"",description:"",price:"",level:"intermediaire",certificate_template_id:"",formation_ids:[]})},[e]);const g=async y=>{if(y.preventDefault(),!d.title.trim()){alert("Le nom du pack est obligatoire");return}if(!d.price||parseFloat(d.price)<=0){alert("Le prix doit tre suprieur  0");return}if(d.formation_ids.length===0){alert("Veuillez slectionner au moins une formation");return}m(!0);try{await r({title:d.title,description:d.description||void 0,corps_formation_id:a,price:parseFloat(d.price),certificate_template_id:d.certificate_template_id||void 0,formation_ids:d.formation_ids,level:d.level}),t()}catch(j){console.error("Erreur cration pack:",j),alert(j.message||"Erreur lors de la cration du pack")}finally{m(!1)}},x=y=>{u(j=>({...j,formation_ids:j.formation_ids.includes(y)?j.formation_ids.filter(S=>S!==y):[...j.formation_ids,y]}))},b=i.filter(y=>d.formation_ids.includes(y.id)),v=b.reduce((y,j)=>y+parseFloat(String(j.price||0)),0);return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:n.jsx(Zx,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Crer un Pack"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Corps: ",s]})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"h-6 w-6"})})]}),n.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom du pack ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"text",value:d.title,onChange:y=>u({...d,title:y.target.value}),placeholder:"Ex: Pack Bureautique Complet",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:d.description,onChange:y=>u({...d,description:y.target.value}),placeholder:"Description du pack...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prix (MAD) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"number",step:"0.01",min:"0",value:d.price,onChange:y=>u({...d,price:y.target.value}),placeholder:"1500.00",required:!0}),b.length>0&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Prix total formations: ",v.toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau"}),n.jsxs("select",{value:d.level,onChange:y=>u({...d,level:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"debutant",children:"Dbutant"}),n.jsx("option",{value:"intermediaire",children:"Intermdiaire"}),n.jsx("option",{value:"avance",children:"Avanc"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template de certificat (optionnel)"}),n.jsxs("select",{value:d.certificate_template_id,onChange:y=>u({...d,certificate_template_id:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Aucun template spcifique"}),o.map(y=>n.jsx("option",{value:y.id,children:y.name},y.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Formations incluses ",n.jsx("span",{className:"text-red-500",children:"*"})]}),l?n.jsx("p",{className:"text-sm text-gray-500",children:"Chargement des formations..."}):i.length===0?n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-yellow-800",children:"Aucune formation unitaire publie dans ce corps de formation. Veuillez d'abord crer des formations avant de crer un pack."})}):n.jsx("div",{className:"border border-gray-300 rounded-lg divide-y divide-gray-200 max-h-64 overflow-y-auto",children:i.map(y=>{const j=d.formation_ids.includes(y.id);return n.jsxs("label",{className:`flex items-start gap-3 p-4 cursor-pointer hover:bg-gray-50 transition-colors ${j?"bg-blue-50":""}`,children:[n.jsx("div",{className:"flex items-center h-5",children:n.jsx("input",{type:"checkbox",checked:j,onChange:()=>x(y.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.title}),j&&n.jsx(oh,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]}),y.description&&n.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:y.description}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[y.price&&n.jsxs("span",{className:"font-medium",children:[parseFloat(String(y.price)).toFixed(2)," MAD"]}),y.duration_hours&&n.jsxs("span",{children:[y.duration_hours,"h"]}),y.level&&n.jsx("span",{className:"capitalize",children:y.level})]})]})]},y.id)})}),d.formation_ids.length>0&&n.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:[d.formation_ids.length," formation",d.formation_ids.length>1?"s":""," slectionne",d.formation_ids.length>1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[n.jsx(Ye,{type:"submit",disabled:f||i.length===0,className:"flex-1",children:f?"Cration...":"Crer le pack"}),n.jsx(Ye,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Annuler"})]})]})]})}):null}const hoe={create:async e=>(await Ce.post("/cours/packs",e)).pack,getById:async e=>(await Ce.get(`/cours/packs/${e}`)).pack,update:async(e,t)=>(await Ce.put(`/cours/packs/${e}`,t)).pack,delete:async e=>{await Ce.delete(`/cours/packs/${e}`)}};function moe(){const e=$a(),{data:t=[],isLoading:r}=x3(),{data:a=[],isLoading:s}=Zb(),{data:i}=Hle(),{data:l=[]}=qd(),o=Tle(),d=Fle(),u=yL(),f=bL(),m=wL(),g=Xle(),[x,b]=k.useState(new Set),[v,y]=k.useState(!1),[j,S]=k.useState(null),[N,C]=k.useState({name:"",description:"",color:"#3B82F6",order_index:0,segment_id:""}),[T,P]=k.useState(!1),[D,M]=k.useState(null),[F,H]=k.useState(""),[L,z]=k.useState(!1),[V,G]=k.useState(null),ie=Q=>{b(ne=>{const ye=new Set(ne);return ye.has(Q)?ye.delete(Q):ye.add(Q),ye})},Z=Q=>a.filter(ne=>ne.corps_formation_id===Q),X=async Q=>{if(Q.preventDefault(),!N.name.trim()){alert("Le nom du corps est obligatoire");return}try{j?await f.mutateAsync({id:j.id,data:N}):await u.mutateAsync(N),R()}catch(ne){console.error("Erreur lors de la sauvegarde:",ne),alert(ne.message||"Erreur lors de la sauvegarde")}},he=Q=>{S(Q),C({name:Q.name,description:Q.description||"",color:Q.color||"#3B82F6",order_index:Q.order_index||0,segment_id:Q.segment_id||""}),y(!0)},ce=async(Q,ne)=>{if(confirm(`tes-vous sr de vouloir supprimer le corps "${ne}" ?`))try{await m.mutateAsync(Q)}catch(ye){alert(ye.message||"Erreur lors de la suppression")}},ke=async(Q,ne)=>{const ye=confirm(`Voulez-vous dupliquer le corps "${ne}" avec toutes ses formations ?

OUI = Avec formations
NON = Sans formations`);try{await g.mutateAsync({id:Q,options:{include_formations:ye}})}catch(De){alert(De.message||"Erreur lors de la duplication")}},se=async(Q,ne)=>{const ye=confirm(`Voulez-vous dupliquer la formation "${ne}" avec tous ses modules ?

OUI = Avec modules
NON = Sans modules`);try{await d.mutateAsync({id:Q,options:{include_modules:ye}})}catch(De){alert(De.message||"Erreur lors de la duplication")}},R=()=>{C({name:"",description:"",color:"#3B82F6",order_index:0,segment_id:""}),S(null),y(!1)},I=Q=>{H(Q),M(null),P(!0)},q=Q=>{M(Q),H(""),P(!0)},K=async(Q,ne)=>{if(confirm(`tes-vous sr de vouloir supprimer "${ne}" ?`))try{await o.mutateAsync(Q)}catch(ye){alert(ye.message||"Erreur lors de la suppression")}},te=(Q,ne)=>{G({id:Q,name:ne}),z(!0)},J=async Q=>{try{await hoe.create(Q),z(!1),G(null)}catch(ne){throw console.error("Erreur cration pack:",ne),ne}};return n.jsx(Ut,{title:"Gestion des Formations",subtitle:"Corps de formation et formations associes",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs(Ye,{onClick:()=>y(!0),className:"w-full sm:w-auto",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Nouveau Corps"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsx(Or,{children:n.jsx(Fr,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Corps"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:t.length})]}),n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(dp,{className:"h-6 w-6 text-blue-600"})})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Formations"}),n.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:i?.formations?.total||0})]}),n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(wa,{className:"h-6 w-6 text-green-600"})})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vidos"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:i?.total_videos||0})]}),n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(gg,{className:"h-6 w-6 text-purple-600"})})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tests"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-1",children:i?.total_tests||0})]}),n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Nd,{className:"h-6 w-6 text-orange-600"})})]})})})]}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsxs("h2",{className:"text-xl font-semibold",children:[j?"Modifier":"Nouveau"," Corps de Formation"]})}),n.jsxs("form",{onSubmit:X,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom du corps ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"text",value:N.name,onChange:Q=>C({...N,name:Q.target.value}),placeholder:"Ex: Bureautique, Dveloppement Web...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:N.description,onChange:Q=>C({...N,description:Q.target.value}),placeholder:"Description du corps de formation...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segment (optionnel)"}),n.jsxs("select",{value:N.segment_id,onChange:Q=>C({...N,segment_id:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Aucun segment"}),l.map(Q=>n.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleur"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xr,{type:"color",value:N.color,onChange:Q=>C({...N,color:Q.target.value}),className:"w-20 h-10"}),n.jsx(xr,{type:"text",value:N.color,onChange:Q=>C({...N,color:Q.target.value}),placeholder:"#3B82F6",className:"flex-1"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordre d'affichage"}),n.jsx(xr,{type:"number",value:N.order_index,onChange:Q=>C({...N,order_index:parseInt(Q.target.value)||0}),min:"0"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(Ye,{type:"submit",disabled:u.isPending||f.isPending,children:j?"Modifier":"Crer"}),n.jsx(Ye,{type:"button",variant:"outline",onClick:R,children:"Annuler"})]})]})]})}),n.jsx("div",{className:"space-y-3",children:r?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-500",children:"Chargement..."})}):t.length===0?n.jsx(Or,{children:n.jsxs(Fr,{className:"p-12 text-center",children:[n.jsx(dp,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun corps de formation"}),n.jsxs(Ye,{onClick:()=>y(!0),children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Crer le premier corps"]})]})}):t.map(Q=>{const ne=Z(Q.id),ye=x.has(Q.id);return n.jsxs(Or,{className:"overflow-hidden",children:[n.jsx("div",{className:"bg-gray-50 border-b",children:n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("button",{onClick:()=>ie(Q.id),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:ye?n.jsx(Au,{className:"h-5 w-5 text-gray-600"}):n.jsx(rl,{className:"h-5 w-5 text-gray-600"})}),n.jsx("div",{className:"w-8 h-8 rounded border border-gray-300 flex-shrink-0",style:{backgroundColor:Q.color||"#3B82F6"}}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Q.name}),n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[ne.length," formation",ne.length!==1?"s":""]}),Q.segment_name&&n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[n.jsx(ns,{className:"h-3 w-3 mr-1"}),Q.segment_name]})]}),Q.description&&n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:Q.description})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>I(Q.id),children:[n.jsx(Jr,{className:"h-4 w-4 mr-1"}),"Formation"]}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>ke(Q.id,Q.name),disabled:g.isPending,title:"Dupliquer ce corps",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>he(Q),children:n.jsx(Mc,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>ce(Q.id,Q.name),disabled:m.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Pr,{className:"h-4 w-4"})})]})]})}),ye&&n.jsx(Fr,{className:"p-0",children:s?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"Chargement des formations..."}):ne.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(wa,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Aucune formation dans ce corps"}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>I(Q.id),children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Crer une formation"]}),n.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>te(Q.id,Q.name),children:[n.jsx(Zx,{className:"h-4 w-4 mr-2"}),"Crer un pack"]})]})]}):n.jsxs("div",{children:[n.jsx("div",{className:"px-4 py-3 bg-amber-50 border-b border-amber-100",children:n.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>te(Q.id,Q.name),className:"bg-white",children:[n.jsx(Zx,{className:"h-4 w-4 mr-2 text-amber-600"}),"Crer un pack pour ce corps"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Formation"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Niveau"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prix"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Modules"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Certificat"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:ne.map(De=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-4 py-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:De.title}),De.is_pack&&n.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-700",children:[n.jsx(Zx,{className:"h-3 w-3 mr-1"}),"Pack"]})]}),De.is_pack&&De.formations_count&&n.jsxs("div",{className:"text-xs text-blue-600 mt-0.5",children:[De.formations_count," formation",De.formations_count>1?"s":""," incluse",De.formations_count>1?"s":""]})]}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-gray-600 capitalize",children:De.level||"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:De.price?`${parseFloat(String(De.price)).toFixed(2)} MAD`:"Gratuit"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-gray-600",children:De.module_count||0})}),n.jsx("td",{className:"px-4 py-3",children:De.certificate_template_name?n.jsxs("div",{className:"flex items-center gap-1 text-sm text-blue-600",children:[n.jsx(Fn,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:De.certificate_template_name})]}):n.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${De.status==="published"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:De.status==="published"?"Publi":"Brouillon"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[!De.is_pack&&n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>e(`/admin/formations/cours/${De.id}/editor`),title:"diteur",children:n.jsx(Xg,{className:"h-4 w-4"})}),!De.is_pack&&n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>se(De.id,De.title),disabled:d.isPending,title:"Dupliquer cette formation",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>q(De),title:"Modifier",children:n.jsx(Mc,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>K(De.id,De.title),disabled:o.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Supprimer",children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},De.id))})]})})]})})]},Q.id)})}),T&&n.jsx(doe,{formation:D?{...D,corps_formation_id:D.corps_formation_id}:F?{corps_formation_id:F}:void 0,onClose:()=>{P(!1),M(null),H("")}}),L&&V&&n.jsx(foe,{isOpen:L,onClose:()=>{z(!1),G(null)},onSubmit:J,corpsId:V.id,corpsName:V.name})]})})}function NL(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=NL(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ma(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=NL(e))&&(a&&(a+=" "),a+=t);return a}var poe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function g3(e){if(typeof e!="string")return!1;var t=poe;return t.includes(e)}var xoe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function _L(e){if(typeof e!="string")return!1;var t=xoe;return t.includes(e)}function SL(e){return typeof e=="string"&&e.startsWith("data-")}function mo(e){var t=Object.entries(e).filter(r=>{var[a]=r;return _L(a)||SL(a)});return Object.fromEntries(t)}function xh(e){if(e==null)return null;if(k.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return mo(t)}return typeof e=="object"&&!Array.isArray(e)?mo(e):null}function ll(e){var t=Object.entries(e).filter(r=>{var[a]=r;return _L(a)||SL(a)||g3(a)});return Object.fromEntries(t)}function goe(e){return e==null?null:k.isValidElement(e)?ll(e.props):typeof e=="object"&&!Array.isArray(e)?ll(e):null}var voe=["children","width","height","viewBox","className","style","title","desc"];function ZN(){return ZN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ZN.apply(null,arguments)}function yoe(e,t){if(e==null)return{};var r,a,s=boe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function boe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var v3=k.forwardRef((e,t)=>{var{children:r,width:a,height:s,viewBox:i,className:l,style:o,title:d,desc:u}=e,f=yoe(e,voe),m=i||{width:a,height:s,x:0,y:0},g=ma("recharts-surface",l);return k.createElement("svg",ZN({},ll(f),{className:g,width:a,height:s,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),k.createElement("title",null,d),k.createElement("desc",null,u),r)}),woe=["children","className"];function JN(){return JN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},JN.apply(null,arguments)}function joe(e,t){if(e==null)return{};var r,a,s=Noe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Noe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var xi=k.forwardRef((e,t)=>{var{children:r,className:a}=e,s=joe(e,woe),i=ma("recharts-layer",a);return k.createElement("g",JN({className:i},ll(s),{ref:t}),r)}),kL=k.createContext(null),_oe=()=>k.useContext(kL);function Qa(e){return function(){return e}}const AL=Math.cos,$y=Math.sin,Gc=Math.sqrt,Hy=Math.PI,e2=2*Hy,e_=Math.PI,t_=2*e_,B0=1e-6,Soe=t_-B0;function CL(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function koe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return CL;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class Aoe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?CL:koe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,l){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,d=a-t,u=s-r,f=l-t,m=o-r,g=f*f+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(g>B0)if(!(Math.abs(m*d-u*f)>B0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=a-l,b=s-o,v=d*d+u*u,y=x*x+b*b,j=Math.sqrt(v),S=Math.sqrt(g),N=i*Math.tan((e_-Math.acos((v+g-y)/(2*j*S)))/2),C=N/S,T=N/j;Math.abs(C-1)>B0&&this._append`L${t+C*f},${r+C*m}`,this._append`A${i},${i},0,0,${+(m*x>f*b)},${this._x1=t+T*d},${this._y1=r+T*u}`}}arc(t,r,a,s,i,l){if(t=+t,r=+r,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let o=a*Math.cos(s),d=a*Math.sin(s),u=t+o,f=r+d,m=1^l,g=l?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>B0||Math.abs(this._y1-f)>B0)&&this._append`L${u},${f}`,a&&(g<0&&(g=g%t_+t_),g>Soe?this._append`A${a},${a},0,1,${m},${t-o},${r-d}A${a},${a},0,1,${m},${this._x1=u},${this._y1=f}`:g>B0&&this._append`A${a},${a},0,${+(g>=e_)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function y3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new Aoe(t)}function b3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function EL(e){this._context=e}EL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function t2(e){return new EL(e)}function TL(e){return e[0]}function DL(e){return e[1]}function OL(e,t){var r=Qa(!0),a=null,s=t2,i=null,l=y3(o);e=typeof e=="function"?e:e===void 0?TL:Qa(e),t=typeof t=="function"?t:t===void 0?DL:Qa(t);function o(d){var u,f=(d=b3(d)).length,m,g=!1,x;for(a==null&&(i=s(x=l())),u=0;u<=f;++u)!(u<f&&r(m=d[u],u,d))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(m,u,d),+t(m,u,d));if(x)return i=null,x+""||null}return o.x=function(d){return arguments.length?(e=typeof d=="function"?d:Qa(+d),o):e},o.y=function(d){return arguments.length?(t=typeof d=="function"?d:Qa(+d),o):t},o.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Qa(!!d),o):r},o.curve=function(d){return arguments.length?(s=d,a!=null&&(i=s(a)),o):s},o.context=function(d){return arguments.length?(d==null?a=i=null:i=s(a=d),o):a},o}function I1(e,t,r){var a=null,s=Qa(!0),i=null,l=t2,o=null,d=y3(u);e=typeof e=="function"?e:e===void 0?TL:Qa(+e),t=typeof t=="function"?t:Qa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?DL:Qa(+r);function u(m){var g,x,b,v=(m=b3(m)).length,y,j=!1,S,N=new Array(v),C=new Array(v);for(i==null&&(o=l(S=d())),g=0;g<=v;++g){if(!(g<v&&s(y=m[g],g,m))===j)if(j=!j)x=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=x;--b)o.point(N[b],C[b]);o.lineEnd(),o.areaEnd()}j&&(N[g]=+e(y,g,m),C[g]=+t(y,g,m),o.point(a?+a(y,g,m):N[g],r?+r(y,g,m):C[g]))}if(S)return o=null,S+""||null}function f(){return OL().defined(s).curve(l).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:Qa(+m),a=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Qa(+m),u):e},u.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:Qa(+m),u):a},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:Qa(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Qa(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Qa(+m),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(a).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:Qa(!!m),u):s},u.curve=function(m){return arguments.length?(l=m,i!=null&&(o=l(i)),u):l},u.context=function(m){return arguments.length?(m==null?i=o=null:o=l(i=m),u):i},u}class FL{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Coe(e){return new FL(e,!0)}function Eoe(e){return new FL(e,!1)}const w3={draw(e,t){const r=Gc(t/Hy);e.moveTo(r,0),e.arc(0,0,r,0,e2)}},Toe={draw(e,t){const r=Gc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},PL=Gc(1/3),Doe=PL*2,Ooe={draw(e,t){const r=Gc(t/Doe),a=r*PL;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},Foe={draw(e,t){const r=Gc(t),a=-r/2;e.rect(a,a,r,r)}},Poe=.8908130915292852,ML=$y(Hy/10)/$y(7*Hy/10),Moe=$y(e2/10)*ML,Loe=-AL(e2/10)*ML,Roe={draw(e,t){const r=Gc(t*Poe),a=Moe*r,s=Loe*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const l=e2*i/5,o=AL(l),d=$y(l);e.lineTo(d*r,-o*r),e.lineTo(o*a-d*s,d*a+o*s)}e.closePath()}},S5=Gc(3),Ioe={draw(e,t){const r=-Gc(t/(S5*3));e.moveTo(0,r*2),e.lineTo(-S5*r,-r),e.lineTo(S5*r,-r),e.closePath()}},Lo=-.5,Ro=Gc(3)/2,r_=1/Gc(12),Boe=(r_/2+1)*3,zoe={draw(e,t){const r=Gc(t/Boe),a=r/2,s=r*r_,i=a,l=r*r_+r,o=-i,d=l;e.moveTo(a,s),e.lineTo(i,l),e.lineTo(o,d),e.lineTo(Lo*a-Ro*s,Ro*a+Lo*s),e.lineTo(Lo*i-Ro*l,Ro*i+Lo*l),e.lineTo(Lo*o-Ro*d,Ro*o+Lo*d),e.lineTo(Lo*a+Ro*s,Lo*s-Ro*a),e.lineTo(Lo*i+Ro*l,Lo*l-Ro*i),e.lineTo(Lo*o+Ro*d,Lo*d-Ro*o),e.closePath()}};function Uoe(e,t){let r=null,a=y3(s);e=typeof e=="function"?e:Qa(e||w3),t=typeof t=="function"?t:Qa(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Qa(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Qa(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Vy(){}function Wy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function LL(e){this._context=e}LL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qoe(e){return new LL(e)}function RL(e){this._context=e}RL.prototype={areaStart:Vy,areaEnd:Vy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Wy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $oe(e){return new RL(e)}function IL(e){this._context=e}IL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Wy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hoe(e){return new IL(e)}function BL(e){this._context=e}BL.prototype={areaStart:Vy,areaEnd:Vy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Voe(e){return new BL(e)}function ME(e){return e<0?-1:1}function LE(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),l=(r-e._y1)/(s||a<0&&-0),o=(i*s+l*a)/(a+s);return(ME(i)+ME(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function RE(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function k5(e,t,r){var a=e._x0,s=e._y0,i=e._x1,l=e._y1,o=(i-a)/3;e._context.bezierCurveTo(a+o,s+o*t,i-o,l-o*r,i,l)}function Ky(e){this._context=e}Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k5(this,this._t0,RE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,k5(this,RE(this,r=LE(this,e,t)),r);break;default:k5(this,this._t0,r=LE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function zL(e){this._context=new UL(e)}(zL.prototype=Object.create(Ky.prototype)).point=function(e,t){Ky.prototype.point.call(this,t,e)};function UL(e){this._context=e}UL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function Woe(e){return new Ky(e)}function Koe(e){return new zL(e)}function qL(e){this._context=e}qL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=IE(e),s=IE(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function IE(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,l[t]-=a*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Goe(e){return new qL(e)}function r2(e,t){this._context=e,this._t=t}r2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Yoe(e){return new r2(e,.5)}function Xoe(e){return new r2(e,0)}function Qoe(e){return new r2(e,1)}function gp(e,t){if((l=e.length)>1)for(var r=1,a,s,i=e[t[0]],l,o=i.length;r<l;++r)for(s=i,i=e[t[r]],a=0;a<o;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function a_(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Zoe(e,t){return e[t]}function Joe(e){const t=[];return t.key=e,t}function ece(){var e=Qa([]),t=a_,r=gp,a=Zoe;function s(i){var l=Array.from(e.apply(this,arguments),Joe),o,d=l.length,u=-1,f;for(const m of i)for(o=0,++u;o<d;++o)(l[o][u]=[0,+a(m,l[o].key,u,i)]).data=m;for(o=0,f=b3(t(l));o<d;++o)l[f[o]].index=o;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Qa(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Qa(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?a_:typeof i=="function"?i:Qa(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??gp,s):r},s}function tce(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<a;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<a;++r)e[r][s][1]/=l}gp(e,t)}}function rce(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var l=0,o=0;l<s;++l)o+=e[l][r][1]||0;a[r][1]+=a[r][0]=-o/2}gp(e,t)}}function ace(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,l;a<i;++a){for(var o=0,d=0,u=0;o<l;++o){for(var f=e[t[o]],m=f[a][1]||0,g=f[a-1][1]||0,x=(m-g)/2,b=0;b<o;++b){var v=e[t[b]],y=v[a][1]||0,j=v[a-1][1]||0;x+=y-j}d+=m,u+=x*m}s[a-1][1]+=s[a-1][0]=r,d&&(r-=u/d)}s[a-1][1]+=s[a-1][0]=r,gp(e,t)}}var A5={},C5={},BE;function nce(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(C5)),C5}var E5={},zE;function $L(){return zE||(zE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(E5)),E5}var T5={},UE;function j3(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(T5)),T5}var D5={},O5={},qE;function sce(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const a=String(r);return a==="0"&&Object.is(Number(r),-0)?"-0":a}e.toString=t})(O5)),O5}var $E;function N3(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sce(),r=j3();function a(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let o=0,d="",u="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),o++);o<l;){const m=s[o];u?m==="\\"&&o+1<l?(o++,d+=s[o]):m===u?u="":d+=m:f?m==='"'||m==="'"?u=m:m==="]"?(f=!1,i.push(d),d=""):d+=m:m==="["?(f=!0,d&&(i.push(d),d="")):m==="."?d&&(i.push(d),d=""):d+=m,o++}return d&&i.push(d),i}e.toPath=a})(D5)),D5}var HE;function _3(){return HE||(HE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nce(),r=$L(),a=j3(),s=N3();function i(o,d,u){if(o==null)return u;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return u;const f=o[d];return f===void 0?r.isDeepKey(d)?i(o,s.toPath(d),u):u:f}case"number":case"symbol":{typeof d=="number"&&(d=a.toKey(d));const f=o[d];return f===void 0?u:f}default:{if(Array.isArray(d))return l(o,d,u);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return u;const f=o[d];return f===void 0?u:f}}}function l(o,d,u){if(d.length===0)return u;let f=o;for(let m=0;m<d.length;m++){if(f==null||t.isUnsafeProperty(d[m]))return u;f=f[d[m]]}return f===void 0?u:f}e.get=i})(A5)),A5}var F5,VE;function ice(){return VE||(VE=1,F5=_3().get),F5}var lce=ice();const gh=Id(lce);var Qs=e=>e===0?0:e>0?1:-1,Zo=e=>typeof e=="number"&&e!=+e,Od=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,er=e=>(typeof e=="number"||e instanceof Number)&&!Zo(e),Tu=e=>er(e)||typeof e=="string",oce=0,Og=e=>{var t=++oce;return"".concat(e||"").concat(t)},Mi=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!er(t)&&typeof t!="string")return a;var i;if(Od(t)){if(r==null)return a;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Zo(i)&&(i=a),s&&r!=null&&i>r&&(i=r),i},HL=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1};function Hn(e,t,r){return er(e)&&er(t)?e+r*(t-e):t}function VL(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):gh(a,t))===r)}var wn=e=>e===null||typeof e>"u",ov=e=>wn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),cce=["type","size","sizeType"];function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n_.apply(null,arguments)}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function KE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(a){uce(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uce(e,t,r){return(t=dce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dce(e){var t=fce(e,"string");return typeof t=="symbol"?t:t+""}function fce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hce(e,t){if(e==null)return{};var r,a,s=mce(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mce(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var WL={symbolCircle:w3,symbolCross:Toe,symbolDiamond:Ooe,symbolSquare:Foe,symbolStar:Roe,symbolTriangle:Ioe,symbolWye:zoe},pce=Math.PI/180,xce=e=>{var t="symbol".concat(ov(e));return WL[t]||w3},gce=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*pce;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},vce=(e,t)=>{WL["symbol".concat(ov(e))]=t},S3=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,s=hce(e,cce),i=KE(KE({},s),{},{type:t,size:r,sizeType:a}),l="circle";typeof t=="string"&&(l=t);var o=()=>{var g=xce(l),x=Uoe().type(g).size(gce(r,a,l)),b=x();if(b!==null)return b},{className:d,cx:u,cy:f}=i,m=ll(i);return u===+u&&f===+f&&r===+r?k.createElement("path",n_({},m,{className:ma("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};S3.registerSymbol=vce;var k3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(s=>{g3(s)&&(a[s]=(i=>r[s](r,i)))}),a},yce=(e,t,r)=>a=>(e(t,r,a),null),cv=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var i=e[s];g3(s)&&typeof i=="function"&&(a||(a={}),a[s]=yce(i,t,r))}),a};function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s_.apply(null,arguments)}function GE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(r),!0).forEach(function(a){A3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function A3(e,t,r){return(t=wce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wce(e){var t=jce(e,"string");return typeof t=="symbol"?t:t+""}function jce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Io=32;class C3 extends k.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,s=Io/2,i=Io/6,l=Io/3,o=t.inactive?a:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline")return k.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:Io,y2:s,className:"recharts-legend-icon"});if(d==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Io,"M").concat(2*l,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(d==="rect")return k.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Io/8,"h").concat(Io,"v").concat(Io*3/4,"h").concat(-Io,"z"),className:"recharts-legend-icon"});if(k.isValidElement(t.legendIcon)){var u=bce({},t);return delete u.legendIcon,k.cloneElement(t.legendIcon,u)}return k.createElement(S3,{fill:o,cx:s,cy:s,size:Io,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:s,inactiveColor:i,iconType:l}=this.props,o={x:0,y:0,width:Io,height:Io},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((f,m)=>{var g=f.formatter||s,x=ma({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:f.inactive});if(f.type==="none")return null;var b=f.inactive?i:f.color,v=g?g(f.value,f,m):f.value;return k.createElement("li",s_({className:x,style:d,key:"legend-item-".concat(m)},cv(this.props,f,m)),k.createElement(v3,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(v," legend icon")},this.renderIcon(f,l)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},v))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}A3(C3,"displayName","Legend");A3(C3,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var P5={},M5={},YE;function Nce(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],o=a(l);s.has(o)||s.set(o,l)}return Array.from(s.values())}e.uniqBy=t})(M5)),M5}var L5={},XE;function KL(){return XE||(XE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(L5)),L5}var R5={},I5={},B5={},QE;function _ce(){return QE||(QE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(B5)),B5}var ZE;function E3(){return ZE||(ZE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_ce();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r})(I5)),I5}var z5={},JE;function Sce(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(z5)),z5}var e8;function kce(){return e8||(e8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E3(),r=Sce();function a(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a})(R5)),R5}var U5={},q5={},t8;function Ace(){return t8||(t8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_3();function r(a){return function(s){return t.get(s,a)}}e.property=r})(q5)),q5}var $5={},H5={},V5={},W5={},r8;function GL(){return r8||(r8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(W5)),W5}var K5={},a8;function YL(){return a8||(a8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(K5)),K5}var G5={},n8;function XL(){return n8||(n8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t})(G5)),G5}var s8;function Cce(){return s8||(s8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GL(),r=YL(),a=XL();function s(f,m,g){return typeof g!="function"?s(f,m,()=>{}):i(f,m,function x(b,v,y,j,S,N){const C=g(b,v,y,j,S,N);return C!==void 0?!!C:i(b,v,x,N)},new Map)}function i(f,m,g,x){if(m===f)return!0;switch(typeof m){case"object":return l(f,m,g,x);case"function":return Object.keys(m).length>0?i(f,{...m},g,x):a.eq(f,m);default:return t.isObject(f)?typeof m=="string"?m==="":!0:a.eq(f,m)}}function l(f,m,g,x){if(m==null)return!0;if(Array.isArray(m))return d(f,m,g,x);if(m instanceof Map)return o(f,m,g,x);if(m instanceof Set)return u(f,m,g,x);const b=Object.keys(m);if(f==null)return b.length===0;if(b.length===0)return!0;if(x?.has(m))return x.get(m)===f;x?.set(m,f);try{for(let v=0;v<b.length;v++){const y=b[v];if(!r.isPrimitive(f)&&!(y in f)||m[y]===void 0&&f[y]!==void 0||m[y]===null&&f[y]!==null||!g(f[y],m[y],y,f,m,x))return!1}return!0}finally{x?.delete(m)}}function o(f,m,g,x){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,v]of m.entries()){const y=f.get(b);if(g(y,v,b,f,m,x)===!1)return!1}return!0}function d(f,m,g,x){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let v=0;v<m.length;v++){const y=m[v];let j=!1;for(let S=0;S<f.length;S++){if(b.has(S))continue;const N=f[S];let C=!1;if(g(N,y,v,f,m,x)&&(C=!0),C){b.add(S),j=!0;break}}if(!j)return!1}return!0}function u(f,m,g,x){return m.size===0?!0:f instanceof Set?d([...f],[...m],g,x):!1}e.isMatchWith=s,e.isSetMatch=u})(V5)),V5}var i8;function QL(){return i8||(i8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cce();function r(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=r})(H5)),H5}var Y5={},X5={},Q5={},l8;function Ece(){return l8||(l8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t})(Q5)),Q5}var Z5={},o8;function ZL(){return o8||(o8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Z5)),Z5}var J5={},c8;function JL(){return c8||(c8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",o="[object Date]",d="[object Map]",u="[object Set]",f="[object Array]",m="[object Function]",g="[object ArrayBuffer]",x="[object Object]",b="[object Error]",v="[object DataView]",y="[object Uint8Array]",j="[object Uint8ClampedArray]",S="[object Uint16Array]",N="[object Uint32Array]",C="[object BigUint64Array]",T="[object Int8Array]",P="[object Int16Array]",D="[object Int32Array]",M="[object BigInt64Array]",F="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=g,e.arrayTag=f,e.bigInt64ArrayTag=M,e.bigUint64ArrayTag=C,e.booleanTag=s,e.dataViewTag=v,e.dateTag=o,e.errorTag=b,e.float32ArrayTag=F,e.float64ArrayTag=H,e.functionTag=m,e.int16ArrayTag=P,e.int32ArrayTag=D,e.int8ArrayTag=T,e.mapTag=d,e.numberTag=a,e.objectTag=x,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=S,e.uint32ArrayTag=N,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=j})(J5)),J5}var ej={},u8;function Tce(){return u8||(u8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(ej)),ej}var d8;function eR(){return d8||(d8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ece(),r=ZL(),a=JL(),s=YL(),i=Tce();function l(f,m){return o(f,void 0,f,new Map,m)}function o(f,m,g,x=new Map,b=void 0){const v=b?.(f,m,g,x);if(v!==void 0)return v;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const y=new Array(f.length);x.set(f,y);for(let j=0;j<f.length;j++)y[j]=o(f[j],j,g,x,b);return Object.hasOwn(f,"index")&&(y.index=f.index),Object.hasOwn(f,"input")&&(y.input=f.input),y}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const y=new RegExp(f.source,f.flags);return y.lastIndex=f.lastIndex,y}if(f instanceof Map){const y=new Map;x.set(f,y);for(const[j,S]of f)y.set(j,o(S,j,g,x,b));return y}if(f instanceof Set){const y=new Set;x.set(f,y);for(const j of f)y.add(o(j,void 0,g,x,b));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const y=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,y);for(let j=0;j<f.length;j++)y[j]=o(f[j],j,g,x,b);return y}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const y=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,y),d(y,f,g,x,b),y}if(typeof File<"u"&&f instanceof File){const y=new File([f],f.name,{type:f.type});return x.set(f,y),d(y,f,g,x,b),y}if(typeof Blob<"u"&&f instanceof Blob){const y=new Blob([f],{type:f.type});return x.set(f,y),d(y,f,g,x,b),y}if(f instanceof Error){const y=new f.constructor;return x.set(f,y),y.message=f.message,y.name=f.name,y.stack=f.stack,y.cause=f.cause,d(y,f,g,x,b),y}if(f instanceof Boolean){const y=new Boolean(f.valueOf());return x.set(f,y),d(y,f,g,x,b),y}if(f instanceof Number){const y=new Number(f.valueOf());return x.set(f,y),d(y,f,g,x,b),y}if(f instanceof String){const y=new String(f.valueOf());return x.set(f,y),d(y,f,g,x,b),y}if(typeof f=="object"&&u(f)){const y=Object.create(Object.getPrototypeOf(f));return x.set(f,y),d(y,f,g,x,b),y}return f}function d(f,m,g=f,x,b){const v=[...Object.keys(m),...t.getSymbols(m)];for(let y=0;y<v.length;y++){const j=v[y],S=Object.getOwnPropertyDescriptor(f,j);(S==null||S.writable)&&(f[j]=o(m[j],j,g,x,b))}}function u(f){switch(r.getTag(f)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=o,e.copyProperties=d})(X5)),X5}var f8;function Dce(){return f8||(f8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eR();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r})(Y5)),Y5}var h8;function Oce(){return h8||(h8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QL(),r=Dce();function a(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=a})($5)),$5}var tj={},rj={},aj={},m8;function Fce(){return m8||(m8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eR(),r=JL();function a(s,i){return t.cloneDeepWith(s,(l,o,d,u)=>{const f=i?.(l,o,d,u);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const m=new s.constructor(s?.valueOf());return t.copyProperties(m,s),m}case r.argumentsTag:{const m={};return t.copyProperties(m,s),m.length=s.length,m[Symbol.iterator]=s[Symbol.iterator],m}default:return}})}e.cloneDeepWith=a})(aj)),aj}var p8;function Pce(){return p8||(p8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fce();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r})(rj)),rj}var nj={},sj={},x8;function tR(){return x8||(x8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r})(sj)),sj}var ij={},g8;function Mce(){return g8||(g8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZL();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r})(ij)),ij}var v8;function Lce(){return v8||(v8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$L(),r=tR(),a=Mce(),s=N3();function i(l,o){let d;if(Array.isArray(o)?d=o:typeof o=="string"&&t.isDeepKey(o)&&l?.[o]==null?d=s.toPath(o):d=[o],d.length===0)return!1;let u=l;for(let f=0;f<d.length;f++){const m=d[f];if((u==null||!Object.hasOwn(u,m))&&!((Array.isArray(u)||a.isArguments(u))&&r.isIndex(m)&&m<u.length))return!1;u=u[m]}return!0}e.has=i})(nj)),nj}var y8;function Rce(){return y8||(y8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QL(),r=j3(),a=Pce(),s=_3(),i=Lce();function l(o,d){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return d=a.cloneDeep(d),function(u){const f=s.get(u,o);return f===void 0?i.has(u,o):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(tj)),tj}var b8;function Ice(){return b8||(b8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KL(),r=Ace(),a=Oce(),s=Rce();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):a.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(U5)),U5}var w8;function Bce(){return w8||(w8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nce(),r=KL(),a=kce(),s=Ice();function i(l,o=r.identity){return a.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(o)):[]}e.uniqBy=i})(P5)),P5}var lj,j8;function zce(){return j8||(j8=1,lj=Bce().uniqBy),lj}var Uce=zce();const N8=Id(Uce);function rR(e,t,r){return t===!0?N8(e,r):typeof t=="function"?N8(e,t):e}var oj={exports:{}},cj={},uj={exports:{}},dj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _8;function qce(){if(_8)return dj;_8=1;var e=Sp();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function o(m,g){var x=g(),b=a({inst:{value:x,getSnapshot:g}}),v=b[0].inst,y=b[1];return i(function(){v.value=x,v.getSnapshot=g,d(v)&&y({inst:v})},[m,x,g]),s(function(){return d(v)&&y({inst:v}),m(function(){d(v)&&y({inst:v})})},[m]),l(x),x}function d(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!r(m,x)}catch{return!0}}function u(m,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return dj.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,dj}var S8;function $ce(){return S8||(S8=1,uj.exports=qce()),uj.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k8;function Hce(){if(k8)return cj;k8=1;var e=Sp(),t=$ce();function r(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var a=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,o=e.useMemo,d=e.useDebugValue;return cj.useSyncExternalStoreWithSelector=function(u,f,m,g,x){var b=i(null);if(b.current===null){var v={hasValue:!1,value:null};b.current=v}else v=b.current;b=o(function(){function j(P){if(!S){if(S=!0,N=P,P=g(P),x!==void 0&&v.hasValue){var D=v.value;if(x(D,P))return C=D}return C=P}if(D=C,a(N,P))return D;var M=g(P);return x!==void 0&&x(D,M)?(N=P,D):(N=P,C=M)}var S=!1,N,C,T=m===void 0?null:m;return[function(){return j(f())},T===null?void 0:function(){return j(T())}]},[f,m,g,x]);var y=s(u,b[0],b[1]);return l(function(){v.hasValue=!0,v.value=y},[y]),d(y),y},cj}var A8;function Vce(){return A8||(A8=1,oj.exports=Hce()),oj.exports}var Wce=Vce(),T3=k.createContext(null),Kce=e=>e,Nn=()=>{var e=k.useContext(T3);return e?e.store.dispatch:Kce},fy=()=>{},Gce=()=>fy,Yce=(e,t)=>e===t;function Gt(e){var t=k.useContext(T3);return Wce.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Gce,t?t.store.getState:fy,t?t.store.getState:fy,t?e:fy,Yce)}function Xce(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Qce(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Zce(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var C8=e=>Array.isArray(e)?e:[e];function Jce(e){const t=Array.isArray(e[0])?e[0]:e;return Zce(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function eue(e,t){const r=[],{length:a}=e;for(let s=0;s<a;s++)r.push(e[s].apply(null,t));return r}var tue=class{constructor(e){this.value=e}deref(){return this.value}},rue=typeof WeakRef<"u"?WeakRef:tue,aue=0,E8=1;function B1(){return{s:aue,v:void 0,o:null,p:null}}function aR(e,t={}){let r=B1();const{resultEqualityCheck:a}=t;let s,i=0;function l(){let o=r;const{length:d}=arguments;for(let m=0,g=d;m<g;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const v=b.get(x);v===void 0?(o=B1(),b.set(x,o)):o=v}else{let b=o.p;b===null&&(o.p=b=new Map);const v=b.get(x);v===void 0?(o=B1(),b.set(x,o)):o=v}}const u=o;let f;if(o.s===E8)f=o.v;else if(f=e.apply(null,arguments),i++,a){const m=s?.deref?.()??s;m!=null&&a(m,f)&&(f=m,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new rue(f):f}return u.s=E8,u.v=f,f}return l.clearCache=()=>{r=B1(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function nue(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let i=0,l=0,o,d={},u=s.pop();typeof u=="object"&&(d=u,u=s.pop()),Xce(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...r,...d},{memoize:m,memoizeOptions:g=[],argsMemoize:x=aR,argsMemoizeOptions:b=[]}=f,v=C8(g),y=C8(b),j=Jce(s),S=m(function(){return i++,u.apply(null,arguments)},...v),N=x(function(){l++;const T=eue(j,arguments);return o=S.apply(null,T),o},...y);return Object.assign(N,{resultFunc:u,memoizedResultFunc:S,dependencies:j,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:m,argsMemoize:x})};return Object.assign(a,{withTypes:()=>a}),a}var Xe=nue(aR),sue=Object.assign((e,t=Xe)=>{Qce(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(i=>e[i]);return t(a,(...i)=>i.reduce((l,o,d)=>(l[r[d]]=o,l),{}))},{withTypes:()=>sue}),fj={},hj={},mj={},T8;function iue(){return T8||(T8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,s,i)=>{if(a!==s){const l=t(a),o=t(s);if(l===o&&l===0){if(a<s)return i==="desc"?1:-1;if(a>s)return i==="desc"?-1:1}return i==="desc"?o-l:l-o}return 0};e.compareValues=r})(mj)),mj}var pj={},xj={},D8;function nR(){return D8||(D8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(xj)),xj}var O8;function lue(){return O8||(O8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nR(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(pj)),pj}var F8;function oue(){return F8||(F8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iue(),r=lue(),a=N3();function s(i,l,o,d){if(i==null)return[];o=d?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(x=>String(x));const u=(x,b)=>{let v=x;for(let y=0;y<b.length&&v!=null;++y)v=v[b[y]];return v},f=(x,b)=>b==null||x==null?b:typeof x=="object"&&"key"in x?Object.hasOwn(b,x.key)?b[x.key]:u(b,x.path):typeof x=="function"?x(b):Array.isArray(x)?u(b,x):typeof b=="object"?b[x]:b,m=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:a.toPath(x)}));return i.map(x=>({original:x,criteria:m.map(b=>f(b,x))})).slice().sort((x,b)=>{for(let v=0;v<m.length;v++){const y=t.compareValues(x.criteria[v],b.criteria[v],o[v]);if(y!==0)return y}return 0}).map(x=>x.original)}e.orderBy=s})(hj)),hj}var gj={},P8;function cue(){return P8||(P8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const s=[],i=Math.floor(a),l=(o,d)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(gj)),gj}var vj={},M8;function sR(){return M8||(M8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tR(),r=E3(),a=GL(),s=XL();function i(l,o,d){return a.isObject(d)&&(typeof o=="number"&&r.isArrayLike(d)&&t.isIndex(o)&&o<d.length||typeof o=="string"&&o in d)?s.eq(d[o],l):!1}e.isIterateeCall=i})(vj)),vj}var L8;function uue(){return L8||(L8=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oue(),r=cue(),a=sR();function s(i,...l){const o=l.length;return o>1&&a.isIterateeCall(i,l[0],l[1])?l=[]:o>2&&a.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(fj)),fj}var yj,R8;function due(){return R8||(R8=1,yj=uue().sortBy),yj}var fue=due();const a2=Id(fue);var iR=e=>e.legend.settings,hue=e=>e.legend.size,mue=e=>e.legend.payload,pue=Xe([mue,iR],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?a2(a,r):a});function xue(){return Gt(pue)}var z1=1;function lR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=k.useState({height:0,left:0,top:0,width:0}),a=k.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>z1||Math.abs(l.left-t.left)>z1||Math.abs(l.top-t.top)>z1||Math.abs(l.width-t.width)>z1)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function ui(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var gue=typeof Symbol=="function"&&Symbol.observable||"@@observable",I8=gue,bj=()=>Math.random().toString(36).substring(7).split("").join("."),vue={INIT:`@@redux/INIT${bj()}`,REPLACE:`@@redux/REPLACE${bj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bj()}`},Gy=vue;function D3(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function oR(e,t,r){if(typeof e!="function")throw new Error(ui(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ui(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ui(1));return r(oR)(e,t)}let a=e,s=t,i=new Map,l=i,o=0,d=!1;function u(){l===i&&(l=new Map,i.forEach((y,j)=>{l.set(j,y)}))}function f(){if(d)throw new Error(ui(3));return s}function m(y){if(typeof y!="function")throw new Error(ui(4));if(d)throw new Error(ui(5));let j=!0;u();const S=o++;return l.set(S,y),function(){if(j){if(d)throw new Error(ui(6));j=!1,u(),l.delete(S),i=null}}}function g(y){if(!D3(y))throw new Error(ui(7));if(typeof y.type>"u")throw new Error(ui(8));if(typeof y.type!="string")throw new Error(ui(17));if(d)throw new Error(ui(9));try{d=!0,s=a(s,y)}finally{d=!1}return(i=l).forEach(S=>{S()}),y}function x(y){if(typeof y!="function")throw new Error(ui(10));a=y,g({type:Gy.REPLACE})}function b(){const y=m;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(ui(11));function S(){const C=j;C.next&&C.next(f())}return S(),{unsubscribe:y(S)}},[I8](){return this}}}return g({type:Gy.INIT}),{dispatch:g,subscribe:m,getState:f,replaceReducer:x,[I8]:b}}function yue(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Gy.INIT})>"u")throw new Error(ui(12));if(typeof r(void 0,{type:Gy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ui(13))})}function cR(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const a=Object.keys(r);let s;try{yue(r)}catch(i){s=i}return function(l={},o){if(s)throw s;let d=!1;const u={};for(let f=0;f<a.length;f++){const m=a[f],g=r[m],x=l[m],b=g(x,o);if(typeof b>"u")throw o&&o.type,new Error(ui(14));u[m]=b,d=d||b!==x}return d=d||a.length!==Object.keys(l).length,d?u:l}}function Yy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function bue(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(ui(15))};const l={getState:s.getState,dispatch:(d,...u)=>i(d,...u)},o=e.map(d=>d(l));return i=Yy(...o)(s.dispatch),{...s,dispatch:i}}}function uR(e){return D3(e)&&"type"in e&&typeof e.type=="string"}var dR=Symbol.for("immer-nothing"),B8=Symbol.for("immer-draftable"),po=Symbol.for("immer-state");function Tc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Fg=Object.getPrototypeOf;function vh(e){return!!e&&!!e[po]}function Fd(e){return e?fR(e)||Array.isArray(e)||!!e[B8]||!!e.constructor?.[B8]||uv(e)||s2(e):!1}var wue=Object.prototype.constructor.toString(),z8=new WeakMap;function fR(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let a=z8.get(r);return a===void 0&&(a=Function.toString.call(r),z8.set(r,a)),a===wue}function Xy(e,t,r=!0){n2(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((a,s)=>t(s,a,e))}function n2(e){const t=e[po];return t?t.type_:Array.isArray(e)?1:uv(e)?2:s2(e)?3:0}function i_(e,t){return n2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hR(e,t,r){const a=n2(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function jue(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function uv(e){return e instanceof Map}function s2(e){return e instanceof Set}function z0(e){return e.copy_||e.base_}function l_(e,t){if(uv(e))return new Map(e);if(s2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=fR(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[po];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const l=s[i],o=a[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(a[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(Fg(e),a)}else{const a=Fg(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function O3(e,t=!1){return i2(e)||vh(e)||!Fd(e)||(n2(e)>1&&Object.defineProperties(e,{set:U1,add:U1,clear:U1,delete:U1}),Object.freeze(e),t&&Object.values(e).forEach(r=>O3(r,!0))),e}function Nue(){Tc(2)}var U1={value:Nue};function i2(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var _ue={};function yh(e){const t=_ue[e];return t||Tc(0,e),t}var Pg;function mR(){return Pg}function Sue(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function U8(e,t){t&&(yh("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function o_(e){c_(e),e.drafts_.forEach(kue),e.drafts_=null}function c_(e){e===Pg&&(Pg=e.parent_)}function q8(e){return Pg=Sue(Pg,e)}function kue(e){const t=e[po];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $8(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[po].modified_&&(o_(t),Tc(4)),Fd(e)&&(e=Qy(t,e),t.parent_||Zy(t,e)),t.patches_&&yh("Patches").generateReplacementPatches_(r[po].base_,e,t.patches_,t.inversePatches_)):e=Qy(t,r,[]),o_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dR?e:void 0}function Qy(e,t,r){if(i2(t))return t;const a=e.immer_.shouldUseStrictIteration(),s=t[po];if(!s)return Xy(t,(i,l)=>H8(e,s,t,i,l,r),a),t;if(s.scope_!==e)return t;if(!s.modified_)return Zy(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,o=!1;s.type_===3&&(l=new Set(i),i.clear(),o=!0),Xy(l,(d,u)=>H8(e,s,i,d,u,r,o),a),Zy(e,i,!1),r&&e.patches_&&yh("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function H8(e,t,r,a,s,i,l){if(s==null||typeof s!="object"&&!l)return;const o=i2(s);if(!(o&&!l)){if(vh(s)){const d=i&&t&&t.type_!==3&&!i_(t.assigned_,a)?i.concat(a):void 0,u=Qy(e,s,d);if(hR(r,a,u),vh(u))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Fd(s)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===s&&o)return;Qy(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(uv(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&Zy(e,s)}}}function Zy(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&O3(t,r)}function Aue(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:mR(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=F3;r&&(s=[a],i=Mg);const{revoke:l,proxy:o}=Proxy.revocable(s,i);return a.draft_=o,a.revoke_=l,o}var F3={get(e,t){if(t===po)return e;const r=z0(e);if(!i_(r,t))return Cue(e,r,t);const a=r[t];return e.finalized_||!Fd(a)?a:a===wj(e.base_,t)?(jj(e),e.copy_[t]=d_(a,e)):a},has(e,t){return t in z0(e)},ownKeys(e){return Reflect.ownKeys(z0(e))},set(e,t,r){const a=pR(z0(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=wj(z0(e),t),i=s?.[po];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(jue(r,s)&&(r!==void 0||i_(e.base_,t)))return!0;jj(e),u_(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return wj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,jj(e),u_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=z0(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Tc(11)},getPrototypeOf(e){return Fg(e.base_)},setPrototypeOf(){Tc(12)}},Mg={};Xy(F3,(e,t)=>{Mg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Mg.deleteProperty=function(e,t){return Mg.set.call(this,e,t,void 0)};Mg.set=function(e,t,r){return F3.set.call(this,e[0],t,r,e[0])};function wj(e,t){const r=e[po];return(r?z0(r):e)[t]}function Cue(e,t,r){const a=pR(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function pR(e,t){if(!(t in e))return;let r=Fg(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Fg(r)}}function u_(e){e.modified_||(e.modified_=!0,e.parent_&&u_(e.parent_))}function jj(e){e.copy_||(e.copy_=l_(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Eue=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...u){return l.produce(d,f=>r.call(this,f,...u))}}typeof r!="function"&&Tc(6),a!==void 0&&typeof a!="function"&&Tc(7);let s;if(Fd(t)){const i=q8(this),l=d_(t,void 0);let o=!0;try{s=r(l),o=!1}finally{o?o_(i):c_(i)}return U8(i,a),$8(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===dR&&(s=void 0),this.autoFreeze_&&O3(s,!0),a){const i=[],l=[];yh("Patches").generateReplacementPatches_(t,s,i,l),a(i,l)}return s}else Tc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,d=>t(d,...o));let a,s;return[this.produce(t,r,(l,o)=>{a=l,s=o}),a,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Fd(e)||Tc(8),vh(e)&&(e=Ad(e));const t=q8(this),r=d_(e,void 0);return r[po].isManual_=!0,c_(t),r}finishDraft(e,t){const r=e&&e[po];(!r||!r.isManual_)&&Tc(9);const{scope_:a}=r;return U8(a,t),$8(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=yh("Patches").applyPatches_;return vh(e)?a(e,t):this.produce(e,s=>a(s,t))}};function d_(e,t){const r=uv(e)?yh("MapSet").proxyMap_(e,t):s2(e)?yh("MapSet").proxySet_(e,t):Aue(e,t);return(t?t.scope_:mR()).drafts_.push(r),r}function Ad(e){return vh(e)||Tc(10,e),xR(e)}function xR(e){if(!Fd(e)||i2(e))return e;const t=e[po];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=l_(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=l_(e,!0);return Xy(r,(s,i)=>{hR(r,s,xR(i))},a),t&&(t.finalized_=!1),r}var Tue=new Eue,gR=Tue.produce;function vR(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var Due=vR(),Oue=vR,Fue=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yy:Yy.apply(null,arguments)};function Jo(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(uo(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>uR(a)&&a.type===e,r}var yR=class Gx extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Gx.prototype)}static get[Symbol.species](){return Gx}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Gx(...t[0].concat(this)):new Gx(...t.concat(this))}};function V8(e){return Fd(e)?gR(e,()=>{}):e}function q1(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Pue(e){return typeof e=="boolean"}var Mue=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new yR;return r&&(Pue(r)?l.push(Due):l.push(Oue(r.extraArgument))),l},bR="RTK_autoBatch",el=()=>e=>({payload:e,meta:{[bR]:!0}}),W8=e=>t=>{setTimeout(t,e)},wR=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,l=!1;const o=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:W8(10):e.type==="callback"?e.queueNotification:W8(e.timeout),u=()=>{l=!1,i&&(i=!1,o.forEach(f=>f()))};return Object.assign({},a,{subscribe(f){const m=()=>s&&f(),g=a.subscribe(m);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return s=!f?.meta?.[bR],i=!s,i&&(l||(l=!0,d(u))),a.dispatch(f)}finally{s=!0}}})},Lue=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new yR(e);return a&&s.push(wR(typeof a=="object"?a:void 0)),s};function Rue(e){const t=Mue(),{reducer:r=void 0,middleware:a,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(D3(r))o=cR(r);else throw new Error(uo(1));let d;typeof a=="function"?d=a(t):d=t();let u=Yy;s&&(u=Fue({trace:!1,...typeof s=="object"&&s}));const f=bue(...d),m=Lue(f);let g=typeof l=="function"?l(m):m();const x=u(...g);return oR(o,i,x)}function jR(e){const t={},r=[];let a;const s={addCase(i,l){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(uo(28));if(o in t)throw new Error(uo(29));return t[o]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function Iue(e){return typeof e=="function"}function Bue(e,t){let[r,a,s]=jR(t),i;if(Iue(e))i=()=>V8(e());else{const o=V8(e);i=()=>o}function l(o=i(),d){let u=[r[d.type],...a.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[s]),u.reduce((f,m)=>{if(m)if(vh(f)){const x=m(f,d);return x===void 0?f:x}else{if(Fd(f))return gR(f,g=>m(g,d));{const g=m(f,d);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return l.getInitialState=i,l}var zue="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Uue=(e=21)=>{let t="",r=e;for(;r--;)t+=zue[Math.random()*64|0];return t},que=Symbol.for("rtk-slice-createasyncthunk");function $ue(e,t){return`${e}/${t}`}function Hue({creators:e}={}){const t=e?.asyncThunk?.[que];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(uo(11));const l=(typeof a.reducers=="function"?a.reducers(Wue()):a.reducers)||{},o=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(N,C){const T=typeof N=="string"?N:N.type;if(!T)throw new Error(uo(12));if(T in d.sliceCaseReducersByType)throw new Error(uo(13));return d.sliceCaseReducersByType[T]=C,u},addMatcher(N,C){return d.sliceMatchers.push({matcher:N,reducer:C}),u},exposeAction(N,C){return d.actionCreators[N]=C,u},exposeCaseReducer(N,C){return d.sliceCaseReducersByName[N]=C,u}};o.forEach(N=>{const C=l[N],T={reducerName:N,type:$ue(s,N),createNotation:typeof a.reducers=="function"};Gue(C)?Xue(T,C,u,t):Kue(T,C,u)});function f(){const[N={},C=[],T=void 0]=typeof a.extraReducers=="function"?jR(a.extraReducers):[a.extraReducers],P={...N,...d.sliceCaseReducersByType};return Bue(a.initialState,D=>{for(let M in P)D.addCase(M,P[M]);for(let M of d.sliceMatchers)D.addMatcher(M.matcher,M.reducer);for(let M of C)D.addMatcher(M.matcher,M.reducer);T&&D.addDefaultCase(T)})}const m=N=>N,g=new Map,x=new WeakMap;let b;function v(N,C){return b||(b=f()),b(N,C)}function y(){return b||(b=f()),b.getInitialState()}function j(N,C=!1){function T(D){let M=D[N];return typeof M>"u"&&C&&(M=q1(x,T,y)),M}function P(D=m){const M=q1(g,C,()=>new WeakMap);return q1(M,D,()=>{const F={};for(const[H,L]of Object.entries(a.selectors??{}))F[H]=Vue(L,D,()=>q1(x,D,y),C);return F})}return{reducerPath:N,getSelectors:P,get selectors(){return P(T)},selectSlice:T}}const S={name:s,reducer:v,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:y,...j(i),injectInto(N,{reducerPath:C,...T}={}){const P=C??i;return N.inject({reducerPath:P,reducer:v},T),{...S,...j(P,!0)}}};return S}}function Vue(e,t,r,a){function s(i,...l){let o=t(i);return typeof o>"u"&&a&&(o=r()),e(o,...l)}return s.unwrapped=e,s}var go=Hue();function Wue(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Kue({type:e,reducerName:t,createNotation:r},a,s){let i,l;if("reducer"in a){if(r&&!Yue(a))throw new Error(uo(17));i=a.reducer,l=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?Jo(e,l):Jo(e))}function Gue(e){return e._reducerDefinitionType==="asyncThunk"}function Yue(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Xue({type:e,reducerName:t},r,a,s){if(!s)throw new Error(uo(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:d,settled:u,options:f}=r,m=s(e,i,f);a.exposeAction(t,m),l&&a.addCase(m.fulfilled,l),o&&a.addCase(m.pending,o),d&&a.addCase(m.rejected,d),u&&a.addMatcher(m.settled,u),a.exposeCaseReducer(t,{fulfilled:l||$1,pending:o||$1,rejected:d||$1,settled:u||$1})}function $1(){}var Que="task",NR="listener",_R="completed",P3="cancelled",Zue=`task-${P3}`,Jue=`task-${_R}`,f_=`${NR}-${P3}`,ede=`${NR}-${_R}`,l2=class{constructor(e){this.code=e,this.message=`${Que} ${P3} (reason: ${e})`}name="TaskAbortError";message},M3=(e,t)=>{if(typeof e!="function")throw new TypeError(uo(32))},Jy=()=>{},SR=(e,t=Jy)=>(e.catch(t),e),kR=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),th=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},rh=e=>{if(e.aborted){const{reason:t}=e;throw new l2(t)}};function AR(e,t){let r=Jy;return new Promise((a,s)=>{const i=()=>s(new l2(e.reason));if(e.aborted){i();return}r=kR(e,i),t.finally(()=>r()).then(a,s)}).finally(()=>{r=Jy})}var tde=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof l2?"cancelled":"rejected",error:r}}finally{t?.()}},eb=e=>t=>SR(AR(e,t).then(r=>(rh(e),r))),CR=e=>{const t=eb(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:rp}=Object,K8={},o2="listenerMiddleware",rde=(e,t)=>{const r=a=>kR(e,()=>th(a,e.reason));return(a,s)=>{M3(a);const i=new AbortController;r(i);const l=tde(async()=>{rh(e),rh(i.signal);const o=await a({pause:eb(i.signal),delay:CR(i.signal),signal:i.signal});return rh(i.signal),o},()=>th(i,Jue));return s?.autoJoin&&t.push(l.catch(Jy)),{result:eb(e)(l),cancel(){th(i,Zue)}}}},ade=(e,t)=>{const r=async(a,s)=>{rh(t);let i=()=>{};const o=[new Promise((d,u)=>{let f=e({predicate:a,effect:(m,g)=>{g.unsubscribe(),d([m,g.getState(),g.getOriginalState()])}});i=()=>{f(),u()}})];s!=null&&o.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await AR(t,Promise.race(o));return rh(t),d}finally{i()}};return(a,s)=>SR(r(a,s))},ER=e=>{let{type:t,actionCreator:r,matcher:a,predicate:s,effect:i}=e;if(t)s=Jo(t).match;else if(r)t=r.type,s=r.match;else if(a)s=a;else if(!s)throw new Error(uo(21));return M3(i),{predicate:s,type:t,effect:i}},TR=rp(e=>{const{type:t,predicate:r,effect:a}=ER(e);return{id:Uue(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(uo(22))}}},{withTypes:()=>TR}),G8=(e,t)=>{const{type:r,effect:a,predicate:s}=ER(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===a)},h_=e=>{e.pending.forEach(t=>{th(t,f_)})},nde=(e,t)=>()=>{for(const r of t.keys())h_(r);e.clear()},Y8=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},DR=rp(Jo(`${o2}/add`),{withTypes:()=>DR}),sde=Jo(`${o2}/removeAll`),OR=rp(Jo(`${o2}/remove`),{withTypes:()=>OR}),ide=(...e)=>{console.error(`${o2}/error`,...e)},dv=(e={})=>{const t=new Map,r=new Map,a=x=>{const b=r.get(x)??0;r.set(x,b+1)},s=x=>{const b=r.get(x)??1;b===1?r.delete(x):r.set(x,b-1)},{extra:i,onError:l=ide}=e;M3(l);const o=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),b=>{x.unsubscribe(),b?.cancelActive&&h_(x)}),d=x=>{const b=G8(t,x)??TR(x);return o(b)};rp(d,{withTypes:()=>d});const u=x=>{const b=G8(t,x);return b&&(b.unsubscribe(),x.cancelActive&&h_(b)),!!b};rp(u,{withTypes:()=>u});const f=async(x,b,v,y)=>{const j=new AbortController,S=ade(d,j.signal),N=[];try{x.pending.add(j),a(x),await Promise.resolve(x.effect(b,rp({},v,{getOriginalState:y,condition:(C,T)=>S(C,T).then(Boolean),take:S,delay:CR(j.signal),pause:eb(j.signal),extra:i,signal:j.signal,fork:rde(j.signal,N),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((C,T,P)=>{C!==j&&(th(C,f_),P.delete(C))})},cancel:()=>{th(j,f_),x.pending.delete(j)},throwIfCancelled:()=>{rh(j.signal)}})))}catch(C){C instanceof l2||Y8(l,C,{raisedBy:"effect"})}finally{await Promise.all(N),th(j,ede),s(x),x.pending.delete(j)}},m=nde(t,r);return{middleware:x=>b=>v=>{if(!uR(v))return b(v);if(DR.match(v))return d(v.payload);if(sde.match(v)){m();return}if(OR.match(v))return u(v.payload);let y=x.getState();const j=()=>{if(y===K8)throw new Error(uo(23));return y};let S;try{if(S=b(v),t.size>0){const N=x.getState(),C=Array.from(t.values());for(const T of C){let P=!1;try{P=T.predicate(v,N,y)}catch(D){P=!1,Y8(l,D,{raisedBy:"predicate"})}P&&f(T,v,x,j)}}}finally{y=K8}return S},startListening:d,stopListening:u,clearListeners:m}};function uo(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lde={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},FR=go({name:"chartLayout",initialState:lde,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,a,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:ode,setLayout:cde,setChartSize:ude,setScale:dde}=FR.actions,fde=FR.reducer;function X8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Q8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X8(Object(r),!0).forEach(function(a){hde(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hde(e,t,r){return(t=mde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mde(e){var t=pde(e,"string");return typeof t=="symbol"?t:t+""}function pde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tb=Math.PI/180,xde=e=>e*180/Math.PI,xs=(e,t,r,a)=>({x:e+Math.cos(-tb*a)*r,y:t+Math.sin(-tb*a)*r}),PR=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},gde=(e,t)=>{var{x:r,y:a}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(a-i)**2)},vde=(e,t)=>{var{x:r,y:a}=e,{cx:s,cy:i}=t,l=gde({x:r,y:a},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var o=(r-s)/l,d=Math.acos(o);return a>i&&(d=2*Math.PI-d),{radius:l,angle:xde(d),angleInRadian:d}},yde=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(a,s);return{startAngle:t-i*360,endAngle:r-i*360}},bde=(e,t)=>{var{startAngle:r,endAngle:a}=t,s=Math.floor(r/360),i=Math.floor(a/360),l=Math.min(s,i);return e+l*360},wde=(e,t)=>{var{x:r,y:a}=e,{radius:s,angle:i}=vde({x:r,y:a},t),{innerRadius:l,outerRadius:o}=t;if(s<l||s>o||s===0)return null;var{startAngle:d,endAngle:u}=yde(t),f=i,m;if(d<=u){for(;f>u;)f-=360;for(;f<d;)f+=360;m=f>=d&&f<=u}else{for(;f>d;)f-=360;for(;f<u;)f+=360;m=f>=u&&f<=d}return m?Q8(Q8({},t),{},{radius:s,angle:bde(f,t)}):null};function MR(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Z8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z8(Object(r),!0).forEach(function(a){jde(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z8(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jde(e,t,r){return(t=Nde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nde(e){var t=_de(e,"string");return typeof t=="symbol"?t:t+""}function _de(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Za(e,t,r){return wn(e)||wn(t)?r:Tu(t)?gh(e,t,r):typeof t=="function"?t(e):r}var Sde=(e,t,r,a,s)=>{var i,l=-1,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<o;d++){var u=d>0?r[d-1].coordinate:r[o-1].coordinate,f=r[d].coordinate,m=d>=o-1?r[0].coordinate:r[d+1].coordinate,g=void 0;if(Qs(f-u)!==Qs(m-f)){var x=[];if(Qs(m-f)===Qs(s[1]-s[0])){g=m;var b=f+s[1]-s[0];x[0]=Math.min(b,(b+u)/2),x[1]=Math.max(b,(b+u)/2)}else{g=u;var v=m+s[1]-s[0];x[0]=Math.min(f,(v+f)/2),x[1]=Math.max(f,(v+f)/2)}var y=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>y[0]&&e<=y[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var j=Math.min(u,m),S=Math.max(u,m);if(e>(j+f)/2&&e<=(S+f)/2){({index:l}=r[d]);break}}}else if(t){for(var N=0;N<o;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<o-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===o-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:l}=t[N]);break}}return l},kde=(e,t,r)=>{if(t&&r){var{width:a,height:s}=r,{align:i,verticalAlign:l,layout:o}=t;if((o==="vertical"||o==="horizontal"&&l==="middle")&&i!=="center"&&er(e[i]))return Wo(Wo({},e),{},{[i]:e[i]+(a||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&l!=="middle"&&er(e[l]))return Wo(Wo({},e),{},{[l]:e[l]+(s||0)})}return e},l0=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",LR=(e,t,r,a)=>{if(a)return e.map(o=>o.coordinate);var s,i,l=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(i=!0),o.coordinate));return s||l.push(t),i||l.push(r),l},RR=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:i,scale:l,realScaleType:o,isCategorical:d,categoricalDomain:u,tickCount:f,ticks:m,niceTicks:g,axisType:x}=e;if(!l)return null;var b=o==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,v=s==="category"&&l.bandwidth?l.bandwidth()/b:0;if(v=x==="angleAxis"&&i&&i.length>=2?Qs(i[0]-i[1])*2*v:v,m||g){var y=(m||g||[]).map((j,S)=>{var N=a?a.indexOf(j):j;return{coordinate:l(N)+v,value:j,offset:v,index:S}});return y.filter(j=>!Zo(j.coordinate))}return d&&u?u.map((j,S)=>({coordinate:l(j)+v,value:j,index:S,offset:v})):l.ticks&&f!=null?l.ticks(f).map((j,S)=>({coordinate:l(j)+v,value:j,offset:v,index:S})):l.domain().map((j,S)=>({coordinate:l(j)+v,value:a?a[j]:j,index:S,offset:v}))},J8=1e-4,Ade=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),s=Math.min(a[0],a[1])-J8,i=Math.max(a[0],a[1])+J8,l=e(t[0]),o=e(t[r-1]);(l<s||l>i||o<s||o>i)&&e.domain([t[0],t[r-1]])}},Cde=(e,t)=>{if(!t||t.length!==2||!er(t[0])||!er(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!er(e[0])||e[0]<r)&&(s[0]=r),(!er(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},Ede=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0,l=0;l<t;++l){var o=Zo(e[l][r][1])?e[l][r][0]:e[l][r][1];o>=0?(e[l][r][0]=s,e[l][r][1]=s+o,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+o,i=e[l][r][1])}},Tde=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0;i<t;++i){var l=Zo(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Dde={sign:Ede,expand:tce,none:gp,silhouette:rce,wiggle:ace,positive:Tde},Ode=(e,t,r)=>{var a=Dde[r],s=ece().keys(t).value((i,l)=>+Za(i,l,0)).order(a_).offset(a);return s(e)};function Fde(e){return e==null?void 0:String(e)}function eT(e){var{axis:t,ticks:r,bandSize:a,entry:s,index:i,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!wn(s[t.dataKey])){var o=VL(r,"value",s[t.dataKey]);if(o)return o.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=Za(s,wn(l)?t.dataKey:l);return wn(d)?null:t.scale(d)}var tT=e=>{var{axis:t,ticks:r,offset:a,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+a:null;var o=Za(i,t.dataKey,t.scale.domain()[l]);return wn(o)?null:t.scale(o)-s/2+a},Pde=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},Mde=e=>{var t=e.flat(2).filter(er);return[Math.min(...t),Math.max(...t)]},Lde=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Rde=(e,t,r)=>{if(e!=null)return Lde(Object.keys(e).reduce((a,s)=>{var i=e[s],{stackedData:l}=i,o=l.reduce((d,u)=>{var f=MR(u,t,r),m=Mde(f);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(o[0],a[0]),Math.max(o[1],a[1])]},[1/0,-1/0]))},rT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lg=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var s=a2(t,f=>f.coordinate),i=1/0,l=1,o=s.length;l<o;l++){var d=s[l],u=s[l-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function nT(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:s,name:i}=e;return Wo(Wo({},t),{},{dataKey:r,payload:a,value:s,name:i})}function Ip(e,t){if(e)return String(e);if(typeof t=="string")return t}function Ide(e,t,r,a,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return a?wde({x:e,y:t},a):null}var Bde=(e,t,r,a)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:l}=a;return Wo(Wo(Wo({},a),xs(a.cx,a.cy,l,i)),{},{angle:i,radius:l})}var o=s.coordinate,{angle:d}=a;return Wo(Wo(Wo({},a),xs(a.cx,a.cy,o,d)),{},{angle:d,radius:o})}return{x:0,y:0}},zde=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,$d=e=>e.layout.width,Hd=e=>e.layout.height,Ude=e=>e.layout.scale,IR=e=>e.layout.margin,c2=Xe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),u2=Xe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),BR="data-recharts-item-index",zR="data-recharts-item-data-key",fv=60;function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function H1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(r),!0).forEach(function(a){qde(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qde(e,t,r){return(t=$de(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $de(e){var t=Hde(e,"string");return typeof t=="symbol"?t:t+""}function Hde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vde=e=>e.brush.height;function Wde(e){var t=u2(e);return t.reduce((r,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var s=typeof a.width=="number"?a.width:fv;return r+s}return r},0)}function Kde(e){var t=u2(e);return t.reduce((r,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var s=typeof a.width=="number"?a.width:fv;return r+s}return r},0)}function Gde(e){var t=c2(e);return t.reduce((r,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?r+a.height:r,0)}function Yde(e){var t=c2(e);return t.reduce((r,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?r+a.height:r,0)}var Ms=Xe([$d,Hd,IR,Vde,Wde,Kde,Gde,Yde,iR,hue],(e,t,r,a,s,i,l,o,d,u)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},m={top:(r.top||0)+l,bottom:(r.bottom||0)+o},g=H1(H1({},m),f),x=g.bottom;g.bottom+=a,g=kde(g,d,u);var b=e-g.left-g.right,v=t-g.top-g.bottom;return H1(H1({brushBottom:x},g),{},{width:Math.max(b,0),height:Math.max(v,0)})}),Xde=Xe(Ms,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),L3=Xe($d,Hd,(e,t)=>({x:0,y:0,width:e,height:t})),Qde=k.createContext(null),cl=()=>k.useContext(Qde)!=null,d2=e=>e.brush,f2=Xe([d2,Ms,IR],(e,t,r)=>({height:e.height,x:er(e.x)?e.x:t.left,y:er(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:er(e.width)?e.width:t.width})),Nj={},_j={},Sj={},iT;function Zde(){return iT||(iT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:s,edges:i}={}){let l,o=null;const d=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),f=()=>{o!==null&&(r.apply(l,o),l=void 0,o=null)},m=()=>{u&&f(),v()};let g=null;const x=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},a)},b=()=>{g!==null&&(clearTimeout(g),g=null)},v=()=>{b(),l=void 0,o=null},y=()=>{f()},j=function(...S){if(s?.aborted)return;l=this,o=S;const N=g==null;x(),d&&N&&f()};return j.schedule=x,j.cancel=v,j.flush=y,s?.addEventListener("abort",v,{once:!0}),j}e.debounce=t})(Sj)),Sj}var lT;function Jde(){return lT||(lT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zde();function r(a,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:o=!0,maxWait:d}=i,u=Array(2);l&&(u[0]="leading"),o&&(u[1]="trailing");let f,m=null;const g=t.debounce(function(...v){f=a.apply(this,v),m=null},s,{edges:u}),x=function(...v){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(f=a.apply(this,v),m=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,v),f)},b=()=>(g.flush(),f);return x.cancel=g.cancel,x.flush=b,x}e.debounce=r})(_j)),_j}var oT;function efe(){return oT||(oT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jde();function r(a,s=0,i={}){const{leading:l=!0,trailing:o=!0}=i;return t.debounce(a,s,{leading:l,maxWait:s,trailing:o})}e.throttle=r})(Nj)),Nj}var kj,cT;function tfe(){return cT||(cT=1,kj=efe().throttle),kj}var rfe=tfe();const afe=Id(rfe);var rb=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},UR=(e,t,r)=>{var{width:a="100%",height:s="100%",aspect:i,maxHeight:l}=r,o=Od(a)?e:Number(a),d=Od(s)?t:Number(s);return i&&i>0&&(o?d=o/i:d&&(o=d*i),l&&d>l&&(d=l)),{calculatedWidth:o,calculatedHeight:d}},nfe={width:0,height:0,overflow:"visible"},sfe={width:0,overflowX:"visible"},ife={height:0,overflowY:"visible"},lfe={},ofe=e=>{var{width:t,height:r}=e,a=Od(t),s=Od(r);return a&&s?nfe:a?sfe:s?ife:lfe};function cfe(e){var{width:t,height:r,aspect:a}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=a&&a>0?void 0:"100%":i===void 0&&(i=a&&a>0?void 0:"100%"),{width:s,height:i}}function Ri(e){return Number.isFinite(e)}function vp(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function m_(){return m_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},m_.apply(null,arguments)}function uT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(r),!0).forEach(function(a){ufe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ufe(e,t,r){return(t=dfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dfe(e){var t=ffe(e,"string");return typeof t=="symbol"?t:t+""}function ffe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qR=k.createContext({width:-1,height:-1});function $R(e){var{children:t,width:r,height:a}=e,s=k.useMemo(()=>({width:r,height:a}),[r,a]);return r<=0||a<=0?null:k.createElement(qR.Provider,{value:s},t)}var R3=()=>k.useContext(qR),hfe=k.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:o,maxHeight:d,children:u,debounce:f=0,id:m,className:g,onResize:x,style:b={}}=e,v=k.useRef(null),y=k.useRef();y.current=x,k.useImperativeHandle(t,()=>v.current);var[j,S]=k.useState({containerWidth:a.width,containerHeight:a.height}),N=k.useCallback((M,F)=>{S(H=>{var L=Math.round(M),z=Math.round(F);return H.containerWidth===L&&H.containerHeight===z?H:{containerWidth:L,containerHeight:z}})},[]);k.useEffect(()=>{var M=z=>{var V,{width:G,height:ie}=z[0].contentRect;N(G,ie),(V=y.current)===null||V===void 0||V.call(y,G,ie)};f>0&&(M=afe(M,f,{trailing:!0,leading:!1}));var F=new ResizeObserver(M),{width:H,height:L}=v.current.getBoundingClientRect();return N(H,L),F.observe(v.current),()=>{F.disconnect()}},[N,f]);var{containerWidth:C,containerHeight:T}=j;rb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:D}=UR(C,T,{width:s,height:i,aspect:r,maxHeight:d});return rb(P>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,D,s,i,l,o,r),k.createElement("div",{id:m?"".concat(m):void 0,className:ma("recharts-responsive-container",g),style:dT(dT({},b),{},{width:s,height:i,minWidth:l,minHeight:o,maxHeight:d}),ref:v},k.createElement("div",{style:ofe({width:s,height:i})},k.createElement($R,{width:P,height:D},u)))}),hy=k.forwardRef((e,t)=>{var r=R3();if(vp(r.width)&&vp(r.height))return e.children;var{width:a,height:s}=cfe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=UR(void 0,void 0,{width:a,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return er(i)&&er(l)?k.createElement($R,{width:i,height:l},e.children):k.createElement(hfe,m_({},e,{width:a,height:s,ref:t}))}),h2=()=>{var e,t=cl(),r=Gt(Xde),a=Gt(f2),s=(e=Gt(d2))===null||e===void 0?void 0:e.padding;return!t||!a||!s?r:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},mfe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},HR=()=>{var e;return(e=Gt(Ms))!==null&&e!==void 0?e:mfe},I3=()=>Gt($d),B3=()=>Gt(Hd),pfe=()=>Gt(e=>e.layout.margin),sa=e=>e.layout.layoutType,m2=()=>Gt(sa),p2=e=>{var t=Nn(),r=cl(),{width:a,height:s}=e,i=R3(),l=a,o=s;return i&&(l=i.width>0?i.width:a,o=i.height>0?i.height:s),k.useEffect(()=>{!r&&vp(l)&&vp(o)&&t(ude({width:l,height:o}))},[t,r,l,o]),null},xfe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},VR=go({name:"legend",initialState:xfe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:el()},removeLegendPayload:{reducer(e,t){var r=Ad(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:el()}}}),{setLegendSize:fT,setLegendSettings:gfe,addLegendPayload:WR,removeLegendPayload:KR}=VR.actions,vfe=VR.reducer,yfe=["contextPayload"];function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p_.apply(null,arguments)}function hT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hT(Object(r),!0).forEach(function(a){z3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function z3(e,t,r){return(t=bfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bfe(e){var t=wfe(e,"string");return typeof t=="symbol"?t:t+""}function wfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jfe(e,t){if(e==null)return{};var r,a,s=Nfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Nfe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function _fe(e){return e.value}function Sfe(e){var{contextPayload:t}=e,r=jfe(e,yfe),a=rR(t,e.payloadUniqBy,_fe),s=yp(yp({},r),{},{payload:a});return k.isValidElement(e.content)?k.cloneElement(e.content,s):typeof e.content=="function"?k.createElement(e.content,s):k.createElement(C3,s)}function kfe(e,t,r,a,s,i){var{layout:l,align:o,verticalAlign:d}=t,u,f;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&l==="vertical"?u={left:((a||0)-i.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?f={top:((s||0)-i.height)/2}:f=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),yp(yp({},u),f)}function Afe(e){var t=Nn();return k.useEffect(()=>{t(gfe(e))},[t,e]),null}function Cfe(e){var t=Nn();return k.useEffect(()=>(t(fT(e)),()=>{t(fT({width:0,height:0}))}),[t,e]),null}function Efe(e){var t=xue(),r=_oe(),a=pfe(),{width:s,height:i,wrapperStyle:l,portal:o}=e,[d,u]=lR([t]),f=I3(),m=B3();if(f==null||m==null)return null;var g=f-(a.left||0)-(a.right||0),x=bp.getWidthOrHeight(e.layout,i,s,g),b=o?l:yp(yp({position:"absolute",width:x?.width||s||"auto",height:x?.height||i||"auto"},kfe(l,e,a,f,m,d)),l),v=o??r;if(v==null)return null;var y=k.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:u},k.createElement(Afe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),k.createElement(Cfe,{width:d.width,height:d.height}),k.createElement(Sfe,p_({},e,x,{margin:a,chartWidth:f,chartHeight:m,contextPayload:t})));return BF.createPortal(y,v)}class bp extends k.PureComponent{static getWidthOrHeight(t,r,a,s){return t==="vertical"&&er(r)?{height:r}:t==="horizontal"?{width:a||s}:null}render(){return k.createElement(Efe,this.props)}}z3(bp,"displayName","Legend");z3(bp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x_.apply(null,arguments)}function mT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Aj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(r),!0).forEach(function(a){Tfe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Tfe(e,t,r){return(t=Dfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dfe(e){var t=Ofe(e,"string");return typeof t=="symbol"?t:t+""}function Ofe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ffe(e){return Array.isArray(e)&&Tu(e[0])&&Tu(e[1])?e.join(" ~ "):e}var Pfe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:s={},payload:i,formatter:l,itemSorter:o,wrapperClassName:d,labelClassName:u,label:f,labelFormatter:m,accessibilityLayer:g=!1}=e,x=()=>{if(i&&i.length){var T={padding:0,margin:0},P=(o?a2(i,o):i).map((D,M)=>{if(D.type==="none")return null;var F=D.formatter||l||Ffe,{value:H,name:L}=D,z=H,V=L;if(F){var G=F(H,L,D,M,i);if(Array.isArray(G))[z,V]=G;else if(G!=null)z=G;else return null}var ie=Aj({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},a);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:ie},Tu(V)?k.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Tu(V)?k.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,k.createElement("span",{className:"recharts-tooltip-item-value"},z),k.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:T},P)}return null},b=Aj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=Aj({margin:0},s),y=!wn(f),j=y?f:"",S=ma("recharts-default-tooltip",d),N=ma("recharts-tooltip-label",u);y&&m&&i!==void 0&&i!==null&&(j=m(f,i));var C=g?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",x_({className:S,style:b},C),k.createElement("p",{className:N,style:v},k.isValidElement(j)?j:"".concat(j)),x())},Mx="recharts-tooltip-wrapper",Mfe={visibility:"hidden"};function Lfe(e){var{coordinate:t,translateX:r,translateY:a}=e;return ma(Mx,{["".concat(Mx,"-right")]:er(r)&&t&&er(t.x)&&r>=t.x,["".concat(Mx,"-left")]:er(r)&&t&&er(t.x)&&r<t.x,["".concat(Mx,"-bottom")]:er(a)&&t&&er(t.y)&&a>=t.y,["".concat(Mx,"-top")]:er(a)&&t&&er(t.y)&&a<t.y})}function pT(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:o,viewBox:d,viewBoxDimension:u}=e;if(i&&er(i[a]))return i[a];var f=r[a]-o-(s>0?s:0),m=r[a]+s;if(t[a])return l[a]?f:m;var g=d[a];if(g==null)return 0;if(l[a]){var x=f,b=g;return x<b?Math.max(m,g):Math.max(f,g)}if(u==null)return 0;var v=m+o,y=g+u;return v>y?Math.max(f,g):Math.max(m,g)}function Rfe(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Ife(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:o,viewBox:d}=e,u,f,m;return l.height>0&&l.width>0&&r?(f=pT({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),m=pT({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),u=Rfe({translateX:f,translateY:m,useTranslate3d:o})):u=Mfe,{cssProperties:u,cssClasses:Lfe({translateX:f,translateY:m,coordinate:r})}}function xT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function V1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xT(Object(r),!0).forEach(function(a){g_(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function g_(e,t,r){return(t=Bfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bfe(e){var t=zfe(e,"string");return typeof t=="symbol"?t:t+""}function zfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ufe extends k.PureComponent{constructor(){super(...arguments),g_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),g_(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:s,children:i,coordinate:l,hasPayload:o,isAnimationActive:d,offset:u,position:f,reverseDirection:m,useTranslate3d:g,viewBox:x,wrapperStyle:b,lastBoundingBox:v,innerRef:y,hasPortalFromProps:j}=this.props,{cssClasses:S,cssProperties:N}=Ife({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:u,position:f,reverseDirection:m,tooltipBox:{height:v.height,width:v.width},useTranslate3d:g,viewBox:x}),C=j?{}:V1(V1({transition:d&&t?"transform ".concat(a,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),T=V1(V1({},C),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},b);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:T,ref:y},i)}}var qfe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),o0={devToolsEnabled:!1,isSsr:qfe()},GR=()=>Gt(e=>e.rootProps.accessibilityLayer);function v_(){return v_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},v_.apply(null,arguments)}function gT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(r),!0).forEach(function(a){$fe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $fe(e,t,r){return(t=Hfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hfe(e){var t=Vfe(e,"string");return typeof t=="symbol"?t:t+""}function Vfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yT={curveBasisClosed:$oe,curveBasisOpen:Hoe,curveBasis:qoe,curveBumpX:Coe,curveBumpY:Eoe,curveLinearClosed:Voe,curveLinear:t2,curveMonotoneX:Woe,curveMonotoneY:Koe,curveNatural:Goe,curveStep:Yoe,curveStepAfter:Qoe,curveStepBefore:Xoe},W1=e=>Ri(e.x)&&Ri(e.y),Lx=e=>e.x,Rx=e=>e.y,Wfe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(ov(e));return(r==="curveMonotone"||r==="curveBump")&&t?yT["".concat(r).concat(t==="vertical"?"Y":"X")]:yT[r]||t2},Kfe=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:s,connectNulls:i=!1}=e,l=Wfe(t,s),o=i?r.filter(W1):r,d;if(Array.isArray(a)){var u=i?a.filter(m=>W1(m)):a,f=o.map((m,g)=>vT(vT({},m),{},{base:u[g]}));return s==="vertical"?d=I1().y(Rx).x1(Lx).x0(m=>m.base.x):d=I1().x(Lx).y1(Rx).y0(m=>m.base.y),d.defined(W1).curve(l),d(f)}return s==="vertical"&&er(a)?d=I1().y(Rx).x1(Lx).x0(a):er(a)?d=I1().x(Lx).y1(Rx).y0(a):d=OL().x(Lx).y(Rx),d.defined(W1).curve(l),d(o)},U3=e=>{var{className:t,points:r,path:a,pathRef:s}=e;if((!r||!r.length)&&!a)return null;var i=r&&r.length?Kfe(e):a;return k.createElement("path",v_({},mo(e),k3(e),{className:ma("recharts-curve",t),d:i===null?void 0:i,ref:s}))},Gfe=["x","y","top","left","width","height","className"];function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},y_.apply(null,arguments)}function bT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Yfe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(r),!0).forEach(function(a){Xfe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Xfe(e,t,r){return(t=Qfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qfe(e){var t=Zfe(e,"string");return typeof t=="symbol"?t:t+""}function Zfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jfe(e,t){if(e==null)return{};var r,a,s=e0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function e0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var t0e=(e,t,r,a,s,i)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(r),r0e=e=>{var{x:t=0,y:r=0,top:a=0,left:s=0,width:i=0,height:l=0,className:o}=e,d=Jfe(e,Gfe),u=Yfe({x:t,y:r,top:a,left:s,width:i,height:l},d);return!er(t)||!er(r)||!er(i)||!er(l)||!er(a)||!er(s)?null:k.createElement("path",y_({},ll(u),{className:ma("recharts-cross",o),d:t0e(t,r,i,l,a,s)}))};function a0e(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function wT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function n0e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(r),!0).forEach(function(a){s0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function s0e(e,t,r){return(t=i0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i0e(e){var t=l0e(e,"string");return typeof t=="symbol"?t:t+""}function l0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gi(e,t){var r=n0e({},e),a=t,s=Object.keys(t),i=s.reduce((l,o)=>(l[o]===void 0&&a[o]!==void 0&&(l[o]=a[o]),l),r);return i}function o0e(){}function c0e(e){return e!=null}function jT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function NT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(r),!0).forEach(function(a){u0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function u0e(e,t,r){return(t=d0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d0e(e){var t=f0e(e,"string");return typeof t=="symbol"?t:t+""}function f0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h0e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),YR=(e,t,r)=>e.map(a=>"".concat(h0e(a)," ").concat(t,"ms ").concat(r)).join(","),m0e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(s=>a.includes(s))),Rg=(e,t)=>Object.keys(t).reduce((r,a)=>NT(NT({},r),{},{[a]:e(a,t[a])}),{});function _T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(r),!0).forEach(function(a){p0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_T(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function p0e(e,t,r){return(t=x0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x0e(e){var t=g0e(e,"string");return typeof t=="symbol"?t:t+""}function g0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ab=(e,t,r)=>e+(t-e)*r,b_=e=>{var{from:t,to:r}=e;return t!==r},XR=(e,t,r)=>{var a=Rg((s,i)=>{if(b_(i)){var[l,o]=e(i.from,i.to,i.velocity);return di(di({},i),{},{from:l,velocity:o})}return i},t);return r<1?Rg((s,i)=>b_(i)?di(di({},i),{},{velocity:ab(i.velocity,a[s].velocity,r),from:ab(i.from,a[s].from,r)}):i,t):XR(e,a,r-1)};function v0e(e,t,r,a,s,i){var l,o=a.reduce((g,x)=>di(di({},g),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Rg((g,x)=>x.from,o),u=()=>!Object.values(o).filter(b_).length,f=null,m=g=>{l||(l=g);var x=g-l,b=x/r.dt;o=XR(r,o,b),s(di(di(di({},e),t),d())),l=g,u()||(f=i.setTimeout(m))};return()=>(f=i.setTimeout(m),()=>{f()})}function y0e(e,t,r,a,s,i,l){var o=null,d=s.reduce((m,g)=>di(di({},m),{},{[g]:[e[g],t[g]]}),{}),u,f=m=>{u||(u=m);var g=(m-u)/a,x=Rg((v,y)=>ab(...y,r(g)),d);if(i(di(di(di({},e),t),x)),g<1)o=l.setTimeout(f);else{var b=Rg((v,y)=>ab(...y,r(1)),d);i(di(di(di({},e),t),b))}};return()=>(o=l.setTimeout(f),()=>{o()})}const b0e=(e,t,r,a,s,i)=>{var l=m0e(e,t);return r.isStepper===!0?v0e(e,t,r,l,s,i):y0e(e,t,r,a,l,s,i)};var nb=1e-4,QR=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ZR=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),ST=(e,t)=>r=>{var a=QR(e,t);return ZR(a,r)},w0e=(e,t)=>r=>{var a=QR(e,t),s=[...a.map((i,l)=>i*l).slice(1),0];return ZR(s,r)},kT=function(){for(var t,r,a,s,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];if(l.length===1)switch(l[0]){case"linear":[t,a,r,s]=[0,0,1,1];break;case"ease":[t,a,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,s]=[.42,0,1,1];break;case"ease-out":[t,a,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,s]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,a,r,s]=d[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else l.length===4&&([t,a,r,s]=l);var u=ST(t,r),f=ST(a,s),m=w0e(t,r),g=b=>b>1?1:b<0?0:b,x=b=>{for(var v=b>1?1:b,y=v,j=0;j<8;++j){var S=u(y)-v,N=m(y);if(Math.abs(S-v)<nb||N<nb)return f(y);y=g(y-S/N)}return f(y)};return x.isStepper=!1,x},j0e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:s=17}=t,i=(l,o,d)=>{var u=-(l-o)*r,f=d*a,m=d+(u-f)*s/1e3,g=d*s/1e3+l;return Math.abs(g-o)<nb&&Math.abs(m)<nb?[o,0]:[g,m]};return i.isStepper=!0,i.dt=s,i},N0e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kT(e);case"spring":return j0e();default:if(e.split("(")[0]==="cubic-bezier")return kT(e)}return typeof e=="function"?e:null};function _0e(e){var t,r=()=>null,a=!1,s=null,i=l=>{if(!a){if(Array.isArray(l)){if(!l.length)return;var o=l,[d,...u]=o;if(typeof d=="number"){s=e.setTimeout(i.bind(null,u),d);return}i(d),s=e.setTimeout(i.bind(null,u));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{a=!0},start:l=>{a=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class S0e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,i=l=>{l-a>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function k0e(){return _0e(new S0e)}var A0e=k.createContext(k0e);function C0e(e,t){var r=k.useContext(A0e);return k.useMemo(()=>t??r(e),[e,t,r])}var E0e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},AT={t:0},Cj={t:1};function hv(e){var t=gi(e,E0e),{isActive:r,canBegin:a,duration:s,easing:i,begin:l,onAnimationEnd:o,onAnimationStart:d,children:u}=t,f=C0e(t.animationId,t.animationManager),[m,g]=k.useState(r?AT:Cj),x=k.useRef(null);return k.useEffect(()=>{r||g(Cj)},[r]),k.useEffect(()=>{if(!r||!a)return o0e;var b=b0e(AT,Cj,N0e(i),s,g,f.getTimeoutController()),v=()=>{x.current=b()};return f.start([d,l,v,s,o]),()=>{f.stop(),x.current&&x.current(),o()}},[r,a,s,i,l,d,o,f]),u(m.t)}function mv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=k.useRef(Og(t)),a=k.useRef(e);return a.current!==e&&(r.current=Og(t),a.current=e),r.current}var T0e=["radius"],D0e=["radius"];function CT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ET(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(r),!0).forEach(function(a){O0e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function O0e(e,t,r){return(t=F0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F0e(e){var t=P0e(e,"string");return typeof t=="symbol"?t:t+""}function P0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sb(){return sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sb.apply(null,arguments)}function TT(e,t){if(e==null)return{};var r,a,s=M0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function M0e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var DT=(e,t,r,a,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,o=r>=0?1:-1,d=a>=0&&r>=0||a<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],m=0,g=4;m<g;m++)f[m]=s[m]>i?i:s[m];u="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+o*f[0],",").concat(t)),u+="L ".concat(e+r-o*f[1],",").concat(t),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),u+="L ".concat(e+r,",").concat(t+a-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-o*f[2],",").concat(t+a)),u+="L ".concat(e+o*f[3],",").concat(t+a),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+a-l*f[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);u="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+o*x,",").concat(t,`
            L `).concat(e+r-o*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+a-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-o*x,",").concat(t+a,`
            L `).concat(e+o*x,",").concat(t+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+a-l*x," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return u},L0e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JR=e=>{var t=gi(e,L0e),r=k.useRef(null),[a,s]=k.useState(-1);k.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var X=r.current.getTotalLength();X&&s(X)}catch{}},[]);var{x:i,y:l,width:o,height:d,radius:u,className:f}=t,{animationEasing:m,animationDuration:g,animationBegin:x,isAnimationActive:b,isUpdateAnimationActive:v}=t,y=k.useRef(o),j=k.useRef(d),S=k.useRef(i),N=k.useRef(l),C=k.useMemo(()=>({x:i,y:l,width:o,height:d,radius:u}),[i,l,o,d,u]),T=mv(C,"rectangle-");if(i!==+i||l!==+l||o!==+o||d!==+d||o===0||d===0)return null;var P=ma("recharts-rectangle",f);if(!v){var D=ll(t),{radius:M}=D,F=TT(D,T0e);return k.createElement("path",sb({},F,{radius:typeof u=="number"?u:void 0,className:P,d:DT(i,l,o,d,u)}))}var H=y.current,L=j.current,z=S.current,V=N.current,G="0px ".concat(a===-1?1:a,"px"),ie="".concat(a,"px 0px"),Z=YR(["strokeDasharray"],g,typeof m=="string"?m:void 0);return k.createElement(hv,{animationId:T,key:T,canBegin:a>0,duration:g,easing:m,isActive:v,begin:x},X=>{var he=Hn(H,o,X),ce=Hn(L,d,X),ke=Hn(z,i,X),se=Hn(V,l,X);r.current&&(y.current=he,j.current=ce,S.current=ke,N.current=se);var R;b?X>0?R={transition:Z,strokeDasharray:ie}:R={strokeDasharray:G}:R={strokeDasharray:ie};var I=ll(t),{radius:q}=I,K=TT(I,D0e);return k.createElement("path",sb({},K,{radius:typeof u=="number"?u:void 0,className:P,d:DT(ke,se,he,ce,u),ref:r,style:ET(ET({},R),t.style)}))})};function e9(e){var{cx:t,cy:r,radius:a,startAngle:s,endAngle:i}=e,l=xs(t,r,a,s),o=xs(t,r,a,i);return{points:[l,o],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},w_.apply(null,arguments)}var R0e=(e,t)=>{var r=Qs(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},K1=e=>{var{cx:t,cy:r,radius:a,angle:s,sign:i,isExternal:l,cornerRadius:o,cornerIsExternal:d}=e,u=o*(l?1:-1)+a,f=Math.asin(o/u)/tb,m=d?s:s+i*f,g=xs(t,r,u,m),x=xs(t,r,a,m),b=d?s-i*f:s,v=xs(t,r,u*Math.cos(f*tb),b);return{center:g,circleTangency:x,lineTangency:v,theta:f}},t9=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:i,endAngle:l}=e,o=R0e(i,l),d=i+o,u=xs(t,r,s,i),f=xs(t,r,s,d),m="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var g=xs(t,r,a,i),x=xs(t,r,a,d);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(r," Z");return m},I0e=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:o,startAngle:d,endAngle:u}=e,f=Qs(u-d),{circleTangency:m,lineTangency:g,theta:x}=K1({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:o}),{circleTangency:b,lineTangency:v,theta:y}=K1({cx:t,cy:r,radius:s,angle:u,sign:-f,cornerRadius:i,cornerIsExternal:o}),j=o?Math.abs(d-u):Math.abs(d-u)-x-y;if(j<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):t9({cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:d,endAngle:u});var S="M ".concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var{circleTangency:N,lineTangency:C,theta:T}=K1({cx:t,cy:r,radius:a,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:P,lineTangency:D,theta:M}=K1({cx:t,cy:r,radius:a,angle:u,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),F=o?Math.abs(d-u):Math.abs(d-u)-T-M;if(F<0&&i===0)return"".concat(S,"L").concat(t,",").concat(r,"Z");S+="L".concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(F>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else S+="L".concat(t,",").concat(r,"Z");return S},B0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},r9=e=>{var t=gi(e,B0e),{cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:d,startAngle:u,endAngle:f,className:m}=t;if(i<s||u===f)return null;var g=ma("recharts-sector",m),x=i-s,b=Mi(l,x,0,!0),v;return b>0&&Math.abs(u-f)<360?v=I0e({cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(b,x/2),forceCornerRadius:o,cornerIsExternal:d,startAngle:u,endAngle:f}):v=t9({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f}),k.createElement("path",w_({},ll(t),{className:g,d:v}))};function z0e(e,t,r){var a,s,i,l;if(e==="horizontal")a=t.x,i=a,s=r.top,l=r.top+r.height;else if(e==="vertical")s=t.y,l=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:d,innerRadius:u,outerRadius:f,angle:m}=t,g=xs(o,d,u,m),x=xs(o,d,f,m);a=g.x,s=g.y,i=x.x,l=x.y}else return e9(t);return[{x:a,y:s},{x:i,y:l}]}var Ej={},Tj={},Dj={},OT;function U0e(){return OT||(OT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nR();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r})(Dj)),Dj}var FT;function q0e(){return FT||(FT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U0e();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r})(Tj)),Tj}var PT;function $0e(){return PT||(PT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sR(),r=q0e();function a(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const o=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(o);for(let u=0;u<o;u++)d[u]=s,s+=l;return d}e.range=a})(Ej)),Ej}var Oj,MT;function H0e(){return MT||(MT=1,Oj=$0e().range),Oj}var V0e=H0e();const a9=Id(V0e);function $f(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function W0e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function q3(e){let t,r,a;e.length!==2?(t=$f,r=(o,d)=>$f(e(o),d),a=(o,d)=>e(o)-d):(t=e===$f||e===W0e?e:K0e,r=e,a=e);function s(o,d,u=0,f=o.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(o[m],d)<0?u=m+1:f=m}while(u<f)}return u}function i(o,d,u=0,f=o.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(o[m],d)<=0?u=m+1:f=m}while(u<f)}return u}function l(o,d,u=0,f=o.length){const m=s(o,d,u,f-1);return m>u&&a(o[m-1],d)>-a(o[m],d)?m-1:m}return{left:s,center:l,right:i}}function K0e(){return 0}function n9(e){return e===null?NaN:+e}function*G0e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Y0e=q3($f),pv=Y0e.right;q3(n9).center;class LT extends Map{constructor(t,r=Z0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(RT(this,t))}has(t){return super.has(RT(this,t))}set(t,r){return super.set(X0e(this,t),r)}delete(t){return super.delete(Q0e(this,t))}}function RT({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function X0e({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function Q0e({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function Z0e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function J0e(e=$f){if(e===$f)return s9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function s9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ehe=Math.sqrt(50),the=Math.sqrt(10),rhe=Math.sqrt(2);function ib(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=ehe?10:i>=the?5:i>=rhe?2:1;let o,d,u;return s<0?(u=Math.pow(10,-s)/l,o=Math.round(e*u),d=Math.round(t*u),o/u<e&&++o,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*l,o=Math.round(e/u),d=Math.round(t/u),o*u<e&&++o,d*u>t&&--d),d<o&&.5<=r&&r<2?ib(e,t,r*2):[o,d,u]}function j_(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,l]=a?ib(t,e,r):ib(e,t,r);if(!(i>=s))return[];const o=i-s+1,d=new Array(o);if(a)if(l<0)for(let u=0;u<o;++u)d[u]=(i-u)/-l;else for(let u=0;u<o;++u)d[u]=(i-u)*l;else if(l<0)for(let u=0;u<o;++u)d[u]=(s+u)/-l;else for(let u=0;u<o;++u)d[u]=(s+u)*l;return d}function N_(e,t,r){return t=+t,e=+e,r=+r,ib(e,t,r)[2]}function __(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?N_(t,e,r):N_(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function IT(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function BT(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function i9(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?s9:J0e(s);a>r;){if(a-r>600){const d=a-r+1,u=t-r+1,f=Math.log(d),m=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*m*(d-m)/d)*(u-d/2<0?-1:1),x=Math.max(r,Math.floor(t-u*m/d+g)),b=Math.min(a,Math.floor(t+(d-u)*m/d+g));i9(e,t,x,b,s)}const i=e[t];let l=r,o=a;for(Ix(e,r,t),s(e[a],i)>0&&Ix(e,r,a);l<o;){for(Ix(e,l,o),++l,--o;s(e[l],i)<0;)++l;for(;s(e[o],i)>0;)--o}s(e[r],i)===0?Ix(e,r,o):(++o,Ix(e,o,a)),o<=t&&(r=o+1),t<=o&&(a=o-1)}return e}function Ix(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function ahe(e,t,r){if(e=Float64Array.from(G0e(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return BT(e);if(t>=1)return IT(e);var a,s=(a-1)*t,i=Math.floor(s),l=IT(i9(e,i).subarray(0,i+1)),o=BT(e.subarray(i+1));return l+(o-l)*(s-i)}}function nhe(e,t,r=n9){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),l=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return l+(o-l)*(s-i)}}function she(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function ac(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const S_=Symbol("implicit");function $3(){var e=new LT,t=[],r=[],a=S_;function s(i){let l=e.get(i);if(l===void 0){if(a!==S_)return a;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new LT;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return $3(t,r).unknown(a)},ac.apply(s,arguments),s}function H3(){var e=$3().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,l,o=!1,d=0,u=0,f=.5;delete e.unknown;function m(){var g=t().length,x=s<a,b=x?s:a,v=x?a:s;i=(v-b)/Math.max(1,g-d+u*2),o&&(i=Math.floor(i)),b+=(v-b-i*(g-d))*f,l=i*(1-d),o&&(b=Math.round(b),l=Math.round(l));var y=she(g).map(function(j){return b+i*j});return r(x?y.reverse():y)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([a,s]=g,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(g){return[a,s]=g,a=+a,s=+s,o=!0,m()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(g){return arguments.length?(o=!!g,m()):o},e.padding=function(g){return arguments.length?(d=Math.min(1,u=+g),m()):d},e.paddingInner=function(g){return arguments.length?(d=Math.min(1,g),m()):d},e.paddingOuter=function(g){return arguments.length?(u=+g,m()):u},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),m()):f},e.copy=function(){return H3(t(),[a,s]).round(o).paddingInner(d).paddingOuter(u).align(f)},ac.apply(m(),arguments)}function l9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return l9(t())},e}function ihe(){return l9(H3.apply(null,arguments).paddingInner(1))}function V3(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function o9(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function xv(){}var Ig=.7,lb=1/Ig,ap="\\s*([+-]?\\d+)\\s*",Bg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lhe=/^#([0-9a-f]{3,8})$/,ohe=new RegExp(`^rgb\\(${ap},${ap},${ap}\\)$`),che=new RegExp(`^rgb\\(${Cu},${Cu},${Cu}\\)$`),uhe=new RegExp(`^rgba\\(${ap},${ap},${ap},${Bg}\\)$`),dhe=new RegExp(`^rgba\\(${Cu},${Cu},${Cu},${Bg}\\)$`),fhe=new RegExp(`^hsl\\(${Bg},${Cu},${Cu}\\)$`),hhe=new RegExp(`^hsla\\(${Bg},${Cu},${Cu},${Bg}\\)$`),zT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V3(xv,zg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:UT,formatHex:UT,formatHex8:mhe,formatHsl:phe,formatRgb:qT,toString:qT});function UT(){return this.rgb().formatHex()}function mhe(){return this.rgb().formatHex8()}function phe(){return c9(this).formatHsl()}function qT(){return this.rgb().formatRgb()}function zg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=lhe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$T(t):r===3?new Ol(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?G1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?G1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ohe.exec(e))?new Ol(t[1],t[2],t[3],1):(t=che.exec(e))?new Ol(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uhe.exec(e))?G1(t[1],t[2],t[3],t[4]):(t=dhe.exec(e))?G1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fhe.exec(e))?WT(t[1],t[2]/100,t[3]/100,1):(t=hhe.exec(e))?WT(t[1],t[2]/100,t[3]/100,t[4]):zT.hasOwnProperty(e)?$T(zT[e]):e==="transparent"?new Ol(NaN,NaN,NaN,0):null}function $T(e){return new Ol(e>>16&255,e>>8&255,e&255,1)}function G1(e,t,r,a){return a<=0&&(e=t=r=NaN),new Ol(e,t,r,a)}function xhe(e){return e instanceof xv||(e=zg(e)),e?(e=e.rgb(),new Ol(e.r,e.g,e.b,e.opacity)):new Ol}function k_(e,t,r,a){return arguments.length===1?xhe(e):new Ol(e,t,r,a??1)}function Ol(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}V3(Ol,k_,o9(xv,{brighter(e){return e=e==null?lb:Math.pow(lb,e),new Ol(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ig:Math.pow(Ig,e),new Ol(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ol(ah(this.r),ah(this.g),ah(this.b),ob(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HT,formatHex:HT,formatHex8:ghe,formatRgb:VT,toString:VT}));function HT(){return`#${K0(this.r)}${K0(this.g)}${K0(this.b)}`}function ghe(){return`#${K0(this.r)}${K0(this.g)}${K0(this.b)}${K0((isNaN(this.opacity)?1:this.opacity)*255)}`}function VT(){const e=ob(this.opacity);return`${e===1?"rgb(":"rgba("}${ah(this.r)}, ${ah(this.g)}, ${ah(this.b)}${e===1?")":`, ${e})`}`}function ob(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ah(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function K0(e){return e=ah(e),(e<16?"0":"")+e.toString(16)}function WT(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Dc(e,t,r,a)}function c9(e){if(e instanceof Dc)return new Dc(e.h,e.s,e.l,e.opacity);if(e instanceof xv||(e=zg(e)),!e)return new Dc;if(e instanceof Dc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),l=NaN,o=i-s,d=(i+s)/2;return o?(t===i?l=(r-a)/o+(r<a)*6:r===i?l=(a-t)/o+2:l=(t-r)/o+4,o/=d<.5?i+s:2-i-s,l*=60):o=d>0&&d<1?0:l,new Dc(l,o,d,e.opacity)}function vhe(e,t,r,a){return arguments.length===1?c9(e):new Dc(e,t,r,a??1)}function Dc(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}V3(Dc,vhe,o9(xv,{brighter(e){return e=e==null?lb:Math.pow(lb,e),new Dc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ig:Math.pow(Ig,e),new Dc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Ol(Fj(e>=240?e-240:e+120,s,a),Fj(e,s,a),Fj(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Dc(KT(this.h),Y1(this.s),Y1(this.l),ob(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ob(this.opacity);return`${e===1?"hsl(":"hsla("}${KT(this.h)}, ${Y1(this.s)*100}%, ${Y1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function KT(e){return e=(e||0)%360,e<0?e+360:e}function Y1(e){return Math.max(0,Math.min(1,e||0))}function Fj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const W3=e=>()=>e;function yhe(e,t){return function(r){return e+r*t}}function bhe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function whe(e){return(e=+e)==1?u9:function(t,r){return r-t?bhe(t,r,e):W3(isNaN(t)?r:t)}}function u9(e,t){var r=t-e;return r?yhe(e,r):W3(isNaN(e)?t:e)}const GT=(function e(t){var r=whe(t);function a(s,i){var l=r((s=k_(s)).r,(i=k_(i)).r),o=r(s.g,i.g),d=r(s.b,i.b),u=u9(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=o(f),s.b=d(f),s.opacity=u(f),s+""}}return a.gamma=e,a})(1);function jhe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function Nhe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _he(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),l;for(l=0;l<a;++l)s[l]=Bp(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(o){for(l=0;l<a;++l)i[l]=s[l](o);return i}}function She(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function cb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function khe(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Bp(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var A_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pj=new RegExp(A_.source,"g");function Ahe(e){return function(){return e}}function Che(e){return function(t){return e(t)+""}}function Ehe(e,t){var r=A_.lastIndex=Pj.lastIndex=0,a,s,i,l=-1,o=[],d=[];for(e=e+"",t=t+"";(a=A_.exec(e))&&(s=Pj.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(a=a[0])===(s=s[0])?o[l]?o[l]+=s:o[++l]=s:(o[++l]=null,d.push({i:l,x:cb(a,s)})),r=Pj.lastIndex;return r<t.length&&(i=t.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?d[0]?Che(d[0].x):Ahe(t):(t=d.length,function(u){for(var f=0,m;f<t;++f)o[(m=d[f]).i]=m.x(u);return o.join("")})}function Bp(e,t){var r=typeof t,a;return t==null||r==="boolean"?W3(t):(r==="number"?cb:r==="string"?(a=zg(t))?(t=a,GT):Ehe:t instanceof zg?GT:t instanceof Date?She:Nhe(t)?jhe:Array.isArray(t)?_he:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?khe:cb)(e,t)}function K3(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function The(e,t){t===void 0&&(t=e,e=Bp);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(l){var o=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[o](l-o)}}function Dhe(e){return function(){return e}}function ub(e){return+e}var YT=[0,1];function nl(e){return e}function C_(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Dhe(isNaN(t)?NaN:.5)}function Ohe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function Fhe(e,t,r){var a=e[0],s=e[1],i=t[0],l=t[1];return s<a?(a=C_(s,a),i=r(l,i)):(a=C_(a,s),i=r(i,l)),function(o){return i(a(o))}}function Phe(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=C_(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(o){var d=pv(e,o,1,a)-1;return i[d](s[d](o))}}function gv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function x2(){var e=YT,t=YT,r=Bp,a,s,i,l=nl,o,d,u;function f(){var g=Math.min(e.length,t.length);return l!==nl&&(l=Ohe(e[0],e[g-1])),o=g>2?Phe:Fhe,d=u=null,m}function m(g){return g==null||isNaN(g=+g)?i:(d||(d=o(e.map(a),t,r)))(a(l(g)))}return m.invert=function(g){return l(s((u||(u=o(t,e.map(a),cb)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,ub),f()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),f()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),r=K3,f()},m.clamp=function(g){return arguments.length?(l=g?!0:nl,f()):l!==nl},m.interpolate=function(g){return arguments.length?(r=g,f()):r},m.unknown=function(g){return arguments.length?(i=g,m):i},function(g,x){return a=g,s=x,f()}}function G3(){return x2()(nl,nl)}function Mhe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function db(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function wp(e){return e=db(Math.abs(e)),e?e[1]:NaN}function Lhe(e,t){return function(r,a){for(var s=r.length,i=[],l=0,o=e[0],d=0;s>0&&o>0&&(d+o+1>a&&(o=Math.max(1,a-d)),i.push(r.substring(s-=o,s+o)),!((d+=o+1)>a));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function Rhe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Ihe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ug(e){if(!(t=Ihe.exec(e)))throw new Error("invalid format: "+e);var t;return new Y3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ug.prototype=Y3.prototype;function Y3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Y3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bhe(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var d9;function zhe(e,t){var r=db(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(d9=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+db(e,Math.max(0,t+i-1))[0]}function XT(e,t){var r=db(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const QT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Mhe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>XT(e*100,t),r:XT,s:zhe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ZT(e){return e}var JT=Array.prototype.map,e7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Uhe(e){var t=e.grouping===void 0||e.thousands===void 0?ZT:Lhe(JT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ZT:Rhe(JT.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(m){m=Ug(m);var g=m.fill,x=m.align,b=m.sign,v=m.symbol,y=m.zero,j=m.width,S=m.comma,N=m.precision,C=m.trim,T=m.type;T==="n"?(S=!0,T="g"):QT[T]||(N===void 0&&(N=12),C=!0,T="g"),(y||g==="0"&&x==="=")&&(y=!0,g="0",x="=");var P=v==="$"?r:v==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",D=v==="$"?a:/[%p]/.test(T)?l:"",M=QT[T],F=/[defgprs%]/.test(T);N=N===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function H(L){var z=P,V=D,G,ie,Z;if(T==="c")V=M(L)+V,L="";else{L=+L;var X=L<0||1/L<0;if(L=isNaN(L)?d:M(Math.abs(L),N),C&&(L=Bhe(L)),X&&+L==0&&b!=="+"&&(X=!1),z=(X?b==="("?b:o:b==="-"||b==="("?"":b)+z,V=(T==="s"?e7[8+d9/3]:"")+V+(X&&b==="("?")":""),F){for(G=-1,ie=L.length;++G<ie;)if(Z=L.charCodeAt(G),48>Z||Z>57){V=(Z===46?s+L.slice(G+1):L.slice(G))+V,L=L.slice(0,G);break}}}S&&!y&&(L=t(L,1/0));var he=z.length+L.length+V.length,ce=he<j?new Array(j-he+1).join(g):"";switch(S&&y&&(L=t(ce+L,ce.length?j-V.length:1/0),ce=""),x){case"<":L=z+L+V+ce;break;case"=":L=z+ce+L+V;break;case"^":L=ce.slice(0,he=ce.length>>1)+z+L+V+ce.slice(he);break;default:L=ce+z+L+V;break}return i(L)}return H.toString=function(){return m+""},H}function f(m,g){var x=u((m=Ug(m),m.type="f",m)),b=Math.max(-8,Math.min(8,Math.floor(wp(g)/3)))*3,v=Math.pow(10,-b),y=e7[8+b/3];return function(j){return x(v*j)+y}}return{format:u,formatPrefix:f}}var X1,X3,f9;qhe({thousands:",",grouping:[3],currency:["$",""]});function qhe(e){return X1=Uhe(e),X3=X1.format,f9=X1.formatPrefix,X1}function $he(e){return Math.max(0,-wp(Math.abs(e)))}function Hhe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wp(t)/3)))*3-wp(Math.abs(e)))}function Vhe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,wp(t)-wp(e))+1}function h9(e,t,r,a){var s=__(e,t,r),i;switch(a=Ug(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=Hhe(s,l))&&(a.precision=i),f9(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=Vhe(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=$he(s))&&(a.precision=i-(a.type==="%")*2);break}}return X3(a)}function c0(e){var t=e.domain;return e.ticks=function(r){var a=t();return j_(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return h9(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,l=a[s],o=a[i],d,u,f=10;for(o<l&&(u=l,l=o,o=u,u=s,s=i,i=u);f-- >0;){if(u=N_(l,o,r),u===d)return a[s]=l,a[i]=o,t(a);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;d=u}return e},e}function m9(){var e=G3();return e.copy=function(){return gv(e,m9())},ac.apply(e,arguments),c0(e)}function p9(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,ub),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return p9(e).unknown(t)},e=arguments.length?Array.from(e,ub):[0,1],c0(r)}function x9(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],l;return i<s&&(l=r,r=a,a=l,l=s,s=i,i=l),e[r]=t.floor(s),e[a]=t.ceil(i),e}function t7(e){return Math.log(e)}function r7(e){return Math.exp(e)}function Whe(e){return-Math.log(-e)}function Khe(e){return-Math.exp(-e)}function Ghe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Yhe(e){return e===10?Ghe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Xhe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function a7(e){return(t,r)=>-e(-t,r)}function Q3(e){const t=e(t7,r7),r=t.domain;let a=10,s,i;function l(){return s=Xhe(a),i=Yhe(a),r()[0]<0?(s=a7(s),i=a7(i),e(Whe,Khe)):e(t7,r7),t}return t.base=function(o){return arguments.length?(a=+o,l()):a},t.domain=function(o){return arguments.length?(r(o),l()):r()},t.ticks=o=>{const d=r();let u=d[0],f=d[d.length-1];const m=f<u;m&&([u,f]=[f,u]);let g=s(u),x=s(f),b,v;const y=o==null?10:+o;let j=[];if(!(a%1)&&x-g<y){if(g=Math.floor(g),x=Math.ceil(x),u>0){for(;g<=x;++g)for(b=1;b<a;++b)if(v=g<0?b/i(-g):b*i(g),!(v<u)){if(v>f)break;j.push(v)}}else for(;g<=x;++g)for(b=a-1;b>=1;--b)if(v=g>0?b/i(-g):b*i(g),!(v<u)){if(v>f)break;j.push(v)}j.length*2<y&&(j=j_(u,f,y))}else j=j_(g,x,Math.min(x-g,y)).map(i);return m?j.reverse():j},t.tickFormat=(o,d)=>{if(o==null&&(o=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=Ug(d)).precision==null&&(d.trim=!0),d=X3(d)),o===1/0)return d;const u=Math.max(1,a*o/t.ticks().length);return f=>{let m=f/i(Math.round(s(f)));return m*a<a-.5&&(m*=a),m<=u?d(f):""}},t.nice=()=>r(x9(r(),{floor:o=>i(Math.floor(s(o))),ceil:o=>i(Math.ceil(s(o)))})),t}function g9(){const e=Q3(x2()).domain([1,10]);return e.copy=()=>gv(e,g9()).base(e.base()),ac.apply(e,arguments),e}function n7(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function s7(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Z3(e){var t=1,r=e(n7(t),s7(t));return r.constant=function(a){return arguments.length?e(n7(t=+a),s7(t)):t},c0(r)}function v9(){var e=Z3(x2());return e.copy=function(){return gv(e,v9()).constant(e.constant())},ac.apply(e,arguments)}function i7(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Qhe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Zhe(e){return e<0?-e*e:e*e}function J3(e){var t=e(nl,nl),r=1;function a(){return r===1?e(nl,nl):r===.5?e(Qhe,Zhe):e(i7(r),i7(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},c0(t)}function eS(){var e=J3(x2());return e.copy=function(){return gv(e,eS()).exponent(e.exponent())},ac.apply(e,arguments),e}function Jhe(){return eS.apply(null,arguments).exponent(.5)}function l7(e){return Math.sign(e)*e*e}function eme(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function y9(){var e=G3(),t=[0,1],r=!1,a;function s(i){var l=eme(e(i));return isNaN(l)?a:r?Math.round(l):l}return s.invert=function(i){return e.invert(l7(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,ub)).map(l7)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return y9(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},ac.apply(s,arguments),c0(s)}function b9(){var e=[],t=[],r=[],a;function s(){var l=0,o=Math.max(1,t.length);for(r=new Array(o-1);++l<o;)r[l-1]=nhe(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?a:t[pv(r,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort($f),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return b9().domain(e).range(t).unknown(a)},ac.apply(i,arguments)}function w9(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[pv(a,d,0,r)]:i}function o(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,o()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,o()):s.slice()},l.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return a.slice()},l.copy=function(){return w9().domain([e,t]).range(s).unknown(i)},ac.apply(c0(l),arguments)}function j9(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[pv(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return j9().domain(e).range(t).unknown(r)},ac.apply(s,arguments)}const Mj=new Date,Lj=new Date;function Ls(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),o=s.ceil(i);return i-l<o-i?l:o},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,o)=>{const d=[];if(i=s.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return d;let u;do d.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<l);return d},s.filter=i=>Ls(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(Mj.setTime(+i),Lj.setTime(+l),e(Mj),e(Lj),Math.floor(r(Mj,Lj))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const fb=Ls(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);fb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ls(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):fb);fb.range;const vd=1e3,Ko=vd*60,yd=Ko*60,Pd=yd*24,tS=Pd*7,o7=Pd*30,Rj=Pd*365,G0=Ls(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vd)},(e,t)=>(t-e)/vd,e=>e.getUTCSeconds());G0.range;const rS=Ls(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vd)},(e,t)=>{e.setTime(+e+t*Ko)},(e,t)=>(t-e)/Ko,e=>e.getMinutes());rS.range;const aS=Ls(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ko)},(e,t)=>(t-e)/Ko,e=>e.getUTCMinutes());aS.range;const nS=Ls(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vd-e.getMinutes()*Ko)},(e,t)=>{e.setTime(+e+t*yd)},(e,t)=>(t-e)/yd,e=>e.getHours());nS.range;const sS=Ls(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yd)},(e,t)=>(t-e)/yd,e=>e.getUTCHours());sS.range;const vv=Ls(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ko)/Pd,e=>e.getDate()-1);vv.range;const g2=Ls(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pd,e=>e.getUTCDate()-1);g2.range;const N9=Ls(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pd,e=>Math.floor(e/Pd));N9.range;function Mh(e){return Ls(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ko)/tS)}const v2=Mh(0),hb=Mh(1),tme=Mh(2),rme=Mh(3),jp=Mh(4),ame=Mh(5),nme=Mh(6);v2.range;hb.range;tme.range;rme.range;jp.range;ame.range;nme.range;function Lh(e){return Ls(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/tS)}const y2=Lh(0),mb=Lh(1),sme=Lh(2),ime=Lh(3),Np=Lh(4),lme=Lh(5),ome=Lh(6);y2.range;mb.range;sme.range;ime.range;Np.range;lme.range;ome.range;const iS=Ls(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());iS.range;const lS=Ls(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());lS.range;const Md=Ls(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Md.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ls(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Md.range;const Ld=Ls(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ld.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ls(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ld.range;function _9(e,t,r,a,s,i){const l=[[G0,1,vd],[G0,5,5*vd],[G0,15,15*vd],[G0,30,30*vd],[i,1,Ko],[i,5,5*Ko],[i,15,15*Ko],[i,30,30*Ko],[s,1,yd],[s,3,3*yd],[s,6,6*yd],[s,12,12*yd],[a,1,Pd],[a,2,2*Pd],[r,1,tS],[t,1,o7],[t,3,3*o7],[e,1,Rj]];function o(u,f,m){const g=f<u;g&&([u,f]=[f,u]);const x=m&&typeof m.range=="function"?m:d(u,f,m),b=x?x.range(u,+f+1):[];return g?b.reverse():b}function d(u,f,m){const g=Math.abs(f-u)/m,x=q3(([,,y])=>y).right(l,g);if(x===l.length)return e.every(__(u/Rj,f/Rj,m));if(x===0)return fb.every(Math.max(__(u,f,m),1));const[b,v]=l[g/l[x-1][2]<l[x][2]/g?x-1:x];return b.every(v)}return[o,d]}const[cme,ume]=_9(Ld,lS,y2,N9,sS,aS),[dme,fme]=_9(Md,iS,v2,vv,nS,rS);function Ij(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Bj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Bx(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function hme(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,l=e.shortDays,o=e.months,d=e.shortMonths,u=zx(s),f=Ux(s),m=zx(i),g=Ux(i),x=zx(l),b=Ux(l),v=zx(o),y=Ux(o),j=zx(d),S=Ux(d),N={a:X,A:he,b:ce,B:ke,c:null,d:m7,e:m7,f:Lme,g:Wme,G:Gme,H:Fme,I:Pme,j:Mme,L:S9,m:Rme,M:Ime,p:se,q:R,Q:g7,s:v7,S:Bme,u:zme,U:Ume,V:qme,w:$me,W:Hme,x:null,X:null,y:Vme,Y:Kme,Z:Yme,"%":x7},C={a:I,A:q,b:K,B:te,c:null,d:p7,e:p7,f:Jme,g:cpe,G:dpe,H:Xme,I:Qme,j:Zme,L:A9,m:epe,M:tpe,p:J,q:Q,Q:g7,s:v7,S:rpe,u:ape,U:npe,V:spe,w:ipe,W:lpe,x:null,X:null,y:ope,Y:upe,Z:fpe,"%":x7},T={a:H,A:L,b:z,B:V,c:G,d:f7,e:f7,f:Eme,g:d7,G:u7,H:h7,I:h7,j:Sme,L:Cme,m:_me,M:kme,p:F,q:Nme,Q:Dme,s:Ome,S:Ame,u:vme,U:yme,V:bme,w:gme,W:wme,x:ie,X:Z,y:d7,Y:u7,Z:jme,"%":Tme};N.x=P(r,N),N.X=P(a,N),N.c=P(t,N),C.x=P(r,C),C.X=P(a,C),C.c=P(t,C);function P(ne,ye){return function(De){var ee=[],Je=-1,Oe=0,ve=ne.length,pt,et,Nt;for(De instanceof Date||(De=new Date(+De));++Je<ve;)ne.charCodeAt(Je)===37&&(ee.push(ne.slice(Oe,Je)),(et=c7[pt=ne.charAt(++Je)])!=null?pt=ne.charAt(++Je):et=pt==="e"?" ":"0",(Nt=ye[pt])&&(pt=Nt(De,et)),ee.push(pt),Oe=Je+1);return ee.push(ne.slice(Oe,Je)),ee.join("")}}function D(ne,ye){return function(De){var ee=Bx(1900,void 0,1),Je=M(ee,ne,De+="",0),Oe,ve;if(Je!=De.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ye&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Oe=Bj(Bx(ee.y,0,1)),ve=Oe.getUTCDay(),Oe=ve>4||ve===0?mb.ceil(Oe):mb(Oe),Oe=g2.offset(Oe,(ee.V-1)*7),ee.y=Oe.getUTCFullYear(),ee.m=Oe.getUTCMonth(),ee.d=Oe.getUTCDate()+(ee.w+6)%7):(Oe=Ij(Bx(ee.y,0,1)),ve=Oe.getDay(),Oe=ve>4||ve===0?hb.ceil(Oe):hb(Oe),Oe=vv.offset(Oe,(ee.V-1)*7),ee.y=Oe.getFullYear(),ee.m=Oe.getMonth(),ee.d=Oe.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),ve="Z"in ee?Bj(Bx(ee.y,0,1)).getUTCDay():Ij(Bx(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(ve+5)%7:ee.w+ee.U*7-(ve+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,Bj(ee)):Ij(ee)}}function M(ne,ye,De,ee){for(var Je=0,Oe=ye.length,ve=De.length,pt,et;Je<Oe;){if(ee>=ve)return-1;if(pt=ye.charCodeAt(Je++),pt===37){if(pt=ye.charAt(Je++),et=T[pt in c7?ye.charAt(Je++):pt],!et||(ee=et(ne,De,ee))<0)return-1}else if(pt!=De.charCodeAt(ee++))return-1}return ee}function F(ne,ye,De){var ee=u.exec(ye.slice(De));return ee?(ne.p=f.get(ee[0].toLowerCase()),De+ee[0].length):-1}function H(ne,ye,De){var ee=x.exec(ye.slice(De));return ee?(ne.w=b.get(ee[0].toLowerCase()),De+ee[0].length):-1}function L(ne,ye,De){var ee=m.exec(ye.slice(De));return ee?(ne.w=g.get(ee[0].toLowerCase()),De+ee[0].length):-1}function z(ne,ye,De){var ee=j.exec(ye.slice(De));return ee?(ne.m=S.get(ee[0].toLowerCase()),De+ee[0].length):-1}function V(ne,ye,De){var ee=v.exec(ye.slice(De));return ee?(ne.m=y.get(ee[0].toLowerCase()),De+ee[0].length):-1}function G(ne,ye,De){return M(ne,t,ye,De)}function ie(ne,ye,De){return M(ne,r,ye,De)}function Z(ne,ye,De){return M(ne,a,ye,De)}function X(ne){return l[ne.getDay()]}function he(ne){return i[ne.getDay()]}function ce(ne){return d[ne.getMonth()]}function ke(ne){return o[ne.getMonth()]}function se(ne){return s[+(ne.getHours()>=12)]}function R(ne){return 1+~~(ne.getMonth()/3)}function I(ne){return l[ne.getUTCDay()]}function q(ne){return i[ne.getUTCDay()]}function K(ne){return d[ne.getUTCMonth()]}function te(ne){return o[ne.getUTCMonth()]}function J(ne){return s[+(ne.getUTCHours()>=12)]}function Q(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ye=P(ne+="",N);return ye.toString=function(){return ne},ye},parse:function(ne){var ye=D(ne+="",!1);return ye.toString=function(){return ne},ye},utcFormat:function(ne){var ye=P(ne+="",C);return ye.toString=function(){return ne},ye},utcParse:function(ne){var ye=D(ne+="",!0);return ye.toString=function(){return ne},ye}}}var c7={"-":"",_:" ",0:"0"},Zs=/^\s*\d+/,mme=/^%/,pme=/[\\^$*+?|[\]().{}]/g;function pa(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function xme(e){return e.replace(pme,"\\$&")}function zx(e){return new RegExp("^(?:"+e.map(xme).join("|")+")","i")}function Ux(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function gme(e,t,r){var a=Zs.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function vme(e,t,r){var a=Zs.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function yme(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function bme(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function wme(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function u7(e,t,r){var a=Zs.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function d7(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function jme(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function Nme(e,t,r){var a=Zs.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function _me(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function f7(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function Sme(e,t,r){var a=Zs.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function h7(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function kme(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function Ame(e,t,r){var a=Zs.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function Cme(e,t,r){var a=Zs.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function Eme(e,t,r){var a=Zs.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function Tme(e,t,r){var a=mme.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function Dme(e,t,r){var a=Zs.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function Ome(e,t,r){var a=Zs.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function m7(e,t){return pa(e.getDate(),t,2)}function Fme(e,t){return pa(e.getHours(),t,2)}function Pme(e,t){return pa(e.getHours()%12||12,t,2)}function Mme(e,t){return pa(1+vv.count(Md(e),e),t,3)}function S9(e,t){return pa(e.getMilliseconds(),t,3)}function Lme(e,t){return S9(e,t)+"000"}function Rme(e,t){return pa(e.getMonth()+1,t,2)}function Ime(e,t){return pa(e.getMinutes(),t,2)}function Bme(e,t){return pa(e.getSeconds(),t,2)}function zme(e){var t=e.getDay();return t===0?7:t}function Ume(e,t){return pa(v2.count(Md(e)-1,e),t,2)}function k9(e){var t=e.getDay();return t>=4||t===0?jp(e):jp.ceil(e)}function qme(e,t){return e=k9(e),pa(jp.count(Md(e),e)+(Md(e).getDay()===4),t,2)}function $me(e){return e.getDay()}function Hme(e,t){return pa(hb.count(Md(e)-1,e),t,2)}function Vme(e,t){return pa(e.getFullYear()%100,t,2)}function Wme(e,t){return e=k9(e),pa(e.getFullYear()%100,t,2)}function Kme(e,t){return pa(e.getFullYear()%1e4,t,4)}function Gme(e,t){var r=e.getDay();return e=r>=4||r===0?jp(e):jp.ceil(e),pa(e.getFullYear()%1e4,t,4)}function Yme(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pa(t/60|0,"0",2)+pa(t%60,"0",2)}function p7(e,t){return pa(e.getUTCDate(),t,2)}function Xme(e,t){return pa(e.getUTCHours(),t,2)}function Qme(e,t){return pa(e.getUTCHours()%12||12,t,2)}function Zme(e,t){return pa(1+g2.count(Ld(e),e),t,3)}function A9(e,t){return pa(e.getUTCMilliseconds(),t,3)}function Jme(e,t){return A9(e,t)+"000"}function epe(e,t){return pa(e.getUTCMonth()+1,t,2)}function tpe(e,t){return pa(e.getUTCMinutes(),t,2)}function rpe(e,t){return pa(e.getUTCSeconds(),t,2)}function ape(e){var t=e.getUTCDay();return t===0?7:t}function npe(e,t){return pa(y2.count(Ld(e)-1,e),t,2)}function C9(e){var t=e.getUTCDay();return t>=4||t===0?Np(e):Np.ceil(e)}function spe(e,t){return e=C9(e),pa(Np.count(Ld(e),e)+(Ld(e).getUTCDay()===4),t,2)}function ipe(e){return e.getUTCDay()}function lpe(e,t){return pa(mb.count(Ld(e)-1,e),t,2)}function ope(e,t){return pa(e.getUTCFullYear()%100,t,2)}function cpe(e,t){return e=C9(e),pa(e.getUTCFullYear()%100,t,2)}function upe(e,t){return pa(e.getUTCFullYear()%1e4,t,4)}function dpe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Np(e):Np.ceil(e),pa(e.getUTCFullYear()%1e4,t,4)}function fpe(){return"+0000"}function x7(){return"%"}function g7(e){return+e}function v7(e){return Math.floor(+e/1e3)}var Pm,E9,T9;hpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hpe(e){return Pm=hme(e),E9=Pm.format,Pm.parse,T9=Pm.utcFormat,Pm.utcParse,Pm}function mpe(e){return new Date(e)}function ppe(e){return e instanceof Date?+e:+new Date(+e)}function oS(e,t,r,a,s,i,l,o,d,u){var f=G3(),m=f.invert,g=f.domain,x=u(".%L"),b=u(":%S"),v=u("%I:%M"),y=u("%I %p"),j=u("%a %d"),S=u("%b %d"),N=u("%B"),C=u("%Y");function T(P){return(d(P)<P?x:o(P)<P?b:l(P)<P?v:i(P)<P?y:a(P)<P?s(P)<P?j:S:r(P)<P?N:C)(P)}return f.invert=function(P){return new Date(m(P))},f.domain=function(P){return arguments.length?g(Array.from(P,ppe)):g().map(mpe)},f.ticks=function(P){var D=g();return e(D[0],D[D.length-1],P??10)},f.tickFormat=function(P,D){return D==null?T:u(D)},f.nice=function(P){var D=g();return(!P||typeof P.range!="function")&&(P=t(D[0],D[D.length-1],P??10)),P?g(x9(D,P)):f},f.copy=function(){return gv(f,oS(e,t,r,a,s,i,l,o,d,u))},f}function xpe(){return ac.apply(oS(dme,fme,Md,iS,v2,vv,nS,rS,G0,E9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gpe(){return ac.apply(oS(cme,ume,Ld,lS,y2,g2,sS,aS,G0,T9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function b2(){var e=0,t=1,r,a,s,i,l=nl,o=!1,d;function u(m){return m==null||isNaN(m=+m)?d:l(s===0?.5:(m=(i(m)-r)*s,o?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(m){return arguments.length?(o=!!m,u):o},u.interpolator=function(m){return arguments.length?(l=m,u):l};function f(m){return function(g){var x,b;return arguments.length?([x,b]=g,l=m(x,b),u):[l(0),l(1)]}}return u.range=f(Bp),u.rangeRound=f(K3),u.unknown=function(m){return arguments.length?(d=m,u):d},function(m){return i=m,r=m(e),a=m(t),s=r===a?0:1/(a-r),u}}function u0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function D9(){var e=c0(b2()(nl));return e.copy=function(){return u0(e,D9())},Vd.apply(e,arguments)}function O9(){var e=Q3(b2()).domain([1,10]);return e.copy=function(){return u0(e,O9()).base(e.base())},Vd.apply(e,arguments)}function F9(){var e=Z3(b2());return e.copy=function(){return u0(e,F9()).constant(e.constant())},Vd.apply(e,arguments)}function cS(){var e=J3(b2());return e.copy=function(){return u0(e,cS()).exponent(e.exponent())},Vd.apply(e,arguments)}function vpe(){return cS.apply(null,arguments).exponent(.5)}function P9(){var e=[],t=nl;function r(a){if(a!=null&&!isNaN(a=+a))return t((pv(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort($f),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>ahe(e,i/a))},r.copy=function(){return P9(t).domain(e)},Vd.apply(r,arguments)}function w2(){var e=0,t=.5,r=1,a=1,s,i,l,o,d,u=nl,f,m=!1,g;function x(v){return isNaN(v=+v)?g:(v=.5+((v=+f(v))-i)*(a*v<a*i?o:d),u(m?Math.max(0,Math.min(1,v)):v))}x.domain=function(v){return arguments.length?([e,t,r]=v,s=f(e=+e),i=f(t=+t),l=f(r=+r),o=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),a=i<s?-1:1,x):[e,t,r]},x.clamp=function(v){return arguments.length?(m=!!v,x):m},x.interpolator=function(v){return arguments.length?(u=v,x):u};function b(v){return function(y){var j,S,N;return arguments.length?([j,S,N]=y,u=The(v,[j,S,N]),x):[u(0),u(.5),u(1)]}}return x.range=b(Bp),x.rangeRound=b(K3),x.unknown=function(v){return arguments.length?(g=v,x):g},function(v){return f=v,s=v(e),i=v(t),l=v(r),o=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),a=i<s?-1:1,x}}function M9(){var e=c0(w2()(nl));return e.copy=function(){return u0(e,M9())},Vd.apply(e,arguments)}function L9(){var e=Q3(w2()).domain([.1,1,10]);return e.copy=function(){return u0(e,L9()).base(e.base())},Vd.apply(e,arguments)}function R9(){var e=Z3(w2());return e.copy=function(){return u0(e,R9()).constant(e.constant())},Vd.apply(e,arguments)}function uS(){var e=J3(w2());return e.copy=function(){return u0(e,uS()).exponent(e.exponent())},Vd.apply(e,arguments)}function ype(){return uS.apply(null,arguments).exponent(.5)}const Yx=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:H3,scaleDiverging:M9,scaleDivergingLog:L9,scaleDivergingPow:uS,scaleDivergingSqrt:ype,scaleDivergingSymlog:R9,scaleIdentity:p9,scaleImplicit:S_,scaleLinear:m9,scaleLog:g9,scaleOrdinal:$3,scalePoint:ihe,scalePow:eS,scaleQuantile:b9,scaleQuantize:w9,scaleRadial:y9,scaleSequential:D9,scaleSequentialLog:O9,scaleSequentialPow:cS,scaleSequentialQuantile:P9,scaleSequentialSqrt:vpe,scaleSequentialSymlog:F9,scaleSqrt:Jhe,scaleSymlog:v9,scaleThreshold:j9,scaleTime:xpe,scaleUtc:gpe,tickFormat:h9},Symbol.toStringTag,{value:"Module"}));var d0=e=>e.chartData,dS=Xe([d0],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),j2=(e,t,r,a)=>a?dS(e):d0(e);function bh(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ri(t)&&Ri(r))return!0}return!1}function y7(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function I9(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,s,i;if(Ri(r))s=r;else if(typeof r=="function")return;if(Ri(a))i=a;else if(typeof a=="function")return;var l=[s,i];if(bh(l))return l}}function bpe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(bh(a))return y7(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,o;if(s==="auto")t!=null&&(l=Math.min(...t));else if(er(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t?.[0]))}catch{}else if(typeof s=="string"&&rT.test(s)){var d=rT.exec(s);if(d==null||t==null)l=void 0;else{var u=+d[1];l=t[0]-u}}else l=t?.[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(er(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[1]))}catch{}else if(typeof i=="string"&&aT.test(i)){var f=aT.exec(i);if(f==null||t==null)o=void 0;else{var m=+f[1];o=t[1]+m}}else o=t?.[1];var g=[l,o];if(bh(g))return t==null?g:y7(g,t,r)}}}var zp=1e9,wpe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hS,yn=!0,ec="[DecimalError] ",nh=ec+"Invalid argument: ",fS=ec+"Exponent out of range: ",Up=Math.floor,U0=Math.pow,jpe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lo,Ks=1e7,nn=7,B9=9007199254740991,pb=Up(B9/nn),$t={};$t.absoluteValue=$t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$t.comparedTo=$t.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*nn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};$t.dividedBy=$t.div=function(e){return Cd(this,new this.constructor(e))};$t.dividedToIntegerBy=$t.idiv=function(e){var t=this,r=t.constructor;return Ga(Cd(t,new r(e),0,1),r.precision)};$t.equals=$t.eq=function(e){return!this.cmp(e)};$t.exponent=function(){return vs(this)};$t.greaterThan=$t.gt=function(e){return this.cmp(e)>0};$t.greaterThanOrEqualTo=$t.gte=function(e){return this.cmp(e)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(e){return this.cmp(e)<0};$t.lessThanOrEqualTo=$t.lte=function(e){return this.cmp(e)<1};$t.logarithm=$t.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(lo))throw Error(ec+"NaN");if(r.s<1)throw Error(ec+(r.s?"NaN":"-Infinity"));return r.eq(lo)?new a(0):(yn=!1,t=Cd(qg(r,i),qg(e,i),i),yn=!0,Ga(t,s))};$t.minus=$t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?q9(t,e):z9(t,(e.s=-e.s,e))};$t.modulo=$t.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(ec+"NaN");return r.s?(yn=!1,t=Cd(r,e,0,1).times(e),yn=!0,r.minus(t)):Ga(new a(r),s)};$t.naturalExponential=$t.exp=function(){return U9(this)};$t.naturalLogarithm=$t.ln=function(){return qg(this)};$t.negated=$t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$t.plus=$t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?z9(t,e):q9(t,(e.s=-e.s,e))};$t.precision=$t.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(nh+e);if(t=vs(s)+1,a=s.d.length-1,r=a*nn+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};$t.squareRoot=$t.sqrt=function(){var e,t,r,a,s,i,l,o=this,d=o.constructor;if(o.s<1){if(!o.s)return new d(0);throw Error(ec+"NaN")}for(e=vs(o),yn=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=_u(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Up((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new d(t)):a=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=a,a=i.plus(Cd(o,i,l+2)).times(.5),_u(i.d).slice(0,l)===(t=_u(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Ga(i,r+1,0),i.times(i).eq(o)){a=i;break}}else if(t!="9999")break;l+=4}return yn=!0,Ga(a,r)};$t.times=$t.mul=function(e){var t,r,a,s,i,l,o,d,u,f=this,m=f.constructor,g=f.d,x=(e=new m(e)).d;if(!f.s||!e.s)return new m(0);for(e.s*=f.s,r=f.e+e.e,d=g.length,u=x.length,d<u&&(i=g,g=x,x=i,l=d,d=u,u=l),i=[],l=d+u,a=l;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=d+a;s>a;)o=i[s]+x[a]*g[s-a-1]+t,i[s--]=o%Ks|0,t=o/Ks|0;i[s]=(i[s]+t)%Ks|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,yn?Ga(e,m.precision):e};$t.toDecimalPlaces=$t.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Du(e,0,zp),t===void 0?t=a.rounding:Du(t,0,8),Ga(r,e+vs(r)+1,t))};$t.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=wh(a,!0):(Du(e,0,zp),t===void 0?t=s.rounding:Du(t,0,8),a=Ga(new s(a),e+1,t),r=wh(a,!0,e+1)),r};$t.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?wh(s):(Du(e,0,zp),t===void 0?t=i.rounding:Du(t,0,8),a=Ga(new i(s),e+vs(s)+1,t),r=wh(a.abs(),!1,e+vs(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};$t.toInteger=$t.toint=function(){var e=this,t=e.constructor;return Ga(new t(e),vs(e)+1,t.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(e){var t,r,a,s,i,l,o=this,d=o.constructor,u=12,f=+(e=new d(e));if(!e.s)return new d(lo);if(o=new d(o),!o.s){if(e.s<1)throw Error(ec+"Infinity");return o}if(o.eq(lo))return o;if(a=d.precision,e.eq(lo))return Ga(o,a);if(t=e.e,r=e.d.length-1,l=t>=r,i=o.s,l){if((r=f<0?-f:f)<=B9){for(s=new d(lo),t=Math.ceil(a/nn+4),yn=!1;r%2&&(s=s.times(o),w7(s.d,t)),r=Up(r/2),r!==0;)o=o.times(o),w7(o.d,t);return yn=!0,e.s<0?new d(lo).div(s):Ga(s,a)}}else if(i<0)throw Error(ec+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,yn=!1,s=e.times(qg(o,a+u)),yn=!0,s=U9(s),s.s=i,s};$t.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=vs(s),a=wh(s,r<=i.toExpNeg||r>=i.toExpPos)):(Du(e,1,zp),t===void 0?t=i.rounding:Du(t,0,8),s=Ga(new i(s),e,t),r=vs(s),a=wh(s,e<=r||r<=i.toExpNeg,e)),a};$t.toSignificantDigits=$t.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Du(e,1,zp),t===void 0?t=a.rounding:Du(t,0,8)),Ga(new a(r),e,t)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=vs(e),r=e.constructor;return wh(e,t<=r.toExpNeg||t>=r.toExpPos)};function z9(e,t){var r,a,s,i,l,o,d,u,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),yn?Ga(t,m):t;if(d=e.d,u=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(a=d,i=-i,o=u.length):(a=u,s=l,o=d.length),l=Math.ceil(m/nn),o=l>o?l+1:o+1,i>o&&(i=o,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(o=d.length,i=u.length,o-i<0&&(i=o,a=u,u=d,d=a),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/Ks|0,d[i]%=Ks;for(r&&(d.unshift(r),++s),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=s,yn?Ga(t,m):t}function Du(e,t,r){if(e!==~~e||e<t||e>r)throw Error(nh+e)}function _u(e){var t,r,a,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)a=e[t]+"",r=nn-a.length,r&&(i+=Lf(r)),i+=a;l=e[t],a=l+"",r=nn-a.length,r&&(i+=Lf(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Cd=(function(){function e(a,s){var i,l=0,o=a.length;for(a=a.slice();o--;)i=a[o]*s+l,a[o]=i%Ks|0,l=i/Ks|0;return l&&a.unshift(l),a}function t(a,s,i,l){var o,d;if(i!=l)d=i>l?1:-1;else for(o=d=0;o<i;o++)if(a[o]!=s[o]){d=a[o]>s[o]?1:-1;break}return d}function r(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*Ks+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var o,d,u,f,m,g,x,b,v,y,j,S,N,C,T,P,D,M,F=a.constructor,H=a.s==s.s?1:-1,L=a.d,z=s.d;if(!a.s)return new F(a);if(!s.s)throw Error(ec+"Division by zero");for(d=a.e-s.e,D=z.length,T=L.length,x=new F(H),b=x.d=[],u=0;z[u]==(L[u]||0);)++u;if(z[u]>(L[u]||0)&&--d,i==null?S=i=F.precision:l?S=i+(vs(a)-vs(s))+1:S=i,S<0)return new F(0);if(S=S/nn+2|0,u=0,D==1)for(f=0,z=z[0],S++;(u<T||f)&&S--;u++)N=f*Ks+(L[u]||0),b[u]=N/z|0,f=N%z|0;else{for(f=Ks/(z[0]+1)|0,f>1&&(z=e(z,f),L=e(L,f),D=z.length,T=L.length),C=D,v=L.slice(0,D),y=v.length;y<D;)v[y++]=0;M=z.slice(),M.unshift(0),P=z[0],z[1]>=Ks/2&&++P;do f=0,o=t(z,v,D,y),o<0?(j=v[0],D!=y&&(j=j*Ks+(v[1]||0)),f=j/P|0,f>1?(f>=Ks&&(f=Ks-1),m=e(z,f),g=m.length,y=v.length,o=t(m,v,g,y),o==1&&(f--,r(m,D<g?M:z,g))):(f==0&&(o=f=1),m=z.slice()),g=m.length,g<y&&m.unshift(0),r(v,m,y),o==-1&&(y=v.length,o=t(z,v,D,y),o<1&&(f++,r(v,D<y?M:z,y))),y=v.length):o===0&&(f++,v=[0]),b[u++]=f,o&&v[0]?v[y++]=L[C]||0:(v=[L[C]],y=1);while((C++<T||v[0]!==void 0)&&S--)}return b[0]||b.shift(),x.e=d,Ga(x,l?i+vs(x)+1:i)}})();function U9(e,t){var r,a,s,i,l,o,d=0,u=0,f=e.constructor,m=f.precision;if(vs(e)>16)throw Error(fS+vs(e));if(!e.s)return new f(lo);for(yn=!1,o=m,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),u+=5;for(a=Math.log(U0(2,u))/Math.LN10*2+5|0,o+=a,r=s=i=new f(lo),f.precision=o;;){if(s=Ga(s.times(e),o),r=r.times(++d),l=i.plus(Cd(s,r,o)),_u(l.d).slice(0,o)===_u(i.d).slice(0,o)){for(;u--;)i=Ga(i.times(i),o);return f.precision=m,t==null?(yn=!0,Ga(i,m)):i}i=l}}function vs(e){for(var t=e.e*nn,r=e.d[0];r>=10;r/=10)t++;return t}function zj(e,t,r){if(t>e.LN10.sd())throw yn=!0,r&&(e.precision=r),Error(ec+"LN10 precision limit exceeded");return Ga(new e(e.LN10),t)}function Lf(e){for(var t="";e--;)t+="0";return t}function qg(e,t){var r,a,s,i,l,o,d,u,f,m=1,g=10,x=e,b=x.d,v=x.constructor,y=v.precision;if(x.s<1)throw Error(ec+(x.s?"NaN":"-Infinity"));if(x.eq(lo))return new v(0);if(t==null?(yn=!1,u=y):u=t,x.eq(10))return t==null&&(yn=!0),zj(v,u);if(u+=g,v.precision=u,r=_u(b),a=r.charAt(0),i=vs(x),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)x=x.times(e),r=_u(x.d),a=r.charAt(0),m++;i=vs(x),a>1?(x=new v("0."+r),i++):x=new v(a+"."+r.slice(1))}else return d=zj(v,u+2,y).times(i+""),x=qg(new v(a+"."+r.slice(1)),u-g).plus(d),v.precision=y,t==null?(yn=!0,Ga(x,y)):x;for(o=l=x=Cd(x.minus(lo),x.plus(lo),u),f=Ga(x.times(x),u),s=3;;){if(l=Ga(l.times(f),u),d=o.plus(Cd(l,new v(s),u)),_u(d.d).slice(0,u)===_u(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(zj(v,u+2,y).times(i+""))),o=Cd(o,new v(m),u),v.precision=y,t==null?(yn=!0,Ga(o,y)):o;o=d,s+=2}}function b7(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=Up(r/nn),e.d=[],a=(r+1)%nn,r<0&&(a+=nn),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=nn;a<s;)e.d.push(+t.slice(a,a+=nn));t=t.slice(a),a=nn-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),yn&&(e.e>pb||e.e<-pb))throw Error(fS+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ga(e,t,r){var a,s,i,l,o,d,u,f,m=e.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(a=t-l,a<0)a+=nn,s=t,u=m[f=0];else{if(f=Math.ceil((a+1)/nn),i=m.length,f>=i)return e;for(u=i=m[f],l=1;i>=10;i/=10)l++;a%=nn,s=a-nn+l}if(r!==void 0&&(i=U0(10,l-s-1),o=u/i%10|0,d=t<0||m[f+1]!==void 0||u%i,d=r<4?(o||d)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||d||r==6&&(a>0?s>0?u/U0(10,l-s):0:m[f-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(i=vs(e),m.length=1,t=t-i-1,m[0]=U0(10,(nn-t%nn)%nn),e.e=Up(-t/nn)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=f,i=1,f--):(m.length=f+1,i=U0(10,nn-a),m[f]=s>0?(u/U0(10,l-s)%U0(10,s)|0)*i:0),d)for(;;)if(f==0){(m[0]+=i)==Ks&&(m[0]=1,++e.e);break}else{if(m[f]+=i,m[f]!=Ks)break;m[f--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(yn&&(e.e>pb||e.e<-pb))throw Error(fS+vs(e));return e}function q9(e,t){var r,a,s,i,l,o,d,u,f,m,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),yn?Ga(t,x):t;if(d=e.d,m=t.d,a=t.e,u=e.e,d=d.slice(),l=u-a,l){for(f=l<0,f?(r=d,l=-l,o=m.length):(r=m,a=u,o=d.length),s=Math.max(Math.ceil(x/nn),o)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,o=m.length,f=s<o,f&&(o=s),s=0;s<o;s++)if(d[s]!=m[s]){f=d[s]<m[s];break}l=0}for(f&&(r=d,d=m,m=r,t.s=-t.s),o=d.length,s=m.length-o;s>0;--s)d[o++]=0;for(s=m.length;s>l;){if(d[--s]<m[s]){for(i=s;i&&d[--i]===0;)d[i]=Ks-1;--d[i],d[s]+=Ks}d[s]-=m[s]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(t.d=d,t.e=a,yn?Ga(t,x):t):new g(0)}function wh(e,t,r){var a,s=vs(e),i=_u(e.d),l=i.length;return t?(r&&(a=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Lf(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Lf(-s-1)+i,r&&(a=r-l)>0&&(i+=Lf(a))):s>=l?(i+=Lf(s+1-l),r&&(a=r-s-1)>0&&(i=i+"."+Lf(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-l)>0&&(s+1===l&&(i+="."),i+=Lf(a))),e.s<0?"-"+i:i}function w7(e,t){if(e.length>t)return e.length=t,!0}function $9(e){var t,r,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(nh+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return b7(l,i.toString())}else if(typeof i!="string")throw Error(nh+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,jpe.test(i))b7(l,i);else throw Error(nh+i)}if(s.prototype=$t,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=$9,s.config=s.set=Npe,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function Npe(e){if(!e||typeof e!="object")throw Error(ec+"Object expected");var t,r,a,s=["precision",1,zp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(Up(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(nh+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(nh+r+": "+a);return this}var hS=$9(wpe);lo=new hS(1);const Ta=hS;var _pe=e=>e,H9={},V9=e=>e===H9,j7=e=>function t(){return arguments.length===0||arguments.length===1&&V9(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},W9=(e,t)=>e===1?t:j7(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.filter(l=>l!==H9).length;return i>=e?t(...a):W9(e-i,j7(function(){for(var l=arguments.length,o=new Array(l),d=0;d<l;d++)o[d]=arguments[d];var u=a.map(f=>V9(f)?o.shift():f);return t(...u,...o)}))}),N2=e=>W9(e.length,e),E_=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},Spe=N2((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),kpe=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return _pe;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((o,d)=>d(o),i(...arguments))}},T_=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),K9=e=>{var t=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return t&&s.every((l,o)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[o])})||(t=s,r=e(...s)),r}};function G9(e){var t;return e===0?t=1:t=Math.floor(new Ta(e).abs().log(10).toNumber())+1,t}function Y9(e,t,r){for(var a=new Ta(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}N2((e,t,r)=>{var a=+e,s=+t;return a+r*(s-a)});N2((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});N2((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var X9=e=>{var[t,r]=e,[a,s]=[t,r];return t>r&&([a,s]=[r,t]),[a,s]},Q9=(e,t,r)=>{if(e.lte(0))return new Ta(0);var a=G9(e.toNumber()),s=new Ta(10).pow(a),i=e.div(s),l=a!==1?.05:.1,o=new Ta(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=o.mul(s);return t?new Ta(d.toNumber()):new Ta(Math.ceil(d.toNumber()))},Ape=(e,t,r)=>{var a=new Ta(1),s=new Ta(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new Ta(10).pow(G9(e)-1),s=new Ta(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Ta(Math.floor(e)))}else e===0?s=new Ta(Math.floor((t-1)/2)):r||(s=new Ta(Math.floor(e)));var l=Math.floor((t-1)/2),o=kpe(Spe(d=>s.add(new Ta(d-l).mul(a)).toNumber()),E_);return o(0,t)},Z9=function(t,r,a,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new Ta(0),tickMin:new Ta(0),tickMax:new Ta(0)};var l=Q9(new Ta(r).sub(t).div(a-1),s,i),o;t<=0&&r>=0?o=new Ta(0):(o=new Ta(t).add(r).div(2),o=o.sub(new Ta(o).mod(l)));var d=Math.ceil(o.sub(t).div(l).toNumber()),u=Math.ceil(new Ta(r).sub(o).div(l).toNumber()),f=d+u+1;return f>a?Z9(t,r,a,s,i+1):(f<a&&(u=r>0?u+(a-f):u,d=r>0?d:d+(a-f)),{step:l,tickMin:o.sub(new Ta(d).mul(l)),tickMax:o.add(new Ta(u).mul(l))})};function Cpe(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,o]=X9([t,r]);if(l===-1/0||o===1/0){var d=o===1/0?[l,...E_(0,a-1).map(()=>1/0)]:[...E_(0,a-1).map(()=>-1/0),o];return t>r?T_(d):d}if(l===o)return Ape(l,a,s);var{step:u,tickMin:f,tickMax:m}=Z9(l,o,i,s,0),g=Y9(f,m.add(new Ta(.1).mul(u)),u);return t>r?T_(g):g}function Epe(e,t){var[r,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=X9([r,a]);if(i===-1/0||l===1/0)return[r,a];if(i===l)return[i];var o=Math.max(t,2),d=Q9(new Ta(l).sub(i).div(o-1),s,0),u=[...Y9(new Ta(i),new Ta(l),d),l];return s===!1&&(u=u.map(f=>Math.round(f))),r>a?T_(u):u}var Tpe=K9(Cpe),Dpe=K9(Epe),J9=e=>e.rootProps.maxBarSize,Ope=e=>e.rootProps.barGap,eI=e=>e.rootProps.barCategoryGap,Fpe=e=>e.rootProps.barSize,yv=e=>e.rootProps.stackOffset,mS=e=>e.options.chartName,pS=e=>e.rootProps.syncId,tI=e=>e.rootProps.syncMethod,xS=e=>e.options.eventEmitter,pd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},to={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},_2=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Ppe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:pd.angleAxisId,includeHidden:!1,name:void 0,reversed:pd.reversed,scale:pd.scale,tick:pd.tick,tickCount:void 0,ticks:void 0,type:pd.type,unit:void 0},Mpe={allowDataOverflow:to.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:to.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:to.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:to.scale,tick:to.tick,tickCount:to.tickCount,ticks:void 0,type:to.type,unit:void 0},Lpe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:pd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:pd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:pd.scale,tick:pd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Rpe={allowDataOverflow:to.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:to.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:to.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:to.scale,tick:to.tick,tickCount:to.tickCount,ticks:void 0,type:"category",unit:void 0},gS=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Lpe:Ppe,vS=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Rpe:Mpe,S2=e=>e.polarOptions,yS=Xe([$d,Hd,Ms],PR),rI=Xe([S2,yS],(e,t)=>{if(e!=null)return Mi(e.innerRadius,t,0)}),aI=Xe([S2,yS],(e,t)=>{if(e!=null)return Mi(e.outerRadius,t,t*.8)}),Ipe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},nI=Xe([S2],Ipe);Xe([gS,nI],_2);var sI=Xe([yS,rI,aI],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Xe([vS,sI],_2);var iI=Xe([sa,S2,rI,aI,$d,Hd],(e,t,r,a,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:l,cy:o,startAngle:d,endAngle:u}=t;return{cx:Mi(l,s,s/2),cy:Mi(o,i,i/2),innerRadius:r,outerRadius:a,startAngle:d,endAngle:u,clockWise:!1}}}),_n=(e,t)=>t,bv=(e,t,r)=>r;function bS(e){return e?.id}var Rs=e=>{var t=sa(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},qp=e=>e.tooltip.settings.axisId,Is=e=>{var t=Rs(e),r=qp(e);return wv(e,t,r)},lI=Xe([Is],e=>e?.dataKey);function oI(e,t,r){var{chartData:a=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(o=>{var d,u=(d=o.data)!==null&&d!==void 0?d:a;if(!(u==null||u.length===0)){var f=bS(o);u.forEach((m,g)=>{var x=i==null||s?g:String(Za(m,i,null)),b=Za(m,o.dataKey,0),v;l.has(x)?v=l.get(x):v={},Object.assign(v,{[f]:b}),l.set(x,v)})}}),Array.from(l.values())}function k2(e){return e.stackId!=null&&e.dataKey!=null}var A2=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function C2(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function N7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N7(Object(r),!0).forEach(function(a){Bpe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Bpe(e,t,r){return(t=zpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zpe(e){var t=Upe(e,"string");return typeof t=="symbol"?t:t+""}function Upe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D_=[0,"auto"],Jl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},cI=(e,t)=>e.cartesianAxis.xAxis[t],Wd=(e,t)=>{var r=cI(e,t);return r??Jl},eo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:D_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:fv},uI=(e,t)=>e.cartesianAxis.yAxis[t],Kd=(e,t)=>{var r=uI(e,t);return r??eo},qpe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},wS=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??qpe},Pn=(e,t,r)=>{switch(t){case"xAxis":return Wd(e,r);case"yAxis":return Kd(e,r);case"zAxis":return wS(e,r);case"angleAxis":return gS(e,r);case"radiusAxis":return vS(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},$pe=(e,t,r)=>{switch(t){case"xAxis":return Wd(e,r);case"yAxis":return Kd(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},wv=(e,t,r)=>{switch(t){case"xAxis":return Wd(e,r);case"yAxis":return Kd(e,r);case"angleAxis":return gS(e,r);case"radiusAxis":return vS(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dI=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function jS(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var E2=e=>e.graphicalItems.cartesianItems,Hpe=Xe([_n,bv],jS),NS=(e,t,r)=>e.filter(r).filter(a=>t?.includeHidden===!0?!0:!a.hide),jv=Xe([E2,Pn,Hpe],NS,{memoizeOptions:{resultEqualityCheck:C2}}),fI=Xe([jv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(k2)),hI=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Vpe=Xe([jv],hI),_S=e=>e.map(t=>t.data).filter(Boolean).flat(1),Wpe=Xe([jv],_S,{memoizeOptions:{resultEqualityCheck:C2}}),SS=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:r.slice(a,s+1)},kS=Xe([Wpe,j2],SS),AS=(e,t,r)=>t?.dataKey!=null?e.map(a=>({value:Za(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:Za(s,a)}))):e.map(a=>({value:a})),T2=Xe([kS,Pn,jv],AS);function mI(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function my(e){if(Tu(e)||e instanceof Date){var t=Number(e);if(Ri(t))return t}}function _7(e){if(Array.isArray(e)){var t=[my(e[0]),my(e[1])];return bh(t)?t:void 0}var r=my(e);if(r!=null)return[r,r]}function $p(e){return e.map(my).filter(c0e)}function Kpe(e,t,r){return!r||typeof t!="number"||Zo(t)?[]:r.length?$p(r.flatMap(a=>{var s=Za(e,a.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!Ri(i)||!Ri(l)))return[t-i,t+l]})):[]}var Gpe=Xe([fI,j2,Is],oI),pI=(e,t,r)=>{var a={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,o]=i,d=o.map(bS);return[l,{stackedData:Ode(e,d,r),graphicalItems:o}]}))},O_=Xe([Gpe,fI,yv],pI),xI=(e,t,r,a)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(a==null&&r!=="zAxis"){var l=Rde(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Ype=Xe([Pn],e=>e.allowDataOverflow),CS=e=>{var t;if(e==null||!("domain"in e))return D_;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=$p(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:D_},ES=Xe([Pn],CS),TS=Xe([ES,Ype],I9),Xpe=Xe([O_,d0,_n,TS],xI,{memoizeOptions:{resultEqualityCheck:A2}}),D2=e=>e.errorBars,Qpe=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>mI(r,a)),gb=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),o=Math.max(...i);return[l,o]}},DS=(e,t,r,a,s)=>{var i,l;if(r.length>0&&e.forEach(o=>{r.forEach(d=>{var u,f,m=(u=a[d.id])===null||u===void 0?void 0:u.filter(j=>mI(s,j)),g=Za(o,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=Kpe(o,g,m);if(x.length>=2){var b=Math.min(...x),v=Math.max(...x);(i==null||b<i)&&(i=b),(l==null||v>l)&&(l=v)}var y=_7(g);y!=null&&(i=i==null?y[0]:Math.min(i,y[0]),l=l==null?y[1]:Math.max(l,y[1]))})}),t?.dataKey!=null&&e.forEach(o=>{var d=_7(Za(o,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),Ri(i)&&Ri(l))return[i,l]},Zpe=Xe([kS,Pn,Vpe,D2,_n],DS,{memoizeOptions:{resultEqualityCheck:A2}});function Jpe(e){var{value:t}=e;if(Tu(t)||t instanceof Date)return t}var exe=(e,t,r)=>{var a=e.map(Jpe).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&HL(a))?a9(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},gI=e=>e.referenceElements.dots,Hp=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),txe=Xe([gI,_n,bv],Hp),vI=e=>e.referenceElements.areas,rxe=Xe([vI,_n,bv],Hp),yI=e=>e.referenceElements.lines,axe=Xe([yI,_n,bv],Hp),bI=(e,t)=>{var r=$p(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nxe=Xe(txe,_n,bI),wI=(e,t)=>{var r=$p(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},sxe=Xe([rxe,_n],wI),jI=(e,t)=>{var r=$p(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ixe=Xe(axe,_n,jI),lxe=Xe(nxe,ixe,sxe,(e,t,r)=>gb(e,r,t)),OS=(e,t,r,a,s,i,l,o)=>{if(r!=null)return r;var d=l==="vertical"&&o==="xAxis"||l==="horizontal"&&o==="yAxis",u=d?gb(a,i,s):gb(i,s);return bpe(t,u,e.allowDataOverflow)},oxe=Xe([Pn,ES,TS,Xpe,Zpe,lxe,sa,_n],OS,{memoizeOptions:{resultEqualityCheck:A2}}),cxe=[0,1],FS=(e,t,r,a,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:o,type:d}=e,u=l0(t,i);return u&&o==null?a9(0,r.length):d==="category"?exe(a,e,u):s==="expand"?cxe:l}},PS=Xe([Pn,sa,kS,T2,yv,_n,oxe],FS),NI=(e,t,r,a,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(ov(i));return o in Yx?o:"point"}}},Vp=Xe([Pn,sa,dI,mS,_n],NI);function uxe(e){if(e!=null){if(e in Yx)return Yx[e]();var t="scale".concat(ov(e));if(t in Yx)return Yx[t]()}}function MS(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var s=uxe(t);if(s!=null){var i=s.domain(r).range(a);return Ade(i),i}}}var LS=(e,t,r)=>{var a=CS(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&bh(e))return Tpe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&bh(e))return Dpe(e,t.tickCount,t.allowDecimals)}},RS=Xe([PS,wv,Vp],LS),IS=(e,t,r,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&bh(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],o=r[r.length-1];return[Math.min(s,i),Math.max(l,o)]}return t},dxe=Xe([Pn,PS,RS,_n],IS),fxe=Xe(T2,Pn,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from($p(e.map(o=>o.value))).sort((o,d)=>o-d);if(a.length<2)return 1/0;var s=a[a.length-1]-a[0];if(s===0)return 1/0;for(var i=0;i<a.length-1;i++){var l=a[i+1]-a[i];r=Math.min(r,l)}return r/s}}),_I=Xe(fxe,sa,eI,Ms,(e,t,r,a)=>a,(e,t,r,a,s)=>{if(!Ri(e))return 0;var i=t==="vertical"?a.height:a.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=Mi(r,e*i),o=e*i/2;return o-l-(o-l)/i*l}return 0}),hxe=(e,t)=>{var r=Wd(e,t);return r==null||typeof r.padding!="string"?0:_I(e,"xAxis",t,r.padding)},mxe=(e,t)=>{var r=Kd(e,t);return r==null||typeof r.padding!="string"?0:_I(e,"yAxis",t,r.padding)},pxe=Xe(Wd,hxe,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),xxe=Xe(Kd,mxe,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),gxe=Xe([Ms,pxe,f2,d2,(e,t,r)=>r],(e,t,r,a,s)=>{var{padding:i}=a;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),vxe=Xe([Ms,sa,xxe,f2,d2,(e,t,r)=>r],(e,t,r,a,s,i)=>{var{padding:l}=s;return i?[a.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Nv=(e,t,r,a)=>{var s;switch(t){case"xAxis":return gxe(e,r,a);case"yAxis":return vxe(e,r,a);case"zAxis":return(s=wS(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return nI(e);case"radiusAxis":return sI(e,r);default:return}},SI=Xe([Pn,Nv],_2),Wp=Xe([Pn,Vp,dxe,SI],MS);Xe([jv,D2,_n],Qpe);function kI(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var O2=(e,t)=>t,F2=(e,t,r)=>r,yxe=Xe(c2,O2,F2,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(kI)),bxe=Xe(u2,O2,F2,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(kI)),AI=(e,t)=>({width:e.width,height:t.height}),wxe=(e,t)=>{var r=typeof t.width=="number"?t.width:fv;return{width:r,height:e.height}},CI=Xe(Ms,Wd,AI),jxe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Nxe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},_xe=Xe(Hd,Ms,yxe,O2,F2,(e,t,r,a,s)=>{var i={},l;return r.forEach(o=>{var d=AI(t,o);l==null&&(l=jxe(t,a,e));var u=a==="top"&&!s||a==="bottom"&&s;i[o.id]=l-Number(u)*d.height,l+=(u?-1:1)*d.height}),i}),Sxe=Xe($d,Ms,bxe,O2,F2,(e,t,r,a,s)=>{var i={},l;return r.forEach(o=>{var d=wxe(t,o);l==null&&(l=Nxe(t,a,e));var u=a==="left"&&!s||a==="right"&&s;i[o.id]=l-Number(u)*d.width,l+=(u?-1:1)*d.width}),i}),kxe=(e,t)=>{var r=Wd(e,t);if(r!=null)return _xe(e,r.orientation,r.mirror)},Axe=Xe([Ms,Wd,kxe,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var s=r?.[a];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),Cxe=(e,t)=>{var r=Kd(e,t);if(r!=null)return Sxe(e,r.orientation,r.mirror)},Exe=Xe([Ms,Kd,Cxe,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var s=r?.[a];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),EI=Xe(Ms,Kd,(e,t)=>{var r=typeof t.width=="number"?t.width:fv;return{width:r,height:e.height}}),S7=(e,t,r)=>{switch(t){case"xAxis":return CI(e,r).width;case"yAxis":return EI(e,r).height;default:return}},TI=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,o=l0(e,a),d=t.map(u=>u.value);if(l&&o&&i==="category"&&s&&HL(d))return d}},BS=Xe([sa,T2,Pn,_n],TI),DI=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=l0(e,a);if(l&&(s==="number"||i!=="auto"))return t.map(o=>o.value)}},zS=Xe([sa,T2,wv,_n],DI),k7=Xe([sa,$pe,Vp,Wp,BS,zS,Nv,RS,_n],(e,t,r,a,s,i,l,o,d)=>{if(t==null)return null;var u=l0(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:o,range:l,realScaleType:r,scale:a}}),Txe=(e,t,r,a,s,i,l,o,d)=>{if(!(t==null||a==null)){var u=l0(e,d),{type:f,ticks:m,tickCount:g}=t,x=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,b=f==="category"&&a.bandwidth?a.bandwidth()/x:0;b=d==="angleAxis"&&i!=null&&i.length>=2?Qs(i[0]-i[1])*2*b:b;var v=m||s;if(v){var y=v.map((j,S)=>{var N=l?l.indexOf(j):j;return{index:S,coordinate:a(N)+b,value:j,offset:b}});return y.filter(j=>!Zo(j.coordinate))}return u&&o?o.map((j,S)=>({coordinate:a(j)+b,value:j,index:S,offset:b})):a.ticks?a.ticks(g).map(j=>({coordinate:a(j)+b,value:j,offset:b})):a.domain().map((j,S)=>({coordinate:a(j)+b,value:l?l[j]:j,index:S,offset:b}))}},OI=Xe([sa,wv,Vp,Wp,RS,Nv,BS,zS,_n],Txe),Dxe=(e,t,r,a,s,i,l)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var o=l0(e,l),{tickCount:d}=t,u=0;return u=l==="angleAxis"&&a?.length>=2?Qs(a[0]-a[1])*2*u:u,o&&i?i.map((f,m)=>({coordinate:r(f)+u,value:f,index:m,offset:u})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+u,value:f,offset:u})):r.domain().map((f,m)=>({coordinate:r(f)+u,value:s?s[f]:f,index:m,offset:u}))}},Yf=Xe([sa,wv,Wp,Nv,BS,zS,_n],Dxe),Xf=Xe(Pn,Wp,(e,t)=>{if(!(e==null||t==null))return xb(xb({},e),{},{scale:t})}),Oxe=Xe([Pn,Vp,PS,SI],MS);Xe((e,t,r)=>wS(e,r),Oxe,(e,t)=>{if(!(e==null||t==null))return xb(xb({},e),{},{scale:t})});var Fxe=Xe([sa,c2,u2],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),FI=e=>e.options.defaultTooltipEventType,PI=e=>e.options.validateTooltipEventTypes;function MI(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function US(e,t){var r=FI(e),a=PI(e);return MI(t,r,a)}function Pxe(e){return Gt(t=>US(t,e))}var LI=(e,t)=>{var r,a=Number(t);if(!(Zo(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},Mxe=e=>e.tooltip.settings,If={active:!1,index:null,dataKey:void 0,coordinate:void 0},Lxe={itemInteraction:{click:If,hover:If},axisInteraction:{click:If,hover:If},keyboardInteraction:If,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},RI=go({name:"tooltip",initialState:Lxe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:el()},removeTooltipEntrySettings:{reducer(e,t){var r=Ad(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:el()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Rxe,removeTooltipEntrySettings:Ixe,setTooltipSettingsState:Bxe,setActiveMouseOverItemIndex:II,mouseLeaveItem:zxe,mouseLeaveChart:BI,setActiveClickItemIndex:Uxe,setMouseOverAxisIndex:zI,setMouseClickAxisIndex:qxe,setSyncInteraction:F_,setKeyboardInteraction:P_}=RI.actions,$xe=RI.reducer;function A7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Q1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A7(Object(r),!0).forEach(function(a){Hxe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hxe(e,t,r){return(t=Vxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vxe(e){var t=Wxe(e,"string");return typeof t=="symbol"?t:t+""}function Wxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kxe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Gxe(e){return e.index!=null}var UI=(e,t,r,a)=>{if(t==null)return If;var s=Kxe(e,t,r);if(s==null)return If;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Gxe(s)){if(i)return Q1(Q1({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return Q1(Q1({},If),{},{coordinate:s.coordinate})},qS=(e,t)=>{var r=e?.index;if(r==null)return null;var a=Number(r);if(!Ri(a))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(a,i)))},qI=(e,t,r,a,s,i,l,o)=>{if(!(i==null||o==null)){var d=l[0],u=d==null?void 0:o(d.positions,i);if(u!=null)return u;var f=s?.[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:f.coordinate}}}},$I=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},_v=e=>e.options.tooltipPayloadSearcher,Kp=e=>e.tooltip;function C7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function E7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C7(Object(r),!0).forEach(function(a){Yxe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yxe(e,t,r){return(t=Xxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xxe(e){var t=Qxe(e,"string");return typeof t=="symbol"?t:t+""}function Qxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zxe(e,t){return e??t}var HI=(e,t,r,a,s,i,l)=>{if(!(t==null||i==null)){var{chartData:o,computedData:d,dataStartIndex:u,dataEndIndex:f}=r,m=[];return e.reduce((g,x)=>{var b,{dataDefinedOnItem:v,settings:y}=x,j=Zxe(v,o),S=Array.isArray(j)?MR(j,u,f):j,N=(b=y?.dataKey)!==null&&b!==void 0?b:a,C=y?.nameKey,T;if(a&&Array.isArray(S)&&!Array.isArray(S[0])&&l==="axis"?T=VL(S,a,s):T=i(S,t,d,C),Array.isArray(T))T.forEach(D=>{var M=E7(E7({},y),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});g.push(nT({tooltipEntrySettings:M,dataKey:D.dataKey,payload:D.payload,value:Za(D.payload,D.dataKey),name:D.name}))});else{var P;g.push(nT({tooltipEntrySettings:y,dataKey:N,payload:T,value:Za(T,N),name:(P=Za(T,C))!==null&&P!==void 0?P:y?.name}))}return g},m)}},$S=Xe([Is,sa,dI,mS,Rs],NI),Jxe=Xe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),ege=Xe([Rs,qp],jS),Sv=Xe([Jxe,Is,ege],NS,{memoizeOptions:{resultEqualityCheck:C2}}),tge=Xe([Sv],e=>e.filter(k2)),rge=Xe([Sv],_S,{memoizeOptions:{resultEqualityCheck:C2}}),Gp=Xe([rge,d0],SS),age=Xe([tge,d0,Is],oI),HS=Xe([Gp,Is,Sv],AS),VI=Xe([Is],CS),nge=Xe([Is],e=>e.allowDataOverflow),WI=Xe([VI,nge],I9),sge=Xe([Sv],e=>e.filter(k2)),ige=Xe([age,sge,yv],pI),lge=Xe([ige,d0,Rs,WI],xI),oge=Xe([Sv],hI),cge=Xe([Gp,Is,oge,D2,Rs],DS,{memoizeOptions:{resultEqualityCheck:A2}}),uge=Xe([gI,Rs,qp],Hp),dge=Xe([uge,Rs],bI),fge=Xe([vI,Rs,qp],Hp),hge=Xe([fge,Rs],wI),mge=Xe([yI,Rs,qp],Hp),pge=Xe([mge,Rs],jI),xge=Xe([dge,pge,hge],gb),gge=Xe([Is,VI,WI,lge,cge,xge,sa,Rs],OS),KI=Xe([Is,sa,Gp,HS,yv,Rs,gge],FS),vge=Xe([KI,Is,$S],LS),yge=Xe([Is,KI,vge,Rs],IS),GI=e=>{var t=Rs(e),r=qp(e),a=!1;return Nv(e,t,r,a)},YI=Xe([Is,GI],_2),XI=Xe([Is,$S,yge,YI],MS),bge=Xe([sa,HS,Is,Rs],TI),wge=Xe([sa,HS,Is,Rs],DI),jge=(e,t,r,a,s,i,l,o)=>{if(t){var{type:d}=t,u=l0(e,o);if(a){var f=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,m=d==="category"&&a.bandwidth?a.bandwidth()/f:0;return m=o==="angleAxis"&&s!=null&&s?.length>=2?Qs(s[0]-s[1])*2*m:m,u&&l?l.map((g,x)=>({coordinate:a(g)+m,value:g,index:x,offset:m})):a.domain().map((g,x)=>({coordinate:a(g)+m,value:i?i[g]:g,index:x,offset:m}))}}},Gd=Xe([sa,Is,$S,XI,GI,bge,wge,Rs],jge),VS=Xe([FI,PI,Mxe],(e,t,r)=>MI(r.shared,e,t)),QI=e=>e.tooltip.settings.trigger,WS=e=>e.tooltip.settings.defaultIndex,P2=Xe([Kp,VS,QI,WS],UI),Qf=Xe([P2,Gp],qS),ZI=Xe([Gd,Qf],LI),JI=Xe([P2],e=>{if(e)return e.dataKey}),eB=Xe([Kp,VS,QI,WS],$I),Nge=Xe([$d,Hd,sa,Ms,Gd,WS,eB,_v],qI),_ge=Xe([P2,Nge],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Sge=Xe([P2],e=>e.active),kge=Xe([eB,Qf,d0,lI,ZI,_v,VS],HI),Age=Xe([kge],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function T7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function D7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T7(Object(r),!0).forEach(function(a){Cge(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cge(e,t,r){return(t=Ege(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ege(e){var t=Tge(e,"string");return typeof t=="symbol"?t:t+""}function Tge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dge=()=>Gt(Is),Oge=()=>{var e=Dge(),t=Gt(Gd),r=Gt(XI);return Lg(D7(D7({},e),{},{scale:r}),t)},Fge=()=>Gt(mS),KS=(e,t)=>t,tB=(e,t,r)=>r,GS=(e,t,r,a)=>a,Pge=Xe(Gd,e=>a2(e,t=>t.coordinate)),YS=Xe([Kp,KS,tB,GS],UI),rB=Xe([YS,Gp],qS),Mge=(e,t,r)=>{if(t!=null){var a=Kp(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},aB=Xe([Kp,KS,tB,GS],$I),vb=Xe([$d,Hd,sa,Ms,Gd,GS,aB,_v],qI),Lge=Xe([YS,vb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),nB=Xe(Gd,rB,LI),Rge=Xe([aB,rB,d0,lI,nB,_v,KS],HI),Ige=Xe([YS],e=>({isActive:e.active,activeIndex:e.index})),Bge=(e,t,r,a,s,i,l,o)=>{if(!(!e||!t||!a||!s||!i)){var d=Ide(e.chartX,e.chartY,t,r,o);if(d){var u=zde(d,t),f=Sde(u,l,i,a,s),m=Bde(t,i,f,d);return{activeIndex:String(f),activeCoordinate:m}}}};function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M_.apply(null,arguments)}function O7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Z1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O7(Object(r),!0).forEach(function(a){zge(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zge(e,t,r){return(t=Uge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uge(e){var t=qge(e,"string");return typeof t=="symbol"?t:t+""}function qge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ge(e){var{coordinate:t,payload:r,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:o,tooltipEventType:d,chartName:u}=e,f=t,m=r,g=a;if(!o||!f||u!=="ScatterChart"&&d!=="axis")return null;var x,b;if(u==="ScatterChart")x=f,b=r0e;else if(u==="BarChart")x=a0e(l,f,s,i),b=JR;else if(l==="radial"){var{cx:v,cy:y,radius:j,startAngle:S,endAngle:N}=e9(f);x={cx:v,cy:y,startAngle:S,endAngle:N,innerRadius:j,outerRadius:j},b=r9}else x={points:z0e(l,f,s)},b=U3;var C=typeof o=="object"&&"className"in o?o.className:void 0,T=Z1(Z1(Z1(Z1({stroke:"#ccc",pointerEvents:"none"},s),x),xh(o)),{},{payload:m,payloadIndex:g,className:ma("recharts-tooltip-cursor",C)});return k.isValidElement(o)?k.cloneElement(o,T):k.createElement(b,T)}function Hge(e){var t=Oge(),r=HR(),a=m2(),s=Fge();return k.createElement($ge,M_({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:s}))}var sB=k.createContext(null),Vge=()=>k.useContext(sB),Uj={exports:{}},F7;function Wge(){return F7||(F7=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function i(d,u,f,m,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,m||d,g),b=r?r+u:u;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],x]:d._events[b].push(x):(d._events[b]=x,d._eventsCount++),d}function l(d,u){--d._eventsCount===0?d._events=new a:delete d._events[u]}function o(){this._events=new a,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)t.call(f,m)&&u.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=r?r+u:u,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,x=m.length,b=new Array(x);g<x;g++)b[g]=m[g].fn;return b},o.prototype.listenerCount=function(u){var f=r?r+u:u,m=this._events[f];return m?m.fn?1:m.length:0},o.prototype.emit=function(u,f,m,g,x,b){var v=r?r+u:u;if(!this._events[v])return!1;var y=this._events[v],j=arguments.length,S,N;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),j){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,m),!0;case 4:return y.fn.call(y.context,f,m,g),!0;case 5:return y.fn.call(y.context,f,m,g,x),!0;case 6:return y.fn.call(y.context,f,m,g,x,b),!0}for(N=1,S=new Array(j-1);N<j;N++)S[N-1]=arguments[N];y.fn.apply(y.context,S)}else{var C=y.length,T;for(N=0;N<C;N++)switch(y[N].once&&this.removeListener(u,y[N].fn,void 0,!0),j){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,f);break;case 3:y[N].fn.call(y[N].context,f,m);break;case 4:y[N].fn.call(y[N].context,f,m,g);break;default:if(!S)for(T=1,S=new Array(j-1);T<j;T++)S[T-1]=arguments[T];y[N].fn.apply(y[N].context,S)}}return!0},o.prototype.on=function(u,f,m){return i(this,u,f,m,!1)},o.prototype.once=function(u,f,m){return i(this,u,f,m,!0)},o.prototype.removeListener=function(u,f,m,g){var x=r?r+u:u;if(!this._events[x])return this;if(!f)return l(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!m||b.context===m)&&l(this,x);else{for(var v=0,y=[],j=b.length;v<j;v++)(b[v].fn!==f||g&&!b[v].once||m&&b[v].context!==m)&&y.push(b[v]);y.length?this._events[x]=y.length===1?y[0]:y:l(this,x)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&l(this,f)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(Uj)),Uj.exports}var Kge=Wge();const Gge=Id(Kge);var $g=new Gge,L_="recharts.syncEvent.tooltip",P7="recharts.syncEvent.brush";function XS(e,t){if(t){var r=Number.parseInt(t,10);if(!Zo(r))return e?.[r]}}var Yge={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iB=go({name:"options",initialState:Yge,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Xge=iB.reducer,{createEventEmitter:Qge}=iB.actions;function Zge(e){return e.tooltip.syncInteraction}var Jge={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},lB=go({name:"chartData",initialState:Jge,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:M7,setDataStartEndIndexes:eve,setComputedData:ESe}=lB.actions,tve=lB.reducer,rve=["x","y"];function L7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L7(Object(r),!0).forEach(function(a){ave(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ave(e,t,r){return(t=nve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nve(e){var t=sve(e,"string");return typeof t=="symbol"?t:t+""}function sve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ive(e,t){if(e==null)return{};var r,a,s=lve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lve(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var oB=()=>{};function ove(){var e=Gt(pS),t=Gt(xS),r=Nn(),a=Gt(tI),s=Gt(Gd),i=m2(),l=h2(),o=Gt(d=>d.rootProps.className);k.useEffect(()=>{if(e==null)return oB;var d=(u,f,m)=>{if(t!==m&&e===u){if(a==="index"){var g;if(l&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:b,y:v}=x,y=ive(x,rve),{x:j,y:S,width:N,height:C}=f.payload.sourceViewBox,T=Mm(Mm({},y),{},{x:l.x+(N?(b-j)/N:0)*l.width,y:l.y+(C?(v-S)/C:0)*l.height});r(Mm(Mm({},f),{},{payload:Mm(Mm({},f.payload),{},{coordinate:T})}))}else r(f);return}if(s!=null){var P;if(typeof a=="function"){var D={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},M=a(s,D);P=s[M]}else a==="value"&&(P=s.find(Z=>String(Z.value)===f.payload.label));var{coordinate:F}=f.payload;if(P==null||f.payload.active===!1||F==null||l==null){r(F_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:H,y:L}=F,z=Math.min(H,l.x+l.width),V=Math.min(L,l.y+l.height),G={x:i==="horizontal"?P.coordinate:z,y:i==="horizontal"?V:P.coordinate},ie=F_({active:f.payload.active,coordinate:G,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(ie)}}};return $g.on(L_,d),()=>{$g.off(L_,d)}},[o,r,t,e,a,s,i,l])}function cve(){var e=Gt(pS),t=Gt(xS),r=Nn();k.useEffect(()=>{if(e==null)return oB;var a=(s,i,l)=>{t!==l&&e===s&&r(eve(i))};return $g.on(P7,a),()=>{$g.off(P7,a)}},[r,t,e])}function uve(){var e=Nn();k.useEffect(()=>{e(Qge())},[e]),ove(),cve()}function dve(e,t,r,a,s,i){var l=Gt(x=>Mge(x,e,t)),o=Gt(xS),d=Gt(pS),u=Gt(tI),f=Gt(Zge),m=f?.active,g=h2();k.useEffect(()=>{if(!m&&d!=null&&o!=null){var x=F_({active:i,coordinate:r,dataKey:l,index:s,label:typeof a=="number"?String(a):a,sourceViewBox:g});$g.emit(L_,d,x,o)}},[m,r,l,s,a,o,d,u,i,g])}function R7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function I7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R7(Object(r),!0).forEach(function(a){fve(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fve(e,t,r){return(t=hve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hve(e){var t=mve(e,"string");return typeof t=="symbol"?t:t+""}function mve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pve(e){return e.dataKey}function xve(e,t){return k.isValidElement(e)?k.cloneElement(e,t):typeof e=="function"?k.createElement(e,t):k.createElement(Pfe,t)}var B7=[],gve={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!o0.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function py(e){var t=gi(e,gve),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:i,content:l,filterNull:o,isAnimationActive:d,offset:u,payloadUniqBy:f,position:m,reverseDirection:g,useTranslate3d:x,wrapperStyle:b,cursor:v,shared:y,trigger:j,defaultIndex:S,portal:N,axisId:C}=t,T=Nn(),P=typeof S=="number"?String(S):S;k.useEffect(()=>{T(Bxe({shared:y,trigger:j,axisId:C,active:r,defaultIndex:P}))},[T,y,j,C,r,P]);var D=h2(),M=GR(),F=Pxe(y),{activeIndex:H,isActive:L}=Gt(K=>Ige(K,F,j,P)),z=Gt(K=>Rge(K,F,j,P)),V=Gt(K=>nB(K,F,j,P)),G=Gt(K=>Lge(K,F,j,P)),ie=z,Z=Vge(),X=r??L,[he,ce]=lR([ie,X]),ke=F==="axis"?V:void 0;dve(F,j,G,ke,H,X);var se=N??Z;if(se==null)return null;var R=ie??B7;X||(R=B7),o&&R.length&&(R=rR(ie.filter(K=>K.value!=null&&(K.hide!==!0||t.includeHidden)),f,pve));var I=R.length>0,q=k.createElement(Ufe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:d,active:X,coordinate:G,hasPayload:I,offset:u,position:m,reverseDirection:g,useTranslate3d:x,viewBox:D,wrapperStyle:b,lastBoundingBox:he,innerRef:ce,hasPortalFromProps:!!N},xve(l,I7(I7({},t),{},{payload:R,label:ke,active:X,coordinate:G,accessibilityLayer:M})));return k.createElement(k.Fragment,null,BF.createPortal(q,se),X&&k.createElement(Hge,{cursor:v,tooltipEventType:F,coordinate:G,payload:ie,index:H}))}var Hf=e=>null;Hf.displayName="Cell";function vve(e,t,r){return(t=yve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yve(e){var t=bve(e,"string");return typeof t=="symbol"?t:t+""}function bve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wve{constructor(t){vve(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function z7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z7(Object(r),!0).forEach(function(a){Nve(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nve(e,t,r){return(t=_ve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ve(e){var t=Sve(e,"string");return typeof t=="symbol"?t:t+""}function Sve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kve={cacheSize:2e3,enableCache:!0},cB=jve({},kve),U7=new wve(cB.cacheSize),Ave={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},q7="recharts_measurement_span";function Cve(e,t){var r=t.fontSize||"",a=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(o)}var $7=(e,t)=>{try{var r=document.getElementById(q7);r||(r=document.createElement("span"),r.setAttribute("id",q7),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Ave,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},og=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||o0.isSsr)return{width:0,height:0};if(!cB.enableCache)return $7(t,r);var a=Cve(t,r),s=U7.get(a);if(s)return s;var i=$7(t,r);return U7.set(a,i),i},H7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,V7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Eve=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tve=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uB={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Dve=Object.keys(uB),Wm="NaN";function Ove(e,t){return e*uB[t]}class Tl{static parse(t){var r,[,a,s]=(r=Tve.exec(t))!==null&&r!==void 0?r:[];return new Tl(parseFloat(a),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Zo(t)&&(this.unit=""),r!==""&&!Eve.test(r)&&(this.num=NaN,this.unit=""),Dve.includes(r)&&(this.num=Ove(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Tl(NaN,""):new Tl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Tl(NaN,""):new Tl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Tl(NaN,""):new Tl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Tl(NaN,""):new Tl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zo(this.num)}}function dB(e){if(e.includes(Wm))return Wm;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,s,i]=(r=H7.exec(t))!==null&&r!==void 0?r:[],l=Tl.parse(a??""),o=Tl.parse(i??""),d=s==="*"?l.multiply(o):l.divide(o);if(d.isNaN())return Wm;t=t.replace(H7,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,f,m,g]=(u=V7.exec(t))!==null&&u!==void 0?u:[],x=Tl.parse(f??""),b=Tl.parse(g??""),v=m==="+"?x.add(b):x.subtract(b);if(v.isNaN())return Wm;t=t.replace(V7,v.toString())}return t}var W7=/\(([^()]*)\)/;function Fve(e){for(var t=e,r;(r=W7.exec(t))!=null;){var[,a]=r;t=t.replace(W7,dB(a))}return t}function Pve(e){var t=e.replace(/\s+/g,"");return t=Fve(t),t=dB(t),t}function Mve(e){try{return Pve(e)}catch{return Wm}}function qj(e){var t=Mve(e.slice(5,-1));return t===Wm?"":t}var Lve=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rve=["dx","dy","angle","className","breakAll"];function R_(){return R_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R_.apply(null,arguments)}function K7(e,t){if(e==null)return{};var r,a,s=Ive(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ive(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var fB=/[ \f\n\r\t\v\u2028\u2029]+/,hB=e=>{var{children:t,breakAll:r,style:a}=e;try{var s=[];wn(t)||(r?s=t.toString().split(""):s=t.toString().split(fB));var i=s.map(o=>({word:o,width:og(o,a).width})),l=r?0:og("",a).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},Bve=(e,t,r,a,s)=>{var{maxLines:i,children:l,style:o,breakAll:d}=e,u=er(i),f=l,m=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((z,V)=>{var{word:G,width:ie}=V,Z=z[z.length-1];if(Z&&(a==null||s||Z.width+ie+r<Number(a)))Z.words.push(G),Z.width+=ie+r;else{var X={words:[G],width:ie};z.push(X)}return z},[])},g=m(t),x=H=>H.reduce((L,z)=>L.width>z.width?L:z);if(!u||s)return g;var b=g.length>i||x(g).width>Number(a);if(!b)return g;for(var v="",y=H=>{var L=f.slice(0,H),z=hB({breakAll:d,style:o,children:L+v}).wordsWithComputedWidth,V=m(z),G=V.length>i||x(V).width>Number(a);return[G,V]},j=0,S=f.length-1,N=0,C;j<=S&&N<=f.length-1;){var T=Math.floor((j+S)/2),P=T-1,[D,M]=y(P),[F]=y(T);if(!D&&!F&&(j=T+1),D&&F&&(S=T-1),!D&&F){C=M;break}N++}return C||g},G7=e=>{var t=wn(e)?[]:e.toString().split(fB);return[{words:t}]},zve=e=>{var{width:t,scaleToFit:r,children:a,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!o0.isSsr){var o,d,u=hB({breakAll:i,children:a,style:s});if(u){var{wordsWithComputedWidth:f,spaceWidth:m}=u;o=f,d=m}else return G7(a);return Bve({breakAll:i,children:a,maxLines:l,style:s},o,d,t,r)}return G7(a)},Y7="#808080",M2=k.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:l=!1,textAnchor:o="start",verticalAnchor:d="end",fill:u=Y7}=e,f=K7(e,Lve),m=k.useMemo(()=>zve({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:g,dy:x,angle:b,className:v,breakAll:y}=f,j=K7(f,Rve);if(!Tu(r)||!Tu(a)||m.length===0)return null;var S=r+(er(g)?g:0),N=a+(er(x)?x:0),C;switch(d){case"start":C=qj("calc(".concat(i,")"));break;case"middle":C=qj("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:C=qj("calc(".concat(m.length-1," * -").concat(s,")"));break}var T=[];if(l){var P=m[0].width,{width:D}=f;T.push("scale(".concat(er(D)?D/P:1,")"))}return b&&T.push("rotate(".concat(b,", ").concat(S,", ").concat(N,")")),T.length&&(j.transform=T.join(" ")),k.createElement("text",R_({},ll(j),{ref:t,x:S,y:N,className:ma("recharts-text",v),textAnchor:o,fill:u.includes("url")?Y7:u}),m.map((M,F)=>{var H=M.words.join(y?"":" ");return k.createElement("tspan",{x:S,dy:F===0?C:s,key:"".concat(H,"-").concat(F)},H)}))});M2.displayName="Text";var Uve=["labelRef"];function qve(e,t){if(e==null)return{};var r,a,s=$ve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $ve(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function X7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X7(Object(r),!0).forEach(function(a){Hve(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X7(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hve(e,t,r){return(t=Vve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vve(e){var t=Wve(e,"string");return typeof t=="symbol"?t:t+""}function Wve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xd.apply(null,arguments)}var mB=k.createContext(null),Kve=e=>{var{x:t,y:r,width:a,height:s,children:i}=e,l=k.useMemo(()=>({x:t,y:r,width:a,height:s}),[t,r,a,s]);return k.createElement(mB.Provider,{value:l},i)},pB=()=>{var e=k.useContext(mB),t=h2();return e||t},Gve=k.createContext(null),Yve=()=>{var e=k.useContext(Gve),t=Gt(iI);return e||t},Xve=e=>{var{value:t,formatter:r}=e,a=wn(e.children)?t:e.children;return typeof r=="function"?r(a):a},QS=e=>e!=null&&typeof e=="function",Qve=(e,t)=>{var r=Qs(t-e),a=Math.min(Math.abs(t-e),360);return r*a},Zve=(e,t,r,a,s)=>{var{offset:i,className:l}=e,{cx:o,cy:d,innerRadius:u,outerRadius:f,startAngle:m,endAngle:g,clockWise:x}=s,b=(u+f)/2,v=Qve(m,g),y=v>=0?1:-1,j,S;switch(t){case"insideStart":j=m+y*i,S=x;break;case"insideEnd":j=g-y*i,S=!x;break;case"end":j=g+y*i,S=x;break;default:throw new Error("Unsupported position ".concat(t))}S=v<=0?S:!S;var N=xs(o,d,b,j),C=xs(o,d,b,j+(S?1:-1)*359),T="M".concat(N.x,",").concat(N.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(S?0:1,`,
    `).concat(C.x,",").concat(C.y),P=wn(e.id)?Og("recharts-radial-line-"):e.id;return k.createElement("text",xd({},a,{dominantBaseline:"central",className:ma("recharts-radial-bar-label",l)}),k.createElement("defs",null,k.createElement("path",{id:P,d:T})),k.createElement("textPath",{xlinkHref:"#".concat(P)},r))},Jve=(e,t,r)=>{var{cx:a,cy:s,innerRadius:i,outerRadius:l,startAngle:o,endAngle:d}=e,u=(o+d)/2;if(r==="outside"){var{x:f,y:m}=xs(a,s,l+t,u);return{x:f,y:m,textAnchor:f>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(i+l)/2,{x,y:b}=xs(a,s,g,u);return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},xB=e=>"cx"in e&&er(e.cx),e1e=(e,t)=>{var{parentViewBox:r,offset:a,position:s}=e,i;r!=null&&!xB(r)&&(i=r);var{x:l,y:o,width:d,height:u}=t,f=u>=0?1:-1,m=f*a,g=f>0?"end":"start",x=f>0?"start":"end",b=d>=0?1:-1,v=b*a,y=b>0?"end":"start",j=b>0?"start":"end";if(s==="top"){var S={x:l+d/2,y:o-f*a,textAnchor:"middle",verticalAnchor:g};return Zn(Zn({},S),i?{height:Math.max(o-i.y,0),width:d}:{})}if(s==="bottom"){var N={x:l+d/2,y:o+u+m,textAnchor:"middle",verticalAnchor:x};return Zn(Zn({},N),i?{height:Math.max(i.y+i.height-(o+u),0),width:d}:{})}if(s==="left"){var C={x:l-v,y:o+u/2,textAnchor:y,verticalAnchor:"middle"};return Zn(Zn({},C),i?{width:Math.max(C.x-i.x,0),height:u}:{})}if(s==="right"){var T={x:l+d+v,y:o+u/2,textAnchor:j,verticalAnchor:"middle"};return Zn(Zn({},T),i?{width:Math.max(i.x+i.width-T.x,0),height:u}:{})}var P=i?{width:d,height:u}:{};return s==="insideLeft"?Zn({x:l+v,y:o+u/2,textAnchor:j,verticalAnchor:"middle"},P):s==="insideRight"?Zn({x:l+d-v,y:o+u/2,textAnchor:y,verticalAnchor:"middle"},P):s==="insideTop"?Zn({x:l+d/2,y:o+m,textAnchor:"middle",verticalAnchor:x},P):s==="insideBottom"?Zn({x:l+d/2,y:o+u-m,textAnchor:"middle",verticalAnchor:g},P):s==="insideTopLeft"?Zn({x:l+v,y:o+m,textAnchor:j,verticalAnchor:x},P):s==="insideTopRight"?Zn({x:l+d-v,y:o+m,textAnchor:y,verticalAnchor:x},P):s==="insideBottomLeft"?Zn({x:l+v,y:o+u-m,textAnchor:j,verticalAnchor:g},P):s==="insideBottomRight"?Zn({x:l+d-v,y:o+u-m,textAnchor:y,verticalAnchor:g},P):s&&typeof s=="object"&&(er(s.x)||Od(s.x))&&(er(s.y)||Od(s.y))?Zn({x:l+Mi(s.x,d),y:o+Mi(s.y,u),textAnchor:"end",verticalAnchor:"end"},P):Zn({x:l+d/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},t1e={offset:5};function Rf(e){var t=gi(e,t1e),{viewBox:r,position:a,value:s,children:i,content:l,className:o="",textBreakAll:d,labelRef:u}=t,f=Yve(),m=pB(),g=a==="center"?m:f??m,x=r||g;if(!x||wn(s)&&wn(i)&&!k.isValidElement(l)&&typeof l!="function")return null;var b=Zn(Zn({},t),{},{viewBox:x});if(k.isValidElement(l)){var{labelRef:v}=b,y=qve(b,Uve);return k.cloneElement(l,y)}var j;if(typeof l=="function"){if(j=k.createElement(l,b),k.isValidElement(j))return j}else j=Xve(t);var S=xB(x),N=ll(t);if(S&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Zve(t,a,j,N,x);var C=S?Jve(x,t.offset,t.position):e1e(t,x);return k.createElement(M2,xd({ref:u,className:ma("recharts-label",o)},N,C,{breakAll:d}),j)}Rf.displayName="Label";var r1e=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?k.createElement(Rf,xd({key:"label-implicit"},a)):Tu(e)?k.createElement(Rf,xd({key:"label-implicit",value:e},a)):k.isValidElement(e)?e.type===Rf?k.cloneElement(e,Zn({key:"label-implicit"},a)):k.createElement(Rf,xd({key:"label-implicit",content:e},a)):QS(e)?k.createElement(Rf,xd({key:"label-implicit",content:e},a)):e&&typeof e=="object"?k.createElement(Rf,xd({},e,{key:"label-implicit"},a)):null};function a1e(e){var{label:t,labelRef:r}=e,a=pB();return r1e(t,a,r)||null}var $j={},Hj={},Q7;function n1e(){return Q7||(Q7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Hj)),Hj}var Vj={},Z7;function s1e(){return Z7||(Z7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Vj)),Vj}var J7;function i1e(){return J7||(J7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n1e(),r=s1e(),a=E3();function s(i){if(a.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})($j)),$j}var Wj,eD;function l1e(){return eD||(eD=1,Wj=i1e().last),Wj}var o1e=l1e();const c1e=Id(o1e);var u1e=["valueAccessor"],d1e=["dataKey","clockWise","id","textBreakAll"];function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},yb.apply(null,arguments)}function tD(e,t){if(e==null)return{};var r,a,s=f1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f1e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var h1e=e=>Array.isArray(e.value)?c1e(e.value):e.value,gB=k.createContext(void 0),vB=gB.Provider,yB=k.createContext(void 0),m1e=yB.Provider;function p1e(){return k.useContext(gB)}function x1e(){return k.useContext(yB)}function xy(e){var{valueAccessor:t=h1e}=e,r=tD(e,u1e),{dataKey:a,clockWise:s,id:i,textBreakAll:l}=r,o=tD(r,d1e),d=p1e(),u=x1e(),f=d||u;return!f||!f.length?null:k.createElement(xi,{className:"recharts-label-list"},f.map((m,g)=>{var x,b=wn(a)?t(m,g):Za(m&&m.payload,a),v=wn(i)?{}:{id:"".concat(i,"-").concat(g)};return k.createElement(Rf,yb({key:"label-".concat(g)},ll(m),o,v,{fill:(x=r.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:b,textBreakAll:l,viewBox:m.viewBox,index:g}))}))}xy.displayName="LabelList";function ZS(e){var{label:t}=e;return t?t===!0?k.createElement(xy,{key:"labelList-implicit"}):k.isValidElement(t)||QS(t)?k.createElement(xy,{key:"labelList-implicit",content:t}):typeof t=="object"?k.createElement(xy,yb({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function I_(){return I_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I_.apply(null,arguments)}var bB=e=>{var{cx:t,cy:r,r:a,className:s}=e,i=ma("recharts-dot",s);return t===+t&&r===+r&&a===+a?k.createElement("circle",I_({},mo(e),k3(e),{className:i,cx:t,cy:r,r:a})):null},wB=e=>e.graphicalItems.polarItems,g1e=Xe([_n,bv],jS),L2=Xe([wB,Pn,g1e],NS),v1e=Xe([L2],_S),R2=Xe([v1e,dS],SS),y1e=Xe([R2,Pn,L2],AS);Xe([R2,Pn,L2],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(s=>{var i,l=Za(a,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Za(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})));var rD=()=>{},b1e=Xe([R2,Pn,L2,D2,_n],DS),w1e=Xe([Pn,ES,TS,rD,b1e,rD,sa,_n],OS),jB=Xe([Pn,sa,R2,y1e,yv,_n,w1e],FS),j1e=Xe([jB,Pn,Vp],LS);Xe([Pn,jB,j1e,_n],IS);var N1e={radiusAxis:{},angleAxis:{}},NB=go({name:"polarAxis",initialState:N1e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:TSe,removeRadiusAxis:DSe,addAngleAxis:OSe,removeAngleAxis:FSe}=NB.actions,_1e=NB.reducer;function aD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function nD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aD(Object(r),!0).forEach(function(a){S1e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function S1e(e,t,r){return(t=k1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k1e(e){var t=A1e(e,"string");return typeof t=="symbol"?t:t+""}function A1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C1e=(e,t)=>t,JS=Xe([wB,C1e],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),E1e=[],e6=(e,t,r)=>r?.length===0?E1e:r,_B=Xe([dS,JS,e6],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var s;if(t?.data!=null&&t.data.length>0?s=t.data:s=a,(!s||!s.length)&&r!=null&&(s=r.map(i=>nD(nD({},t.presentationProps),i.props))),s!=null)return s}}),T1e=Xe([_B,JS,e6],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,s)=>{var i,l=Za(a,t.nameKey,t.name),o;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=r[s].props.fill:typeof a=="object"&&a!=null&&"fill"in a?o=a.fill:o=t.fill,{value:Ip(l,t.dataKey),color:o,payload:a,type:t.legendType}})}),D1e=Xe([_B,JS,e6,Ms],(e,t,r,a)=>{if(!(t==null||e==null))return Dye({offset:a,pieSettings:t,displayedData:e,cells:r})}),Kj={exports:{}},Ua={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD;function O1e(){if(sD)return Ua;sD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function b(v){if(typeof v=="object"&&v!==null){var y=v.$$typeof;switch(y){case e:switch(v=v.type,v){case r:case s:case a:case d:case u:case g:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case m:case f:return v;case i:return v;default:return y}}case t:return y}}}return Ua.ContextConsumer=i,Ua.ContextProvider=l,Ua.Element=e,Ua.ForwardRef=o,Ua.Fragment=r,Ua.Lazy=m,Ua.Memo=f,Ua.Portal=t,Ua.Profiler=s,Ua.StrictMode=a,Ua.Suspense=d,Ua.SuspenseList=u,Ua.isContextConsumer=function(v){return b(v)===i},Ua.isContextProvider=function(v){return b(v)===l},Ua.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},Ua.isForwardRef=function(v){return b(v)===o},Ua.isFragment=function(v){return b(v)===r},Ua.isLazy=function(v){return b(v)===m},Ua.isMemo=function(v){return b(v)===f},Ua.isPortal=function(v){return b(v)===t},Ua.isProfiler=function(v){return b(v)===s},Ua.isStrictMode=function(v){return b(v)===a},Ua.isSuspense=function(v){return b(v)===d},Ua.isSuspenseList=function(v){return b(v)===u},Ua.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===s||v===a||v===d||v===u||typeof v=="object"&&v!==null&&(v.$$typeof===m||v.$$typeof===f||v.$$typeof===l||v.$$typeof===i||v.$$typeof===o||v.$$typeof===x||v.getModuleId!==void 0)},Ua.typeOf=b,Ua}var iD;function F1e(){return iD||(iD=1,Kj.exports=O1e()),Kj.exports}var P1e=F1e(),lD=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",oD=null,Gj=null,SB=e=>{if(e===oD&&Array.isArray(Gj))return Gj;var t=[];return k.Children.forEach(e,r=>{wn(r)||(P1e.isFragment(r)?t=t.concat(SB(r.props.children)):t.push(r))}),Gj=t,oD=e,t};function t6(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(s=>lD(s)):a=[lD(t)],SB(e).forEach(s=>{var i=gh(s,"type.displayName")||gh(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}var kB=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Yj={},cD;function M1e(){return cD||(cD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${s}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t})(Yj)),Yj}var Xj,uD;function L1e(){return uD||(uD=1,Xj=M1e().isPlainObject),Xj}var R1e=L1e();const I1e=Id(R1e);function dD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dD(Object(r),!0).forEach(function(a){B1e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function B1e(e,t,r){return(t=z1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z1e(e){var t=U1e(e,"string");return typeof t=="symbol"?t:t+""}function U1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bb.apply(null,arguments)}var hD=(e,t,r,a,s)=>{var i=r-a,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-a,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},q1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$1e=e=>{var t=gi(e,q1e),{x:r,y:a,upperWidth:s,lowerWidth:i,height:l,className:o}=t,{animationEasing:d,animationDuration:u,animationBegin:f,isUpdateAnimationActive:m}=t,g=k.useRef(null),[x,b]=k.useState(-1),v=k.useRef(s),y=k.useRef(i),j=k.useRef(l),S=k.useRef(r),N=k.useRef(a),C=mv(e,"trapezoid-");if(k.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var G=g.current.getTotalLength();G&&b(G)}catch{}},[]),r!==+r||a!==+a||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var T=ma("recharts-trapezoid",o);if(!m)return k.createElement("g",null,k.createElement("path",bb({},ll(t),{className:T,d:hD(r,a,s,i,l)})));var P=v.current,D=y.current,M=j.current,F=S.current,H=N.current,L="0px ".concat(x===-1?1:x,"px"),z="".concat(x,"px 0px"),V=YR(["strokeDasharray"],u,d);return k.createElement(hv,{animationId:C,key:C,canBegin:x>0,duration:u,easing:d,isActive:m,begin:f},G=>{var ie=Hn(P,s,G),Z=Hn(D,i,G),X=Hn(M,l,G),he=Hn(F,r,G),ce=Hn(H,a,G);g.current&&(v.current=ie,y.current=Z,j.current=X,S.current=he,N.current=ce);var ke=G>0?{transition:V,strokeDasharray:z}:{strokeDasharray:L};return k.createElement("path",bb({},ll(t),{className:T,d:hD(he,ce,ie,Z,X),ref:g,style:fD(fD({},ke),t.style)}))})},H1e=["option","shapeType","propTransformer","activeClassName","isActive"];function V1e(e,t){if(e==null)return{};var r,a,s=W1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function W1e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(r),!0).forEach(function(a){K1e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function K1e(e,t,r){return(t=G1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G1e(e){var t=Y1e(e,"string");return typeof t=="symbol"?t:t+""}function Y1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X1e(e,t){return wb(wb({},t),e)}function Q1e(e,t){return e==="symbols"}function pD(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return k.createElement(JR,r);case"trapezoid":return k.createElement($1e,r);case"sector":return k.createElement(r9,r);case"symbols":if(Q1e(t))return k.createElement(S3,r);break;default:return null}}function Z1e(e){return k.isValidElement(e)?e.props:e}function AB(e){var{option:t,shapeType:r,propTransformer:a=X1e,activeClassName:s="recharts-active-shape",isActive:i}=e,l=V1e(e,H1e),o;if(k.isValidElement(t))o=k.cloneElement(t,wb(wb({},l),Z1e(t)));else if(typeof t=="function")o=t(l);else if(I1e(t)&&typeof t!="boolean"){var d=a(t,l);o=k.createElement(pD,{shapeType:r,elementProps:d})}else{var u=l;o=k.createElement(pD,{shapeType:r,elementProps:u})}return i?k.createElement(xi,{className:s},o):o}var r6=(e,t)=>{var r=Nn();return(a,s)=>i=>{e?.(a,s,i),r(II({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},a6=e=>{var t=Nn();return(r,a)=>s=>{e?.(r,a,s),t(zxe())}},n6=(e,t)=>{var r=Nn();return(a,s)=>i=>{e?.(a,s,i),r(Uxe({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function s6(e){var{fn:t,args:r}=e,a=Nn(),s=cl();return k.useLayoutEffect(()=>{if(!s){var i=t(r);return a(Rxe(i)),()=>{a(Ixe(i))}}},[t,r,a,s]),null}var CB=()=>{};function EB(e){var{legendPayload:t}=e,r=Nn(),a=cl();return k.useLayoutEffect(()=>a?CB:(r(WR(t)),()=>{r(KR(t))}),[r,a,t]),null}function J1e(e){var{legendPayload:t}=e,r=Nn(),a=Gt(sa);return k.useLayoutEffect(()=>a!=="centric"&&a!=="radial"?CB:(r(WR(t)),()=>{r(KR(t))}),[r,a,t]),null}var Qj,eye=()=>{var[e]=k.useState(()=>Og("uid-"));return e},tye=(Qj=Oq.useId)!==null&&Qj!==void 0?Qj:eye;function rye(e,t){var r=tye();return t||(e?"".concat(e,"-").concat(r):r)}var aye=k.createContext(void 0),i6=e=>{var{id:t,type:r,children:a}=e,s=rye("recharts-".concat(r),t);return k.createElement(aye.Provider,{value:s},a(s))},nye={cartesianItems:[],polarItems:[]},TB=go({name:"graphicalItems",initialState:nye,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:el()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:a}=t.payload,s=Ad(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=a)},prepare:el()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ad(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:el()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:el()},removePolarGraphicalItem:{reducer(e,t){var r=Ad(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:el()}}}),{addCartesianGraphicalItem:sye,replaceCartesianGraphicalItem:iye,removeCartesianGraphicalItem:lye,addPolarGraphicalItem:oye,removePolarGraphicalItem:cye}=TB.actions,uye=TB.reducer;function DB(e){var t=Nn(),r=k.useRef(null);return k.useLayoutEffect(()=>{r.current===null?t(sye(e)):r.current!==e&&t(iye({prev:r.current,next:e})),r.current=e},[t,e]),k.useLayoutEffect(()=>()=>{r.current&&(t(lye(r.current)),r.current=null)},[t]),null}function dye(e){var t=Nn();return k.useLayoutEffect(()=>(t(oye(e)),()=>{t(cye(e))}),[t,e]),null}var fye=["onMouseEnter","onClick","onMouseLeave"],hye=["id"],mye=["id"];function l6(e,t){if(e==null)return{};var r,a,s=pye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pye(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function xD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xD(Object(r),!0).forEach(function(a){xye(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xye(e,t,r){return(t=gye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gye(e){var t=vye(e,"string");return typeof t=="symbol"?t:t+""}function vye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zf.apply(null,arguments)}function yye(e){var t=k.useMemo(()=>t6(e.children,Hf),[e.children]),r=Gt(a=>T1e(a,e.id,t));return r==null?null:k.createElement(J1e,{legendPayload:r})}function bye(e){var{dataKey:t,nameKey:r,sectors:a,stroke:s,strokeWidth:i,fill:l,name:o,hide:d,tooltipType:u}=e;return{dataDefinedOnItem:a.map(f=>f.tooltipPayload),positions:a.map(f=>f.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:l,dataKey:t,nameKey:r,name:Ip(o,t),hide:d,type:u,color:l,unit:""}}}var wye=(e,t)=>e>t?"start":e<t?"end":"middle",jye=(e,t,r)=>Mi(typeof t=="function"?t(e):t,r,r*.8),Nye=(e,t,r)=>{var{top:a,left:s,width:i,height:l}=t,o=PR(i,l),d=s+Mi(e.cx,i,i/2),u=a+Mi(e.cy,l,l/2),f=Mi(e.innerRadius,o,0),m=jye(r,e.outerRadius,o),g=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:d,cy:u,innerRadius:f,outerRadius:m,maxRadius:g}},_ye=(e,t)=>{var r=Qs(t-e),a=Math.min(Math.abs(t-e),360);return r*a};function Sye(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var kye=(e,t)=>{if(k.isValidElement(e))return k.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ma("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return k.createElement(U3,Zf({},t,{type:"linear",className:r}))},Aye=(e,t,r)=>{if(k.isValidElement(e))return k.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),k.isValidElement(a)))return a;var s=ma("recharts-pie-label-text",Sye(e));return k.createElement(M2,Zf({},t,{alignmentBaseline:"middle",className:s}),a)};function Cye(e){var{sectors:t,props:r,showLabels:a}=e,{label:s,labelLine:i,dataKey:l}=r;if(!a||!s||!t)return null;var o=mo(r),d=xh(s),u=xh(i),f=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,m=t.map((g,x)=>{var b=(g.startAngle+g.endAngle)/2,v=xs(g.cx,g.cy,g.outerRadius+f,b),y=vn(vn(vn(vn({},o),g),{},{stroke:"none"},d),{},{index:x,textAnchor:wye(v.x,g.cx)},v),j=vn(vn(vn(vn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:x,points:[xs(g.cx,g.cy,g.outerRadius,b),v],key:"line"});return k.createElement(xi,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},i&&kye(i,j),Aye(s,y,Za(g,l)))});return k.createElement(xi,{className:"recharts-pie-labels"},m)}function Eye(e){var{sectors:t,props:r,showLabels:a}=e,{label:s}=r;return typeof s=="object"&&s!=null&&"position"in s?k.createElement(ZS,{label:s}):k.createElement(Cye,{sectors:t,props:r,showLabels:a})}function Tye(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:s}=e,i=Gt(Qf),{onMouseEnter:l,onClick:o,onMouseLeave:d}=s,u=l6(s,fye),f=r6(l,s.dataKey),m=a6(d),g=n6(o,s.dataKey);return t==null||t.length===0?null:k.createElement(k.Fragment,null,t.map((x,b)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var v=r&&String(b)===i,y=i?a:null,j=v?r:y,S=vn(vn({},x),{},{stroke:x.stroke,tabIndex:-1,[BR]:b,[zR]:s.dataKey});return k.createElement(xi,Zf({key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(b),tabIndex:-1,className:"recharts-pie-sector"},cv(u,x,b),{onMouseEnter:f(x,b),onMouseLeave:m(x,b),onClick:g(x,b)}),k.createElement(AB,Zf({option:j,isActive:v,shapeType:"sector"},S)))}))}function Dye(e){var t,{pieSettings:r,displayedData:a,cells:s,offset:i}=e,{cornerRadius:l,startAngle:o,endAngle:d,dataKey:u,nameKey:f,tooltipType:m}=r,g=Math.abs(r.minAngle),x=_ye(o,d),b=Math.abs(x),v=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,y=a.filter(P=>Za(P,u,0)!==0).length,j=(b>=360?y:y-1)*v,S=b-y*g-j,N=a.reduce((P,D)=>{var M=Za(D,u,0);return P+(er(M)?M:0)},0),C;if(N>0){var T;C=a.map((P,D)=>{var M=Za(P,u,0),F=Za(P,f,D),H=Nye(r,i,P),L=(er(M)?M:0)/N,z,V=vn(vn({},P),s&&s[D]&&s[D].props);D?z=T.endAngle+Qs(x)*v*(M!==0?1:0):z=o;var G=z+Qs(x)*((M!==0?g:0)+L*S),ie=(z+G)/2,Z=(H.innerRadius+H.outerRadius)/2,X=[{name:F,value:M,payload:V,dataKey:u,type:m}],he=xs(H.cx,H.cy,Z,ie);return T=vn(vn(vn(vn({},r.presentationProps),{},{percent:L,cornerRadius:l,name:F,tooltipPayload:X,midAngle:ie,middleRadius:Z,tooltipPosition:he},V),H),{},{value:M,startAngle:z,endAngle:G,payload:V,paddingAngle:Qs(x)*v}),T})}return C}function Oye(e){var{showLabels:t,sectors:r,children:a}=e,s=k.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return k.createElement(m1e,{value:t?s:void 0},a)}function Fye(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:o,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:m}=t,g=mv(t,"recharts-pie-"),x=r.current,[b,v]=k.useState(!1),y=k.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),j=k.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return k.createElement(Oye,{showLabels:!b,sectors:a},k.createElement(hv,{animationId:g,begin:i,duration:l,isActive:s,easing:o,onAnimationStart:j,onAnimationEnd:y,key:g},S=>{var N=[],C=a&&a[0],T=C?.startAngle;return a?.forEach((P,D)=>{var M=x&&x[D],F=D>0?gh(P,"paddingAngle",0):0;if(M){var H=Hn(M.endAngle-M.startAngle,P.endAngle-P.startAngle,S),L=vn(vn({},P),{},{startAngle:T+F,endAngle:T+H+F});N.push(L),T=L.endAngle}else{var{endAngle:z,startAngle:V}=P,G=Hn(0,z-V,S),ie=vn(vn({},P),{},{startAngle:T+F,endAngle:T+G+F});N.push(ie),T=ie.endAngle}}),r.current=N,k.createElement(xi,null,k.createElement(Tye,{sectors:N,activeShape:d,inactiveShape:u,allOtherPieProps:t}))}),k.createElement(Eye,{showLabels:!b,sectors:a,props:t}),t.children)}var Pye={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!o0.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Mye(e){var{id:t}=e,r=l6(e,hye),{hide:a,className:s,rootTabIndex:i}=e,l=k.useMemo(()=>t6(e.children,Hf),[e.children]),o=Gt(f=>D1e(f,t,l)),d=k.useRef(null),u=ma("recharts-pie",s);return a||o==null?(d.current=null,k.createElement(xi,{tabIndex:i,className:u})):k.createElement(k.Fragment,null,k.createElement(s6,{fn:bye,args:vn(vn({},e),{},{sectors:o})}),k.createElement(xi,{tabIndex:i,className:u},k.createElement(Fye,{props:vn(vn({},r),{},{sectors:o}),previousSectorsRef:d})))}function o6(e){var t=gi(e,Pye),{id:r}=t,a=l6(t,mye),s=mo(a);return k.createElement(i6,{id:r,type:"pie"},i=>k.createElement(k.Fragment,null,k.createElement(dye,{type:"pie",id:i,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),k.createElement(yye,Zf({},a,{id:i})),k.createElement(Mye,Zf({},a,{id:i}))))}o6.displayName="Pie";function gD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gD(Object(r),!0).forEach(function(a){Lye(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Lye(e,t,r){return(t=Rye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rye(e){var t=Iye(e,"string");return typeof t=="symbol"?t:t+""}function Iye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bye={xAxis:{},yAxis:{},zAxis:{}},OB=go({name:"cartesianAxis",initialState:Bye,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:el()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:el()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:el()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:el()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:el()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:el()},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&a===i[1]&&a!==s.width&&Math.abs(a-i[0])<=1)return;var l=[...i,a].slice(-3);e.yAxis[r]=vD(vD({},e.yAxis[r]),{},{width:a,widthHistory:l})}}}}),{addXAxis:zye,removeXAxis:Uye,addYAxis:qye,removeYAxis:$ye,addZAxis:PSe,removeZAxis:MSe,updateYAxisWidth:Hye}=OB.actions,Vye=OB.reducer,Wye=Xe([Ms],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Kye=Xe([Wye,$d,Hd],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),c6=()=>Gt(Kye),Gye=()=>Gt(Age);function yD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yD(Object(r),!0).forEach(function(a){Yye(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yye(e,t,r){return(t=Xye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xye(e){var t=Qye(e,"string");return typeof t=="symbol"?t:t+""}function Qye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zye=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var l=bD(bD({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},xh(s)),k3(s)),o;return k.isValidElement(s)?o=k.cloneElement(s,l):typeof s=="function"?o=s(l):o=k.createElement(bB,l),k.createElement(xi,{className:"recharts-active-dot"},o)};function Jye(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:s}=e,i=Gt(Qf),l=Gye();if(t==null||l==null)return null;var o=t.find(d=>l.includes(d.payload));return wn(o)?null:Zye({point:o,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:a})}var ebe="Invariant failed";function tbe(e,t){throw new Error(ebe)}var rbe=["x","y"];function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B_.apply(null,arguments)}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function qx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(a){abe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function abe(e,t,r){return(t=nbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nbe(e){var t=sbe(e,"string");return typeof t=="symbol"?t:t+""}function sbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ibe(e,t){if(e==null)return{};var r,a,s=lbe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lbe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function obe(e,t){var{x:r,y:a}=e,s=ibe(e,rbe),i="".concat(r),l=parseInt(i,10),o="".concat(a),d=parseInt(o,10),u="".concat(t.height||s.height),f=parseInt(u,10),m="".concat(t.width||s.width),g=parseInt(m,10);return qx(qx(qx(qx(qx({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:g,name:t.name,radius:t.radius})}function u6(e){return k.createElement(AB,B_({shapeType:"rectangle",propTransformer:obe,activeClassName:"recharts-active-bar"},e))}var cbe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,s)=>{if(er(t))return t;var i=er(a)||wn(a);return i?t(a,s):(i||tbe(),r)}},ube={},FB=go({name:"errorBars",initialState:ube,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:a,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===a.dataKey&&i.direction===a.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==a.dataKey||s.direction!==a.direction))}}}),{addErrorBar:LSe,replaceErrorBar:RSe,removeErrorBar:ISe}=FB.actions,dbe=FB.reducer,fbe=["children"];function hbe(e,t){if(e==null)return{};var r,a,s=mbe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mbe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var pbe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},xbe=k.createContext(pbe);function PB(e){var{children:t}=e,r=hbe(e,fbe);return k.createElement(xbe.Provider,{value:r},t)}function d6(e,t){var r,a,s=Gt(u=>Wd(u,e)),i=Gt(u=>Kd(u,t)),l=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Jl.allowDataOverflow,o=(a=i?.allowDataOverflow)!==null&&a!==void 0?a:eo.allowDataOverflow,d=l||o;return{needClip:d,needClipX:l,needClipY:o}}function MB(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,s=c6(),{needClipX:i,needClipY:l,needClip:o}=d6(t,r);if(!o)return null;var{x:d,y:u,width:f,height:m}=s;return k.createElement("clipPath",{id:"clipPath-".concat(a)},k.createElement("rect",{x:i?d:d-f/2,y:l?u:u-m/2,width:i?f:f*2,height:l?m:m*2}))}var gbe=["onMouseEnter","onMouseLeave","onClick"],vbe=["value","background","tooltipPosition"],ybe=["id"],bbe=["onMouseEnter","onClick","onMouseLeave"];function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jf.apply(null,arguments)}function jD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function tl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jD(Object(r),!0).forEach(function(a){wbe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wbe(e,t,r){return(t=jbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jbe(e){var t=Nbe(e,"string");return typeof t=="symbol"?t:t+""}function Nbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jb(e,t){if(e==null)return{};var r,a,s=_be(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _be(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Sbe=e=>{var{dataKey:t,name:r,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:Ip(r,t),payload:e}]};function kbe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:s,name:i,hide:l,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:Ip(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:o}}}function Abe(e){var t=Gt(Qf),{data:r,dataKey:a,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:d}=i,u=jb(i,gbe),f=r6(l,a),m=a6(o),g=n6(d,a);if(!s||r==null)return null;var x=xh(s);return k.createElement(k.Fragment,null,r.map((b,v)=>{var{value:y,background:j,tooltipPosition:S}=b,N=jb(b,vbe);if(!j)return null;var C=f(b,v),T=m(b,v),P=g(b,v),D=tl(tl(tl(tl(tl({option:s,isActive:String(v)===t},N),{},{fill:"#eee"},j),x),cv(u,b,v)),{},{onMouseEnter:C,onMouseLeave:T,onClick:P,dataKey:a,index:v,className:"recharts-bar-background-rectangle"});return k.createElement(u6,Jf({key:"background-bar-".concat(v)},D))}))}function Cbe(e){var{showLabels:t,children:r,rects:a}=e,s=a?.map(i=>{var l={x:i.x,y:i.y,width:i.width,height:i.height};return tl(tl({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return k.createElement(vB,{value:t?s:void 0},r)}function Ebe(e){var{shape:t,activeBar:r,baseProps:a,entry:s,index:i,dataKey:l}=e,o=Gt(Qf),d=Gt(JI),u=r&&String(i)===o&&(d==null||l===d),f=u?r:t;return k.createElement(u6,Jf({},a,{name:String(a.name)},s,{isActive:u,option:f,index:i,dataKey:l}))}function Tbe(e){var{shape:t,baseProps:r,entry:a,index:s,dataKey:i}=e;return k.createElement(u6,Jf({},r,{name:String(r.name)},a,{isActive:!1,option:t,index:s,dataKey:i}))}function Dbe(e){var{data:t,props:r}=e,a=mo(r),{id:s}=a,i=jb(a,ybe),{shape:l,dataKey:o,activeBar:d}=r,{onMouseEnter:u,onClick:f,onMouseLeave:m}=r,g=jb(r,bbe),x=r6(u,o),b=a6(m),v=n6(f,o);return t?k.createElement(k.Fragment,null,t.map((y,j)=>k.createElement(xi,Jf({key:"rectangle-".concat(y?.x,"-").concat(y?.y,"-").concat(y?.value,"-").concat(j),className:"recharts-bar-rectangle"},cv(g,y,j),{onMouseEnter:x(y,j),onMouseLeave:b(y,j),onClick:v(y,j)}),d?k.createElement(Ebe,{shape:l,activeBar:d,baseProps:i,entry:y,index:j,dataKey:o}):k.createElement(Tbe,{shape:l,baseProps:i,entry:y,index:j,dataKey:o})))):null}function Obe(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:d,onAnimationEnd:u,onAnimationStart:f}=t,m=r.current,g=mv(t,"recharts-bar-"),[x,b]=k.useState(!1),v=!x,y=k.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),j=k.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return k.createElement(Cbe,{showLabels:v,rects:a},k.createElement(hv,{animationId:g,begin:l,duration:o,isActive:i,easing:d,onAnimationEnd:y,onAnimationStart:j,key:g},S=>{var N=S===1?a:a?.map((C,T)=>{var P=m&&m[T];if(P)return tl(tl({},C),{},{x:Hn(P.x,C.x,S),y:Hn(P.y,C.y,S),width:Hn(P.width,C.width,S),height:Hn(P.height,C.height,S)});if(s==="horizontal"){var D=Hn(0,C.height,S);return tl(tl({},C),{},{y:C.y+C.height-D,height:D})}var M=Hn(0,C.width,S);return tl(tl({},C),{},{width:M})});return S>0&&(r.current=N??null),N==null?null:k.createElement(xi,null,k.createElement(Dbe,{props:t,data:N}))}),k.createElement(ZS,{label:t.label}),t.children)}function Fbe(e){var t=k.useRef(null);return k.createElement(Obe,{previousRectanglesRef:t,props:e})}var LB=0,Pbe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Za(e,t)}};class Mbe extends k.PureComponent{render(){var{hide:t,data:r,dataKey:a,className:s,xAxisId:i,yAxisId:l,needClip:o,background:d,id:u}=this.props;if(t||r==null)return null;var f=ma("recharts-bar",s),m=u;return k.createElement(xi,{className:f,id:u},o&&k.createElement("defs",null,k.createElement(MB,{clipPathId:m,xAxisId:i,yAxisId:l})),k.createElement(xi,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(m,")"):void 0},k.createElement(Abe,{data:r,dataKey:a,background:d,allOtherBarProps:this.props}),k.createElement(Fbe,this.props)))}}var Lbe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!o0.isSsr,legendType:"rect",minPointSize:LB,xAxisId:0,yAxisId:0};function Rbe(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:d,animationEasing:u,isAnimationActive:f}=e,{needClip:m}=d6(t,r),g=m2(),x=cl(),b=t6(e.children,Hf),v=Gt(S=>d2e(S,t,r,x,e.id,b));if(g!=="vertical"&&g!=="horizontal")return null;var y,j=v?.[0];return j==null||j.height==null||j.width==null?y=0:y=g==="vertical"?j.height/2:j.width/2,k.createElement(PB,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:Pbe,errorBarOffset:y},k.createElement(Mbe,Jf({},e,{layout:g,needClip:m,data:v,xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:d,animationEasing:u,isAnimationActive:f})))}function Ibe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:s,bandSize:i,xAxis:l,yAxis:o,xAxisTicks:d,yAxisTicks:u,stackedData:f,displayedData:m,offset:g,cells:x,parentViewBox:b}=e,v=t==="horizontal"?o:l,y=f?v.scale.domain():null,j=Pde({numericAxis:v});return m.map((S,N)=>{var C,T,P,D,M,F;f?C=Cde(f[N],y):(C=Za(S,r),Array.isArray(C)||(C=[j,C]));var H=cbe(a,LB)(C[1],N);if(t==="horizontal"){var L,[z,V]=[o.scale(C[0]),o.scale(C[1])];T=tT({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:S,index:N}),P=(L=V??z)!==null&&L!==void 0?L:void 0,D=s.size;var G=z-V;if(M=Zo(G)?0:G,F={x:T,y:g.top,width:D,height:g.height},Math.abs(H)>0&&Math.abs(M)<Math.abs(H)){var ie=Qs(M||H)*(Math.abs(H)-Math.abs(M));P-=ie,M+=ie}}else{var[Z,X]=[l.scale(C[0]),l.scale(C[1])];if(T=Z,P=tT({axis:o,ticks:u,bandSize:i,offset:s.offset,entry:S,index:N}),D=X-Z,M=s.size,F={x:g.left,y:P,width:g.width,height:M},Math.abs(H)>0&&Math.abs(D)<Math.abs(H)){var he=Qs(D||H)*(Math.abs(H)-Math.abs(D));D+=he}}if(T==null||P==null||D==null||M==null)return null;var ce=tl(tl({},S),{},{x:T,y:P,width:D,height:M,value:f?C:C[1],payload:S,background:F,tooltipPosition:{x:T+D/2,y:P+M/2},parentViewBox:b},x&&x[N]&&x[N].props);return ce}).filter(Boolean)}function Bbe(e){var t=gi(e,Lbe),r=cl();return k.createElement(i6,{id:t.id,type:"bar"},a=>k.createElement(k.Fragment,null,k.createElement(EB,{legendPayload:Sbe(t)}),k.createElement(s6,{fn:kbe,args:t}),k.createElement(DB,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Fde(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),k.createElement(Rbe,Jf({},t,{id:a}))))}var z_=k.memo(Bbe);z_.displayName="Bar";function ND(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function J1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ND(Object(r),!0).forEach(function(a){zbe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ND(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zbe(e,t,r){return(t=Ube(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ube(e){var t=qbe(e,"string");return typeof t=="symbol"?t:t+""}function qbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $be=(e,t)=>t,Hbe=(e,t,r)=>r,Vbe=(e,t,r,a)=>a,Wbe=(e,t,r,a,s)=>s,kv=Xe([E2,Wbe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Kbe=Xe([kv],e=>e?.maxBarSize),Gbe=(e,t,r,a,s,i)=>i,_D=(e,t,r)=>{var a=r??e;if(!wn(a))return Mi(a,t,0)},Ybe=Xe([sa,E2,$be,Hbe,Vbe],(e,t,r,a,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===a).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Xbe=(e,t,r,a)=>{var s=sa(e);return s==="horizontal"?O_(e,"yAxis",r,a):O_(e,"xAxis",t,a)},Qbe=(e,t,r)=>{var a=sa(e);return a==="horizontal"?S7(e,"xAxis",t):S7(e,"yAxis",r)},Zbe=(e,t,r)=>{var a={},s=e.filter(k2),i=e.filter(u=>u.stackId==null),l=s.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),a),o=Object.entries(l).map(u=>{var[f,m]=u,g=m.map(b=>b.dataKey),x=_D(t,r,m[0].barSize);return{stackId:f,dataKeys:g,barSize:x}}),d=i.map(u=>{var f=[u.dataKey].filter(g=>g!=null),m=_D(t,r,u.barSize);return{stackId:void 0,dataKeys:f,barSize:m}});return[...o,...d]},Jbe=Xe([Ybe,Fpe,Qbe],Zbe),e2e=(e,t,r,a,s)=>{var i,l,o=kv(e,t,r,a,s);if(o!=null){var d=sa(e),u=J9(e),{maxBarSize:f}=o,m=wn(f)?u:f,g,x;return d==="horizontal"?(g=Xf(e,"xAxis",t,a),x=Yf(e,"xAxis",t,a)):(g=Xf(e,"yAxis",r,a),x=Yf(e,"yAxis",r,a)),(i=(l=Lg(g,x,!0))!==null&&l!==void 0?l:m)!==null&&i!==void 0?i:0}},RB=(e,t,r,a)=>{var s=sa(e),i,l;return s==="horizontal"?(i=Xf(e,"xAxis",t,a),l=Yf(e,"xAxis",t,a)):(i=Xf(e,"yAxis",r,a),l=Yf(e,"yAxis",r,a)),Lg(i,l)};function t2e(e,t,r,a,s){var i=a.length;if(!(i<1)){var l=Mi(e,r,0,!0),o,d=[];if(Ri(a[0].barSize)){var u=!1,f=r/i,m=a.reduce((j,S)=>j+(S.barSize||0),0);m+=(i-1)*l,m>=r&&(m-=(i-1)*l,l=0),m>=r&&f>0&&(u=!0,f*=.9,m=i*f);var g=(r-m)/2>>0,x={offset:g-l,size:0};o=a.reduce((j,S)=>{var N,C={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:x.offset+x.size+l,size:u?f:(N=S.barSize)!==null&&N!==void 0?N:0}},T=[...j,C];return x=T[T.length-1].position,T},d)}else{var b=Mi(t,r,0,!0);r-2*b-(i-1)*l<=0&&(l=0);var v=(r-2*b-(i-1)*l)/i;v>1&&(v>>=0);var y=Ri(s)?Math.min(v,s):v;o=a.reduce((j,S,N)=>[...j,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:b+(v+l)*N+(v-y)/2,size:y}}],d)}return o}}var r2e=(e,t,r,a,s,i,l)=>{var o=wn(l)?t:l,d=t2e(r,a,s!==i?s:i,e,o);return s!==i&&d!=null&&(d=d.map(u=>J1(J1({},u),{},{position:J1(J1({},u.position),{},{offset:u.position.offset-s/2})}))),d},a2e=Xe([Jbe,J9,Ope,eI,e2e,RB,Kbe],r2e),n2e=(e,t,r,a)=>Xf(e,"xAxis",t,a),s2e=(e,t,r,a)=>Xf(e,"yAxis",r,a),i2e=(e,t,r,a)=>Yf(e,"xAxis",t,a),l2e=(e,t,r,a)=>Yf(e,"yAxis",r,a),o2e=Xe([a2e,kv],(e,t)=>{if(!(e==null||t==null)){var r=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),c2e=(e,t)=>{var r=bS(t);if(!(!e||r==null||t==null)){var{stackId:a}=t;if(a!=null){var s=e[a];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},u2e=Xe([Xbe,kv],c2e),d2e=Xe([Ms,L3,n2e,s2e,i2e,l2e,o2e,sa,j2,RB,u2e,kv,Gbe],(e,t,r,a,s,i,l,o,d,u,f,m,g)=>{var{chartData:x,dataStartIndex:b,dataEndIndex:v}=d;if(!(m==null||l==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||a==null||s==null||i==null||u==null)){var{data:y}=m,j;if(y!=null&&y.length>0?j=y:j=x?.slice(b,v+1),j!=null)return Ibe({layout:o,barSettings:m,pos:l,parentViewBox:t,bandSize:u,xAxis:r,yAxis:a,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:j,offset:e,cells:g})}}),IB=e=>{var{chartData:t}=e,r=Nn(),a=cl();return k.useEffect(()=>a?()=>{}:(r(M7(t)),()=>{r(M7(void 0))}),[t,r,a]),null},SD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},BB=go({name:"brush",initialState:SD,reducers:{setBrushSettings(e,t){return t.payload==null?SD:t.payload}}}),{setBrushSettings:BSe}=BB.actions,f2e=BB.reducer;function h2e(e,t,r){return(t=m2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m2e(e){var t=p2e(e,"string");return typeof t=="symbol"?t:t+""}function p2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class f6{static create(t){return new f6(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}h2e(f6,"EPS",1e-4);function x2e(e){return(e%180+180)%180}var g2e=function(t){var{width:r,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=x2e(s),l=i*Math.PI/180,o=Math.atan(a/r),d=l>o&&l<Math.PI-o?a/Math.sin(l):r/Math.cos(l);return Math.abs(d)},v2e={dots:[],areas:[],lines:[]},zB=go({name:"referenceElements",initialState:v2e,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ad(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ad(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ad(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:zSe,removeDot:USe,addArea:qSe,removeArea:$Se,addLine:HSe,removeLine:VSe}=zB.actions,y2e=zB.reducer,b2e=k.createContext(void 0),w2e=e=>{var{children:t}=e,[r]=k.useState("".concat(Og("recharts"),"-clip")),a=c6();if(a==null)return null;var{x:s,y:i,width:l,height:o}=a;return k.createElement(b2e.Provider,{value:r},k.createElement("defs",null,k.createElement("clipPath",{id:r},k.createElement("rect",{x:s,y:i,height:o,width:l}))),t)};function _p(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function UB(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function j2e(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return g2e(a,r)}function N2e(e,t,r){var a=r==="width",{x:s,y:i,width:l,height:o}=e;return t===1?{start:a?s:i,end:a?s+l:i+o}:{start:a?s+l:i+o,end:a?s:i}}function Nb(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function _2e(e,t){return UB(e,t+1)}function S2e(e,t,r,a,s){for(var i=(a||[]).slice(),{start:l,end:o}=t,d=0,u=1,f=l,m=function(){var b=a?.[d];if(b===void 0)return{v:UB(a,u)};var v=d,y,j=()=>(y===void 0&&(y=r(b,v)),y),S=b.coordinate,N=d===0||Nb(e,S,j,f,o);N||(d=0,f=l,u+=1),N&&(f=S+e*(j()/2+s),d+=u)},g;u<=i.length;)if(g=m(),g)return g.v;return[]}function kD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kD(Object(r),!0).forEach(function(a){k2e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function k2e(e,t,r){return(t=A2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A2e(e){var t=C2e(e,"string");return typeof t=="symbol"?t:t+""}function C2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E2e(e,t,r,a,s){for(var i=(a||[]).slice(),l=i.length,{start:o}=t,{end:d}=t,u=function(g){var x=i[g],b,v=()=>(b===void 0&&(b=r(x,g)),b);if(g===l-1){var y=e*(x.coordinate+e*v()/2-d);i[g]=x=Ci(Ci({},x),{},{tickCoord:y>0?x.coordinate-y*e:x.coordinate})}else i[g]=x=Ci(Ci({},x),{},{tickCoord:x.coordinate});var j=Nb(e,x.tickCoord,v,o,d);j&&(d=x.tickCoord-e*(v()/2+s),i[g]=Ci(Ci({},x),{},{isShow:!0}))},f=l-1;f>=0;f--)u(f);return i}function T2e(e,t,r,a,s,i){var l=(a||[]).slice(),o=l.length,{start:d,end:u}=t;if(i){var f=a[o-1],m=r(f,o-1),g=e*(f.coordinate+e*m/2-u);l[o-1]=f=Ci(Ci({},f),{},{tickCoord:g>0?f.coordinate-g*e:f.coordinate});var x=Nb(e,f.tickCoord,()=>m,d,u);x&&(u=f.tickCoord-e*(m/2+s),l[o-1]=Ci(Ci({},f),{},{isShow:!0}))}for(var b=i?o-1:o,v=function(S){var N=l[S],C,T=()=>(C===void 0&&(C=r(N,S)),C);if(S===0){var P=e*(N.coordinate-e*T()/2-d);l[S]=N=Ci(Ci({},N),{},{tickCoord:P<0?N.coordinate-P*e:N.coordinate})}else l[S]=N=Ci(Ci({},N),{},{tickCoord:N.coordinate});var D=Nb(e,N.tickCoord,T,d,u);D&&(d=N.tickCoord+e*(T()/2+s),l[S]=Ci(Ci({},N),{},{isShow:!0}))},y=0;y<b;y++)v(y);return l}function h6(e,t,r){var{tick:a,ticks:s,viewBox:i,minTickGap:l,orientation:o,interval:d,tickFormatter:u,unit:f,angle:m}=e;if(!s||!s.length||!a)return[];if(er(d)||o0.isSsr){var g;return(g=_2e(s,er(d)?d:0))!==null&&g!==void 0?g:[]}var x=[],b=o==="top"||o==="bottom"?"width":"height",v=f&&b==="width"?og(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=(N,C)=>{var T=typeof u=="function"?u(N.value,C):N.value;return b==="width"?j2e(og(T,{fontSize:t,letterSpacing:r}),v,m):og(T,{fontSize:t,letterSpacing:r})[b]},j=s.length>=2?Qs(s[1].coordinate-s[0].coordinate):1,S=N2e(i,j,b);return d==="equidistantPreserveStart"?S2e(j,S,y,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=T2e(j,S,y,s,l,d==="preserveStartEnd"):x=E2e(j,S,y,s,l),x.filter(N=>N.isShow))}var D2e=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var m=f.getBoundingClientRect();m.width>l&&(l=m.width)}});var o=r?r.getBoundingClientRect().width:0,d=s+i,u=l+d+o+(r?a:0);return Math.round(u)}return 0},O2e=["axisLine","width","height","className","hide","ticks"],F2e=["viewBox"],P2e=["viewBox"];function U_(e,t){if(e==null)return{};var r,a,s=M2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function M2e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function jh(){return jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jh.apply(null,arguments)}function AD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AD(Object(r),!0).forEach(function(a){L2e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function L2e(e,t,r){return(t=R2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R2e(e){var t=I2e(e,"string");return typeof t=="symbol"?t:t+""}function I2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m6={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function B2e(e){var{x:t,y:r,width:a,height:s,orientation:i,mirror:l,axisLine:o,otherSvgProps:d}=e;if(!o)return null;var u=Ts(Ts(Ts({},d),mo(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);u=Ts(Ts({},u),{},{x1:t,y1:r+f*s,x2:t+a,y2:r+f*s})}else{var m=+(i==="left"&&!l||i==="right"&&l);u=Ts(Ts({},u),{},{x1:t+m*a,y1:r,x2:t+m*a,y2:r+s})}return k.createElement("line",jh({},u,{className:ma("recharts-cartesian-axis-line",gh(o,"className"))}))}function z2e(e,t,r,a,s,i,l,o,d){var u,f,m,g,x,b,v=o?-1:1,y=e.tickSize||l,j=er(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=f=e.coordinate,g=r+ +!o*s,m=g-v*y,b=m-v*d,x=j;break;case"left":m=g=e.coordinate,f=t+ +!o*a,u=f-v*y,x=u-v*d,b=j;break;case"right":m=g=e.coordinate,f=t+ +o*a,u=f+v*y,x=u+v*d,b=j;break;default:u=f=e.coordinate,g=r+ +o*s,m=g+v*y,b=m+v*d,x=j;break}return{line:{x1:u,y1:m,x2:f,y2:g},tick:{x,y:b}}}function U2e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function q2e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function $2e(e){var{option:t,tickProps:r,value:a}=e,s,i=ma(r.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(t))s=k.cloneElement(t,Ts(Ts({},r),{},{className:i}));else if(typeof t=="function")s=t(Ts(Ts({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ma(l,t?.className)),s=k.createElement(M2,jh({},r,{className:l}),a)}return s}function H2e(e){var{ticks:t=[],tick:r,tickLine:a,stroke:s,tickFormatter:i,unit:l,padding:o,tickTextProps:d,orientation:u,mirror:f,x:m,y:g,width:x,height:b,tickSize:v,tickMargin:y,fontSize:j,letterSpacing:S,getTicksConfig:N,events:C}=e,T=h6(Ts(Ts({},N),{},{ticks:t}),j,S),P=U2e(u,f),D=q2e(u,f),M=mo(N),F=xh(r),H={};typeof a=="object"&&(H=a);var L=Ts(Ts({},M),{},{fill:"none"},H),z=T.map((V,G)=>{var{line:ie,tick:Z}=z2e(V,m,g,x,b,u,v,f,y),X=Ts(Ts(Ts(Ts({textAnchor:P,verticalAnchor:D},M),{},{stroke:"none",fill:s},F),Z),{},{index:G,payload:V,visibleTicksCount:T.length,tickFormatter:i,padding:o},d);return k.createElement(xi,jh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},cv(C,V,G)),a&&k.createElement("line",jh({},L,ie,{className:ma("recharts-cartesian-axis-tick-line",gh(a,"className"))})),r&&k.createElement($2e,{option:r,tickProps:X,value:"".concat(typeof i=="function"?i(V.value,G):V.value).concat(l||"")}))});return z.length>0?k.createElement("g",{className:"recharts-cartesian-axis-ticks"},z):null}var V2e=k.forwardRef((e,t)=>{var{axisLine:r,width:a,height:s,className:i,hide:l,ticks:o}=e,d=U_(e,O2e),[u,f]=k.useState(""),[m,g]=k.useState(""),x=k.useRef(null);k.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return D2e({ticks:x.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var b=k.useCallback(v=>{if(v){var y=v.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=y;var j=y[0];if(j){var S=window.getComputedStyle(j),N=S.fontSize,C=S.letterSpacing;(N!==u||C!==m)&&(f(N),g(C))}}},[u,m]);return l||a!=null&&a<=0||s!=null&&s<=0?null:k.createElement(xi,{className:ma("recharts-cartesian-axis",i),ref:b},k.createElement(B2e,{x:e.x,y:e.y,width:a,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:mo(e)}),k.createElement(H2e,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:m,getTicksConfig:e,events:d}),k.createElement(Kve,{x:e.x,y:e.y,width:e.width,height:e.height},k.createElement(a1e,{label:e.label,labelRef:e.labelRef}),e.children))}),W2e=k.memo(V2e,(e,t)=>{var{viewBox:r}=e,a=U_(e,F2e),{viewBox:s}=t,i=U_(t,P2e);return _p(r,s)&&_p(a,i)}),p6=k.forwardRef((e,t)=>{var r=gi(e,m6);return k.createElement(W2e,jh({},r,{ref:t}))});p6.displayName="CartesianAxis";var K2e=["x1","y1","x2","y2","key"],G2e=["offset"],Y2e=["xAxisId","yAxisId"],X2e=["xAxisId","yAxisId"];function CD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CD(Object(r),!0).forEach(function(a){Q2e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Q2e(e,t,r){return(t=Z2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z2e(e){var t=J2e(e,"string");return typeof t=="symbol"?t:t+""}function J2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y0(){return Y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y0.apply(null,arguments)}function _b(e,t){if(e==null)return{};var r,a,s=ewe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ewe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var twe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:s,width:i,height:l,ry:o}=e;return k.createElement("rect",{x:a,y:s,ry:o,width:i,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function qB(e,t){var r;if(k.isValidElement(e))r=k.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:s,x2:i,y2:l,key:o}=t,d=_b(t,K2e),u=mo(d),{offset:f}=u,m=_b(u,G2e);r=k.createElement("line",Y0({},m,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:o}))}return r}function rwe(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:l}=e,o=_b(e,Y2e),d=s.map((u,f)=>{var m=Oi(Oi({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(f),index:f});return qB(a,m)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function awe(e){var{y:t,height:r,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:l}=e,o=_b(e,X2e),d=s.map((u,f)=>{var m=Oi(Oi({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(f),index:f});return qB(a,m)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function nwe(e){var{horizontalFill:t,fillOpacity:r,x:a,y:s,width:i,height:l,horizontalPoints:o,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var u=o.map(m=>Math.round(m+s-s)).sort((m,g)=>m-g);s!==u[0]&&u.unshift(0);var f=u.map((m,g)=>{var x=!u[g+1],b=x?s+l-m:u[g+1]-m;if(b<=0)return null;var v=g%t.length;return k.createElement("rect",{key:"react-".concat(g),y:m,x:a,height:b,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function swe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:s,y:i,width:l,height:o,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var u=d.map(m=>Math.round(m+s-s)).sort((m,g)=>m-g);s!==u[0]&&u.unshift(0);var f=u.map((m,g)=>{var x=!u[g+1],b=x?s+l-m:u[g+1]-m;if(b<=0)return null;var v=g%r.length;return k.createElement("rect",{key:"react-".concat(g),x:m,y:i,width:b,height:o,stroke:"none",fill:r[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var iwe=(e,t)=>{var{xAxis:r,width:a,height:s,offset:i}=e;return LR(h6(Oi(Oi(Oi({},m6),r),{},{ticks:RR(r),viewBox:{x:0,y:0,width:a,height:s}})),i.left,i.left+i.width,t)},lwe=(e,t)=>{var{yAxis:r,width:a,height:s,offset:i}=e;return LR(h6(Oi(Oi(Oi({},m6),r),{},{ticks:RR(r),viewBox:{x:0,y:0,width:a,height:s}})),i.top,i.top+i.height,t)},owe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function q_(e){var t=I3(),r=B3(),a=HR(),s=Oi(Oi({},gi(e,owe)),{},{x:er(e.x)?e.x:a.left,y:er(e.y)?e.y:a.top,width:er(e.width)?e.width:a.width,height:er(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:l,x:o,y:d,width:u,height:f,syncWithTicks:m,horizontalValues:g,verticalValues:x}=s,b=cl(),v=Gt(F=>k7(F,"xAxis",i,b)),y=Gt(F=>k7(F,"yAxis",l,b));if(!er(u)||u<=0||!er(f)||f<=0||!er(o)||o!==+o||!er(d)||d!==+d)return null;var j=s.verticalCoordinatesGenerator||iwe,S=s.horizontalCoordinatesGenerator||lwe,{horizontalPoints:N,verticalPoints:C}=s;if((!N||!N.length)&&typeof S=="function"){var T=g&&g.length,P=S({yAxis:y?Oi(Oi({},y),{},{ticks:T?g:y.ticks}):void 0,width:t,height:r,offset:a},T?!0:m);rb(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(N=P)}if((!C||!C.length)&&typeof j=="function"){var D=x&&x.length,M=j({xAxis:v?Oi(Oi({},v),{},{ticks:D?x:v.ticks}):void 0,width:t,height:r,offset:a},D?!0:m);rb(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(C=M)}return k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(twe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),k.createElement(nwe,Y0({},s,{horizontalPoints:N})),k.createElement(swe,Y0({},s,{verticalPoints:C})),k.createElement(rwe,Y0({},s,{offset:a,horizontalPoints:N,xAxis:v,yAxis:y})),k.createElement(awe,Y0({},s,{offset:a,verticalPoints:C,xAxis:v,yAxis:y})))}q_.displayName="CartesianGrid";var $B=(e,t,r,a)=>Xf(e,"xAxis",t,a),HB=(e,t,r,a)=>Yf(e,"xAxis",t,a),VB=(e,t,r,a)=>Xf(e,"yAxis",r,a),WB=(e,t,r,a)=>Yf(e,"yAxis",r,a),cwe=Xe([sa,$B,VB,HB,WB],(e,t,r,a,s)=>l0(e,"xAxis")?Lg(t,a,!1):Lg(r,s,!1)),uwe=(e,t,r,a,s)=>s;function dwe(e){return e.type==="line"}var fwe=Xe([E2,uwe],(e,t)=>e.filter(dwe).find(r=>r.id===t)),hwe=Xe([sa,$B,VB,HB,WB,fwe,cwe,j2],(e,t,r,a,s,i,l,o)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:f}=o;if(!(i==null||t==null||r==null||a==null||s==null||a.length===0||s.length===0||l==null)){var{dataKey:m,data:g}=i,x;if(g!=null&&g.length>0?x=g:x=d?.slice(u,f+1),x!=null)return Lwe({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,dataKey:m,bandSize:l,displayedData:x})}});function mwe(e){var t=xh(e),r=3,a=2;if(t!=null){var{r:s,strokeWidth:i}=t,l=Number(s),o=Number(i);return(Number.isNaN(l)||l<0)&&(l=r),(Number.isNaN(o)||o<0)&&(o=a),{r:l,strokeWidth:o}}return{r,strokeWidth:a}}var pwe=["id"],xwe=["type","layout","connectNulls","needClip"],gwe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ED(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ED(Object(r),!0).forEach(function(a){vwe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ED(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vwe(e,t,r){return(t=ywe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ywe(e){var t=bwe(e,"string");return typeof t=="symbol"?t:t+""}function bwe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x6(e,t){if(e==null)return{};var r,a,s=wwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wwe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Nh.apply(null,arguments)}var jwe=e=>{var{dataKey:t,name:r,stroke:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:Ip(r,t),payload:e}]};function Nwe(e){var{dataKey:t,data:r,stroke:a,strokeWidth:s,fill:i,name:l,hide:o,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Ip(l,t),hide:o,type:e.tooltipType,color:e.stroke,unit:d}}}var KB=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function _we(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],s=0;s<t;++s)a=[...a,...r];return a}var Swe=(e,t,r)=>{var a=r.reduce((m,g)=>m+g);if(!a)return KB(t,e);for(var s=Math.floor(e/a),i=e%a,l=t-e,o=[],d=0,u=0;d<r.length;u+=r[d],++d)if(u+r[d]>i){o=[...r.slice(0,d),i-u];break}var f=o.length%2===0?[0,l]:[l];return[..._we(r,s),...o,...f].map(m=>"".concat(m,"px")).join(", ")};function kwe(e,t){var r;if(k.isValidElement(e))r=k.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=ma("recharts-line-dot",typeof e!="boolean"?e.className:"");r=k.createElement(bB,Nh({},t,{className:a}))}return r}function Awe(e,t){return e==null?!1:t?!0:e.length===1}function Cwe(e){var{clipPathId:t,points:r,props:a}=e,{dot:s,dataKey:i,needClip:l}=a;if(!Awe(r,s))return null;var{id:o}=a,d=x6(a,pwe),u=kB(s),f=mo(d),m=goe(s),g=r.map((b,v)=>{var y=no(no(no({key:"dot-".concat(v),r:3},f),m),{},{index:v,cx:b.x,cy:b.y,dataKey:i,value:b.value,payload:b.payload,points:r});return kwe(s,y)}),x={clipPath:l?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return k.createElement(xi,Nh({className:"recharts-line-dots",key:"dots"},x),g)}function Ewe(e){var{showLabels:t,children:r,points:a}=e,s=k.useMemo(()=>a?.map(i=>{var l={x:i.x,y:i.y,width:0,height:0};return no(no({},l),{},{value:i.value,payload:i.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[a]);return k.createElement(vB,{value:t?s:null},r)}function TD(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:s,props:i}=e,{type:l,layout:o,connectNulls:d,needClip:u}=i,f=x6(i,xwe),m=no(no({},ll(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:a,type:l,layout:o,connectNulls:d,strokeDasharray:s??i.strokeDasharray});return k.createElement(k.Fragment,null,a?.length>1&&k.createElement(U3,Nh({},m,{pathRef:r})),k.createElement(Cwe,{points:a,clipPathId:t,props:i}))}function Twe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Dwe(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:l,strokeDasharray:o,isAnimationActive:d,animationBegin:u,animationDuration:f,animationEasing:m,animateNewValues:g,width:x,height:b,onAnimationEnd:v,onAnimationStart:y}=r,j=s.current,S=mv(r,"recharts-line-"),[N,C]=k.useState(!1),T=!N,P=k.useCallback(()=>{typeof v=="function"&&v(),C(!1)},[v]),D=k.useCallback(()=>{typeof y=="function"&&y(),C(!0)},[y]),M=Twe(a.current),F=i.current;return k.createElement(Ewe,{points:l,showLabels:T},r.children,k.createElement(hv,{animationId:S,begin:u,duration:f,isActive:d,easing:m,onAnimationEnd:P,onAnimationStart:D,key:S},H=>{var L=Hn(F,M+F,H),z=Math.min(L,M),V;if(d)if(o){var G="".concat(o).split(/[,\s]+/gim).map(X=>parseFloat(X));V=Swe(z,M,G)}else V=KB(M,z);else V=o==null?void 0:String(o);if(j){var ie=j.length/l.length,Z=H===1?l:l.map((X,he)=>{var ce=Math.floor(he*ie);if(j[ce]){var ke=j[ce];return no(no({},X),{},{x:Hn(ke.x,X.x,H),y:Hn(ke.y,X.y,H)})}return g?no(no({},X),{},{x:Hn(x*2,X.x,H),y:Hn(b/2,X.y,H)}):no(no({},X),{},{x:X.x,y:X.y})});return s.current=Z,k.createElement(TD,{props:r,points:Z,clipPathId:t,pathRef:a,strokeDasharray:V})}return H>0&&M>0&&(s.current=l,i.current=z),k.createElement(TD,{props:r,points:l,clipPathId:t,pathRef:a,strokeDasharray:V})}),k.createElement(ZS,{label:r.label}))}function Owe(e){var{clipPathId:t,props:r}=e,a=k.useRef(null),s=k.useRef(0),i=k.useRef(null);return k.createElement(Dwe,{props:r,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:s,pathRef:i})}var Fwe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Za(e.payload,t)});class Pwe extends k.Component{render(){var{hide:t,dot:r,points:a,className:s,xAxisId:i,yAxisId:l,top:o,left:d,width:u,height:f,id:m,needClip:g}=this.props;if(t)return null;var x=ma("recharts-line",s),b=m,{r:v,strokeWidth:y}=mwe(r),j=kB(r),S=v*2+y;return k.createElement(k.Fragment,null,k.createElement(xi,{className:x},g&&k.createElement("defs",null,k.createElement(MB,{clipPathId:b,xAxisId:i,yAxisId:l}),!j&&k.createElement("clipPath",{id:"clipPath-dots-".concat(b)},k.createElement("rect",{x:d-S/2,y:o-S/2,width:u+S,height:f+S}))),k.createElement(PB,{xAxisId:i,yAxisId:l,data:a,dataPointFormatter:Fwe,errorBarOffset:0},k.createElement(Owe,{props:this.props,clipPathId:b}))),k.createElement(Jye,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var GB={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!o0.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Mwe(e){var t=gi(e,GB),{activeDot:r,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:l,connectNulls:o,dot:d,hide:u,isAnimationActive:f,label:m,legendType:g,xAxisId:x,yAxisId:b,id:v}=t,y=x6(t,gwe),{needClip:j}=d6(x,b),S=c6(),N=m2(),C=cl(),T=Gt(H=>hwe(H,x,b,C,v));if(N!=="horizontal"&&N!=="vertical"||T==null||S==null)return null;var{height:P,width:D,x:M,y:F}=S;return k.createElement(Pwe,Nh({},y,{id:v,connectNulls:o,dot:d,activeDot:r,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:l,isAnimationActive:f,hide:u,label:m,legendType:g,xAxisId:x,yAxisId:b,points:T,layout:N,height:P,width:D,left:M,top:F,needClip:j}))}function Lwe(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:s,yAxisTicks:i,dataKey:l,bandSize:o,displayedData:d}=e;return d.map((u,f)=>{var m=Za(u,l);if(t==="horizontal"){var g=eT({axis:r,ticks:s,bandSize:o,entry:u,index:f}),x=wn(m)?null:a.scale(m);return{x:g,y:x,value:m,payload:u}}var b=wn(m)?null:r.scale(m),v=eT({axis:a,ticks:i,bandSize:o,entry:u,index:f});return b==null||v==null?null:{x:b,y:v,value:m,payload:u}}).filter(Boolean)}function Rwe(e){var t=gi(e,GB),r=cl();return k.createElement(i6,{id:t.id,type:"line"},a=>k.createElement(k.Fragment,null,k.createElement(EB,{legendPayload:jwe(t)}),k.createElement(s6,{fn:Nwe,args:t}),k.createElement(DB,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),k.createElement(Mwe,Nh({},t,{id:a}))))}var $_=k.memo(Rwe);$_.displayName="Line";var Iwe=["dangerouslySetInnerHTML","ticks"],Bwe=["id"],zwe=["domain"],Uwe=["domain"];function H_(){return H_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H_.apply(null,arguments)}function Sb(e,t){if(e==null)return{};var r,a,s=qwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qwe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function $we(e){var t=Nn();return k.useLayoutEffect(()=>(t(zye(e)),()=>{t(Uye(e))}),[e,t]),null}var Hwe=e=>{var{xAxisId:t,className:r}=e,a=Gt(L3),s=cl(),i="xAxis",l=Gt(y=>Wp(y,i,t,s)),o=Gt(y=>OI(y,i,t,s)),d=Gt(y=>CI(y,t)),u=Gt(y=>Axe(y,t)),f=Gt(y=>cI(y,t));if(d==null||u==null||f==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,x=Sb(e,Iwe),{id:b}=f,v=Sb(f,Bwe);return k.createElement(p6,H_({},x,v,{scale:l,x:u.x,y:u.y,width:d.width,height:d.height,className:ma("recharts-".concat(i," ").concat(i),r),viewBox:a,ticks:o}))},Vwe={allowDataOverflow:Jl.allowDataOverflow,allowDecimals:Jl.allowDecimals,allowDuplicatedCategory:Jl.allowDuplicatedCategory,height:Jl.height,hide:!1,mirror:Jl.mirror,orientation:Jl.orientation,padding:Jl.padding,reversed:Jl.reversed,scale:Jl.scale,tickCount:Jl.tickCount,type:Jl.type,xAxisId:0},Wwe=e=>{var t,r,a,s,i,l=gi(e,Vwe);return k.createElement(k.Fragment,null,k.createElement($we,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(a=l.angle)!==null&&a!==void 0?a:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),k.createElement(Hwe,l))},Kwe=(e,t)=>{var{domain:r}=e,a=Sb(e,zwe),{domain:s}=t,i=Sb(t,Uwe);return _p(a,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:_p({domain:r},{domain:s}):!1},V_=k.memo(Wwe,Kwe);V_.displayName="XAxis";var Gwe=["dangerouslySetInnerHTML","ticks"],Ywe=["id"],Xwe=["domain"],Qwe=["domain"];function W_(){return W_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W_.apply(null,arguments)}function kb(e,t){if(e==null)return{};var r,a,s=Zwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Zwe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Jwe(e){var t=Nn();return k.useLayoutEffect(()=>(t(qye(e)),()=>{t($ye(e))}),[e,t]),null}var e5e=e=>{var{yAxisId:t,className:r,width:a,label:s}=e,i=k.useRef(null),l=k.useRef(null),o=Gt(L3),d=cl(),u=Nn(),f="yAxis",m=Gt(T=>Wp(T,f,t,d)),g=Gt(T=>EI(T,t)),x=Gt(T=>Exe(T,t)),b=Gt(T=>OI(T,f,t,d)),v=Gt(T=>uI(T,t));if(k.useLayoutEffect(()=>{if(!(a!=="auto"||!g||QS(s)||k.isValidElement(s)||v==null)){var T=i.current;if(T){var P=T.getCalculatedWidth();Math.round(g.width)!==Math.round(P)&&u(Hye({id:t,width:P}))}}},[b,g,u,s,t,a,v]),g==null||x==null||v==null)return null;var{dangerouslySetInnerHTML:y,ticks:j}=e,S=kb(e,Gwe),{id:N}=v,C=kb(v,Ywe);return k.createElement(p6,W_({},S,C,{ref:i,labelRef:l,scale:m,x:x.x,y:x.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:g.width,height:g.height,className:ma("recharts-".concat(f," ").concat(f),r),viewBox:o,ticks:b}))},t5e={allowDataOverflow:eo.allowDataOverflow,allowDecimals:eo.allowDecimals,allowDuplicatedCategory:eo.allowDuplicatedCategory,hide:!1,mirror:eo.mirror,orientation:eo.orientation,padding:eo.padding,reversed:eo.reversed,scale:eo.scale,tickCount:eo.tickCount,type:eo.type,width:eo.width,yAxisId:0},r5e=e=>{var t,r,a,s,i,l=gi(e,t5e);return k.createElement(k.Fragment,null,k.createElement(Jwe,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(a=l.angle)!==null&&a!==void 0?a:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),k.createElement(e5e,l))},a5e=(e,t)=>{var{domain:r}=e,a=kb(e,Xwe),{domain:s}=t,i=kb(t,Qwe);return _p(a,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:_p({domain:r},{domain:s}):!1},K_=k.memo(r5e,a5e);K_.displayName="YAxis";var Zj={exports:{}},Jj={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DD;function n5e(){if(DD)return Jj;DD=1;var e=Sp();function t(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,o=e.useDebugValue;return Jj.useSyncExternalStoreWithSelector=function(d,u,f,m,g){var x=s(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=l(function(){function y(T){if(!j){if(j=!0,S=T,T=m(T),g!==void 0&&b.hasValue){var P=b.value;if(g(P,T))return N=P}return N=T}if(P=N,r(S,T))return P;var D=m(T);return g!==void 0&&g(P,D)?(S=T,P):(S=T,N=D)}var j=!1,S,N,C=f===void 0?null:f;return[function(){return y(u())},C===null?void 0:function(){return y(C())}]},[u,f,m,g]);var v=a(d,x[0],x[1]);return i(function(){b.hasValue=!0,b.value=v},[v]),o(v),v},Jj}var OD;function s5e(){return OD||(OD=1,Zj.exports=n5e()),Zj.exports}s5e();function i5e(e){e()}function l5e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){i5e(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var FD={notify(){},get:()=>[]};function o5e(e,t){let r,a=FD,s=0,i=!1;function l(v){f();const y=a.subscribe(v);let j=!1;return()=>{j||(j=!0,y(),m())}}function o(){a.notify()}function d(){b.onStateChange&&b.onStateChange()}function u(){return i}function f(){s++,r||(r=e.subscribe(d),a=l5e())}function m(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=FD)}function g(){i||(i=!0,f())}function x(){i&&(i=!1,m())}const b={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:d,isSubscribed:u,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>a};return b}var c5e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u5e=c5e(),d5e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",f5e=d5e(),h5e=()=>u5e||f5e?k.useLayoutEffect:k.useEffect,m5e=h5e(),p5e=Symbol.for("react-redux-context"),x5e=typeof globalThis<"u"?globalThis:{};function g5e(){if(!k.createContext)return{};const e=x5e[p5e]??=new Map;let t=e.get(k.createContext);return t||(t=k.createContext(null),e.set(k.createContext,t)),t}var v5e=g5e();function y5e(e){const{children:t,context:r,serverState:a,store:s}=e,i=k.useMemo(()=>{const d=o5e(s);return{store:s,subscription:d,getServerState:a?()=>a:void 0}},[s,a]),l=k.useMemo(()=>s.getState(),[s]);m5e(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const o=r||v5e;return k.createElement(o.Provider,{value:i},t)}var b5e=y5e,w5e=(e,t)=>t,g6=Xe([w5e,sa,iI,Rs,YI,Gd,Pge,Ms],Bge),v6=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},YB=Jo("mouseClick"),XB=dv();XB.startListening({actionCreator:YB,effect:(e,t)=>{var r=e.payload,a=g6(t.getState(),v6(r));a?.activeIndex!=null&&t.dispatch(qxe({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var G_=Jo("mouseMove"),QB=dv();QB.startListening({actionCreator:G_,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=US(a,a.tooltip.settings.shared),i=g6(a,v6(r));s==="axis"&&(i?.activeIndex!=null?t.dispatch(zI({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(BI()))}});var PD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},ZB=go({name:"rootProps",initialState:PD,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:PD.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),j5e=ZB.reducer,{updateOptions:N5e}=ZB.actions,JB=go({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:_5e}=JB.actions,S5e=JB.reducer,ez=Jo("keyDown"),tz=Jo("focus"),y6=dv();y6.startListening({actionCreator:ez,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(qS(s,Gp(r))),o=Gd(r);if(i==="Enter"){var d=vb(r,"axis","hover",String(s.index));t.dispatch(P_({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var u=Fxe(r),f=u==="left-to-right"?1:-1,m=i==="ArrowRight"?1:-1,g=l+m*f;if(!(o==null||g>=o.length||g<0)){var x=vb(r,"axis","hover",String(g));t.dispatch(P_({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});y6.startListening({actionCreator:tz,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=vb(r,"axis","hover",String(i));t.dispatch(P_({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var qo=Jo("externalEvent"),rz=dv();rz.startListening({actionCreator:qo,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:_ge(r),activeDataKey:JI(r),activeIndex:Qf(r),activeLabel:ZI(r),activeTooltipIndex:Qf(r),isTooltipActive:Sge(r)};e.payload.handler(a,e.payload.reactEvent)}}});var k5e=Xe([Kp],e=>e.tooltipItemPayloads),A5e=Xe([k5e,_v,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var s=e.find(o=>o.settings.dataKey===a);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),az=Jo("touchMove"),nz=dv();nz.startListening({actionCreator:az,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=US(a,a.tooltip.settings.shared);if(s==="axis"){var i=g6(a,v6({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(zI({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,o=r.touches[0],d=document.elementFromPoint(o.clientX,o.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(BR),f=(l=d.getAttribute(zR))!==null&&l!==void 0?l:void 0,m=A5e(t.getState(),u,f);t.dispatch(II({activeDataKey:f,activeIndex:u,activeCoordinate:m}))}}});var C5e=cR({brush:f2e,cartesianAxis:Vye,chartData:tve,errorBars:dbe,graphicalItems:uye,layout:fde,legend:vfe,options:Xge,polarAxis:_1e,polarOptions:S5e,referenceElements:y2e,rootProps:j5e,tooltip:$xe}),E5e=function(t){return Rue({reducer:C5e,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([XB.middleware,QB.middleware,y6.middleware,rz.middleware,nz.middleware]),enhancers:r=>{var a=r;return typeof r=="function"&&(a=r()),a.concat(wR({type:"raf"}))},devTools:o0.devToolsEnabled})};function sz(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,s=cl(),i=k.useRef(null);if(s)return r;i.current==null&&(i.current=E5e(t));var l=T3;return k.createElement(b5e,{context:l,store:i.current},r)}function iz(e){var{layout:t,margin:r}=e,a=Nn(),s=cl();return k.useEffect(()=>{s||(a(cde(t)),a(ode(r)))},[a,s,t,r]),null}function lz(e){var t=Nn();return k.useEffect(()=>{t(N5e(e))},[t,e]),null}var T5e=["children"];function D5e(e,t){if(e==null)return{};var r,a,s=O5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function O5e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ab.apply(null,arguments)}var F5e={width:"100%",height:"100%",display:"block"},P5e=k.forwardRef((e,t)=>{var r=I3(),a=B3(),s=GR();if(!vp(r)||!vp(a))return null;var{children:i,otherAttributes:l,title:o,desc:d}=e,u,f;return typeof l.tabIndex=="number"?u=l.tabIndex:u=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0,k.createElement(v3,Ab({},l,{title:o,desc:d,role:f,tabIndex:u,width:r,height:a,style:F5e,ref:t}),i)}),M5e=e=>{var{children:t}=e,r=Gt(f2);if(!r)return null;var{width:a,height:s,y:i,x:l}=r;return k.createElement(v3,{width:a,height:s,x:l,y:i},t)},MD=k.forwardRef((e,t)=>{var{children:r}=e,a=D5e(e,T5e),s=cl();return s?k.createElement(M5e,null,r):k.createElement(P5e,Ab({ref:t},a),r)});function L5e(){var e=Nn(),[t,r]=k.useState(null),a=Gt(Ude);return k.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;Ri(i)&&i!==a&&e(dde(i))}},[t,e,a]),r}function LD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function R5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LD(Object(r),!0).forEach(function(a){I5e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function I5e(e,t,r){return(t=B5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B5e(e){var t=z5e(e,"string");return typeof t=="symbol"?t:t+""}function z5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_h.apply(null,arguments)}var U5e=()=>(uve(),null);function Cb(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var q5e=k.forwardRef((e,t)=>{var r,a,s=k.useRef(null),[i,l]=k.useState({containerWidth:Cb((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Cb((a=e.style)===null||a===void 0?void 0:a.height)}),o=k.useCallback((u,f)=>{l(m=>{var g=Math.round(u),x=Math.round(f);return m.containerWidth===g&&m.containerHeight===x?m:{containerWidth:g,containerHeight:x}})},[]),d=k.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:f,height:m}=u.getBoundingClientRect();o(f,m);var g=b=>{var{width:v,height:y}=b[0].contentRect;o(v,y)},x=new ResizeObserver(g);x.observe(u),s.current=x}},[t,o]);return k.useEffect(()=>()=>{var u=s.current;u?.disconnect()},[o]),k.createElement(k.Fragment,null,k.createElement(p2,{width:i.containerWidth,height:i.containerHeight}),k.createElement("div",_h({ref:d},e)))}),$5e=k.forwardRef((e,t)=>{var{width:r,height:a}=e,[s,i]=k.useState({containerWidth:Cb(r),containerHeight:Cb(a)}),l=k.useCallback((d,u)=>{i(f=>{var m=Math.round(d),g=Math.round(u);return f.containerWidth===m&&f.containerHeight===g?f:{containerWidth:m,containerHeight:g}})},[]),o=k.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:u,height:f}=d.getBoundingClientRect();l(u,f)}},[t,l]);return k.createElement(k.Fragment,null,k.createElement(p2,{width:s.containerWidth,height:s.containerHeight}),k.createElement("div",_h({ref:o},e)))}),H5e=k.forwardRef((e,t)=>{var{width:r,height:a}=e;return k.createElement(k.Fragment,null,k.createElement(p2,{width:r,height:a}),k.createElement("div",_h({ref:t},e)))}),V5e=k.forwardRef((e,t)=>{var{width:r,height:a}=e;return Od(r)||Od(a)?k.createElement($5e,_h({},e,{ref:t})):k.createElement(H5e,_h({},e,{ref:t}))});function W5e(e){return e===!0?q5e:V5e}var K5e=k.forwardRef((e,t)=>{var{children:r,className:a,height:s,onClick:i,onContextMenu:l,onDoubleClick:o,onMouseDown:d,onMouseEnter:u,onMouseLeave:f,onMouseMove:m,onMouseUp:g,onTouchEnd:x,onTouchMove:b,onTouchStart:v,style:y,width:j,responsive:S,dispatchTouchEvents:N=!0}=e,C=k.useRef(null),T=Nn(),[P,D]=k.useState(null),[M,F]=k.useState(null),H=L5e(),L=R3(),z=L?.width>0?L.width:j,V=L?.height>0?L.height:s,G=k.useCallback(ne=>{H(ne),typeof t=="function"&&t(ne),D(ne),F(ne),ne!=null&&(C.current=ne)},[H,t,D,F]),ie=k.useCallback(ne=>{T(YB(ne)),T(qo({handler:i,reactEvent:ne}))},[T,i]),Z=k.useCallback(ne=>{T(G_(ne)),T(qo({handler:u,reactEvent:ne}))},[T,u]),X=k.useCallback(ne=>{T(BI()),T(qo({handler:f,reactEvent:ne}))},[T,f]),he=k.useCallback(ne=>{T(G_(ne)),T(qo({handler:m,reactEvent:ne}))},[T,m]),ce=k.useCallback(()=>{T(tz())},[T]),ke=k.useCallback(ne=>{T(ez(ne.key))},[T]),se=k.useCallback(ne=>{T(qo({handler:l,reactEvent:ne}))},[T,l]),R=k.useCallback(ne=>{T(qo({handler:o,reactEvent:ne}))},[T,o]),I=k.useCallback(ne=>{T(qo({handler:d,reactEvent:ne}))},[T,d]),q=k.useCallback(ne=>{T(qo({handler:g,reactEvent:ne}))},[T,g]),K=k.useCallback(ne=>{T(qo({handler:v,reactEvent:ne}))},[T,v]),te=k.useCallback(ne=>{N&&T(az(ne)),T(qo({handler:b,reactEvent:ne}))},[T,N,b]),J=k.useCallback(ne=>{T(qo({handler:x,reactEvent:ne}))},[T,x]),Q=W5e(S);return k.createElement(sB.Provider,{value:P},k.createElement(kL.Provider,{value:M},k.createElement(Q,{width:z??y?.width,height:V??y?.height,className:ma("recharts-wrapper",a),style:R5e({position:"relative",cursor:"default",width:z,height:V},y),onClick:ie,onContextMenu:se,onDoubleClick:R,onFocus:ce,onKeyDown:ke,onMouseDown:I,onMouseEnter:Z,onMouseLeave:X,onMouseMove:he,onMouseUp:q,onTouchEnd:J,onTouchMove:te,onTouchStart:K,ref:G},k.createElement(U5e,null),r)))}),G5e=["width","height","responsive","children","className","style","compact","title","desc"];function Y5e(e,t){if(e==null)return{};var r,a,s=X5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function X5e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var oz=k.forwardRef((e,t)=>{var{width:r,height:a,responsive:s,children:i,className:l,style:o,compact:d,title:u,desc:f}=e,m=Y5e(e,G5e),g=mo(m);return d?k.createElement(k.Fragment,null,k.createElement(p2,{width:r,height:a}),k.createElement(MD,{otherAttributes:g,title:u,desc:f},i)):k.createElement(K5e,{className:l,style:o,width:r,height:a,responsive:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},k.createElement(MD,{otherAttributes:g,title:u,desc:f,ref:t},k.createElement(w2e,null,i)))});function Y_(){return Y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y_.apply(null,arguments)}var Q5e={top:5,right:5,bottom:5,left:5},Z5e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Q5e,reverseStackOrder:!1,syncMethod:"index",responsive:!1},cz=k.forwardRef(function(t,r){var a,s=gi(t.categoricalChartProps,Z5e),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:d,categoricalChartProps:u}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:d,eventEmitter:void 0};return k.createElement(sz,{preloadedState:{options:f},reduxStoreName:(a=u.id)!==null&&a!==void 0?a:i},k.createElement(IB,{chartData:u.data}),k.createElement(iz,{layout:s.layout,margin:s.margin}),k.createElement(lz,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),k.createElement(oz,Y_({},s,{ref:r})))}),J5e=["axis"],eje=k.forwardRef((e,t)=>k.createElement(cz,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:J5e,tooltipPayloadSearcher:XS,categoricalChartProps:e,ref:t})),tje=["axis","item"],rje=k.forwardRef((e,t)=>k.createElement(cz,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tje,tooltipPayloadSearcher:XS,categoricalChartProps:e,ref:t}));function aje(e){var t=Nn();return k.useEffect(()=>{t(_5e(e))},[t,e]),null}var nje=["layout"];function X_(){return X_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X_.apply(null,arguments)}function sje(e,t){if(e==null)return{};var r,a,s=ije(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ije(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var lje={top:5,right:5,bottom:5,left:5},oje={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lje,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},cje=k.forwardRef(function(t,r){var a,s=gi(t.categoricalChartProps,oje),{layout:i}=s,l=sje(s,nje),{chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=t,m={chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return k.createElement(sz,{preloadedState:{options:m},reduxStoreName:(a=s.id)!==null&&a!==void 0?a:o},k.createElement(IB,{chartData:s.data}),k.createElement(iz,{layout:i,margin:s.margin}),k.createElement(lz,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),k.createElement(aje,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),k.createElement(oz,X_({},l,{ref:r})))}),uje=["item"],dje={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},uz=k.forwardRef((e,t)=>{var r=gi(e,dje);return k.createElement(cje,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:uje,tooltipPayloadSearcher:XS,categoricalChartProps:r,ref:t})});const Df=({title:e,value:t,subtitle:r,icon:a,colorClass:s="bg-blue-500",trend:i})=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:`${s} p-3 rounded-lg`,children:n.jsx(a,{className:"h-6 w-6 text-white"})}),i&&n.jsxs("span",{className:`text-sm font-medium ${i.isPositive?"text-green-600":"text-red-600"}`,children:[i.isPositive?"+":"",i.value,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t}),r&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r})]})]}),Rh={getOverview:async()=>Ce.get("/analytics/overview"),getPopularFormations:async(e=10)=>Ce.get("/analytics/popular-formations",{limit:e.toString()}),getEnrollmentTrends:async(e=6)=>Ce.get("/analytics/enrollment-trends",{months:e.toString()}),getTestPerformance:async()=>Ce.get("/analytics/test-performance"),getActiveStudents:async(e=10)=>Ce.get("/analytics/active-students",{limit:e.toString()}),getStudentProgress:async e=>{const t=await Ce.get(`/analytics/student-progress/${e}`);return{student:t.student,enrollments:t.enrollments,test_history:t.test_history}},getFormationCompletionRates:async()=>Ce.get("/analytics/formation-completion-rates"),getPeriodStats:async(e=30)=>{const t=await Ce.get("/analytics/period-stats",{period:e.toString()});return{period_days:t.period_days,stats:t.stats}}},fje=()=>Ft({queryKey:["analytics","overview"],queryFn:Rh.getOverview,staleTime:1e3*60*5,refetchInterval:1e3*60*5}),hje=(e=10)=>Ft({queryKey:["analytics","popular-formations",e],queryFn:()=>Rh.getPopularFormations(e),staleTime:1e3*60*10}),mje=(e=6)=>Ft({queryKey:["analytics","enrollment-trends",e],queryFn:()=>Rh.getEnrollmentTrends(e),staleTime:1e3*60*10}),pje=(e=10)=>Ft({queryKey:["analytics","active-students",e],queryFn:()=>Rh.getActiveStudents(e),staleTime:1e3*60*5}),xje=e=>Ft({queryKey:["analytics","student-progress",e],queryFn:()=>{if(!e)throw new Error("Student ID is required");return Rh.getStudentProgress(e)},enabled:!!e,staleTime:1e3*60*5}),gje=()=>Ft({queryKey:["analytics","formation-completion-rates"],queryFn:Rh.getFormationCompletionRates,staleTime:1e3*60*10}),vje=(e=30)=>Ft({queryKey:["analytics","period-stats",e],queryFn:()=>Rh.getPeriodStats(e),staleTime:1e3*60*5,refetchInterval:1e3*60*5});function Da(e){"@babel/helpers - typeof";return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(e)}var Hc=Uint8Array,oo=Uint16Array,b6=Int32Array,w6=new Hc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),j6=new Hc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),RD=new Hc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dz=function(e,t){for(var r=new oo(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new b6(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},fz=dz(w6,2),yje=fz.b,Q_=fz.r;yje[28]=258,Q_[258]=28;var bje=dz(j6,0),ID=bje.r,Z_=new oo(32768);for(var ln=0;ln<32768;++ln){var Of=(ln&43690)>>1|(ln&21845)<<1;Of=(Of&52428)>>2|(Of&13107)<<2,Of=(Of&61680)>>4|(Of&3855)<<4,Z_[ln]=((Of&65280)>>8|(Of&255)<<8)>>1}var cg=(function(e,t,r){for(var a=e.length,s=0,i=new oo(t);s<a;++s)e[s]&&++i[e[s]-1];var l=new oo(t);for(s=1;s<t;++s)l[s]=l[s-1]+i[s-1]<<1;var o;if(r){o=new oo(1<<t);var d=15-t;for(s=0;s<a;++s)if(e[s])for(var u=s<<4|e[s],f=t-e[s],m=l[e[s]-1]++<<f,g=m|(1<<f)-1;m<=g;++m)o[Z_[m]>>d]=u}else for(o=new oo(a),s=0;s<a;++s)e[s]&&(o[s]=Z_[l[e[s]-1]++]>>15-e[s]);return o}),Sh=new Hc(288);for(var ln=0;ln<144;++ln)Sh[ln]=8;for(var ln=144;ln<256;++ln)Sh[ln]=9;for(var ln=256;ln<280;++ln)Sh[ln]=7;for(var ln=280;ln<288;++ln)Sh[ln]=8;var Eb=new Hc(32);for(var ln=0;ln<32;++ln)Eb[ln]=5;var wje=cg(Sh,9,0),jje=cg(Eb,5,0),hz=function(e){return(e+7)/8|0},Nje=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Hc(e.subarray(t,r))},dd=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},$x=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},eN=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:pz,l:0};if(s==1){var l=new Hc(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(T,P){return T.f-P.f}),r.push({s:-1,f:25001});var o=r[0],d=r[1],u=0,f=1,m=2;for(r[0]={s:-1,f:o.f+d.f,l:o,r:d};f!=s-1;)o=r[r[u].f<r[m].f?u++:m++],d=r[u!=f&&r[u].f<r[m].f?u++:m++],r[f++]={s:-1,f:o.f+d.f,l:o,r:d};for(var g=i[0].s,a=1;a<s;++a)i[a].s>g&&(g=i[a].s);var x=new oo(g+1),b=J_(r[f-1],x,0);if(b>t){var a=0,v=0,y=b-t,j=1<<y;for(i.sort(function(P,D){return x[D.s]-x[P.s]||P.f-D.f});a<s;++a){var S=i[a].s;if(x[S]>t)v+=j-(1<<b-x[S]),x[S]=t;else break}for(v>>=y;v>0;){var N=i[a].s;x[N]<t?v-=1<<t-x[N]++-1:++a}for(;a>=0&&v;--a){var C=i[a].s;x[C]==t&&(--x[C],++v)}b=t}return{t:new Hc(x),l:b}},J_=function(e,t,r){return e.s==-1?Math.max(J_(e.l,t,r+1),J_(e.r,t,r+1)):t[e.s]=r},BD=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new oo(++t),a=0,s=e[0],i=1,l=function(d){r[a++]=d},o=1;o<=t;++o)if(e[o]==s&&o!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(s),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(s);i=1,s=e[o]}return{c:r.subarray(0,a),n:t}},Hx=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},mz=function(e,t,r){var a=r.length,s=hz(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},zD=function(e,t,r,a,s,i,l,o,d,u,f){dd(t,f++,r),++s[256];for(var m=eN(s,15),g=m.t,x=m.l,b=eN(i,15),v=b.t,y=b.l,j=BD(g),S=j.c,N=j.n,C=BD(v),T=C.c,P=C.n,D=new oo(19),M=0;M<S.length;++M)++D[S[M]&31];for(var M=0;M<T.length;++M)++D[T[M]&31];for(var F=eN(D,7),H=F.t,L=F.l,z=19;z>4&&!H[RD[z-1]];--z);var V=u+5<<3,G=Hx(s,Sh)+Hx(i,Eb)+l,ie=Hx(s,g)+Hx(i,v)+l+14+3*z+Hx(D,H)+2*D[16]+3*D[17]+7*D[18];if(d>=0&&V<=G&&V<=ie)return mz(t,f,e.subarray(d,d+u));var Z,X,he,ce;if(dd(t,f,1+(ie<G)),f+=2,ie<G){Z=cg(g,x,0),X=g,he=cg(v,y,0),ce=v;var ke=cg(H,L,0);dd(t,f,N-257),dd(t,f+5,P-1),dd(t,f+10,z-4),f+=14;for(var M=0;M<z;++M)dd(t,f+3*M,H[RD[M]]);f+=3*z;for(var se=[S,T],R=0;R<2;++R)for(var I=se[R],M=0;M<I.length;++M){var q=I[M]&31;dd(t,f,ke[q]),f+=H[q],q>15&&(dd(t,f,I[M]>>5&127),f+=I[M]>>12)}}else Z=wje,X=Sh,he=jje,ce=Eb;for(var M=0;M<o;++M){var K=a[M];if(K>255){var q=K>>18&31;$x(t,f,Z[q+257]),f+=X[q+257],q>7&&(dd(t,f,K>>23&31),f+=w6[q]);var te=K&31;$x(t,f,he[te]),f+=ce[te],te>3&&($x(t,f,K>>5&8191),f+=j6[te])}else $x(t,f,Z[K]),f+=X[K]}return $x(t,f,Z[256]),f+X[256]},_je=new b6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pz=new Hc(0),Sje=function(e,t,r,a,s,i){var l=i.z||e.length,o=new Hc(a+l+5*(1+Math.ceil(l/7e3))+s),d=o.subarray(a,o.length-s),u=i.l,f=(i.r||0)&7;if(t){f&&(d[0]=i.r>>3);for(var m=_je[t-1],g=m>>13,x=m&8191,b=(1<<r)-1,v=i.p||new oo(32768),y=i.h||new oo(b+1),j=Math.ceil(r/3),S=2*j,N=function(Oe){return(e[Oe]^e[Oe+1]<<j^e[Oe+2]<<S)&b},C=new b6(25e3),T=new oo(288),P=new oo(32),D=0,M=0,F=i.i||0,H=0,L=i.w||0,z=0;F+2<l;++F){var V=N(F),G=F&32767,ie=y[V];if(v[G]=ie,y[V]=G,L<=F){var Z=l-F;if((D>7e3||H>24576)&&(Z>423||!u)){f=zD(e,d,0,C,T,P,M,H,z,F-z,f),H=D=M=0,z=F;for(var X=0;X<286;++X)T[X]=0;for(var X=0;X<30;++X)P[X]=0}var he=2,ce=0,ke=x,se=G-ie&32767;if(Z>2&&V==N(F-se))for(var R=Math.min(g,Z)-1,I=Math.min(32767,F),q=Math.min(258,Z);se<=I&&--ke&&G!=ie;){if(e[F+he]==e[F+he-se]){for(var K=0;K<q&&e[F+K]==e[F+K-se];++K);if(K>he){if(he=K,ce=se,K>R)break;for(var te=Math.min(se,K-2),J=0,X=0;X<te;++X){var Q=F-se+X&32767,ne=v[Q],ye=Q-ne&32767;ye>J&&(J=ye,ie=Q)}}}G=ie,ie=v[G],se+=G-ie&32767}if(ce){C[H++]=268435456|Q_[he]<<18|ID[ce];var De=Q_[he]&31,ee=ID[ce]&31;M+=w6[De]+j6[ee],++T[257+De],++P[ee],L=F+he,++D}else C[H++]=e[F],++T[e[F]]}}for(F=Math.max(F,L);F<l;++F)C[H++]=e[F],++T[e[F]];f=zD(e,d,u,C,T,P,M,H,z,F-z,f),u||(i.r=f&7|d[f/8|0]<<3,f-=7,i.h=y,i.p=v,i.i=F,i.w=L)}else{for(var F=i.w||0;F<l+u;F+=65535){var Je=F+65535;Je>=l&&(d[f/8|0]=u,Je=l),f=mz(d,f+1,e.subarray(F,Je))}i.i=l}return Nje(o,0,a+hz(f)+s)},xz=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,l=0;l!=i;){for(var o=Math.min(l+2655,i);l<o;++l)s+=a+=r[l];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},kje=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),l=new Hc(i.length+e.length);l.set(i),l.set(e,i.length),e=l,s.w=i.length}return Sje(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},gz=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Aje=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=xz();s.p(t.dictionary),gz(e,2,s.d())}};function e4(e,t){t||(t={});var r=xz();r.p(e);var a=kje(e,t,t.dictionary?6:2,4);return Aje(a,t),gz(a,a.length-4,r.d()),a}var Cje=typeof TextDecoder<"u"&&new TextDecoder,Eje=0;try{Cje.decode(pz,{stream:!0}),Eje=1}catch{}function Tje(e){if(Array.isArray(e))return e}function Dje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function UD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Oje(e,t){if(e){if(typeof e=="string")return UD(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UD(e,t):void 0}}function Fje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qD(e,t){return Tje(e)||Dje(e,t)||Oje(e,t)||Fje()}function $D(e,t="utf8"){return new TextDecoder(t).decode(e)}const Pje=new TextEncoder;function Mje(e){return Pje.encode(e)}const Lje=1024*8,Rje=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),tN={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class N6{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=Lje,r={}){let a=!1;typeof t=="number"?t=new ArrayBuffer(t):(a=!0,this.lastWrittenByte=t.byteLength);const s=r.offset?r.offset>>>0:0,i=t.byteLength-s;let l=s;(ArrayBuffer.isView(t)||t instanceof N6)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+s),t=t.buffer),a?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const a=(this.offset+t)*2,s=new Uint8Array(a);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const a=tN[r].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+a);if(this.littleEndian===Rje&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+a));o.reverse();const d=new tN[r](o.buffer);return this.offset+=a,d.reverse(),d}const l=new tN[r](i);return this.offset+=a,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let a=0;a<t;a++)r+=this.readChar();return r}readUtf8(t=1){return $D(this.readBytes(t))}decodeText(t=1,r="utf8"){return $D(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Mje(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Yp(e){let t=e.length;for(;--t>=0;)e[t]=0}const Ije=3,Bje=258,vz=29,zje=256,Uje=zje+1+vz,yz=30,qje=512,$je=new Array((Uje+2)*2);Yp($je);const Hje=new Array(yz*2);Yp(Hje);const Vje=new Array(qje);Yp(Vje);const Wje=new Array(Bje-Ije+1);Yp(Wje);const Kje=new Array(vz);Yp(Kje);const Gje=new Array(yz);Yp(Gje);const Yje=(e,t,r,a)=>{let s=e&65535|0,i=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do s=s+t[a++]|0,i=i+s|0;while(--l);s%=65521,i%=65521}return s|i<<16|0};var t4=Yje;const Xje=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Qje=new Uint32Array(Xje()),Zje=(e,t,r,a)=>{const s=Qje,i=a+r;e^=-1;for(let l=a;l<i;l++)e=e>>>8^s[(e^t[l])&255];return e^-1};var vu=Zje,r4={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bz={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Jje=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var eNe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const a in r)Jje(r,a)&&(e[a]=r[a])}}return e},tNe=e=>{let t=0;for(let a=0,s=e.length;a<s;a++)t+=e[a].length;const r=new Uint8Array(t);for(let a=0,s=0,i=e.length;a<i;a++){let l=e[a];r.set(l,s),s+=l.length}return r},wz={assign:eNe,flattenChunks:tNe};let jz=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{jz=!1}const Hg=new Uint8Array(256);for(let e=0;e<256;e++)Hg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Hg[254]=Hg[254]=1;var rNe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,a,s,i,l=e.length,o=0;for(s=0;s<l;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<l&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),i=0,s=0;i<o;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<l&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const aNe=(e,t)=>{if(t<65534&&e.subarray&&jz)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r};var nNe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a,s;const i=new Array(r*2);for(s=0,a=0;a<r;){let l=e[a++];if(l<128){i[s++]=l;continue}let o=Hg[l];if(o>4){i[s++]=65533,a+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&a<r;)l=l<<6|e[a++]&63,o--;if(o>1){i[s++]=65533;continue}l<65536?i[s++]=l:(l-=65536,i[s++]=55296|l>>10&1023,i[s++]=56320|l&1023)}return aNe(i,s)},sNe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Hg[e[r]]>t?r:t},a4={string2buf:rNe,buf2string:nNe,utf8border:sNe};function iNe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var lNe=iNe;const ey=16209,oNe=16191;var cNe=function(t,r){let a,s,i,l,o,d,u,f,m,g,x,b,v,y,j,S,N,C,T,P,D,M,F,H;const L=t.state;a=t.next_in,F=t.input,s=a+(t.avail_in-5),i=t.next_out,H=t.output,l=i-(r-t.avail_out),o=i+(t.avail_out-257),d=L.dmax,u=L.wsize,f=L.whave,m=L.wnext,g=L.window,x=L.hold,b=L.bits,v=L.lencode,y=L.distcode,j=(1<<L.lenbits)-1,S=(1<<L.distbits)-1;e:do{b<15&&(x+=F[a++]<<b,b+=8,x+=F[a++]<<b,b+=8),N=v[x&j];t:for(;;){if(C=N>>>24,x>>>=C,b-=C,C=N>>>16&255,C===0)H[i++]=N&65535;else if(C&16){T=N&65535,C&=15,C&&(b<C&&(x+=F[a++]<<b,b+=8),T+=x&(1<<C)-1,x>>>=C,b-=C),b<15&&(x+=F[a++]<<b,b+=8,x+=F[a++]<<b,b+=8),N=y[x&S];r:for(;;){if(C=N>>>24,x>>>=C,b-=C,C=N>>>16&255,C&16){if(P=N&65535,C&=15,b<C&&(x+=F[a++]<<b,b+=8,b<C&&(x+=F[a++]<<b,b+=8)),P+=x&(1<<C)-1,P>d){t.msg="invalid distance too far back",L.mode=ey;break e}if(x>>>=C,b-=C,C=i-l,P>C){if(C=P-C,C>f&&L.sane){t.msg="invalid distance too far back",L.mode=ey;break e}if(D=0,M=g,m===0){if(D+=u-C,C<T){T-=C;do H[i++]=g[D++];while(--C);D=i-P,M=H}}else if(m<C){if(D+=u+m-C,C-=m,C<T){T-=C;do H[i++]=g[D++];while(--C);if(D=0,m<T){C=m,T-=C;do H[i++]=g[D++];while(--C);D=i-P,M=H}}}else if(D+=m-C,C<T){T-=C;do H[i++]=g[D++];while(--C);D=i-P,M=H}for(;T>2;)H[i++]=M[D++],H[i++]=M[D++],H[i++]=M[D++],T-=3;T&&(H[i++]=M[D++],T>1&&(H[i++]=M[D++]))}else{D=i-P;do H[i++]=H[D++],H[i++]=H[D++],H[i++]=H[D++],T-=3;while(T>2);T&&(H[i++]=H[D++],T>1&&(H[i++]=H[D++]))}}else if((C&64)===0){N=y[(N&65535)+(x&(1<<C)-1)];continue r}else{t.msg="invalid distance code",L.mode=ey;break e}break}}else if((C&64)===0){N=v[(N&65535)+(x&(1<<C)-1)];continue t}else if(C&32){L.mode=oNe;break e}else{t.msg="invalid literal/length code",L.mode=ey;break e}break}}while(a<s&&i<o);T=b>>3,a-=T,b-=T<<3,x&=(1<<b)-1,t.next_in=a,t.next_out=i,t.avail_in=a<s?5+(s-a):5-(a-s),t.avail_out=i<o?257+(o-i):257-(i-o),L.hold=x,L.bits=b};const Lm=15,HD=852,VD=592,WD=0,rN=1,KD=2,uNe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),dNe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fNe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hNe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),mNe=(e,t,r,a,s,i,l,o)=>{const d=o.bits;let u=0,f=0,m=0,g=0,x=0,b=0,v=0,y=0,j=0,S=0,N,C,T,P,D,M=null,F;const H=new Uint16Array(Lm+1),L=new Uint16Array(Lm+1);let z=null,V,G,ie;for(u=0;u<=Lm;u++)H[u]=0;for(f=0;f<a;f++)H[t[r+f]]++;for(x=d,g=Lm;g>=1&&H[g]===0;g--);if(x>g&&(x=g),g===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,o.bits=1,0;for(m=1;m<g&&H[m]===0;m++);for(x<m&&(x=m),y=1,u=1;u<=Lm;u++)if(y<<=1,y-=H[u],y<0)return-1;if(y>0&&(e===WD||g!==1))return-1;for(L[1]=0,u=1;u<Lm;u++)L[u+1]=L[u]+H[u];for(f=0;f<a;f++)t[r+f]!==0&&(l[L[t[r+f]]++]=f);if(e===WD?(M=z=l,F=20):e===rN?(M=uNe,z=dNe,F=257):(M=fNe,z=hNe,F=0),S=0,f=0,u=m,D=i,b=x,v=0,T=-1,j=1<<x,P=j-1,e===rN&&j>HD||e===KD&&j>VD)return 1;for(;;){V=u-v,l[f]+1<F?(G=0,ie=l[f]):l[f]>=F?(G=z[l[f]-F],ie=M[l[f]-F]):(G=96,ie=0),N=1<<u-v,C=1<<b,m=C;do C-=N,s[D+(S>>v)+C]=V<<24|G<<16|ie|0;while(C!==0);for(N=1<<u-1;S&N;)N>>=1;if(N!==0?(S&=N-1,S+=N):S=0,f++,--H[u]===0){if(u===g)break;u=t[r+l[f]]}if(u>x&&(S&P)!==T){for(v===0&&(v=x),D+=m,b=u-v,y=1<<b;b+v<g&&(y-=H[b+v],!(y<=0));)b++,y<<=1;if(j+=1<<b,e===rN&&j>HD||e===KD&&j>VD)return 1;T=S&P,s[T]=x<<24|b<<16|D-i|0}}return S!==0&&(s[D+S]=u-v<<24|64<<16|0),o.bits=x,0};var ug=mNe;const pNe=0,Nz=1,_z=2,{Z_FINISH:GD,Z_BLOCK:xNe,Z_TREES:ty,Z_OK:kh,Z_STREAM_END:gNe,Z_NEED_DICT:vNe,Z_STREAM_ERROR:tc,Z_DATA_ERROR:Sz,Z_MEM_ERROR:kz,Z_BUF_ERROR:yNe,Z_DEFLATED:YD}=bz,I2=16180,XD=16181,QD=16182,ZD=16183,JD=16184,eO=16185,tO=16186,rO=16187,aO=16188,nO=16189,Tb=16190,fd=16191,aN=16192,sO=16193,nN=16194,iO=16195,lO=16196,oO=16197,cO=16198,ry=16199,ay=16200,uO=16201,dO=16202,fO=16203,hO=16204,mO=16205,sN=16206,pO=16207,xO=16208,xn=16209,Az=16210,Cz=16211,bNe=852,wNe=592,jNe=15,NNe=jNe,gO=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function _Ne(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ih=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<I2||t.mode>Cz?1:0},Ez=e=>{if(Ih(e))return tc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=I2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(bNe),t.distcode=t.distdyn=new Int32Array(wNe),t.sane=1,t.back=-1,kh},Tz=e=>{if(Ih(e))return tc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ez(e)},Dz=(e,t)=>{let r;if(Ih(e))return tc;const a=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?tc:(a.window!==null&&a.wbits!==t&&(a.window=null),a.wrap=r,a.wbits=t,Tz(e))},Oz=(e,t)=>{if(!e)return tc;const r=new _Ne;e.state=r,r.strm=e,r.window=null,r.mode=I2;const a=Dz(e,t);return a!==kh&&(e.state=null),a},SNe=e=>Oz(e,NNe);let vO=!0,iN,lN;const kNe=e=>{if(vO){iN=new Int32Array(512),lN=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ug(Nz,e.lens,0,288,iN,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ug(_z,e.lens,0,32,lN,0,e.work,{bits:5}),vO=!1}e.lencode=iN,e.lenbits=9,e.distcode=lN,e.distbits=5},Fz=(e,t,r,a)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>a&&(s=a),i.window.set(t.subarray(r-a,r-a+s),i.wnext),a-=s,a?(i.window.set(t.subarray(r-a,r),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},ANe=(e,t)=>{let r,a,s,i,l,o,d,u,f,m,g,x,b,v,y=0,j,S,N,C,T,P,D,M;const F=new Uint8Array(4);let H,L;const z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ih(e)||!e.output||!e.input&&e.avail_in!==0)return tc;r=e.state,r.mode===fd&&(r.mode=aN),l=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,o=e.avail_in,u=r.hold,f=r.bits,m=o,g=d,M=kh;e:for(;;)switch(r.mode){case I2:if(r.wrap===0){r.mode=aN;break}for(;f<16;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,F[0]=u&255,F[1]=u>>>8&255,r.check=vu(r.check,F,2,0),u=0,f=0,r.mode=XD;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=xn;break}if((u&15)!==YD){e.msg="unknown compression method",r.mode=xn;break}if(u>>>=4,f-=4,D=(u&15)+8,r.wbits===0&&(r.wbits=D),D>15||D>r.wbits){e.msg="invalid window size",r.mode=xn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?nO:fd,u=0,f=0;break;case XD:for(;f<16;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(r.flags=u,(r.flags&255)!==YD){e.msg="unknown compression method",r.mode=xn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=xn;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(F[0]=u&255,F[1]=u>>>8&255,r.check=vu(r.check,F,2,0)),u=0,f=0,r.mode=QD;case QD:for(;f<32;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(F[0]=u&255,F[1]=u>>>8&255,F[2]=u>>>16&255,F[3]=u>>>24&255,r.check=vu(r.check,F,4,0)),u=0,f=0,r.mode=ZD;case ZD:for(;f<16;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(F[0]=u&255,F[1]=u>>>8&255,r.check=vu(r.check,F,2,0)),u=0,f=0,r.mode=JD;case JD:if(r.flags&1024){for(;f<16;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(F[0]=u&255,F[1]=u>>>8&255,r.check=vu(r.check,F,2,0)),u=0,f=0}else r.head&&(r.head.extra=null);r.mode=eO;case eO:if(r.flags&1024&&(x=r.length,x>o&&(x=o),x&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(a.subarray(i,i+x),D)),r.flags&512&&r.wrap&4&&(r.check=vu(r.check,a,x,i)),o-=x,i+=x,r.length-=x),r.length))break e;r.length=0,r.mode=tO;case tO:if(r.flags&2048){if(o===0)break e;x=0;do D=a[i+x++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D));while(D&&x<o);if(r.flags&512&&r.wrap&4&&(r.check=vu(r.check,a,x,i)),o-=x,i+=x,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=rO;case rO:if(r.flags&4096){if(o===0)break e;x=0;do D=a[i+x++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D));while(D&&x<o);if(r.flags&512&&r.wrap&4&&(r.check=vu(r.check,a,x,i)),o-=x,i+=x,D)break e}else r.head&&(r.head.comment=null);r.mode=aO;case aO:if(r.flags&512){for(;f<16;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=xn;break}u=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=fd;break;case nO:for(;f<32;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}e.adler=r.check=gO(u),u=0,f=0,r.mode=Tb;case Tb:if(r.havedict===0)return e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=f,vNe;e.adler=r.check=1,r.mode=fd;case fd:if(t===xNe||t===ty)break e;case aN:if(r.last){u>>>=f&7,f-=f&7,r.mode=sN;break}for(;f<3;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}switch(r.last=u&1,u>>>=1,f-=1,u&3){case 0:r.mode=sO;break;case 1:if(kNe(r),r.mode=ry,t===ty){u>>>=2,f-=2;break e}break;case 2:r.mode=lO;break;case 3:e.msg="invalid block type",r.mode=xn}u>>>=2,f-=2;break;case sO:for(u>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=xn;break}if(r.length=u&65535,u=0,f=0,r.mode=nN,t===ty)break e;case nN:r.mode=iO;case iO:if(x=r.length,x){if(x>o&&(x=o),x>d&&(x=d),x===0)break e;s.set(a.subarray(i,i+x),l),o-=x,i+=x,d-=x,l+=x,r.length-=x;break}r.mode=fd;break;case lO:for(;f<14;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(r.nlen=(u&31)+257,u>>>=5,f-=5,r.ndist=(u&31)+1,u>>>=5,f-=5,r.ncode=(u&15)+4,u>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=xn;break}r.have=0,r.mode=oO;case oO:for(;r.have<r.ncode;){for(;f<3;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}r.lens[z[r.have++]]=u&7,u>>>=3,f-=3}for(;r.have<19;)r.lens[z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,H={bits:r.lenbits},M=ug(pNe,r.lens,0,19,r.lencode,0,r.work,H),r.lenbits=H.bits,M){e.msg="invalid code lengths set",r.mode=xn;break}r.have=0,r.mode=cO;case cO:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[u&(1<<r.lenbits)-1],j=y>>>24,S=y>>>16&255,N=y&65535,!(j<=f);){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(N<16)u>>>=j,f-=j,r.lens[r.have++]=N;else{if(N===16){for(L=j+2;f<L;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(u>>>=j,f-=j,r.have===0){e.msg="invalid bit length repeat",r.mode=xn;break}D=r.lens[r.have-1],x=3+(u&3),u>>>=2,f-=2}else if(N===17){for(L=j+3;f<L;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}u>>>=j,f-=j,D=0,x=3+(u&7),u>>>=3,f-=3}else{for(L=j+7;f<L;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}u>>>=j,f-=j,D=0,x=11+(u&127),u>>>=7,f-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=xn;break}for(;x--;)r.lens[r.have++]=D}}if(r.mode===xn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=xn;break}if(r.lenbits=9,H={bits:r.lenbits},M=ug(Nz,r.lens,0,r.nlen,r.lencode,0,r.work,H),r.lenbits=H.bits,M){e.msg="invalid literal/lengths set",r.mode=xn;break}if(r.distbits=6,r.distcode=r.distdyn,H={bits:r.distbits},M=ug(_z,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,H),r.distbits=H.bits,M){e.msg="invalid distances set",r.mode=xn;break}if(r.mode=ry,t===ty)break e;case ry:r.mode=ay;case ay:if(o>=6&&d>=258){e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=f,cNe(e,g),l=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,o=e.avail_in,u=r.hold,f=r.bits,r.mode===fd&&(r.back=-1);break}for(r.back=0;y=r.lencode[u&(1<<r.lenbits)-1],j=y>>>24,S=y>>>16&255,N=y&65535,!(j<=f);){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(S&&(S&240)===0){for(C=j,T=S,P=N;y=r.lencode[P+((u&(1<<C+T)-1)>>C)],j=y>>>24,S=y>>>16&255,N=y&65535,!(C+j<=f);){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}u>>>=C,f-=C,r.back+=C}if(u>>>=j,f-=j,r.back+=j,r.length=N,S===0){r.mode=mO;break}if(S&32){r.back=-1,r.mode=fd;break}if(S&64){e.msg="invalid literal/length code",r.mode=xn;break}r.extra=S&15,r.mode=uO;case uO:if(r.extra){for(L=r.extra;f<L;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=dO;case dO:for(;y=r.distcode[u&(1<<r.distbits)-1],j=y>>>24,S=y>>>16&255,N=y&65535,!(j<=f);){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if((S&240)===0){for(C=j,T=S,P=N;y=r.distcode[P+((u&(1<<C+T)-1)>>C)],j=y>>>24,S=y>>>16&255,N=y&65535,!(C+j<=f);){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}u>>>=C,f-=C,r.back+=C}if(u>>>=j,f-=j,r.back+=j,S&64){e.msg="invalid distance code",r.mode=xn;break}r.offset=N,r.extra=S&15,r.mode=fO;case fO:if(r.extra){for(L=r.extra;f<L;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=xn;break}r.mode=hO;case hO:if(d===0)break e;if(x=g-d,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=xn;break}x>r.wnext?(x-=r.wnext,b=r.wsize-x):b=r.wnext-x,x>r.length&&(x=r.length),v=r.window}else v=s,b=l-r.offset,x=r.length;x>d&&(x=d),d-=x,r.length-=x;do s[l++]=v[b++];while(--x);r.length===0&&(r.mode=ay);break;case mO:if(d===0)break e;s[l++]=r.length,d--,r.mode=ay;break;case sN:if(r.wrap){for(;f<32;){if(o===0)break e;o--,u|=a[i++]<<f,f+=8}if(g-=d,e.total_out+=g,r.total+=g,r.wrap&4&&g&&(e.adler=r.check=r.flags?vu(r.check,s,g,l-g):t4(r.check,s,g,l-g)),g=d,r.wrap&4&&(r.flags?u:gO(u))!==r.check){e.msg="incorrect data check",r.mode=xn;break}u=0,f=0}r.mode=pO;case pO:if(r.wrap&&r.flags){for(;f<32;){if(o===0)break e;o--,u+=a[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=xn;break}u=0,f=0}r.mode=xO;case xO:M=gNe;break e;case xn:M=Sz;break e;case Az:return kz;case Cz:default:return tc}return e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=o,r.hold=u,r.bits=f,(r.wsize||g!==e.avail_out&&r.mode<xn&&(r.mode<sN||t!==GD))&&Fz(e,e.output,e.next_out,g-e.avail_out),m-=e.avail_in,g-=e.avail_out,e.total_in+=m,e.total_out+=g,r.total+=g,r.wrap&4&&g&&(e.adler=r.check=r.flags?vu(r.check,s,g,e.next_out-g):t4(r.check,s,g,e.next_out-g)),e.data_type=r.bits+(r.last?64:0)+(r.mode===fd?128:0)+(r.mode===ry||r.mode===nN?256:0),(m===0&&g===0||t===GD)&&M===kh&&(M=yNe),M},CNe=e=>{if(Ih(e))return tc;let t=e.state;return t.window&&(t.window=null),e.state=null,kh},ENe=(e,t)=>{if(Ih(e))return tc;const r=e.state;return(r.wrap&2)===0?tc:(r.head=t,t.done=!1,kh)},TNe=(e,t)=>{const r=t.length;let a,s,i;return Ih(e)||(a=e.state,a.wrap!==0&&a.mode!==Tb)?tc:a.mode===Tb&&(s=1,s=t4(s,t,r,0),s!==a.check)?Sz:(i=Fz(e,t,r,r),i?(a.mode=Az,kz):(a.havedict=1,kh))};var DNe=Tz,ONe=Dz,FNe=Ez,PNe=SNe,MNe=Oz,LNe=ANe,RNe=CNe,INe=ENe,BNe=TNe,zNe="pako inflate (from Nodeca project)",md={inflateReset:DNe,inflateReset2:ONe,inflateResetKeep:FNe,inflateInit:PNe,inflateInit2:MNe,inflate:LNe,inflateEnd:RNe,inflateGetHeader:INe,inflateSetDictionary:BNe,inflateInfo:zNe};function UNe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var qNe=UNe;const Pz=Object.prototype.toString,{Z_NO_FLUSH:$Ne,Z_FINISH:HNe,Z_OK:Vg,Z_STREAM_END:oN,Z_NEED_DICT:cN,Z_STREAM_ERROR:VNe,Z_DATA_ERROR:yO,Z_MEM_ERROR:WNe}=bz;function Av(e){this.options=wz.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lNe,this.strm.avail_out=0;let r=md.inflateInit2(this.strm,t.windowBits);if(r!==Vg)throw new Error(r4[r]);if(this.header=new qNe,md.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=a4.string2buf(t.dictionary):Pz.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=md.inflateSetDictionary(this.strm,t.dictionary),r!==Vg)))throw new Error(r4[r])}Av.prototype.push=function(e,t){const r=this.strm,a=this.options.chunkSize,s=this.options.dictionary;let i,l,o;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?HNe:$Ne,Pz.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),i=md.inflate(r,l),i===cN&&s&&(i=md.inflateSetDictionary(r,s),i===Vg?i=md.inflate(r,l):i===yO&&(i=cN));r.avail_in>0&&i===oN&&r.state.wrap>0&&e[r.next_in]!==0;)md.inflateReset(r),i=md.inflate(r,l);switch(i){case VNe:case yO:case cN:case WNe:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===oN))if(this.options.to==="string"){let d=a4.utf8border(r.output,r.next_out),u=r.next_out-d,f=a4.buf2string(r.output,d);r.next_out=u,r.avail_out=a-u,u&&r.output.set(r.output.subarray(d,d+u),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Vg&&o===0)){if(i===oN)return i=md.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Av.prototype.onData=function(e){this.chunks.push(e)};Av.prototype.onEnd=function(e){e===Vg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wz.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function KNe(e,t){const r=new Av(t);if(r.push(e),r.err)throw r.msg||r4[r.err];return r.result}var GNe=Av,YNe=KNe,XNe={Inflate:GNe,inflate:YNe};const{Inflate:QNe,inflate:ZNe}=XNe;var bO=QNe,JNe=ZNe;const Mz=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Mz[e]=t}const wO=4294967295;function e_e(e,t,r){let a=e;for(let s=0;s<r;s++)a=Mz[(a^t[s])&255]^a>>>8;return a}function t_e(e,t){return(e_e(wO,e,t)^wO)>>>0}function jO(e,t,r){const a=e.readUint32(),s=t_e(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==a)throw new Error(`CRC mismatch for chunk ${r}. Expected ${a}, found ${s}`)}function Lz(e,t,r){for(let a=0;a<r;a++)t[a]=e[a]}function Rz(e,t,r,a){let s=0;for(;s<a;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-a]&255}function Iz(e,t,r,a){let s=0;if(r.length===0)for(;s<a;s++)t[s]=e[s];else for(;s<a;s++)t[s]=e[s]+r[s]&255}function Bz(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<a;i++)t[i]=e[i]+(t[i-s]+r[i]>>1)&255}}function zz(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+r[i]&255;for(;i<a;i++)t[i]=e[i]+r_e(t[i-s],r[i],r[i-s])&255}}function r_e(e,t,r){const a=e+t-r,s=Math.abs(a-e),i=Math.abs(a-t),l=Math.abs(a-r);return s<=i&&s<=l?e:i<=l?t:r}function a_e(e,t,r,a,s,i){switch(e){case 0:Lz(t,r,s);break;case 1:Rz(t,r,s,i);break;case 2:Iz(t,r,a,s);break;case 3:Bz(t,r,a,s,i);break;case 4:zz(t,r,a,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const n_e=new Uint16Array([255]),s_e=new Uint8Array(n_e.buffer),i_e=s_e[0]===255;function l_e(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*s,d=new Uint8Array(a*r*o);let u=0;for(let f=0;f<7;f++){const m=l[f],g=Math.ceil((r-m.x)/m.xStep),x=Math.ceil((a-m.y)/m.yStep);if(g<=0||x<=0)continue;const b=g*o,v=new Uint8Array(b);for(let y=0;y<x;y++){const j=t[u++],S=t.subarray(u,u+b);u+=b;const N=new Uint8Array(b);a_e(j,S,N,v,b,o),v.set(N);for(let C=0;C<g;C++){const T=m.x+C*m.xStep,P=m.y+y*m.yStep;if(!(T>=r||P>=a))for(let D=0;D<o;D++)d[(P*r+T)*o+D]=N[C*o+D]}}}if(i===16){const f=new Uint16Array(d.buffer);if(i_e)for(let m=0;m<f.length;m++)f[m]=o_e(f[m]);return f}else return d}function o_e(e){return(e&255)<<8|e>>8&255}const c_e=new Uint16Array([255]),u_e=new Uint8Array(c_e.buffer),d_e=u_e[0]===255,f_e=new Uint8Array(0);function NO(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,l=Math.ceil(i/8)*s,o=Math.ceil(i/8*s*r),d=new Uint8Array(a*o);let u=f_e,f=0,m,g;for(let x=0;x<a;x++){switch(m=t.subarray(f+1,f+1+o),g=d.subarray(x*o,(x+1)*o),t[f]){case 0:Lz(m,g,o);break;case 1:Rz(m,g,o,l);break;case 2:Iz(m,g,u,o);break;case 3:Bz(m,g,u,o,l);break;case 4:zz(m,g,u,o,l);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}u=g,f+=o+1}if(i===16){const x=new Uint16Array(d.buffer);if(d_e)for(let b=0;b<x.length;b++)x[b]=h_e(x[b]);return x}else return d}function h_e(e){return(e&255)<<8|e>>8&255}const gy=Uint8Array.of(137,80,78,71,13,10,26,10);function _O(e){if(!m_e(e.readBytes(gy.length)))throw new Error("wrong PNG signature")}function m_e(e){if(e.length<gy.length)return!1;for(let t=0;t<gy.length;t++)if(e[t]!==gy[t])return!1;return!0}const p_e="tEXt",x_e=0,Uz=new TextDecoder("latin1");function g_e(e){if(y_e(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const v_e=/^[\u0000-\u00FF]*$/;function y_e(e){if(!v_e.test(e))throw new Error("invalid latin1 text")}function b_e(e,t,r){const a=qz(t);e[a]=w_e(t,r-a.length-1)}function qz(e){for(e.mark();e.readByte()!==x_e;);const t=e.offset;e.reset();const r=Uz.decode(e.readBytes(t-e.offset-1));return e.skip(1),g_e(r),r}function w_e(e,t){return Uz.decode(e.readBytes(t))}const Zl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},uN={UNKNOWN:-1,DEFLATE:0},SO={UNKNOWN:-1,ADAPTIVE:0},dN={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ny={NONE:0,BACKGROUND:1,PREVIOUS:2},fN={SOURCE:0,OVER:1};class j_e extends N6{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:a=!1}=r;this._checkCrc=a,this._inflator=new bO,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=uN.UNKNOWN,this._filterMethod=SO.UNKNOWN,this._interlaceMethod=dN.UNKNOWN,this._colorType=Zl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(_O(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(_O(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const a=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case p_e:b_e(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?jO(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const a=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=a+t;break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?jO(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=N_e(this.readUint8());const r=this.readUint8();this._colorType=r;let a;switch(r){case Zl.GREYSCALE:a=1;break;case Zl.TRUECOLOUR:a=3;break;case Zl.INDEXED_COLOUR:a=1;break;case Zl.GREYSCALE_ALPHA:a=2;break;case Zl.TRUECOLOUR_ALPHA:a=4;break;case Zl.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==uN.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<r;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,a=this.offset+this.byteOffset;if(a+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Zl.GREYSCALE:case Zl.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case Zl.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const a=this.readByte();this._palette[r].push(a)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Zl.UNKNOWN:case Zl.GREYSCALE_ALPHA:case Zl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=qz(this),a=this.readUint8();if(a!==uN.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:JNe(s)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),a=this.readByte();this._png.resolution={x:t,y:r,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(t);if(a){if(a.data=NO({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)r.data=a.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(a,s,r),this.addFrameDataToCanvas(r,a)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,a){switch(t.disposeOp){case ny.NONE:break;case ny.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const l=(s*t.width+i)*this._png.channels;for(let o=0;o<this._png.channels;o++)a.data[l+o]=0}break;case ny.PREVIOUS:a.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const a=1<<this._png.depth,s=(i,l)=>{const o=((i+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,d=(i*r.width+l)*this._png.channels;return{index:o,frameIndex:d}};switch(r.blendOp){case fN.SOURCE:for(let i=0;i<r.height;i++)for(let l=0;l<r.width;l++){const{index:o,frameIndex:d}=s(i,l);for(let u=0;u<this._png.channels;u++)t.data[o+u]=r.data[d+u]}break;case fN.OVER:for(let i=0;i<r.height;i++)for(let l=0;l<r.width;l++){const{index:o,frameIndex:d}=s(i,l);for(let u=0;u<this._png.channels;u++){const f=r.data[d+this._png.channels-1]/a,m=u%(this._png.channels-1)===0?1:r.data[d+u],g=Math.floor(f*m+(1-f)*t.data[o+u]);t.data[o+u]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==SO.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===dN.NO_INTERLACE)this._png.data=NO({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===dN.ADAM7)this._png.data=l_e({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ny.NONE,blendOp:fN.SOURCE,data:t}),this._inflator=new bO,this._writingDataChunks=!1}}function N_e(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var kO;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(kO||(kO={}));function __e(e,t){return new j_e(e,t).decode()}var yr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function hN(){yr.console&&typeof yr.console.log=="function"&&yr.console.log.apply(yr.console,arguments)}var Ka={log:hN,warn:function(e){yr.console&&(typeof yr.console.warn=="function"?yr.console.warn.apply(yr.console,arguments):hN.call(null,arguments))},error:function(e){yr.console&&(typeof yr.console.error=="function"?yr.console.error.apply(yr.console,arguments):hN(e))}};function mN(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){q0(a.response,t,r)},a.onerror=function(){Ka.error("could not download file")},a.send()}function AO(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function sy(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var q0=yr.saveAs||((typeof window>"u"?"undefined":Da(window))!=="object"||window!==yr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=yr.URL||yr.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?AO(s.href)?mN(e,t,r):sy(s,s.target="_blank"):sy(s)):(s.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(s.href)},4e4),setTimeout(function(){sy(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(AO(e))mN(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){sy(a)})}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Da(i)!=="object"&&(Ka.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return mN(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(yr.HTMLElement)||yr.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&i)&&(typeof FileReader>"u"?"undefined":Da(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=l?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=f:location=f,a=null},o.readAsDataURL(e)}else{var d=yr.URL||yr.webkitURL,u=d.createObjectURL(e);a?a.location=u:location.href=u,a=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $z(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,l=s.exec(e);l&&(t=i(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),d=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),"#"+o+d+u}}var vy=yr.atob.bind(yr),CO=yr.btoa.bind(yr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pN(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=_i(r,a,s,i,t[0],7,-680876936),i=_i(i,r,a,s,t[1],12,-389564586),s=_i(s,i,r,a,t[2],17,606105819),a=_i(a,s,i,r,t[3],22,-1044525330),r=_i(r,a,s,i,t[4],7,-176418897),i=_i(i,r,a,s,t[5],12,1200080426),s=_i(s,i,r,a,t[6],17,-1473231341),a=_i(a,s,i,r,t[7],22,-45705983),r=_i(r,a,s,i,t[8],7,1770035416),i=_i(i,r,a,s,t[9],12,-1958414417),s=_i(s,i,r,a,t[10],17,-42063),a=_i(a,s,i,r,t[11],22,-1990404162),r=_i(r,a,s,i,t[12],7,1804603682),i=_i(i,r,a,s,t[13],12,-40341101),s=_i(s,i,r,a,t[14],17,-1502002290),r=Si(r,a=_i(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Si(i,r,a,s,t[6],9,-1069501632),s=Si(s,i,r,a,t[11],14,643717713),a=Si(a,s,i,r,t[0],20,-373897302),r=Si(r,a,s,i,t[5],5,-701558691),i=Si(i,r,a,s,t[10],9,38016083),s=Si(s,i,r,a,t[15],14,-660478335),a=Si(a,s,i,r,t[4],20,-405537848),r=Si(r,a,s,i,t[9],5,568446438),i=Si(i,r,a,s,t[14],9,-1019803690),s=Si(s,i,r,a,t[3],14,-187363961),a=Si(a,s,i,r,t[8],20,1163531501),r=Si(r,a,s,i,t[13],5,-1444681467),i=Si(i,r,a,s,t[2],9,-51403784),s=Si(s,i,r,a,t[7],14,1735328473),r=ki(r,a=Si(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=ki(i,r,a,s,t[8],11,-2022574463),s=ki(s,i,r,a,t[11],16,1839030562),a=ki(a,s,i,r,t[14],23,-35309556),r=ki(r,a,s,i,t[1],4,-1530992060),i=ki(i,r,a,s,t[4],11,1272893353),s=ki(s,i,r,a,t[7],16,-155497632),a=ki(a,s,i,r,t[10],23,-1094730640),r=ki(r,a,s,i,t[13],4,681279174),i=ki(i,r,a,s,t[0],11,-358537222),s=ki(s,i,r,a,t[3],16,-722521979),a=ki(a,s,i,r,t[6],23,76029189),r=ki(r,a,s,i,t[9],4,-640364487),i=ki(i,r,a,s,t[12],11,-421815835),s=ki(s,i,r,a,t[15],16,530742520),r=Ai(r,a=ki(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Ai(i,r,a,s,t[7],10,1126891415),s=Ai(s,i,r,a,t[14],15,-1416354905),a=Ai(a,s,i,r,t[5],21,-57434055),r=Ai(r,a,s,i,t[12],6,1700485571),i=Ai(i,r,a,s,t[3],10,-1894986606),s=Ai(s,i,r,a,t[10],15,-1051523),a=Ai(a,s,i,r,t[1],21,-2054922799),r=Ai(r,a,s,i,t[8],6,1873313359),i=Ai(i,r,a,s,t[15],10,-30611744),s=Ai(s,i,r,a,t[6],15,-1560198380),a=Ai(a,s,i,r,t[13],21,1309151649),r=Ai(r,a,s,i,t[4],6,-145523070),i=Ai(i,r,a,s,t[11],10,-1120210379),s=Ai(s,i,r,a,t[2],15,718787259),a=Ai(a,s,i,r,t[9],21,-343485551),e[0]=Uf(r,e[0]),e[1]=Uf(a,e[1]),e[2]=Uf(s,e[2]),e[3]=Uf(i,e[3])}function B2(e,t,r,a,s,i){return t=Uf(Uf(t,e),Uf(a,i)),Uf(t<<s|t>>>32-s,r)}function _i(e,t,r,a,s,i,l){return B2(t&r|~t&a,e,t,s,i,l)}function Si(e,t,r,a,s,i,l){return B2(t&a|r&~a,e,t,s,i,l)}function ki(e,t,r,a,s,i,l){return B2(t^r^a,e,t,s,i,l)}function Ai(e,t,r,a,s,i,l){return B2(r^(t|~a),e,t,s,i,l)}function Hz(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)pN(a,S_e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(pN(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,pN(a,s),a}function S_e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var EO="0123456789abcdef".split("");function k_e(e){for(var t="",r=0;r<4;r++)t+=EO[e>>8*r+4&15]+EO[e>>8*r&15];return t}function A_e(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function n4(e){return Hz(e).map(A_e).join("")}var C_e=(function(e){for(var t=0;t<e.length;t++)e[t]=k_e(e[t]);return e.join("")})(Hz("hello"))!="5d41402abc4b2a76b9719d911017c592";function Uf(e,t){if(C_e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function s4(e,t){var r,a,s,i;if(e!==r){for(var l=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),o=[],d=0;d<256;d++)o[d]=d;var u=0;for(d=0;d<256;d++){var f=o[d];u=(u+f+l.charCodeAt(d))%256,o[d]=o[u],o[u]=f}r=e,a=o}else o=a;var m=t.length,g=0,x=0,b="";for(d=0;d<m;d++)x=(x+(f=o[g=(g+1)%256]))%256,o[g]=o[x],o[x]=f,l=o[(o[g]+o[x])%256],b+=String.fromCharCode(t.charCodeAt(d)^l);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var TO={print:4,modify:8,copy:16,"annot-forms":32};function $m(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach(function(o){if(TO.perm!==void 0)throw new Error("Invalid permission: "+o);s+=TO[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^s)),this.encryptionKey=n4(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=s4(this.encryptionKey,this.padding)}function Hm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[a]}return t}function DO(e){if(Da(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var l=t[r][i];try{l[0].apply(e,a)}catch(o){yr.console&&Ka.error("jsPDF PubSub Error",o.message,o)}l[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Db(e){if(!(this instanceof Db))return new Db(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Vz(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function H0(e,t,r,a,s){if(!(this instanceof H0))return new H0(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Vz.call(this,a,s)}function Km(e,t,r,a,s){if(!(this instanceof Km))return new Km(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Vz.call(this,a,s)}function Qt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],l=[],o=1,d=16,u="S",f=null;Da(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),u=e.defaultPathOperation||"S"),l=e.filters||(i===!0?["FlateEncode"]:l),a=a||"mm",r=(""+(r||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,g={},x={internal:{},__private__:{}};x.__private__.PubSub=DO;var b="1.3",v=x.__private__.getPdfVersion=function(){return b};x.__private__.setPdfVersion=function(B){b=B};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return y};var j=x.__private__.getPageFormat=function(B){return y[B]};s=s||"a4";var S="compat",N="advanced",C=S;function T(){this.saveGraphicsState(),ve(new Jt(wt,0,0,-wt,0,dc()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",C=N}function P(){this.restoreGraphicsState(),u="S",C=S}var D=x.__private__.combineFontStyleAndFontWeight=function(B,re){if(B=="bold"&&re=="normal"||B=="bold"&&re==400||B=="normal"&&re=="italic"||B=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(B=re==400||re==="normal"?B==="italic"?"italic":"normal":re!=700&&re!=="bold"||B!=="normal"?(re==700?"bold":re)+""+B:"bold"),B};x.advancedAPI=function(B){var re=C===S;return re&&T.call(this),typeof B!="function"||(B(this),re&&P.call(this)),this},x.compatAPI=function(B){var re=C===N;return re&&P.call(this),typeof B!="function"||(B(this),re&&T.call(this)),this},x.isAdvancedAPI=function(){return C===N};var M,F=function(B){if(C!==N)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},H=x.roundToPrecision=x.__private__.roundToPrecision=function(B,re){var _e=t||re;if(isNaN(B)||isNaN(_e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(_e).replace(/0+$/,"")};M=x.hpf=x.__private__.hpf=typeof d=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return H(B,d)}:d==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return H(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return H(B,16)};var L=x.f2=x.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return H(B,2)},z=x.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return H(B,3)},V=x.scale=x.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return C===S?B*wt:C===N?B:void 0},G=function(B){return V((function(re){return C===S?dc()-re:C===N?re:void 0})(B))};x.__private__.setPrecision=x.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(t=parseInt(B,10))};var ie,Z="00000000000000000000000000000000",X=x.__private__.getFileId=function(){return Z},he=x.__private__.setFileId=function(B){return Z=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Sn=new $m(f.userPermissions,f.userPassword,f.ownerPassword,Z)),Z};x.setFileId=function(B){return he(B),this},x.getFileId=function(){return X()};var ce=x.__private__.convertDateToPDFDate=function(B){var re=B.getTimezoneOffset(),_e=re<0?"+":"-",Ee=Math.floor(Math.abs(re/60)),Le=Math.abs(re%60),it=[_e,q(Ee),"'",q(Le),"'"].join("");return["D:",B.getFullYear(),q(B.getMonth()+1),q(B.getDate()),q(B.getHours()),q(B.getMinutes()),q(B.getSeconds()),it].join("")},ke=x.__private__.convertPDFDateToDate=function(B){var re=parseInt(B.substr(2,4),10),_e=parseInt(B.substr(6,2),10)-1,Ee=parseInt(B.substr(8,2),10),Le=parseInt(B.substr(10,2),10),it=parseInt(B.substr(12,2),10),ht=parseInt(B.substr(14,2),10);return new Date(re,_e,Ee,Le,it,ht,0)},se=x.__private__.setCreationDate=function(B){var re;if(B===void 0&&(B=new Date),B instanceof Date)re=ce(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=B}return ie=re},R=x.__private__.getCreationDate=function(B){var re=ie;return B==="jsDate"&&(re=ke(ie)),re};x.setCreationDate=function(B){return se(B),this},x.getCreationDate=function(B){return R(B)};var I,q=x.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},K=x.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},te=0,J=[],Q=[],ne=0,ye=[],De=[],ee=!1,Je=Q;x.__private__.setCustomOutputDestination=function(B){ee=!0,Je=B};var Oe=function(B){ee||(Je=B)};x.__private__.resetCustomOutputDestination=function(){ee=!1,Je=Q};var ve=x.__private__.out=function(B){return B=B.toString(),ne+=B.length+1,Je.push(B),Je},pt=x.__private__.write=function(B){return ve(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},et=x.__private__.getArrayBuffer=function(B){for(var re=B.length,_e=new ArrayBuffer(re),Ee=new Uint8Array(_e);re--;)Ee[re]=B.charCodeAt(re);return _e},Nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Nt};var ot=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(B){return ot=C===N?B/wt:B,this};var Ie,ge=x.__private__.getFontSize=x.getFontSize=function(){return C===S?ot:ot*wt},Te=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(B){return Te=B,this},x.__private__.getR2L=x.getR2L=function(){return Te};var qe,xt=x.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))Ie=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');Ie=B}else Ie=parseInt(B,10)};x.__private__.getZoomMode=function(){return Ie};var gt,Mt=x.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');qe=B};x.__private__.getPageMode=function(){return qe};var mr=x.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');gt=B};x.__private__.getLayoutMode=function(){return gt},x.__private__.setDisplayMode=x.setDisplayMode=function(B,re,_e){return xt(B),mr(re),Mt(_e),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(B){if(Object.keys(Pt).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[B]},x.__private__.getDocumentProperties=function(){return Pt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(B){for(var re in Pt)Pt.hasOwnProperty(re)&&B[re]&&(Pt[re]=B[re]);return this},x.__private__.setDocumentProperty=function(B,re){if(Object.keys(Pt).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[B]=re};var Rt,wt,Ct,ur,Lt,Dt={},tr={},wr=[],ir={},Lr={},pr={},_a={},Xa=null,ea=0,Zt=[],$r=new DO(x),Bi=e.hotfixes||[],ls={},ul={},vi=[],Jt=function B(re,_e,Ee,Le,it,ht){if(!(this instanceof B))return new B(re,_e,Ee,Le,it,ht);isNaN(re)&&(re=1),isNaN(_e)&&(_e=0),isNaN(Ee)&&(Ee=0),isNaN(Le)&&(Le=1),isNaN(it)&&(it=0),isNaN(ht)&&(ht=0),this._matrix=[re,_e,Ee,Le,it,ht]};Object.defineProperty(Jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Jt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(B)},Jt.prototype.multiply=function(B){var re=B.sx*this.sx+B.shy*this.shx,_e=B.sx*this.shy+B.shy*this.sy,Ee=B.shx*this.sx+B.sy*this.shx,Le=B.shx*this.shy+B.sy*this.sy,it=B.tx*this.sx+B.ty*this.shx+this.tx,ht=B.tx*this.shy+B.ty*this.sy+this.ty;return new Jt(re,_e,Ee,Le,it,ht)},Jt.prototype.decompose=function(){var B=this.sx,re=this.shy,_e=this.shx,Ee=this.sy,Le=this.tx,it=this.ty,ht=Math.sqrt(B*B+re*re),Ht=(B/=ht)*_e+(re/=ht)*Ee;_e-=B*Ht,Ee-=re*Ht;var Yt=Math.sqrt(_e*_e+Ee*Ee);return Ht/=Yt,B*(Ee/=Yt)<re*(_e/=Yt)&&(B=-B,re=-re,Ht=-Ht,ht=-ht),{scale:new Jt(ht,0,0,Yt,0,0),translate:new Jt(1,0,0,1,Le,it),rotate:new Jt(B,re,-re,B,0,0),skew:new Jt(1,0,Ht,1,0,0)}},Jt.prototype.toString=function(B){return this.join(" ")},Jt.prototype.inversed=function(){var B=this.sx,re=this.shy,_e=this.shx,Ee=this.sy,Le=this.tx,it=this.ty,ht=1/(B*Ee-re*_e),Ht=Ee*ht,Yt=-re*ht,dr=-_e*ht,br=B*ht;return new Jt(Ht,Yt,dr,br,-Ht*Le-dr*it,-Yt*Le-br*it)},Jt.prototype.applyToPoint=function(B){var re=B.x*this.sx+B.y*this.shx+this.tx,_e=B.x*this.shy+B.y*this.sy+this.ty;return new bo(re,_e)},Jt.prototype.applyToRectangle=function(B){var re=this.applyToPoint(B),_e=this.applyToPoint(new bo(B.x+B.w,B.y+B.h));return new oc(re.x,re.y,_e.x-re.x,_e.y-re.y)},Jt.prototype.clone=function(){var B=this.sx,re=this.shy,_e=this.shx,Ee=this.sy,Le=this.tx,it=this.ty;return new Jt(B,re,_e,Ee,Le,it)},x.Matrix=Jt;var Bl=x.matrixMult=function(B,re){return re.multiply(B)},dl=new Jt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=dl;var ys=function(B,re){if(!Lr[B]){var _e=(re instanceof H0?"Sh":"P")+(Object.keys(ir).length+1).toString(10);re.id=_e,Lr[B]=_e,ir[_e]=re,$r.publish("addPattern",re)}};x.ShadingPattern=H0,x.TilingPattern=Km,x.addShadingPattern=function(B,re){return F("addShadingPattern()"),ys(B,re),this},x.beginTilingPattern=function(B){F("beginTilingPattern()"),qu(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},x.endTilingPattern=function(B,re){F("endTilingPattern()"),re.stream=De[I].join(`
`),ys(B,re),$r.publish("endTilingPattern",re),vi.pop().restore()};var Js,Pa=x.__private__.newObject=function(){var B=un();return le(B,!0),B},un=x.__private__.newObjectDeferred=function(){return te++,J[te]=function(){return ne},te},le=function(B,re){return re=typeof re=="boolean"&&re,J[B]=ne,re&&ve(B+" 0 obj"),B},Ne=x.__private__.newAdditionalObject=function(){var B={objId:un(),content:""};return ye.push(B),B},me=un(),pe=un(),be=x.__private__.decodeColorString=function(B){var re=B.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length!==5||re[4]!=="k"&&re[4]!=="K"||(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var _e=parseFloat(re[0]);re=[_e,_e,_e,"r"]}for(var Ee="#",Le=0;Le<3;Le++)Ee+=("0"+Math.floor(255*parseFloat(re[Le])).toString(16)).slice(-2);return Ee},Se=x.__private__.encodeColorString=function(B){var re;typeof B=="string"&&(B={ch1:B});var _e=B.ch1,Ee=B.ch2,Le=B.ch3,it=B.ch4,ht=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof _e=="string"&&_e.charAt(0)!=="#"){var Ht=new $z(_e);if(Ht.ok)_e=Ht.toHex();else if(!/^\d*\.?\d*$/.test(_e))throw new Error('Invalid color "'+_e+'" passed to jsPDF.encodeColorString.')}if(typeof _e=="string"&&/^#[0-9A-Fa-f]{3}$/.test(_e)&&(_e="#"+_e[1]+_e[1]+_e[2]+_e[2]+_e[3]+_e[3]),typeof _e=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_e)){var Yt=parseInt(_e.substr(1),16);_e=Yt>>16&255,Ee=Yt>>8&255,Le=255&Yt}if(Ee===void 0||it===void 0&&_e===Ee&&Ee===Le)re=typeof _e=="string"?_e+" "+ht[0]:B.precision===2?L(_e/255)+" "+ht[0]:z(_e/255)+" "+ht[0];else if(it===void 0||Da(it)==="object"){if(it&&!isNaN(it.a)&&it.a===0)return["1.","1.","1.",ht[1]].join(" ");re=typeof _e=="string"?[_e,Ee,Le,ht[1]].join(" "):B.precision===2?[L(_e/255),L(Ee/255),L(Le/255),ht[1]].join(" "):[z(_e/255),z(Ee/255),z(Le/255),ht[1]].join(" ")}else re=typeof _e=="string"?[_e,Ee,Le,it,ht[2]].join(" "):B.precision===2?[L(_e),L(Ee),L(Le),L(it),ht[2]].join(" "):[z(_e),z(Ee),z(Le),z(it),ht[2]].join(" ");return re},ze=x.__private__.getFilters=function(){return l},tt=x.__private__.putStream=function(B){var re=(B=B||{}).data||"",_e=B.filters||ze(),Ee=B.alreadyAppliedFilters||[],Le=B.addLength1||!1,it=re.length,ht=B.objectId,Ht=function(Gn){return Gn};if(f!==null&&ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Ht=Sn.encryptor(ht,0));var Yt={};_e===!0&&(_e=["FlateEncode"]);var dr=B.additionalKeyValues||[],br=(Yt=Qt.API.processDataByFilters!==void 0?Qt.API.processDataByFilters(re,_e):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Ee)?Ee.join(" "):Ee.toString());if(Yt.data.length!==0&&(dr.push({key:"Length",value:Yt.data.length}),Le===!0&&dr.push({key:"Length1",value:it})),br.length!=0)if(br.split("/").length-1==1)dr.push({key:"Filter",value:br});else{dr.push({key:"Filter",value:"["+br+"]"});for(var ia=0;ia<dr.length;ia+=1)if(dr[ia].key==="DecodeParms"){for(var Ja=[],kn=0;kn<Yt.reverseChain.split("/").length-1;kn+=1)Ja.push("null");Ja.push(dr[ia].value),dr[ia].value="["+Ja.join(" ")+"]"}}ve("<<");for(var Ma=0;Ma<dr.length;Ma++)ve("/"+dr[Ma].key+" "+dr[Ma].value);ve(">>"),Yt.data.length!==0&&(ve("stream"),ve(Ht(Yt.data)),ve("endstream"))},$e=x.__private__.putPage=function(B){var re=B.number,_e=B.data,Ee=B.objId,Le=B.contentsObjId;le(Ee,!0),ve("<</Type /Page"),ve("/Parent "+B.rootDictionaryObjId+" 0 R"),ve("/Resources "+B.resourceDictionaryObjId+" 0 R"),ve("/MediaBox ["+parseFloat(M(B.mediaBox.bottomLeftX))+" "+parseFloat(M(B.mediaBox.bottomLeftY))+" "+M(B.mediaBox.topRightX)+" "+M(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ve("/CropBox ["+M(B.cropBox.bottomLeftX)+" "+M(B.cropBox.bottomLeftY)+" "+M(B.cropBox.topRightX)+" "+M(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ve("/BleedBox ["+M(B.bleedBox.bottomLeftX)+" "+M(B.bleedBox.bottomLeftY)+" "+M(B.bleedBox.topRightX)+" "+M(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ve("/TrimBox ["+M(B.trimBox.bottomLeftX)+" "+M(B.trimBox.bottomLeftY)+" "+M(B.trimBox.topRightX)+" "+M(B.trimBox.topRightY)+"]"),B.artBox!==null&&ve("/ArtBox ["+M(B.artBox.bottomLeftX)+" "+M(B.artBox.bottomLeftY)+" "+M(B.artBox.topRightX)+" "+M(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ve("/UserUnit "+B.userUnit),$r.publish("putPage",{objId:Ee,pageContext:Zt[re],pageNumber:re,page:_e}),ve("/Contents "+Le+" 0 R"),ve(">>"),ve("endobj");var it=_e.join(`
`);return C===N&&(it+=`
Q`),le(Le,!0),tt({data:it,filters:ze(),objectId:Le}),ve("endobj"),Ee},He=x.__private__.putPages=function(){var B,re,_e=[];for(B=1;B<=ea;B++)Zt[B].objId=un(),Zt[B].contentsObjId=un();for(B=1;B<=ea;B++)_e.push($e({number:B,data:De[B],objId:Zt[B].objId,contentsObjId:Zt[B].contentsObjId,mediaBox:Zt[B].mediaBox,cropBox:Zt[B].cropBox,bleedBox:Zt[B].bleedBox,trimBox:Zt[B].trimBox,artBox:Zt[B].artBox,userUnit:Zt[B].userUnit,rootDictionaryObjId:me,resourceDictionaryObjId:pe}));le(me,!0),ve("<</Type /Pages");var Ee="/Kids [";for(re=0;re<ea;re++)Ee+=_e[re]+" 0 R ";ve(Ee+"]"),ve("/Count "+ea),ve(">>"),ve("endobj"),$r.publish("postPutPages")},We=function(B){$r.publish("putFont",{font:B,out:ve,newObject:Pa,putStream:tt}),B.isAlreadyPutted!==!0&&(B.objectNumber=Pa(),ve("<<"),ve("/Type /Font"),ve("/BaseFont /"+Hm(B.postScriptName)),ve("/Subtype /Type1"),typeof B.encoding=="string"&&ve("/Encoding /"+B.encoding),ve("/FirstChar 32"),ve("/LastChar 255"),ve(">>"),ve("endobj"))},vt=function(B){B.objectNumber=Pa();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[M(B.x),M(B.y),M(B.x+B.width),M(B.y+B.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var _e=B.pages[1].join(`
`);tt({data:_e,additionalKeyValues:re,objectId:B.objectNumber}),ve("endobj")},jt=function(B,re){re||(re=21);var _e=Pa(),Ee=(function(ht,Ht){var Yt,dr=[],br=1/(Ht-1);for(Yt=0;Yt<1;Yt+=br)dr.push(Yt);if(dr.push(1),ht[0].offset!=0){var ia={offset:0,color:ht[0].color};ht.unshift(ia)}if(ht[ht.length-1].offset!=1){var Ja={offset:1,color:ht[ht.length-1].color};ht.push(Ja)}for(var kn="",Ma=0,Gn=0;Gn<dr.length;Gn++){for(Yt=dr[Gn];Yt>ht[Ma+1].offset;)Ma++;var Mn=ht[Ma].offset,ws=(Yt-Mn)/(ht[Ma+1].offset-Mn),hl=ht[Ma].color,yi=ht[Ma+1].color;kn+=K(Math.round((1-ws)*hl[0]+ws*yi[0]).toString(16))+K(Math.round((1-ws)*hl[1]+ws*yi[1]).toString(16))+K(Math.round((1-ws)*hl[2]+ws*yi[2]).toString(16))}return kn.trim()})(B.colors,re),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+re+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt({data:Ee,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:_e}),ve("endobj"),B.objectNumber=Pa(),ve("<< /ShadingType "+B.type),ve("/ColorSpace /DeviceRGB");var it="/Coords ["+M(parseFloat(B.coords[0]))+" "+M(parseFloat(B.coords[1]))+" ";B.type===2?it+=M(parseFloat(B.coords[2]))+" "+M(parseFloat(B.coords[3])):it+=M(parseFloat(B.coords[2]))+" "+M(parseFloat(B.coords[3]))+" "+M(parseFloat(B.coords[4]))+" "+M(parseFloat(B.coords[5])),ve(it+="]"),B.matrix&&ve("/Matrix ["+B.matrix.toString()+"]"),ve("/Function "+_e+" 0 R"),ve("/Extend [true true]"),ve(">>"),ve("endobj")},Ot=function(B,re){var _e=un(),Ee=Pa();re.push({resourcesOid:_e,objectOid:Ee}),B.objectNumber=Ee;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+B.boundingBox.map(M).join(" ")+"]"}),Le.push({key:"XStep",value:M(B.xStep)}),Le.push({key:"YStep",value:M(B.yStep)}),Le.push({key:"Resources",value:_e+" 0 R"}),B.matrix&&Le.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),tt({data:B.stream,additionalKeyValues:Le,objectId:B.objectNumber}),ve("endobj")},bt=function(B){for(var re in B.objectNumber=Pa(),ve("<<"),B)switch(re){case"opacity":ve("/ca "+L(B[re]));break;case"stroke-opacity":ve("/CA "+L(B[re]))}ve(">>"),ve("endobj")},kt=function(B){le(B.resourcesOid,!0),ve("<<"),ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var re in ve("/Font <<"),Dt)Dt.hasOwnProperty(re)&&(m===!1||m===!0&&g.hasOwnProperty(re))&&ve("/"+re+" "+Dt[re].objectNumber+" 0 R");ve(">>")})(),(function(){if(Object.keys(ir).length>0){for(var re in ve("/Shading <<"),ir)ir.hasOwnProperty(re)&&ir[re]instanceof H0&&ir[re].objectNumber>=0&&ve("/"+re+" "+ir[re].objectNumber+" 0 R");$r.publish("putShadingPatternDict"),ve(">>")}})(),(function(re){if(Object.keys(ir).length>0){for(var _e in ve("/Pattern <<"),ir)ir.hasOwnProperty(_e)&&ir[_e]instanceof x.TilingPattern&&ir[_e].objectNumber>=0&&ir[_e].objectNumber<re&&ve("/"+_e+" "+ir[_e].objectNumber+" 0 R");$r.publish("putTilingPatternDict"),ve(">>")}})(B.objectOid),(function(){if(Object.keys(pr).length>0){var re;for(re in ve("/ExtGState <<"),pr)pr.hasOwnProperty(re)&&pr[re].objectNumber>=0&&ve("/"+re+" "+pr[re].objectNumber+" 0 R");$r.publish("putGStateDict"),ve(">>")}})(),(function(){for(var re in ve("/XObject <<"),ls)ls.hasOwnProperty(re)&&ls[re].objectNumber>=0&&ve("/"+re+" "+ls[re].objectNumber+" 0 R");$r.publish("putXobjectDict"),ve(">>")})(),ve(">>"),ve("endobj")},zt=function(B){tr[B.fontName]=tr[B.fontName]||{},tr[B.fontName][B.fontStyle]=B.id},xa=function(B,re,_e,Ee,Le){var it={id:"F"+(Object.keys(Dt).length+1).toString(10),postScriptName:B,fontName:re,fontStyle:_e,encoding:Ee,isStandardFont:Le||!1,metadata:{}};return $r.publish("addFont",{font:it,instance:this}),Dt[it.id]=it,zt(it),it.id},Br=x.__private__.pdfEscape=x.pdfEscape=function(B,re){return(function(_e,Ee){var Le,it,ht,Ht,Yt,dr,br,ia,Ja;if(ht=(Ee=Ee||{}).sourceEncoding||"Unicode",Yt=Ee.outputEncoding,(Ee.autoencode||Yt)&&Dt[Rt].metadata&&Dt[Rt].metadata[ht]&&Dt[Rt].metadata[ht].encoding&&(Ht=Dt[Rt].metadata[ht].encoding,!Yt&&Dt[Rt].encoding&&(Yt=Dt[Rt].encoding),!Yt&&Ht.codePages&&(Yt=Ht.codePages[0]),typeof Yt=="string"&&(Yt=Ht[Yt]),Yt)){for(br=!1,dr=[],Le=0,it=_e.length;Le<it;Le++)(ia=Yt[_e.charCodeAt(Le)])?dr.push(String.fromCharCode(ia)):dr.push(_e[Le]),dr[Le].charCodeAt(0)>>8&&(br=!0);_e=dr.join("")}for(Le=_e.length;br===void 0&&Le!==0;)_e.charCodeAt(Le-1)>>8&&(br=!0),Le--;if(!br)return _e;for(dr=Ee.noBOM?[]:[254,255],Le=0,it=_e.length;Le<it;Le++){if((Ja=(ia=_e.charCodeAt(Le))>>8)>>8)throw new Error("Character at position "+Le+" of string '"+_e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dr.push(Ja),dr.push(ia-(Ja<<8))}return String.fromCharCode.apply(void 0,dr)})(B,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ja=x.__private__.beginPage=function(B){De[++ea]=[],Zt[ea]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Ul(ea),Oe(De[I])},ei=function(B,re){var _e,Ee,Le;switch(r=re||r,typeof B=="string"&&(_e=j(B.toLowerCase()),Array.isArray(_e)&&(Ee=_e[0],Le=_e[1])),Array.isArray(B)&&(Ee=B[0]*wt,Le=B[1]*wt),isNaN(Ee)&&(Ee=s[0],Le=s[1]),(Ee>14400||Le>14400)&&(Ka.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ee=Math.min(14400,Ee),Le=Math.min(14400,Le)),s=[Ee,Le],r.substr(0,1)){case"l":Le>Ee&&(s=[Le,Ee]);break;case"p":Ee>Le&&(s=[Le,Ee])}ja(s),Zc(Iu),ve($i),Qd!==0&&ve(Qd+" J"),os!==0&&ve(os+" j"),$r.publish("addPage",{pageNumber:ea})},zl=function(B){B>0&&B<=ea&&(De.splice(B,1),Zt.splice(B,1),ea--,I>ea&&(I=ea),this.setPage(I))},Ul=function(B){B>0&&B<=ea&&(I=B)},zi=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return De.length-1},Qc=function(B,re,_e){var Ee,Le=void 0;return _e=_e||{},B=B!==void 0?B:Dt[Rt].fontName,re=re!==void 0?re:Dt[Rt].fontStyle,Ee=B.toLowerCase(),tr[Ee]!==void 0&&tr[Ee][re]!==void 0?Le=tr[Ee][re]:tr[B]!==void 0&&tr[B][re]!==void 0?Le=tr[B][re]:_e.disableWarning===!1&&Ka.warn("Unable to look up font label for font '"+B+"', '"+re+"'. Refer to getFontList() for available fonts."),Le||_e.noFallback||(Le=tr.times[re])==null&&(Le=tr.times.normal),Le},Kn=x.__private__.putInfo=function(){var B=Pa(),re=function(Ee){return Ee};for(var _e in f!==null&&(re=Sn.encryptor(B,0)),ve("<<"),ve("/Producer ("+Br(re("jsPDF "+Qt.version))+")"),Pt)Pt.hasOwnProperty(_e)&&Pt[_e]&&ve("/"+_e.substr(0,1).toUpperCase()+_e.substr(1)+" ("+Br(re(Pt[_e]))+")");ve("/CreationDate ("+Br(re(ie))+")"),ve(">>"),ve("endobj")},Yd=x.__private__.putCatalog=function(B){var re=(B=B||{}).rootDictionaryObjId||me;switch(Pa(),ve("<<"),ve("/Type /Catalog"),ve("/Pages "+re+" 0 R"),Ie||(Ie="fullwidth"),Ie){case"fullwidth":ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ve("/OpenAction [3 0 R /Fit]");break;case"original":ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var _e=""+Ie;_e.substr(_e.length-1)==="%"&&(Ie=parseInt(Ie)/100),typeof Ie=="number"&&ve("/OpenAction [3 0 R /XYZ null null "+L(Ie)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":ve("/PageLayout /OneColumn");break;case"single":ve("/PageLayout /SinglePage");break;case"two":case"twoleft":ve("/PageLayout /TwoColumnLeft");break;case"tworight":ve("/PageLayout /TwoColumnRight")}qe&&ve("/PageMode /"+qe),$r.publish("putCatalog"),ve(">>"),ve("endobj")},Na=x.__private__.putTrailer=function(){ve("trailer"),ve("<<"),ve("/Size "+(te+1)),ve("/Root "+te+" 0 R"),ve("/Info "+(te-1)+" 0 R"),f!==null&&ve("/Encrypt "+Sn.oid+" 0 R"),ve("/ID [ <"+Z+"> <"+Z+"> ]"),ve(">>")},ti=x.__private__.putHeader=function(){ve("%PDF-"+b),ve("%")},f0=x.__private__.putXRef=function(){var B="0000000000";ve("xref"),ve("0 "+(te+1)),ve("0000000000 65535 f ");for(var re=1;re<=te;re++)typeof J[re]=="function"?ve((B+J[re]()).slice(-10)+" 00000 n "):J[re]!==void 0?ve((B+J[re]).slice(-10)+" 00000 n "):ve("0000000000 00000 n ")},nc=x.__private__.buildDocument=function(){var B;te=0,ne=0,Q=[],J=[],ye=[],me=un(),pe=un(),Oe(Q),$r.publish("buildDocument"),ti(),He(),(function(){$r.publish("putAdditionalObjects");for(var _e=0;_e<ye.length;_e++){var Ee=ye[_e];le(Ee.objId,!0),ve(Ee.content),ve("endobj")}$r.publish("postPutAdditionalObjects")})(),B=[],(function(){for(var _e in Dt)Dt.hasOwnProperty(_e)&&(m===!1||m===!0&&g.hasOwnProperty(_e))&&We(Dt[_e])})(),(function(){var _e;for(_e in pr)pr.hasOwnProperty(_e)&&bt(pr[_e])})(),(function(){for(var _e in ls)ls.hasOwnProperty(_e)&&vt(ls[_e])})(),(function(_e){var Ee;for(Ee in ir)ir.hasOwnProperty(Ee)&&(ir[Ee]instanceof H0?jt(ir[Ee]):ir[Ee]instanceof Km&&Ot(ir[Ee],_e))})(B),$r.publish("putResources"),B.forEach(kt),kt({resourcesOid:pe,objectOid:Number.MAX_SAFE_INTEGER}),$r.publish("postPutResources"),f!==null&&(Sn.oid=Pa(),ve("<<"),ve("/Filter /Standard"),ve("/V "+Sn.v),ve("/R "+Sn.r),ve("/U <"+Sn.toHexString(Sn.U)+">"),ve("/O <"+Sn.toHexString(Sn.O)+">"),ve("/P "+Sn.P),ve(">>"),ve("endobj")),Kn(),Yd();var re=ne;return f0(),Na(),ve("startxref"),ve(""+re),ve("%%EOF"),Oe(De[I]),Q.join(`
`)},sc=x.__private__.getBlob=function(B){return new Blob([et(B)],{type:"application/pdf"})},fl=x.output=x.__private__.output=(Js=function(B,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",B){case void 0:return nc();case"save":x.save(re.filename);break;case"arraybuffer":return et(nc());case"blob":return sc(nc());case"bloburi":case"bloburl":if(yr.URL!==void 0&&typeof yr.URL.createObjectURL=="function")return yr.URL&&yr.URL.createObjectURL(sc(nc()))||void 0;Ka.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var _e="",Ee=nc();try{_e=CO(Ee)}catch{_e=CO(unescape(encodeURIComponent(Ee)))}return"data:application/pdf;filename="+re.filename+";base64,"+_e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yr)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",it=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(Le=re.pdfObjectUrl,it="");var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+it+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",Ht=yr.open();return Ht!==null&&Ht.document.write(ht),Ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yr)==="[object Window]"){var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',dr=yr.open();if(dr!==null){dr.document.write(Yt);var br=this;dr.document.documentElement.querySelector("#pdfViewer").onload=function(){dr.document.title=re.filename,dr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(br.output("bloburl"))}}return dr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ia='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',Ja=yr.open();if(Ja!==null&&(Ja.document.write(ia),Ja.document.title=re.filename),Ja||typeof safari>"u")return Ja;break;case"datauri":case"dataurl":return yr.document.location.href=this.output("datauristring",re);default:return null}},Js.foo=function(){try{return Js.apply(this,arguments)}catch(_e){var B=_e.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var re="Error in function "+B.split(`
`)[0].split("<")[0]+": "+_e.message;if(!yr.console)throw new Error(re);yr.console.error(re,_e),yr.alert&&alert(re)}},Js.foo.bar=Js,Js.foo),vo=function(B){return Array.isArray(Bi)===!0&&Bi.indexOf(B)>-1};switch(a){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=vo("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);wt=a}var Sn=null;se(),he();var Bs=x.__private__.getPageInfo=x.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[B].objId,pageNumber:B,pageContext:Zt[B]}},h0=x.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in Zt)if(Zt[re].objId===B)break;return Bs(re)},zh=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Zt[I].objId,pageNumber:I,pageContext:Zt[I]}};x.addPage=function(){return ei.apply(this,arguments),this},x.setPage=function(){return Ul.apply(this,arguments),Oe.call(this,De[I]),this},x.insertPage=function(B){return this.addPage(),this.movePage(I,B),this},x.movePage=function(B,re){var _e,Ee;if(B>re){_e=De[B],Ee=Zt[B];for(var Le=B;Le>re;Le--)De[Le]=De[Le-1],Zt[Le]=Zt[Le-1];De[re]=_e,Zt[re]=Ee,this.setPage(re)}else if(B<re){_e=De[B],Ee=Zt[B];for(var it=B;it<re;it++)De[it]=De[it+1],Zt[it]=Zt[it+1];De[re]=_e,Zt[re]=Ee,this.setPage(re)}return this},x.deletePage=function(){return zl.apply(this,arguments),this},x.__private__.text=x.text=function(B,re,_e,Ee,Le){var it,ht,Ht,Yt,dr,br,ia,Ja,kn,Ma=(Ee=Ee||{}).scope||this;if(typeof B=="number"&&typeof re=="number"&&(typeof _e=="string"||Array.isArray(_e))){var Gn=_e;_e=re,re=B,B=Gn}if(arguments[3]instanceof Jt==0?(Ht=arguments[4],Yt=arguments[5],Da(ia=arguments[3])==="object"&&ia!==null||(typeof Ht=="string"&&(Yt=Ht,Ht=null),typeof ia=="string"&&(Yt=ia,ia=null),typeof ia=="number"&&(Ht=ia,ia=null),Ee={flags:ia,angle:Ht,align:Yt})):(F("The transform parameter of text() with a Matrix value"),kn=Le),isNaN(re)||isNaN(_e)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return Ma;var Mn,ws="",hl=typeof Ee.lineHeightFactor=="number"?Ee.lineHeightFactor:ic,yi=Ma.internal.scaleFactor;function Gh(la){return la=la.split("	").join(Array(Ee.TabLen||9).join(" ")),Br(la,ia)}function Jd(la){for(var Qr,La=la.concat(),Cn=[],Eo=La.length;Eo--;)typeof(Qr=La.shift())=="string"?Cn.push(Qr):Array.isArray(la)&&(Qr.length===1||Qr[1]===void 0&&Qr[2]===void 0)?Cn.push(Qr[0]):Cn.push([Qr[0],Qr[1],Qr[2]]);return Cn}function Hu(la,Qr){var La;if(typeof la=="string")La=Qr(la)[0];else if(Array.isArray(la)){for(var Cn,Eo,Kl=la.concat(),Ku=[],_0=Kl.length;_0--;)typeof(Cn=Kl.shift())=="string"?Ku.push(Qr(Cn)[0]):Array.isArray(Cn)&&typeof Cn[0]=="string"&&(Eo=Qr(Cn[0],Cn[1],Cn[2]),Ku.push([Eo[0],Eo[1],Eo[2]]));La=Ku}return La}var jo=!1,Hl=!0;if(typeof B=="string")jo=!0;else if(Array.isArray(B)){var Vu=B.concat();ht=[];for(var eu,js=Vu.length;js--;)(typeof(eu=Vu.shift())!="string"||Array.isArray(eu)&&typeof eu[0]!="string")&&(Hl=!1);jo=Hl}if(jo===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var tu=ot/Ma.internal.scaleFactor,ru=tu*(hl-1);switch(Ee.baseline){case"bottom":_e-=ru;break;case"top":_e+=tu-ru;break;case"hanging":_e+=tu-2*ru;break;case"middle":_e+=tu/2-ru}if((br=Ee.maxWidth||0)>0&&(typeof B=="string"?B=Ma.splitTextToSize(B,br):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(la,Qr){return la.concat(Ma.splitTextToSize(Qr,br))},[]))),it={text:B,x:re,y:_e,options:Ee,mutex:{pdfEscape:Br,activeFontKey:Rt,fonts:Dt,activeFontSize:ot}},$r.publish("preProcessText",it),B=it.text,Ht=(Ee=it.options).angle,kn instanceof Jt==0&&Ht&&typeof Ht=="number"){Ht*=Math.PI/180,Ee.rotationDirection===0&&(Ht=-Ht),C===N&&(Ht=-Ht);var ef=Math.cos(Ht),No=Math.sin(Ht);kn=new Jt(ef,No,-No,ef,0,0)}else Ht&&Ht instanceof Jt&&(kn=Ht);C!==N||kn||(kn=dl),(dr=Ee.charSpace||lc)!==void 0&&(ws+=M(V(dr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ja=Ee.horizontalScale)!==void 0&&(ws+=M(100*Ja)+` Tz
`),Ee.lang;var dn=-1,fc=Ee.renderingMode!==void 0?Ee.renderingMode:Ee.stroke,tf=Ma.internal.getCurrentPageInfo().pageContext;switch(fc){case 0:case!1:case"fill":dn=0;break;case 1:case!0:case"stroke":dn=1;break;case 2:case"fillThenStroke":dn=2;break;case 3:case"invisible":dn=3;break;case 4:case"fillAndAddForClipping":dn=4;break;case 5:case"strokeAndAddPathForClipping":dn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":dn=6;break;case 7:case"addToPathForClipping":dn=7}var j0=tf.usedRenderingMode!==void 0?tf.usedRenderingMode:-1;dn!==-1?ws+=dn+` Tr
`:j0!==-1&&(ws+=`0 Tr
`),dn!==-1&&(tf.usedRenderingMode=dn),Yt=Ee.align||"left";var Vi,Vl=ot*hl,hc=Ma.internal.pageSize.getWidth(),N0=Dt[Rt];dr=Ee.charSpace||lc,br=Ee.maxWidth||0,ia=Object.assign({autoencode:!0,noBOM:!0},Ee.flags);var Wl=[],au=function(la){return Ma.getStringUnitWidth(la,{font:N0,charSpace:dr,fontSize:ot,doKerning:!1})*ot/yi};if(Object.prototype.toString.call(B)==="[object Array]"){var bi;ht=Jd(B),Yt!=="left"&&(Vi=ht.map(au));var ai,_o=0;if(Yt==="right"){re-=Vi[0],B=[],js=ht.length;for(var So=0;So<js;So++)So===0?(ai=qi(re),bi=bs(_e)):(ai=V(_o-Vi[So]),bi=-Vl),B.push([ht[So],ai,bi]),_o=Vi[So]}else if(Yt==="center"){re-=Vi[0]/2,B=[],js=ht.length;for(var mc=0;mc<js;mc++)mc===0?(ai=qi(re),bi=bs(_e)):(ai=V((_o-Vi[mc])/2),bi=-Vl),B.push([ht[mc],ai,bi]),_o=Vi[mc]}else if(Yt==="left"){B=[],js=ht.length;for(var rf=0;rf<js;rf++)B.push(ht[rf])}else if(Yt==="justify"&&N0.encoding==="Identity-H"){B=[],js=ht.length,br=br!==0?br:hc;for(var af=0,An=0;An<js;An++)if(bi=An===0?bs(_e):-Vl,ai=An===0?qi(re):af,An<js-1){var Yh=V((br-Vi[An])/(ht[An].split(" ").length-1)),ko=ht[An].split(" ");B.push([ko[0]+" ",ai,bi]),af=0;for(var Ao=1;Ao<ko.length;Ao++){var Ns=(au(ko[Ao-1]+" "+ko[Ao])-au(ko[Ao]))*yi+Yh;Ao==ko.length-1?B.push([ko[Ao],Ns,0]):B.push([ko[Ao]+" ",Ns,0]),af-=Ns}}else B.push([ht[An],ai,bi]);B.push(["",af,0])}else{if(Yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],js=ht.length,br=br!==0?br:hc,An=0;An<js;An++){bi=An===0?bs(_e):-Vl,ai=An===0?qi(re):0;var pc=ht[An].split(" ").length-1,nf=pc>0?(br-Vi[An])/pc:0;An<js-1?Wl.push(M(V(nf))):Wl.push(0),B.push([ht[An],ai,bi])}}}(typeof Ee.R2L=="boolean"?Ee.R2L:Te)===!0&&(B=Hu(B,function(la,Qr,La){return[la.split("").reverse().join(""),Qr,La]})),it={text:B,x:re,y:_e,options:Ee,mutex:{pdfEscape:Br,activeFontKey:Rt,fonts:Dt,activeFontSize:ot}},$r.publish("postProcessText",it),B=it.text,Mn=it.mutex.isHex||!1;var sf=Dt[Rt].encoding;sf!=="WinAnsiEncoding"&&sf!=="StandardEncoding"||(B=Hu(B,function(la,Qr,La){return[Gh(la),Qr,La]})),ht=Jd(B),B=[];for(var xc,gc,Co,Wu=Array.isArray(ht[0])?1:0,Wi="",vc=function(la,Qr,La){var Cn="";return La instanceof Jt?(La=typeof Ee.angle=="number"?Bl(La,new Jt(1,0,0,1,la,Qr)):Bl(new Jt(1,0,0,1,la,Qr),La),C===N&&(La=Bl(new Jt(1,0,0,-1,0,0),La)),Cn=La.join(" ")+` Tm
`):Cn=M(la)+" "+M(Qr)+` Td
`,Cn},zs=0;zs<ht.length;zs++){switch(Wi="",Wu){case 1:Co=(Mn?"<":"(")+ht[zs][0]+(Mn?">":")"),xc=parseFloat(ht[zs][1]),gc=parseFloat(ht[zs][2]);break;case 0:Co=(Mn?"<":"(")+ht[zs]+(Mn?">":")"),xc=qi(re),gc=bs(_e)}Wl!==void 0&&Wl[zs]!==void 0&&(Wi=Wl[zs]+` Tw
`),zs===0?B.push(Wi+vc(xc,gc,kn)+Co):Wu===0?B.push(Wi+Co):Wu===1&&B.push(Wi+vc(xc,gc,kn)+Co)}B=Wu===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var ml=`BT
/`;return ml+=Rt+" "+ot+` Tf
`,ml+=M(ot*hl)+` TL
`,ml+=yo+`
`,ml+=ws,ml+=B,ve(ml+="ET"),g[Rt]=!0,Ma};var m0=x.__private__.clip=x.clip=function(B){return ve(B==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return m0("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ve("n"),this};var ri=x.__private__.isValidStyle=function(B){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(re=!0),re};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(B){return ri(B)&&(u=B),this};var p0=x.__private__.getStyle=x.getStyle=function(B){var re=u;switch(B){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=B}return re},x0=x.close=function(){return ve("h"),this};x.stroke=function(){return ve("S"),this},x.fill=function(B){return Ui("f",B),this},x.fillEvenOdd=function(B){return Ui("f*",B),this},x.fillStroke=function(B){return Ui("B",B),this},x.fillStrokeEvenOdd=function(B){return Ui("B*",B),this};var Ui=function(B,re){Da(re)==="object"?qh(re,B):ve(B)},g0=function(B){B===null||C===N&&B===void 0||(B=p0(B),ve(B))};function Uh(B,re,_e,Ee,Le){var it=new Km(re||this.boundingBox,_e||this.xStep,Ee||this.yStep,this.gState,Le||this.matrix);it.stream=this.stream;var ht=B+"$$"+this.cloneIndex+++"$$";return ys(ht,it),it}var qh=function(B,re){var _e=Lr[B.key],Ee=ir[_e];if(Ee instanceof H0)ve("q"),ve(v0(re)),Ee.gState&&x.setGState(Ee.gState),ve(B.matrix.toString()+" cm"),ve("/"+_e+" sh"),ve("Q");else if(Ee instanceof Km){var Le=new Jt(1,0,0,-1,0,dc());B.matrix&&(Le=Le.multiply(B.matrix||dl),_e=Uh.call(Ee,B.key,B.boundingBox,B.xStep,B.yStep,Le).id),ve("q"),ve("/Pattern cs"),ve("/"+_e+" scn"),Ee.gState&&x.setGState(Ee.gState),ve(re),ve("Q")}},v0=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},y0=x.moveTo=function(B,re){return ve(M(V(B))+" "+M(G(re))+" m"),this},Ru=x.lineTo=function(B,re){return ve(M(V(B))+" "+M(G(re))+" l"),this},ql=x.curveTo=function(B,re,_e,Ee,Le,it){return ve([M(V(B)),M(G(re)),M(V(_e)),M(G(Ee)),M(V(Le)),M(G(it)),"c"].join(" ")),this};x.__private__.line=x.line=function(B,re,_e,Ee,Le){if(isNaN(B)||isNaN(re)||isNaN(_e)||isNaN(Ee)||!ri(Le))throw new Error("Invalid arguments passed to jsPDF.line");return C===S?this.lines([[_e-B,Ee-re]],B,re,[1,1],Le||"S"):this.lines([[_e-B,Ee-re]],B,re,[1,1]).stroke()},x.__private__.lines=x.lines=function(B,re,_e,Ee,Le,it){var ht,Ht,Yt,dr,br,ia,Ja,kn,Ma,Gn,Mn,ws;if(typeof B=="number"&&(ws=_e,_e=re,re=B,B=ws),Ee=Ee||[1,1],it=it||!1,isNaN(re)||isNaN(_e)||!Array.isArray(B)||!Array.isArray(Ee)||!ri(Le)||typeof it!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(y0(re,_e),ht=Ee[0],Ht=Ee[1],dr=B.length,Gn=re,Mn=_e,Yt=0;Yt<dr;Yt++)(br=B[Yt]).length===2?(Gn=br[0]*ht+Gn,Mn=br[1]*Ht+Mn,Ru(Gn,Mn)):(ia=br[0]*ht+Gn,Ja=br[1]*Ht+Mn,kn=br[2]*ht+Gn,Ma=br[3]*Ht+Mn,Gn=br[4]*ht+Gn,Mn=br[5]*Ht+Mn,ql(ia,Ja,kn,Ma,Gn,Mn));return it&&x0(),g0(Le),this},x.path=function(B){for(var re=0;re<B.length;re++){var _e=B[re],Ee=_e.c;switch(_e.op){case"m":y0(Ee[0],Ee[1]);break;case"l":Ru(Ee[0],Ee[1]);break;case"c":ql.apply(this,Ee);break;case"h":x0()}}return this},x.__private__.rect=x.rect=function(B,re,_e,Ee,Le){if(isNaN(B)||isNaN(re)||isNaN(_e)||isNaN(Ee)||!ri(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return C===S&&(Ee=-Ee),ve([M(V(B)),M(G(re)),M(V(_e)),M(V(Ee)),"re"].join(" ")),g0(Le),this},x.__private__.triangle=x.triangle=function(B,re,_e,Ee,Le,it,ht){if(isNaN(B)||isNaN(re)||isNaN(_e)||isNaN(Ee)||isNaN(Le)||isNaN(it)||!ri(ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[_e-B,Ee-re],[Le-_e,it-Ee],[B-Le,re-it]],B,re,[1,1],ht,!0),this},x.__private__.roundedRect=x.roundedRect=function(B,re,_e,Ee,Le,it,ht){if(isNaN(B)||isNaN(re)||isNaN(_e)||isNaN(Ee)||isNaN(Le)||isNaN(it)||!ri(ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ht=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*_e),it=Math.min(it,.5*Ee),this.lines([[_e-2*Le,0],[Le*Ht,0,Le,it-it*Ht,Le,it],[0,Ee-2*it],[0,it*Ht,-Le*Ht,it,-Le,it],[2*Le-_e,0],[-Le*Ht,0,-Le,-it*Ht,-Le,-it],[0,2*it-Ee],[0,-it*Ht,Le*Ht,-it,Le,-it]],B+Le,re,[1,1],ht,!0),this},x.__private__.ellipse=x.ellipse=function(B,re,_e,Ee,Le){if(isNaN(B)||isNaN(re)||isNaN(_e)||isNaN(Ee)||!ri(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var it=4/3*(Math.SQRT2-1)*_e,ht=4/3*(Math.SQRT2-1)*Ee;return y0(B+_e,re),ql(B+_e,re-ht,B+it,re-Ee,B,re-Ee),ql(B-it,re-Ee,B-_e,re-ht,B-_e,re),ql(B-_e,re+ht,B-it,re+Ee,B,re+Ee),ql(B+it,re+Ee,B+_e,re+ht,B+_e,re),g0(Le),this},x.__private__.circle=x.circle=function(B,re,_e,Ee){if(isNaN(B)||isNaN(re)||isNaN(_e)||!ri(Ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,re,_e,_e,Ee)},x.setFont=function(B,re,_e){return _e&&(re=D(re,_e)),Rt=Qc(B,re,{disableWarning:!1}),this};var $l=x.__private__.getFont=x.getFont=function(){return Dt[Qc.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var B,re,_e={};for(B in tr)if(tr.hasOwnProperty(B))for(re in _e[B]=[],tr[B])tr[B].hasOwnProperty(re)&&_e[B].push(re);return _e},x.addFont=function(B,re,_e,Ee,Le){var it=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&it.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&it.indexOf(arguments[3])==-1&&(_e=D(_e,Ee)),xa.call(this,B,re,_e,Le=Le||"Identity-H")};var ic,Iu=e.lineWidth||.200025,lr=x.__private__.getLineWidth=x.getLineWidth=function(){return Iu},Zc=x.__private__.setLineWidth=x.setLineWidth=function(B){return Iu=B,ve(M(V(B))+" w"),this};x.__private__.setLineDash=Qt.API.setLineDash=Qt.API.setLineDashPattern=function(B,re){if(B=B||[],re=re||0,isNaN(re)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(_e){return M(V(_e))}).join(" "),re=M(V(re)),ve("["+B+"] "+re+" d"),this};var $h=x.__private__.getLineHeight=x.getLineHeight=function(){return ot*ic};x.__private__.getLineHeight=x.getLineHeight=function(){return ot*ic};var b0=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(ic=B),this},Hh=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return ic};b0(e.lineHeight);var qi=x.__private__.getHorizontalCoordinate=function(B){return V(B)},bs=x.__private__.getVerticalCoordinate=function(B){return C===N?B:Zt[I].mediaBox.topRightY-Zt[I].mediaBox.bottomLeftY-V(B)},w0=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(B){return M(qi(B))},Bu=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(B){return M(bs(B))},$i=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return be($i)},x.__private__.setStrokeColor=x.setDrawColor=function(B,re,_e,Ee){return $i=Se({ch1:B,ch2:re,ch3:_e,ch4:Ee,pdfColorType:"draw",precision:2}),ve($i),this};var zu=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return be(zu)},x.__private__.setFillColor=x.setFillColor=function(B,re,_e,Ee){return zu=Se({ch1:B,ch2:re,ch3:_e,ch4:Ee,pdfColorType:"fill",precision:2}),ve(zu),this};var yo=e.textColor||"0 g",Uu=x.__private__.getTextColor=x.getTextColor=function(){return be(yo)};x.__private__.setTextColor=x.setTextColor=function(B,re,_e,Ee){return yo=Se({ch1:B,ch2:re,ch3:_e,ch4:Ee,pdfColorType:"text",precision:3}),this};var lc=e.charSpace,Xd=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(lc||0)};x.__private__.setCharSpace=x.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return lc=B,this};var Qd=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(B){var re=x.CapJoinStyles[B];if(re===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qd=re,ve(re+" J"),this};var os=0;x.__private__.setLineJoin=x.setLineJoin=function(B){var re=x.CapJoinStyles[B];if(re===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return os=re,ve(re+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ve(M(V(B))+" M"),this},x.GState=Db,x.setGState=function(B){(B=typeof B=="string"?pr[_a[B]]:Hi(null,B)).equals(Xa)||(ve("/"+B.id+" gs"),Xa=B)};var Hi=function(B,re){if(!B||!_a[B]){var _e=!1;for(var Ee in pr)if(pr.hasOwnProperty(Ee)&&pr[Ee].equals(re)){_e=!0;break}if(_e)re=pr[Ee];else{var Le="GS"+(Object.keys(pr).length+1).toString(10);pr[Le]=re,re.id=Le}return B&&(_a[B]=re.id),$r.publish("addGState",re),re}};x.addGState=function(B,re){return Hi(B,re),this},x.saveGraphicsState=function(){return ve("q"),wr.push({key:Rt,size:ot,color:yo}),this},x.restoreGraphicsState=function(){ve("Q");var B=wr.pop();return Rt=B.key,ot=B.size,yo=B.color,Xa=null,this},x.setCurrentTransformationMatrix=function(B){return ve(B.toString()+" cm"),this},x.comment=function(B){return ve("#"+B),this};var bo=function(B,re){var _e=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(it){isNaN(it)||(_e=parseFloat(it))}});var Ee=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ee},set:function(it){isNaN(it)||(Ee=parseFloat(it))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(it){Le=it.toString()}}),this},oc=function(B,re,_e,Ee){bo.call(this,B,re),this.type="rect";var Le=_e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(ht){isNaN(ht)||(Le=parseFloat(ht))}});var it=Ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return it},set:function(ht){isNaN(ht)||(it=parseFloat(ht))}}),this},Zd=function(){this.page=ea,this.currentPage=I,this.pages=De.slice(0),this.pagesContext=Zt.slice(0),this.x=Ct,this.y=ur,this.matrix=Lt,this.width=Jc(I),this.height=wo(I),this.outputDestination=Je,this.id="",this.objectNumber=-1};Zd.prototype.restore=function(){ea=this.page,I=this.currentPage,Zt=this.pagesContext,De=this.pages,Ct=this.x,ur=this.y,Lt=this.matrix,$u(I,this.width),uc(I,this.height),Je=this.outputDestination};var qu=function(B,re,_e,Ee,Le){vi.push(new Zd),ea=I=0,De=[],Ct=B,ur=re,Lt=Le,ja([_e,Ee])};for(var cc in x.beginFormObject=function(B,re,_e,Ee,Le){return qu(B,re,_e,Ee,Le),this},x.endFormObject=function(B){return(function(re){if(ul[re])vi.pop().restore();else{var _e=new Zd,Ee="Xo"+(Object.keys(ls).length+1).toString(10);_e.id=Ee,ul[re]=Ee,ls[Ee]=_e,$r.publish("addFormObject",_e),vi.pop().restore()}})(B),this},x.doFormObject=function(B,re){var _e=ls[ul[B]];return ve("q"),ve(re.toString()+" cm"),ve("/"+_e.id+" Do"),ve("Q"),this},x.getFormObject=function(B){var re=ls[ul[B]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},x.save=function(B,re){return B=B||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(q0(sc(nc()),B),typeof q0.unload=="function"&&yr.setTimeout&&setTimeout(q0.unload,911),this):new Promise(function(_e,Ee){try{var Le=q0(sc(nc()),B);typeof q0.unload=="function"&&yr.setTimeout&&setTimeout(q0.unload,911),_e(Le)}catch(it){Ee(it.message)}})},Qt.API)Qt.API.hasOwnProperty(cc)&&(cc==="events"&&Qt.API.events.length?(function(B,re){var _e,Ee,Le;for(Le=re.length-1;Le!==-1;Le--)_e=re[Le][0],Ee=re[Le][1],B.subscribe.apply(B,[_e].concat(typeof Ee=="function"?[Ee]:Ee))})($r,Qt.API.events):x[cc]=Qt.API[cc]);function Jc(B){return Zt[B].mediaBox.topRightX-Zt[B].mediaBox.bottomLeftX}function $u(B,re){Zt[B].mediaBox.topRightX=re+Zt[B].mediaBox.bottomLeftX}function wo(B){return Zt[B].mediaBox.topRightY-Zt[B].mediaBox.bottomLeftY}function uc(B,re){Zt[B].mediaBox.topRightY=re+Zt[B].mediaBox.bottomLeftY}var Vh=x.getPageWidth=function(B){return Jc(B=B||I)/wt},Wh=x.setPageWidth=function(B,re){$u(B,re*wt)},dc=x.getPageHeight=function(B){return wo(B=B||I)/wt},Kh=x.setPageHeight=function(B,re){uc(B,re*wt)};return x.internal={pdfEscape:Br,getStyle:p0,getFont:$l,getFontSize:ge,getCharSpace:Xd,getTextColor:Uu,getLineHeight:$h,getLineHeightFactor:Hh,getLineWidth:lr,write:pt,getHorizontalCoordinate:qi,getVerticalCoordinate:bs,getCoordinateString:w0,getVerticalCoordinateString:Bu,collections:{},newObject:Pa,newAdditionalObject:Ne,newObjectDeferred:un,newObjectDeferredBegin:le,getFilters:ze,putStream:tt,events:$r,scaleFactor:wt,pageSize:{getWidth:function(){return Vh(I)},setWidth:function(B){Wh(I,B)},getHeight:function(){return dc(I)},setHeight:function(B){Kh(I,B)}},encryptionOptions:f,encryption:Sn,getEncryptor:function(B){return f!==null?Sn.encryptor(B,0):function(re){return re}},output:fl,getNumberOfPages:zi,pages:De,out:ve,f2:L,f3:z,getPageInfo:Bs,getPageInfoByObjId:h0,getCurrentPageInfo:zh,getPDFVersion:v,Point:bo,Rectangle:oc,Matrix:Jt,hasHotfix:vo},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Vh(I)},set:function(B){Wh(I,B)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return dc(I)},set:function(B){Kh(I,B)},enumerable:!0,configurable:!0}),(function(B){for(var re=0,_e=Nt.length;re<_e;re++){var Ee=xa.call(this,B[re][0],B[re][1],B[re][2],Nt[re][3],!0);m===!1&&(g[Ee]=!0);var Le=B[re][0].split("-");zt({id:Ee,fontName:Le[0],fontStyle:Le[1]||""})}$r.publish("addFonts",{fonts:Dt,dictionary:tr})}).call(x,Nt),Rt="F1",ei(s,r),$r.publish("initialized"),x}$m.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},$m.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$m.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},$m.prototype.processOwnerPassword=function(e,t){return s4(n4(t).substr(0,5),e)},$m.prototype.encryptor=function(e,t){var r=n4(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return s4(r,a)}},Db.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Da(e)!==Da(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},Qt.API={events:[]},Qt.version="3.0.3";var qn=Qt.API,_6=1,Bh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},kr=function(e){return e.toFixed(2)},Ff=function(e){return e.toFixed(5)};qn.__acroform__={};var Il=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},OO=function(e){return e*_6},wu=function(e){var t=new Kz,r=Kt.internal.getHeight(e)||0,a=Kt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(kr(a)),Number(kr(r))],t},E_e=qn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},T_e=qn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},D_e=qn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Jn=qn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return D_e(e,t-1)},es=qn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return E_e(e,t-1)},ts=qn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return T_e(e,t-1)},O_e=qn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],l=e[2],o=e[3],d={};return d.lowerLeft_X=r(s)||0,d.lowerLeft_Y=a(i+o)||0,d.upperRight_X=r(s+l)||0,d.upperRight_Y=a(i)||0,[Number(kr(d.lowerLeft_X)),Number(kr(d.lowerLeft_Y)),Number(kr(d.upperRight_X)),Number(kr(d.upperRight_Y))]},F_e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=i4(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+kr(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=wu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},i4=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(L){return L.split(`
`)}):s.map(function(L){return[L]});var i=r,l=Kt.internal.getHeight(e)||0;l=l<0?-l:l;var o=Kt.internal.getWidth(e)||0;o=o<0?-o:o;var d=function(L,z,V){if(L+1<s.length){var G=z+" "+s[L+1][0];return iy(G,e,V).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var u,f,m=iy("3",e,i).height,g=e.multiline?l-i:(l-m)/2,x=g+=2,b=0,v=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+iy(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var j="",S=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var C=!1;if(s[N].length!==1&&y!==s[N].length-1){if((m+2)*(S+2)+2>l)continue e;j+=s[N][y],C=!0,v=N,N--}else{j=(j+=s[N][y]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var T=parseInt(N),P=d(T,j,i),D=N>=s.length-1;if(P&&!D){j+=" ",y=0;continue}if(P||D){if(D)v=T;else if(e.multiline&&(m+2)*(S+2)+2>l)continue e}else{if(!e.multiline||(m+2)*(S+2)+2>l)continue e;v=T}}for(var M="",F=b;F<=v;F++){var H=s[F];if(e.multiline){if(F===v){M+=H[y]+" ",y=(y+1)%H.length;continue}if(F===b){M+=H[H.length-1]+" ";continue}}M+=H[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,f=iy(M,e,i).width,e.textAlign){case"right":u=o-f-2;break;case"center":u=(o-f)/2;break;default:u=2}t+=kr(u)+" "+kr(x)+` Td
`,t+="("+Bh(M)+`) Tj
`,t+=-kr(u)+` 0 Td
`,x=-(i+2),f=0,b=C?v:v+1,S++,j=""}break}return a.text=t,a.fontSize=i,a},iy=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},P_e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},M_e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},L_e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Yc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(P_e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_6=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Gz,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&M_e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,s){var i=!a;for(var l in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(l)){var o=a[l],d=[],u=o.Rect;if(o.Rect&&(o.Rect=O_e(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Kt.createDefaultAppearanceStream(o),Da(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(d=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=F_e(o);d.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var m="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var x=o.appearanceStreamContent[g];if(m+="/"+g+" ",m+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var b=x[l];typeof b=="function"&&(b=b.call(s,o)),m+="/"+l+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=x)=="function"&&(b=b.call(s,o)),m+="/"+l+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);m+=">>"}d.push({key:"AP",value:`<<
`+m+">>"})}s.internal.putStream({additionalKeyValues:d,objectId:o.objId}),s.internal.out("endobj")}i&&(function(v,y){for(var j in v)if(v.hasOwnProperty(j)){var S=j,N=v[j];y.internal.newObjectDeferredBegin(N.objId,!0),Da(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete v[S]}})(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Wz=qn.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(l){return l};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Da(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+Bh(a(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xN=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Bh(a(e))+")"},Su=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Su.prototype.toString=function(){return this.objId+" 0 R"},Su.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Su.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:Wz(s,this.objId,this.scope)}):s instanceof Su?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var Kz=function(){Su.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Il(Kz,Su);var Gz=function(){Su.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Bh(r(e))+")"}},set:function(r){e=r}})};Il(Gz,Su);var Yc=function e(){Su.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Jn(t,3)},set:function(j){j?this.F=es(t,3):this.F=ts(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');r=j}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(j){a=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(j){a[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(j){a[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(j){a[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(j){a[3]=j}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ob)return;i="FieldObject"+e.FieldNum++}var j=function(S){return S};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Bh(j(i))+")"},set:function(j){i=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(j){i=j}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(j){o=j}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(j){d=j}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/_6:u},set:function(j){u=j}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(j){f=j}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Ob||this instanceof sh))return xN(m,this.objId,this.scope)},set:function(j){j=j.toString(),m=j}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Gs==0?xN(g,this.objId,this.scope):g},set:function(j){j=j.toString(),g=this instanceof Gs==0?j.substr(0,1)==="("?Rm(j.substr(1,j.length-2)):Rm(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gs==1?Rm(g.substr(1,g.length-1)):g},set:function(j){j=j.toString(),g=this instanceof Gs==1?"/"+j:j}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Gs==0?xN(x,this.objId,this.scope):x},set:function(j){j=j.toString(),x=this instanceof Gs==0?j.substr(0,1)==="("?Rm(j.substr(1,j.length-2)):Rm(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gs==1?Rm(x.substr(1,x.length-1)):x},set:function(j){j=j.toString(),x=this instanceof Gs==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(j){j=!!j,v=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(j){b=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,1)},set:function(j){j?this.Ff=es(this.Ff,1):this.Ff=ts(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,2)},set:function(j){j?this.Ff=es(this.Ff,2):this.Ff=ts(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,3)},set:function(j){j?this.Ff=es(this.Ff,3):this.Ff=ts(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');y=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(y){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};Il(Yc,Su);var np=function(){Yc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Wz(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=(function(i,l,o){o||(o=1);for(var d,u=[];d=l.exec(i);)u.push(d[o]);return u})(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,18)},set:function(r){r?this.Ff=es(this.Ff,18):this.Ff=ts(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=es(this.Ff,19):this.Ff=ts(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,20)},set:function(r){r?(this.Ff=es(this.Ff,20),t.sort()):this.Ff=ts(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,22)},set:function(r){r?this.Ff=es(this.Ff,22):this.Ff=ts(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,23)},set:function(r){r?this.Ff=es(this.Ff,23):this.Ff=ts(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,27)},set:function(r){r?this.Ff=es(this.Ff,27):this.Ff=ts(this.Ff,27)}}),this.hasAppearanceStream=!1};Il(np,Yc);var sp=function(){np.call(this),this.fontName="helvetica",this.combo=!1};Il(sp,np);var ip=function(){sp.call(this),this.combo=!0};Il(ip,sp);var yy=function(){ip.call(this),this.edit=!0};Il(yy,ip);var Gs=function(){Yc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,15)},set:function(r){r?this.Ff=es(this.Ff,15):this.Ff=ts(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,16)},set:function(r){r?this.Ff=es(this.Ff,16):this.Ff=ts(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,17)},set:function(r){r?this.Ff=es(this.Ff,17):this.Ff=ts(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,26)},set:function(r){r?this.Ff=es(this.Ff,26):this.Ff=ts(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Bh(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Da(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Il(Gs,Yc);var by=function(){Gs.call(this),this.pushButton=!0};Il(by,Gs);var lp=function(){Gs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Il(lp,Gs);var Ob=function(){var e,t;Yc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),a)l.push("/"+i+" ("+Bh(s(a[i]))+")");return l.push(">>"),l.join(`
`)},set:function(s){Da(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Kt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Il(Ob,Yc),lp.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},lp.prototype.createOption=function(e){var t=new Ob;return t.Parent=this,t.optionName=e,this.Kids.push(t),R_e.call(this.scope,t),t};var wy=function(){Gs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Kt.CheckBox.createAppearanceStream()};Il(wy,Gs);var sh=function(){Yc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,13)},set:function(t){t?this.Ff=es(this.Ff,13):this.Ff=ts(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,21)},set:function(t){t?this.Ff=es(this.Ff,21):this.Ff=ts(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,23)},set:function(t){t?this.Ff=es(this.Ff,23):this.Ff=ts(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,24)},set:function(t){t?this.Ff=es(this.Ff,24):this.Ff=ts(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,25)},set:function(t){t?this.Ff=es(this.Ff,25):this.Ff=ts(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,26)},set:function(t){t?this.Ff=es(this.Ff,26):this.Ff=ts(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Il(sh,Yc);var jy=function(){sh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Jn(this.Ff,14)},set:function(e){e?this.Ff=es(this.Ff,14):this.Ff=ts(this.Ff,14)}}),this.password=!0};Il(jy,sh);var Kt={CheckBox:{createAppearanceStream:function(){return{N:{On:Kt.CheckBox.YesNormal},D:{On:Kt.CheckBox.YesPushDown,Off:Kt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=wu(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=i4(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+kr(Kt.internal.getWidth(e))+" "+kr(Kt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+kr(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=wu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Kt.internal.getHeight(e),l=Kt.internal.getWidth(e),o=i4(e,e.caption);return s.push("1 g"),s.push("0 0 "+kr(l)+" "+kr(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+kr(l-1)+" "+kr(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+kr(o.fontSize)+" Tf "+a),s.push(o.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=wu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+kr(Kt.internal.getWidth(e))+" "+kr(Kt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Kt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Kt.RadioButton.Circle.YesNormal,t.D[e]=Kt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=wu(e);t.scope=e.scope;var r=[],a=Kt.internal.getWidth(e)<=Kt.internal.getHeight(e)?Kt.internal.getWidth(e)/4:Kt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Kt.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ff(Kt.internal.getWidth(e)/2)+" "+Ff(Kt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=wu(e);t.scope=e.scope;var r=[],a=Kt.internal.getWidth(e)<=Kt.internal.getHeight(e)?Kt.internal.getWidth(e)/4:Kt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Kt.internal.Bezier_C).toFixed(5)),l=Number((a*Kt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ff(Kt.internal.getWidth(e)/2)+" "+Ff(Kt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ff(Kt.internal.getWidth(e)/2)+" "+Ff(Kt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),r.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),r.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),r.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=wu(e);t.scope=e.scope;var r=[],a=Kt.internal.getWidth(e)<=Kt.internal.getHeight(e)?Kt.internal.getWidth(e)/4:Kt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Kt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ff(Kt.internal.getWidth(e)/2)+" "+Ff(Kt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Kt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Kt.RadioButton.Cross.YesNormal,t.D[e]=Kt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=wu(e);t.scope=e.scope;var r=[],a=Kt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+kr(Kt.internal.getWidth(e)-2)+" "+kr(Kt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(kr(a.x1.x)+" "+kr(a.x1.y)+" m"),r.push(kr(a.x2.x)+" "+kr(a.x2.y)+" l"),r.push(kr(a.x4.x)+" "+kr(a.x4.y)+" m"),r.push(kr(a.x3.x)+" "+kr(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=wu(e);t.scope=e.scope;var r=Kt.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+kr(Kt.internal.getWidth(e))+" "+kr(Kt.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+kr(Kt.internal.getWidth(e)-2)+" "+kr(Kt.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(kr(r.x1.x)+" "+kr(r.x1.y)+" m"),a.push(kr(r.x2.x)+" "+kr(r.x2.y)+" l"),a.push(kr(r.x4.x)+" "+kr(r.x4.y)+" m"),a.push(kr(r.x3.x)+" "+kr(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=wu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+kr(Kt.internal.getWidth(e))+" "+kr(Kt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Kt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Kt.internal.getWidth(e),r=Kt.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Kt.internal.getWidth=function(e){var t=0;return Da(e)==="object"&&(t=OO(e.Rect[2])),t},Kt.internal.getHeight=function(e){var t=0;return Da(e)==="object"&&(t=OO(e.Rect[3])),t};var R_e=qn.addField=function(e){if(L_e(this,e),!(e instanceof Yc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};qn.AcroFormChoiceField=np,qn.AcroFormListBox=sp,qn.AcroFormComboBox=ip,qn.AcroFormEditBox=yy,qn.AcroFormButton=Gs,qn.AcroFormPushButton=by,qn.AcroFormRadioButton=lp,qn.AcroFormCheckBox=wy,qn.AcroFormTextField=sh,qn.AcroFormPasswordField=jy,qn.AcroFormAppearance=Kt,qn.AcroForm={ChoiceField:np,ListBox:sp,ComboBox:ip,EditBox:yy,Button:Gs,PushButton:by,RadioButton:lp,CheckBox:wy,TextField:sh,PasswordField:jy,Appearance:Kt},Qt.AcroForm={ChoiceField:np,ListBox:sp,ComboBox:ip,EditBox:yy,Button:Gs,PushButton:by,RadioButton:lp,CheckBox:wy,TextField:sh,PasswordField:jy,Appearance:Kt};Qt.AcroForm;function Yz(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(L,z){var V,G,ie,Z,X,he=r;if((z=z||r)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(P(L))for(X in a)for(ie=a[X],V=0;V<ie.length;V+=1){for(Z=!0,G=0;G<ie[V].length;G+=1)if(ie[V][G]!==void 0&&ie[V][G]!==L[G]){Z=!1;break}if(Z===!0){he=X;break}}else for(X in a)for(ie=a[X],V=0;V<ie.length;V+=1){for(Z=!0,G=0;G<ie[V].length;G+=1)if(ie[V][G]!==void 0&&ie[V][G]!==L.charCodeAt(G)){Z=!1;break}if(Z===!0){he=X;break}}return he===r&&z!==r&&(he=z),he},i=function L(z){for(var V=this.internal.write,G=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:z.width}),Z.push({key:"Height",value:z.height}),z.colorSpace===j.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===j.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)&&z.transparency.length>0){for(var X="",he=0,ce=z.transparency.length;he<ce;he++)X+=z.transparency[he]+" "+z.transparency[he]+" ";Z.push({key:"Mask",value:"["+X+"]"})}z.sMask!==void 0&&Z.push({key:"SMask",value:z.objectId+1+" 0 R"});var ke=z.filter!==void 0?["/"+z.filter]:void 0;if(G({data:z.data,additionalKeyValues:Z,alreadyAppliedFilters:ke,objectId:z.objectId}),V("endobj"),"sMask"in z&&z.sMask!==void 0){var se,R=(se=z.sMaskBitsPerComponent)!==null&&se!==void 0?se:z.bitsPerComponent,I={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:z.sMask};"filter"in z&&(I.decodeParameters="/Predictor ".concat(z.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(z.width),I.filter=z.filter),L.call(this,I)}if(z.colorSpace===j.INDEXED){var q=this.internal.newObject();G({data:M(new Uint8Array(z.palette)),objectId:q}),V("endobj")}},l=function(){var L=this.internal.collections[t+"images"];for(var z in L)i.call(this,L[z])},o=function(){var L,z=this.internal.collections[t+"images"],V=this.internal.write;for(var G in z)V("/I"+(L=z[G]).index,L.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var L=this.internal.collections[t+"images"];return d.call(this),L},f=function(){return Object.keys(this.internal.collections[t+"images"]).length},m=function(L){return typeof e["process"+L.toUpperCase()]=="function"},g=function(L){return Da(L)==="object"&&L.nodeType===1},x=function(L,z){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var V=""+L.getAttribute("src");if(V.indexOf("data:image/")===0)return vy(unescape(V).split("base64,").pop());var G=e.loadFile(V,!0);if(G!==void 0)return G}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var ie;switch(z){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;default:ie="image/jpeg"}return vy(L.toDataURL(ie,1).split("base64,").pop())}},b=function(L){var z=this.internal.collections[t+"images"];if(z){for(var V in z)if(L===z[V].alias)return z[V]}},v=function(L,z,V){return L||z||(L=-96,z=-96),L<0&&(L=-1*V.width*72/L/this.internal.scaleFactor),z<0&&(z=-1*V.height*72/z/this.internal.scaleFactor),L===0&&(L=z*V.width/V.height),z===0&&(z=L*V.height/V.width),[L,z]},y=function(L,z,V,G,ie,Z){var X=v.call(this,V,G,ie),he=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,ke=u.call(this);if(V=X[0],G=X[1],ke[ie.index]=ie,Z){Z*=Math.PI/180;var se=Math.cos(Z),R=Math.sin(Z),I=function(K){return K.toFixed(4)},q=[I(se),I(R),I(-1*R),I(se),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,he(L),ce(z+G),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([he(V),"0","0",he(G),"0","0","cm"].join(" "))):this.internal.write([he(V),"0","0",he(G),he(L),ce(z+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(L){var z,V,G=0;if(typeof L=="string")for(V=L.length,z=0;z<V;z++)G=(G<<5)-G+L.charCodeAt(z),G|=0;else if(P(L))for(V=L.byteLength/2,z=0;z<V;z++)G=(G<<5)-G+L[z],G|=0;return G},C=e.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var z=!0;return L.length===0&&(z=!1),L.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(z=!1),z},T=e.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var z=L.indexOf(",");return z<0?null:L.substring(0,z).trim().endsWith("base64")?L.substring(z+1):null};e.__addimage__.isArrayBuffer=function(L){return L instanceof ArrayBuffer};var P=e.__addimage__.isArrayBufferView=function(L){return L instanceof Int8Array||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array},D=e.__addimage__.binaryStringToUint8Array=function(L){for(var z=L.length,V=new Uint8Array(z),G=0;G<z;G++)V[G]=L.charCodeAt(G);return V},M=e.__addimage__.arrayBufferToBinaryString=function(L){for(var z="",V=P(L)?L:new Uint8Array(L),G=0;G<V.length;G+=8192)z+=String.fromCharCode.apply(null,V.subarray(G,G+8192));return z};e.addImage=function(){var L,z,V,G,ie,Z,X,he,ce;if(typeof arguments[1]=="number"?(z=r,V=arguments[1],G=arguments[2],ie=arguments[3],Z=arguments[4],X=arguments[5],he=arguments[6],ce=arguments[7]):(z=arguments[1],V=arguments[2],G=arguments[3],ie=arguments[4],Z=arguments[5],X=arguments[6],he=arguments[7],ce=arguments[8]),Da(L=arguments[0])==="object"&&!g(L)&&"imageData"in L){var ke=L;L=ke.imageData,z=ke.format||z||r,V=ke.x||V||0,G=ke.y||G||0,ie=ke.w||ke.width||ie,Z=ke.h||ke.height||Z,X=ke.alias||X,he=ke.compression||he,ce=ke.rotation||ke.angle||ce}var se=this.internal.getFilters();if(he===void 0&&se.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(V)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var R=F.call(this,L,z,X,he);return y.call(this,V,G,ie,Z,R,ce),this};var F=function(L,z,V,G){var ie,Z,X;if(typeof L=="string"&&s(L)===r){L=unescape(L);var he=H(L,!1);(he!==""||(he=e.loadFile(L,!0))!==void 0)&&(L=he)}if(g(L)&&(L=x(L,z)),z=s(L,z),!m(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((X=V)==null||X.length===0)&&(V=(function(ce){return typeof ce=="string"||P(ce)?N(ce):P(ce.data)?N(ce.data):null})(L)),(ie=b.call(this,V))||(L instanceof Uint8Array||z==="RGBA"||(Z=L,L=D(L)),ie=this["process"+z.toUpperCase()](L,f.call(this),V,(function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in e.image_compression?ce:S.NONE})(G),Z)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},H=e.__addimage__.convertBase64ToBinaryString=function(L,z){z=typeof z!="boolean"||z;var V,G="";if(typeof L=="string"){var ie;V=(ie=T(L))!==null&&ie!==void 0?ie:L;try{G=vy(V)}catch(Z){if(z)throw C(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(L){var z,V,G="";if(g(L)&&(L=x(L)),typeof L=="string"&&s(L)===r&&((G=H(L,!1))===""&&(G=e.loadFile(L)||""),L=G),V=s(L),!m(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(L instanceof Uint8Array||(L=D(L)),!(z=this["process"+V.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=V,z}})(Qt.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Qt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,m=0;m<u.length&&!f;m++)switch((a=u[m]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){a=u[g];var x=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(v.objId),S=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(a.bounds.x)+" "+o(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y)+"] ")+"/Contents ("+x(j(a.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+x(j(S))+") >>",v.content=i;var N=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(a.bounds.x+30)+" "+o(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w+30)+" "+o(a.bounds.y)+"] ")+" /Parent "+N,a.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(v.objId,"0 R",y.objId,"0 R");break;case"freetext":s="/Rect ["+l(a.bounds.x)+" "+o(a.bounds.y)+" "+l(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y+a.bounds.h)+"] ";var C=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+x(b(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var T=this.annotations._nameMap[a.options.name];a.options.pageNumber=T.page,a.options.top=T.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+x(b(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var P=o(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+P+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,l){var o=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:d(r),y:u(a),w:d(r+s),h:u(a+i)},options:l,type:"link"})},e.textWithLink=function(r,a,s,i){var l,o,d=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var f=this.splitTextToSize(r,o).length;l=Math.ceil(u*f)}else o=d,l=u;return this.text(r,a,s,i),s+=.2*u,i.align==="center"&&(a-=d/2),i.align==="right"&&(a-=d),this.link(a,s-u,o,l,i),d},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(Qt.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=e.__arabicParser__.isArabicEndLetter=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(v){return l(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(v){var y=0,j=r,S="",N=0;for(y=0;y<v.length;y+=1)j[v.charCodeAt(y)]!==void 0?(N++,typeof(j=j[v.charCodeAt(y)])=="number"&&(S+=String.fromCharCode(j),j=r,N=0),y===v.length-1&&(j=r,S+=v.charAt(y-(N-1)),y-=N-1,N=0)):(j=r,S+=v.charAt(y-N),y-=N,N=0);return S};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(v,y,j){return l(v)?i(v)===!1?-1:!u(v)||!l(y)&&!l(j)||!l(j)&&o(y)||o(v)&&!l(y)||o(v)&&d(y)||o(v)&&o(y)?0:f(v)&&l(y)&&!o(y)&&l(j)&&u(j)?3:o(v)||!l(j)?1:2:-1},x=function(v){var y=0,j=0,S=0,N="",C="",T="",P=(v=v||"").split("\\s+"),D=[];for(y=0;y<P.length;y+=1){for(D.push(""),j=0;j<P[y].length;j+=1)N=P[y][j],C=P[y][j-1],T=P[y][j+1],l(N)?(S=g(N,C,T),D[y]+=S!==-1?String.fromCharCode(t[N.charCodeAt(0)][S]):N):D[y]+=N;D[y]=m(D[y])}return D.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var v,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(y)){var S=0;for(j=[],S=0;S<y.length;S+=1)Array.isArray(y[S])?j.push([x(y[S][0]),y[S][1],y[S][2]]):j.push([x(y[S])]);v=j}else v=x(y);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",b])})(Qt.API),Qt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Qt.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(v){g=v}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(v){x=v}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(v){b=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return a.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,u){a.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),m=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,x=0,b=0,v=0,y=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var j=u.maxWidth;j>0?typeof d=="string"?d=this.splitTextToSize(d,j):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(N,C){return N.concat(y.splitTextToSize(C,j))},[])):d=Array.isArray(d)?d:[d];for(var S=0;S<d.length;S++)x<(v=this.getStringUnitWidth(d[S],{font:m})*f)&&(x=v);return x!==0&&(b=d.length),{w:x/=g,h:Math.max((b*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===d.lineNumber?(d.x=(u.x||0)+(u.width||0),d.y=u.y||0):u.y+u.height+d.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=m.top,x&&g&&(this.printHeaderRow(d.lineNumber,!0),d.y+=g[0].height)):d.y=u.y+u.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-f,d.y+f,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+f,{align:"center",baseline:"top",maxWidth:d.width-f-f}):this.text(d.text,d.x+f,d.y+f,{align:"left",baseline:"top",maxWidth:d.width-f-f})),this.internal.__cell__.lastCell=d,this};e.table=function(d,u,f,m,g){if(a.call(this),!f)throw new Error("No data for PDF table.");var x,b,v,y,j=[],S=[],N=[],C={},T={},P=[],D=[],M=(g=g||{}).autoSize||!1,F=g.printHeaders!==!1,H=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,L=g.margins||Object.assign({width:this.getPageWidth()},t),z=typeof g.padding=="number"?g.padding:3,V=g.headerBackgroundColor||"#c8c8c8",G=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=G,this.setFontSize(H),m==null)S=j=Object.keys(f[0]),N=j.map(function(){return"left"});else if(Array.isArray(m)&&Da(m[0])==="object")for(j=m.map(function(ke){return ke.name}),S=m.map(function(ke){return ke.prompt||ke.name||""}),N=m.map(function(ke){return ke.align||"left"}),x=0;x<m.length;x+=1)T[m[x].name]=.7499990551181103*m[x].width;else Array.isArray(m)&&typeof m[0]=="string"&&(S=j=m,N=j.map(function(){return"left"}));if(M||Array.isArray(m)&&typeof m[0]=="string")for(x=0;x<j.length;x+=1){for(C[y=j[x]]=f.map(function(ke){return ke[y]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(S[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=C[y],this.setFont(void 0,"normal"),v=0;v<b.length;v+=1)P.push(this.getTextDimensions(b[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[y]=Math.max.apply(null,P)+z+z,P=[]}if(F){var ie={};for(x=0;x<j.length;x+=1)ie[j[x]]={},ie[j[x]].text=S[x],ie[j[x]].align=N[x];var Z=o.call(this,ie,T);D=j.map(function(ke){return new i(d,u,T[ke],Z,ie[ke].text,void 0,ie[ke].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var X=m.reduce(function(ke,se){return ke[se.name]=se.align,ke},{});for(x=0;x<f.length;x+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:x,data:f[x]},this);var he=o.call(this,f[x],T);for(v=0;v<j.length;v+=1){var ce=f[x][j[v]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:x,col:v,data:ce},this),l.call(this,new i(d,u,T[j[v]],he,ce,x+2,X[j[v]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=u,this};var o=function(d,u){var f=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(d).map(function(x){var b=d[x];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[x]-f-f)},this).map(function(x){return this.getLineHeightFactor()*x.length*m/g+f+f},this).reduce(function(x,b){return Math.max(x,b)},0)};e.setTableHeaderRow=function(d){a.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,u){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){f=this.internal.__cell__.tableHeaderRow[x].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,g.push(f)),f.lineNumber=d;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,f),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(Qt.API);var Xz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Qz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],l4=Yz(Qz),Zz=[100,200,300,400,500,600,700,800,900],I_e=Yz(Zz);function gN(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return Xz[i=i||"normal"]?i:"normal"})(e.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof l4[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function FO(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var B_e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},PO={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function MO(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function LO(e){return e.trimLeft()}function z_e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function U_e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ly,RO,IO,Im,oy,BO,zO,UO,vN=["times"];function qO(e,t,r,a,s){var i=4,l=HO;switch(s){case Qt.API.image_compression.FAST:i=1,l=$O;break;case Qt.API.image_compression.MEDIUM:i=6,l=VO;break;case Qt.API.image_compression.SLOW:i=9,l=WO}e=(function(d,u,f,m){for(var g,x=d.length/u,b=new Uint8Array(d.length+x),v=[q_e,$O,HO,VO,WO],y=0;y<x;y+=1){var j=y*u,S=d.subarray(j,j+u);if(m)b.set(m(S,f,g),j+y);else{for(var N=v.length,C=[],T=0;T<N;T+=1)C[T]=v[T](S,f,g);var P=H_e(C.concat());b.set(C[P],j+y)}g=S}return b})(e,t,Math.ceil(r*a/8),l);var o=e4(e,{level:i});return Qt.API.__addimage__.arrayBufferToBinaryString(o)}function q_e(e){var t=Array.apply([],e);return t.unshift(0),t}function $O(e,t){var r=e.length,a=[];a[0]=1;for(var s=0;s<r;s+=1){var i=e[s-t]||0;a[s+1]=e[s]-i+256&255}return a}function HO(e,t,r){var a=e.length,s=[];s[0]=2;for(var i=0;i<a;i+=1){var l=r&&r[i]||0;s[i+1]=e[i]-l+256&255}return s}function VO(e,t,r){var a=e.length,s=[];s[0]=3;for(var i=0;i<a;i+=1){var l=e[i-t]||0,o=r&&r[i]||0;s[i+1]=e[i]+256-(l+o>>>1)&255}return s}function WO(e,t,r){var a=e.length,s=[];s[0]=4;for(var i=0;i<a;i+=1){var l=$_e(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);s[i+1]=e[i]-l+256&255}return s}function $_e(e,t,r){if(e===t&&t===r)return e;var a=Math.abs(t-r),s=Math.abs(e-r),i=Math.abs(e+t-r-r);return a<=s&&a<=i?e:s<=i?t:r}function H_e(e){var t=e.map(function(r){return r.reduce(function(a,s){return a+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function yN(e,t,r){var a=t*r,s=Math.floor(a/8),i=16-(a-8*s+r),l=(1<<r)-1;return Jz(e,s)>>i&l}function KO(e,t,r,a){var s=r*a,i=Math.floor(s/8),l=16-(s-8*i+a),o=(1<<a)-1,d=(t&o)<<l;(function(u,f,m){if(f+1<u.byteLength)u.setUint16(f,m,!1);else{var g=m>>8&255;u.setUint8(f,g)}})(e,i,Jz(e,i)&~(o<<l)&65535|d)}function Jz(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function V_e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,l=1<<1+(7&s);e[t++],e[t++];var o=null,d=null;i&&(o=t,d=l,t+=3*l);var u=!0,f=[],m=0,g=null,x=0,b=null;for(this.width=r,this.height=a;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];m=e[t++]|e[t++]<<8,g=e[t++],1&v||(g=null),x=v>>2&7,t++;break;case 254:for(;;){if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++],T=C>>6&1,P=1<<1+(7&C),D=o,M=d,F=!1;C>>7&&(F=!0,D=t,M=P,t+=3*P);var H=t;for(t++;;){var L;if(!((L=e[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}f.push({x:y,y:j,width:S,height:N,has_local_palette:F,palette_offset:D,palette_size:M,data_offset:H,data_length:t-H,transparent_index:g,interlaced:!!T,delay:m,disposal:x});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return b},this.frameInfo=function(z){if(z<0||z>=f.length)throw new Error("Frame index out of range.");return f[z]},this.decodeAndBlitFrameBGRA=function(z,V){var G=this.frameInfo(z),ie=G.width*G.height,Z=new Uint8Array(ie);GO(e,G.data_offset,Z,ie);var X=G.palette_offset,he=G.transparent_index;he===null&&(he=256);var ce=G.width,ke=r-ce,se=ce,R=4*(G.y*r+G.x),I=4*((G.y+G.height)*r+G.x),q=R,K=4*ke;G.interlaced===!0&&(K+=4*r*7);for(var te=8,J=0,Q=Z.length;J<Q;++J){var ne=Z[J];if(se===0&&(se=ce,(q+=K)>=I&&(K=4*ke+4*r*(te-1),q=R+(ce+ke)*(te<<1),te>>=1)),ne===he)q+=4;else{var ye=e[X+3*ne],De=e[X+3*ne+1],ee=e[X+3*ne+2];V[q++]=ee,V[q++]=De,V[q++]=ye,V[q++]=255}--se}},this.decodeAndBlitFrameRGBA=function(z,V){var G=this.frameInfo(z),ie=G.width*G.height,Z=new Uint8Array(ie);GO(e,G.data_offset,Z,ie);var X=G.palette_offset,he=G.transparent_index;he===null&&(he=256);var ce=G.width,ke=r-ce,se=ce,R=4*(G.y*r+G.x),I=4*((G.y+G.height)*r+G.x),q=R,K=4*ke;G.interlaced===!0&&(K+=4*r*7);for(var te=8,J=0,Q=Z.length;J<Q;++J){var ne=Z[J];if(se===0&&(se=ce,(q+=K)>=I&&(K=4*ke+4*r*(te-1),q=R+(ce+ke)*(te<<1),te>>=1)),ne===he)q+=4;else{var ye=e[X+3*ne],De=e[X+3*ne+1],ee=e[X+3*ne+2];V[q++]=ye,V[q++]=De,V[q++]=ee,V[q++]=255}--se}}}function GO(e,t,r,a){for(var s=e[t++],i=1<<s,l=i+1,o=l+1,d=s+1,u=(1<<d)-1,f=0,m=0,g=0,x=e[t++],b=new Int32Array(4096),v=null;;){for(;f<16&&x!==0;)m|=e[t++]<<f,f+=8,x===1?x=e[t++]:--x;if(f<d)break;var y=m&u;if(m>>=d,f-=d,y!==i){if(y===l)break;for(var j=y<o?y:v,S=0,N=j;N>i;)N=b[N]>>8,++S;var C=N;if(g+S+(j!==y?1:0)>a)return void Ka.log("Warning, gif stream longer than expected.");r[g++]=C;var T=g+=S;for(j!==y&&(r[g++]=C),N=j;S--;)N=b[N],r[--T]=255&N,N>>=8;v!==null&&o<4096&&(b[o++]=v<<8|C,o>=u+1&&d<12&&(++d,u=u<<1|1)),v=y}else o=l+1,u=(1<<(d=s+1))-1,v=null}return g!==a&&Ka.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bN(e){var t,r,a,s,i,l=Math.floor,o=new Array(64),d=new Array(64),u=new Array(64),f=new Array(64),m=new Array(65535),g=new Array(65535),x=new Array(64),b=new Array(64),v=[],y=0,j=7,S=new Array(64),N=new Array(64),C=new Array(64),T=new Array(256),P=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(R,I){for(var q=0,K=0,te=new Array,J=1;J<=16;J++){for(var Q=1;Q<=R[J];Q++)te[I[K]]=[],te[I[K]][0]=q,te[I[K]][1]=J,K++,q++;q*=2}return te}function X(R){for(var I=R[0],q=R[1]-1;q>=0;)I&1<<q&&(y|=1<<j),q--,--j<0&&(y==255?(he(255),he(0)):he(y),j=7,y=0)}function he(R){v.push(R)}function ce(R){he(R>>8&255),he(255&R)}function ke(R,I,q,K,te){for(var J,Q=te[0],ne=te[240],ye=(function(ot,Ie){var ge,Te,qe,xt,gt,Mt,mr,Pt,Rt,wt,Ct=0;for(Rt=0;Rt<8;++Rt){ge=ot[Ct],Te=ot[Ct+1],qe=ot[Ct+2],xt=ot[Ct+3],gt=ot[Ct+4],Mt=ot[Ct+5],mr=ot[Ct+6];var ur=ge+(Pt=ot[Ct+7]),Lt=ge-Pt,Dt=Te+mr,tr=Te-mr,wr=qe+Mt,ir=qe-Mt,Lr=xt+gt,pr=xt-gt,_a=ur+Lr,Xa=ur-Lr,ea=Dt+wr,Zt=Dt-wr;ot[Ct]=_a+ea,ot[Ct+4]=_a-ea;var $r=.707106781*(Zt+Xa);ot[Ct+2]=Xa+$r,ot[Ct+6]=Xa-$r;var Bi=.382683433*((_a=pr+ir)-(Zt=tr+Lt)),ls=.5411961*_a+Bi,ul=1.306562965*Zt+Bi,vi=.707106781*(ea=ir+tr),Jt=Lt+vi,Bl=Lt-vi;ot[Ct+5]=Bl+ls,ot[Ct+3]=Bl-ls,ot[Ct+1]=Jt+ul,ot[Ct+7]=Jt-ul,Ct+=8}for(Ct=0,Rt=0;Rt<8;++Rt){ge=ot[Ct],Te=ot[Ct+8],qe=ot[Ct+16],xt=ot[Ct+24],gt=ot[Ct+32],Mt=ot[Ct+40],mr=ot[Ct+48];var dl=ge+(Pt=ot[Ct+56]),ys=ge-Pt,Js=Te+mr,Pa=Te-mr,un=qe+Mt,le=qe-Mt,Ne=xt+gt,me=xt-gt,pe=dl+Ne,be=dl-Ne,Se=Js+un,ze=Js-un;ot[Ct]=pe+Se,ot[Ct+32]=pe-Se;var tt=.707106781*(ze+be);ot[Ct+16]=be+tt,ot[Ct+48]=be-tt;var $e=.382683433*((pe=me+le)-(ze=Pa+ys)),He=.5411961*pe+$e,We=1.306562965*ze+$e,vt=.707106781*(Se=le+Pa),jt=ys+vt,Ot=ys-vt;ot[Ct+40]=Ot+He,ot[Ct+24]=Ot-He,ot[Ct+8]=jt+We,ot[Ct+56]=jt-We,Ct++}for(Rt=0;Rt<64;++Rt)wt=ot[Rt]*Ie[Rt],x[Rt]=wt>0?wt+.5|0:wt-.5|0;return x})(R,I),De=0;De<64;++De)b[D[De]]=ye[De];var ee=b[0]-q;q=b[0],ee==0?X(K[0]):(X(K[g[J=32767+ee]]),X(m[J]));for(var Je=63;Je>0&&b[Je]==0;)Je--;if(Je==0)return X(Q),q;for(var Oe,ve=1;ve<=Je;){for(var pt=ve;b[ve]==0&&ve<=Je;)++ve;var et=ve-pt;if(et>=16){Oe=et>>4;for(var Nt=1;Nt<=Oe;++Nt)X(ne);et&=15}J=32767+b[ve],X(te[(et<<4)+g[J]]),X(m[J]),ve++}return Je!=63&&X(Q),q}function se(R){R=Math.min(Math.max(R,1),100),i!=R&&((function(I){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],K=0;K<64;K++){var te=l((q[K]*I+50)/100);te=Math.min(Math.max(te,1),255),o[D[K]]=te}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Q=0;Q<64;Q++){var ne=l((J[Q]*I+50)/100);ne=Math.min(Math.max(ne,1),255),d[D[Q]]=ne}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,ee=0;ee<8;ee++)for(var Je=0;Je<8;Je++)u[De]=1/(o[D[De]]*ye[ee]*ye[Je]*8),f[De]=1/(d[D[De]]*ye[ee]*ye[Je]*8),De++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),i=R)}this.encode=function(R,I){I&&se(I),v=new Array,y=0,j=7,ce(65496),ce(65504),ce(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),ce(1),ce(1),he(0),he(0),(function(){ce(65499),ce(132),he(0);for(var Te=0;Te<64;Te++)he(o[Te]);he(1);for(var qe=0;qe<64;qe++)he(d[qe])})(),(function(Te,qe){ce(65472),ce(17),he(8),ce(qe),ce(Te),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)})(R.width,R.height),(function(){ce(65476),ce(418),he(0);for(var Te=0;Te<16;Te++)he(M[Te+1]);for(var qe=0;qe<=11;qe++)he(F[qe]);he(16);for(var xt=0;xt<16;xt++)he(H[xt+1]);for(var gt=0;gt<=161;gt++)he(L[gt]);he(1);for(var Mt=0;Mt<16;Mt++)he(z[Mt+1]);for(var mr=0;mr<=11;mr++)he(V[mr]);he(17);for(var Pt=0;Pt<16;Pt++)he(G[Pt+1]);for(var Rt=0;Rt<=161;Rt++)he(ie[Rt])})(),ce(65498),ce(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var q=0,K=0,te=0;y=0,j=7,this.encode.displayName="_encode_";for(var J,Q,ne,ye,De,ee,Je,Oe,ve,pt=R.data,et=R.width,Nt=R.height,ot=4*et,Ie=0;Ie<Nt;){for(J=0;J<ot;){for(De=ot*Ie+J,Je=-1,Oe=0,ve=0;ve<64;ve++)ee=De+(Oe=ve>>3)*ot+(Je=4*(7&ve)),Ie+Oe>=Nt&&(ee-=ot*(Ie+1+Oe-Nt)),J+Je>=ot&&(ee-=J+Je-ot+4),Q=pt[ee++],ne=pt[ee++],ye=pt[ee++],S[ve]=(P[Q]+P[ne+256|0]+P[ye+512|0]>>16)-128,N[ve]=(P[Q+768|0]+P[ne+1024|0]+P[ye+1280|0]>>16)-128,C[ve]=(P[Q+1280|0]+P[ne+1536|0]+P[ye+1792|0]>>16)-128;q=ke(S,u,q,t,a),K=ke(N,f,K,r,s),te=ke(C,f,te,r,s),J+=32}Ie+=8}if(j>=0){var ge=[];ge[1]=j+1,ge[0]=(1<<j+1)-1,X(ge)}return ce(65497),new Uint8Array(v)},e=e||50,(function(){for(var R=String.fromCharCode,I=0;I<256;I++)T[I]=R(I)})(),t=Z(M,F),r=Z(z,V),a=Z(H,L),s=Z(G,ie),(function(){for(var R=1,I=2,q=1;q<=15;q++){for(var K=R;K<I;K++)g[32767+K]=q,m[32767+K]=[],m[32767+K][1]=q,m[32767+K][0]=K;for(var te=-(I-1);te<=-R;te++)g[32767+te]=q,m[32767+te]=[],m[32767+te][1]=q,m[32767+te][0]=I-1+te;R<<=1,I<<=1}})(),(function(){for(var R=0;R<256;R++)P[R]=19595*R,P[R+256|0]=38470*R,P[R+512|0]=7471*R+32768,P[R+768|0]=-11059*R,P[R+1024|0]=-21709*R,P[R+1280|0]=32768*R+8421375,P[R+1536|0]=-27439*R,P[R+1792|0]=-5329*R})(),se(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function YO(e){function t(F){if(!F)throw Error("assert :P")}function r(F,H,L){for(var z=0;4>z;z++)if(F[H+z]!=L.charCodeAt(z))return!0;return!1}function a(F,H,L,z,V){for(var G=0;G<V;G++)F[H+G]=L[z+G]}function s(F,H,L,z){for(var V=0;V<z;V++)F[H+V]=L}function i(F){return new Int32Array(F)}function l(F,H){for(var L=[],z=0;z<F;z++)L.push(new H);return L}function o(F,H){var L=[];return(function z(V,G,ie){for(var Z=ie[G],X=0;X<Z&&(V.push(ie.length>G+1?[]:new H),!(ie.length<G+1));X++)z(V[X],G+1,ie)})(L,0,F),L}var d=function(){var F=this;function H(_,E){for(var U=1<<E-1>>>0;_&U;)U>>>=1;return U?(_&U-1)+U:_}function L(_,E,U,W,ae){t(!(W%U));do _[E+(W-=U)]=ae;while(0<W)}function z(_,E,U,W,ae){if(t(2328>=ae),512>=ae)var oe=i(512);else if((oe=i(ae))==null)return 0;return(function(ue,fe,xe,je,Fe,Ve){var we,Me,Be=fe,at=1<<xe,Ue=i(16),rt=i(16);for(t(Fe!=0),t(je!=null),t(ue!=null),t(0<xe),Me=0;Me<Fe;++Me){if(15<je[Me])return 0;++Ue[je[Me]]}if(Ue[0]==Fe)return 0;for(rt[1]=0,we=1;15>we;++we){if(Ue[we]>1<<we)return 0;rt[we+1]=rt[we]+Ue[we]}for(Me=0;Me<Fe;++Me)we=je[Me],0<je[Me]&&(Ve[rt[we]++]=Me);if(rt[15]==1)return(je=new V).g=0,je.value=Ve[0],L(ue,Be,1,at,je),at;var lt,yt=-1,ft=at-1,Wt=0,It=1,vr=1,qt=1<<xe;for(Me=0,we=1,Fe=2;we<=xe;++we,Fe<<=1){if(It+=vr<<=1,0>(vr-=Ue[we]))return 0;for(;0<Ue[we];--Ue[we])(je=new V).g=we,je.value=Ve[Me++],L(ue,Be+Wt,Fe,qt,je),Wt=H(Wt,we)}for(we=xe+1,Fe=2;15>=we;++we,Fe<<=1){if(It+=vr<<=1,0>(vr-=Ue[we]))return 0;for(;0<Ue[we];--Ue[we]){if(je=new V,(Wt&ft)!=yt){for(Be+=qt,lt=1<<(yt=we)-xe;15>yt&&!(0>=(lt-=Ue[yt]));)++yt,lt<<=1;at+=qt=1<<(lt=yt-xe),ue[fe+(yt=Wt&ft)].g=lt+xe,ue[fe+yt].value=Be-fe-yt}je.g=we-xe,je.value=Ve[Me++],L(ue,Be+(Wt>>xe),Fe,qt,je),Wt=H(Wt,we)}}return It!=2*rt[15]-1?0:at})(_,E,U,W,ae,oe)}function V(){this.value=this.g=0}function G(){this.value=this.g=0}function ie(){this.G=l(5,V),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(au,G)}function Z(_,E,U,W){t(_!=null),t(E!=null),t(2147483648>W),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=E,_.pa=U,_.Jd=E,_.Yc=U+W,_.Zc=4<=W?U+W-4+1:U,Q(_)}function X(_,E){for(var U=0;0<E--;)U|=ye(_,128)<<E;return U}function he(_,E){var U=X(_,E);return ne(_)?-U:U}function ce(_,E,U,W){var ae,oe=0;for(t(_!=null),t(E!=null),t(4294967288>W),_.Sb=W,_.Ra=0,_.u=0,_.h=0,4<W&&(W=4),ae=0;ae<W;++ae)oe+=E[U+ae]<<8*ae;_.Ra=oe,_.bb=W,_.oa=E,_.pa=U}function ke(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<_o-8>>>0,++_.bb,_.u-=8;K(_)&&(_.h=1,_.u=0)}function se(_,E){if(t(0<=E),!_.h&&E<=ai){var U=q(_)&bi[E];return _.u+=E,ke(_),U}return _.h=1,_.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(_){return _.Ra>>>(_.u&_o-1)>>>0}function K(_){return t(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>_o}function te(_,E){_.u=E,_.h=K(_)}function J(_){_.u>=So&&(t(_.u>=So),ke(_))}function Q(_){t(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(t(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function ne(_){return X(_,1)}function ye(_,E){var U=_.Ca;0>_.b&&Q(_);var W=_.b,ae=U*E>>>8,oe=(_.I>>>W>ae)+0;for(oe?(U-=ae,_.I-=ae+1<<W>>>0):U=ae+1,W=U,ae=0;256<=W;)ae+=8,W>>=8;return W=7^ae+mc[W],_.b-=W,_.Ca=(U<<W)-1,oe}function De(_,E,U){_[E+0]=U>>24&255,_[E+1]=U>>16&255,_[E+2]=U>>8&255,_[E+3]=255&U}function ee(_,E){return _[E+0]|_[E+1]<<8}function Je(_,E){return ee(_,E)|_[E+2]<<16}function Oe(_,E){return ee(_,E)|ee(_,E+2)<<16}function ve(_,E){var U=1<<E;return t(_!=null),t(0<E),_.X=i(U),_.X==null?0:(_.Mb=32-E,_.Xa=E,1)}function pt(_,E){t(_!=null),t(E!=null),t(_.Xa==E.Xa),a(E.X,0,_.X,0,1<<E.Xa)}function et(){this.X=[],this.Xa=this.Mb=0}function Nt(_,E,U,W){t(U!=null),t(W!=null);var ae=U[0],oe=W[0];return ae==0&&(ae=(_*oe+E/2)/E),oe==0&&(oe=(E*ae+_/2)/_),0>=ae||0>=oe?0:(U[0]=ae,W[0]=oe,1)}function ot(_,E){return _+(1<<E)-1>>>E}function Ie(_,E){return((4278255360&_)+(4278255360&E)>>>0&4278255360)+((16711935&_)+(16711935&E)>>>0&16711935)>>>0}function ge(_,E){F[E]=function(U,W,ae,oe,ue,fe,xe){var je;for(je=0;je<ue;++je){var Fe=F[_](fe[xe+je-1],ae,oe+je);fe[xe+je]=Ie(U[W+je],Fe)}}}function Te(){this.ud=this.hd=this.jd=0}function qe(_,E){return((4278124286&(_^E))>>>1)+(_&E)>>>0}function xt(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function gt(_,E){return xt(_+(_-E+.5>>1))}function Mt(_,E,U){return Math.abs(E-U)-Math.abs(_-U)}function mr(_,E,U,W,ae,oe,ue){for(W=oe[ue-1],U=0;U<ae;++U)oe[ue+U]=W=Ie(_[E+U],W)}function Pt(_,E,U,W,ae){var oe;for(oe=0;oe<U;++oe){var ue=_[E+oe],fe=ue>>8&255,xe=16711935&(xe=(xe=16711935&ue)+((fe<<16)+fe));W[ae+oe]=(4278255360&ue)+xe>>>0}}function Rt(_,E){E.jd=255&_,E.hd=_>>8&255,E.ud=_>>16&255}function wt(_,E,U,W,ae,oe){var ue;for(ue=0;ue<W;++ue){var fe=E[U+ue],xe=fe>>>8,je=fe,Fe=255&(Fe=(Fe=fe>>>16)+((_.jd<<24>>24)*(xe<<24>>24)>>>5));je=255&(je=(je+=(_.hd<<24>>24)*(xe<<24>>24)>>>5)+((_.ud<<24>>24)*(Fe<<24>>24)>>>5)),ae[oe+ue]=(4278255360&fe)+(Fe<<16)+je}}function Ct(_,E,U,W,ae){F[E]=function(oe,ue,fe,xe,je,Fe,Ve,we,Me){for(xe=Ve;xe<we;++xe)for(Ve=0;Ve<Me;++Ve)je[Fe++]=ae(fe[W(oe[ue++])])},F[_]=function(oe,ue,fe,xe,je,Fe,Ve){var we=8>>oe.b,Me=oe.Ea,Be=oe.K[0],at=oe.w;if(8>we)for(oe=(1<<oe.b)-1,at=(1<<we)-1;ue<fe;++ue){var Ue,rt=0;for(Ue=0;Ue<Me;++Ue)Ue&oe||(rt=W(xe[je++])),Fe[Ve++]=ae(Be[rt&at]),rt>>=we}else F["VP8LMapColor"+U](xe,je,Be,at,Fe,Ve,ue,fe,Me)}}function ur(_,E,U,W,ae){for(U=E+U;E<U;){var oe=_[E++];W[ae++]=oe>>16&255,W[ae++]=oe>>8&255,W[ae++]=255&oe}}function Lt(_,E,U,W,ae){for(U=E+U;E<U;){var oe=_[E++];W[ae++]=oe>>16&255,W[ae++]=oe>>8&255,W[ae++]=255&oe,W[ae++]=oe>>24&255}}function Dt(_,E,U,W,ae){for(U=E+U;E<U;){var oe=(ue=_[E++])>>16&240|ue>>12&15,ue=240&ue|ue>>28&15;W[ae++]=oe,W[ae++]=ue}}function tr(_,E,U,W,ae){for(U=E+U;E<U;){var oe=(ue=_[E++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;W[ae++]=oe,W[ae++]=ue}}function wr(_,E,U,W,ae){for(U=E+U;E<U;){var oe=_[E++];W[ae++]=255&oe,W[ae++]=oe>>8&255,W[ae++]=oe>>16&255}}function ir(_,E,U,W,ae,oe){if(oe==0)for(U=E+U;E<U;)De(W,((oe=_[E++])[0]>>24|oe[1]>>8&65280|oe[2]<<8&16711680|oe[3]<<24)>>>0),ae+=32;else a(W,ae,_,E,U)}function Lr(_,E){F[E][0]=F[_+"0"],F[E][1]=F[_+"1"],F[E][2]=F[_+"2"],F[E][3]=F[_+"3"],F[E][4]=F[_+"4"],F[E][5]=F[_+"5"],F[E][6]=F[_+"6"],F[E][7]=F[_+"7"],F[E][8]=F[_+"8"],F[E][9]=F[_+"9"],F[E][10]=F[_+"10"],F[E][11]=F[_+"11"],F[E][12]=F[_+"12"],F[E][13]=F[_+"13"],F[E][14]=F[_+"0"],F[E][15]=F[_+"0"]}function pr(_){return _==T0||_==em||_==of||_==tm}function _a(){this.eb=[],this.size=this.A=this.fb=0}function Xa(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ea(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _a,this.f.kb=new Xa,this.sd=null}function Zt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function $r(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Bi(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function ls(_,E){var U=_.T,W=E.ba.f.RGBA,ae=W.eb,oe=W.fb+_.ka*W.A,ue=ks[E.ba.S],fe=_.y,xe=_.O,je=_.f,Fe=_.N,Ve=_.ea,we=_.W,Me=E.cc,Be=E.dc,at=E.Mc,Ue=E.Nc,rt=_.ka,lt=_.ka+_.T,yt=_.U,ft=yt+1>>1;for(rt==0?ue(fe,xe,null,null,je,Fe,Ve,we,je,Fe,Ve,we,ae,oe,null,null,yt):(ue(E.ec,E.fc,fe,xe,Me,Be,at,Ue,je,Fe,Ve,we,ae,oe-W.A,ae,oe,yt),++U);rt+2<lt;rt+=2)Me=je,Be=Fe,at=Ve,Ue=we,Fe+=_.Rc,we+=_.Rc,oe+=2*W.A,ue(fe,(xe+=2*_.fa)-_.fa,fe,xe,Me,Be,at,Ue,je,Fe,Ve,we,ae,oe-W.A,ae,oe,yt);return xe+=_.fa,_.j+lt<_.o?(a(E.ec,E.fc,fe,xe,yt),a(E.cc,E.dc,je,Fe,ft),a(E.Mc,E.Nc,Ve,we,ft),U--):1&lt||ue(fe,xe,null,null,je,Fe,Ve,we,je,Fe,Ve,we,ae,oe+W.A,null,null,yt),U}function ul(_,E,U){var W=_.F,ae=[_.J];if(W!=null){var oe=_.U,ue=E.ba.S,fe=ue==E0||ue==of;E=E.ba.f.RGBA;var xe=[0],je=_.ka;xe[0]=_.T,_.Kb&&(je==0?--xe[0]:(--je,ae[0]-=_.width),_.j+_.ka+_.T==_.o&&(xe[0]=_.o-_.j-je));var Fe=E.eb;je=E.fb+je*E.A,_=S0(W,ae[0],_.width,oe,xe,Fe,je+(fe?0:3),E.A),t(U==xe),_&&pr(ue)&&Gu(Fe,je,fe,oe,xe,E.A)}return 0}function vi(_){var E=_.ma,U=E.ba.S,W=11>U,ae=U==qs||U==xl||U==E0||U==lf||U==12||pr(U);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!hc(E.Oa,_,ae?11:12))return 0;if(ae&&pr(U)&&Gh(),_.da)alert("todo:use_scaling");else{if(W){if(E.Ib=Bi,_.Kb){if(U=_.U+1>>1,E.memory=i(_.U+2*U),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+_.U,E.Mc=E.cc,E.Nc=E.dc+U,E.Ib=ls,Gh()}}else alert("todo:EmitYUV");ae&&(E.Jb=ul,W&&hl())}if(W&&!uu){for(_=0;256>_;++_)As[_]=89858*(_-128)+df>>jl,$2[_]=-22014*(_-128)+df,Fv[_]=-45773*(_-128),im[_]=113618*(_-128)+df>>jl;for(_=Zu;_<cu;++_)E=76283*(_-16)+df>>jl,H2[_-Zu]=dn(E,255),V2[_-Zu]=dn(E+8>>4,15);uu=1}return 1}function Jt(_){var E=_.ma,U=_.U,W=_.T;return t(!(1&_.ka)),0>=U||0>=W?0:(U=E.Ib(_,E),E.Jb!=null&&E.Jb(_,E,U),E.Dc+=U,1)}function Bl(_){_.ma.memory=null}function dl(_,E,U,W){return se(_,8)!=47?0:(E[0]=se(_,14)+1,U[0]=se(_,14)+1,W[0]=se(_,1),se(_,3)!=0?0:!_.h)}function ys(_,E){if(4>_)return _+1;var U=_-2>>1;return(2+(1&_)<<U)+se(E,U)+1}function Js(_,E){return 120<E?E-120:1<=(U=((U=vl[E-1])>>4)*_+(8-(15&U)))?U:1;var U}function Pa(_,E,U){var W=q(U),ae=_[E+=255&W].g-8;return 0<ae&&(te(U,U.u+8),W=q(U),E+=_[E].value,E+=W&(1<<ae)-1),te(U,U.u+_[E].g),_[E].value}function un(_,E,U){return U.g+=_.g,U.value+=_.value<<E>>>0,t(8>=U.g),_.g}function le(_,E,U){var W=_.xc;return t((E=W==0?0:_.vc[_.md*(U>>W)+(E>>W)])<_.Wb),_.Ya[E]}function Ne(_,E,U,W){var ae=_.ab,oe=_.c*E,ue=_.C;E=ue+E;var fe=U,xe=W;for(W=_.Ta,U=_.Ua;0<ae--;){var je=_.gc[ae],Fe=ue,Ve=E,we=fe,Me=xe,Be=(xe=W,fe=U,je.Ea);switch(t(Fe<Ve),t(Ve<=je.nc),je.hc){case 2:An(we,Me,(Ve-Fe)*Be,xe,fe);break;case 0:var at=Fe,Ue=Ve,rt=xe,lt=fe,yt=(qt=je).Ea;at==0&&(rf(we,Me,null,null,1,rt,lt),mr(we,Me+1,0,0,yt-1,rt,lt+1),Me+=yt,lt+=yt,++at);for(var ft=1<<qt.b,Wt=ft-1,It=ot(yt,qt.b),vr=qt.K,qt=qt.w+(at>>qt.b)*It;at<Ue;){var Ur=vr,Va=qt,_r=1;for(af(we,Me,rt,lt-yt,1,rt,lt);_r<yt;){var Bt=(_r&~Wt)+ft;Bt>yt&&(Bt=yt),(0,pc[Ur[Va++]>>8&15])(we,Me+ +_r,rt,lt+_r-yt,Bt-_r,rt,lt+_r),_r=Bt}Me+=yt,lt+=yt,++at&Wt||(qt+=It)}Ve!=je.nc&&a(xe,fe-Be,xe,fe+(Ve-Fe-1)*Be,Be);break;case 1:for(Be=we,Ue=Me,yt=(we=je.Ea)-(lt=we&~(rt=(Me=1<<je.b)-1)),at=ot(we,je.b),ft=je.K,je=je.w+(Fe>>je.b)*at;Fe<Ve;){for(Wt=ft,It=je,vr=new Te,qt=Ue+lt,Ur=Ue+we;Ue<qt;)Rt(Wt[It++],vr),nf(vr,Be,Ue,Me,xe,fe),Ue+=Me,fe+=Me;Ue<Ur&&(Rt(Wt[It++],vr),nf(vr,Be,Ue,yt,xe,fe),Ue+=yt,fe+=yt),++Fe&rt||(je+=at)}break;case 3:if(we==xe&&Me==fe&&0<je.b){for(Ue=xe,we=Be=fe+(Ve-Fe)*Be-(lt=(Ve-Fe)*ot(je.Ea,je.b)),Me=xe,rt=fe,at=[],lt=(yt=lt)-1;0<=lt;--lt)at[lt]=Me[rt+lt];for(lt=yt-1;0<=lt;--lt)Ue[we+lt]=at[lt];Yh(je,Fe,Ve,xe,Be,xe,fe)}else Yh(je,Fe,Ve,we,Me,xe,fe)}fe=W,xe=U}xe!=U&&a(W,U,fe,xe,oe)}function me(_,E){var U=_.V,W=_.Ba+_.c*_.C,ae=E-_.C;if(t(E<=_.l.o),t(16>=ae),0<ae){var oe=_.l,ue=_.Ta,fe=_.Ua,xe=oe.width;if(Ne(_,ae,U,W),ae=fe=[fe],t((U=_.C)<(W=E)),t(oe.v<oe.va),W>oe.o&&(W=oe.o),U<oe.j){var je=oe.j-U;U=oe.j,ae[0]+=je*xe}if(U>=W?U=0:(ae[0]+=4*oe.v,oe.ka=U-oe.j,oe.U=oe.va-oe.v,oe.T=W-U,U=1),U){if(fe=fe[0],11>(U=_.ca).S){var Fe=U.f.RGBA,Ve=(W=U.S,ae=oe.U,oe=oe.T,je=Fe.eb,Fe.A),we=oe;for(Fe=Fe.fb+_.Ma*Fe.A;0<we--;){var Me=ue,Be=fe,at=ae,Ue=je,rt=Fe;switch(W){case Zh:sf(Me,Be,at,Ue,rt);break;case qs:xc(Me,Be,at,Ue,rt);break;case T0:xc(Me,Be,at,Ue,rt),Gu(Ue,rt,0,at,1,0);break;case Jh:Wu(Me,Be,at,Ue,rt);break;case xl:ir(Me,Be,at,Ue,rt,1);break;case em:ir(Me,Be,at,Ue,rt,1),Gu(Ue,rt,0,at,1,0);break;case E0:ir(Me,Be,at,Ue,rt,0);break;case of:ir(Me,Be,at,Ue,rt,0),Gu(Ue,rt,1,at,1,0);break;case lf:gc(Me,Be,at,Ue,rt);break;case tm:gc(Me,Be,at,Ue,rt),pl(Ue,rt,at,1,0);break;case nu:Co(Me,Be,at,Ue,rt);break;default:t(0)}fe+=xe,Fe+=Ve}_.Ma+=oe}else alert("todo:EmitRescaledRowsYUVA");t(_.Ma<=U.height)}}_.C=E,t(_.C<=_.i)}function pe(_){var E;if(0<_.ua)return 0;for(E=0;E<_.Wb;++E){var U=_.Ya[E].G,W=_.Ya[E].H;if(0<U[1][W[1]+0].g||0<U[2][W[2]+0].g||0<U[3][W[3]+0].g)return 0}return 1}function be(_,E,U,W,ae,oe){if(_.Z!=0){var ue=_.qd,fe=_.rd;for(t(bc[_.Z]!=null);E<U;++E)bc[_.Z](ue,fe,W,ae,W,ae,oe),ue=W,fe=ae,ae+=oe;_.qd=ue,_.rd=fe}}function Se(_,E){var U=_.l.ma,W=U.Z==0||U.Z==1?_.l.j:_.C;if(W=_.C<W?W:_.C,t(E<=_.l.o),E>W){var ae=_.l.width,oe=U.ca,ue=U.tb+ae*W,fe=_.V,xe=_.Ba+_.c*W,je=_.gc;t(_.ab==1),t(je[0].hc==3),Ao(je[0],W,E,fe,xe,oe,ue),be(U,W,E,oe,ue,ae)}_.C=_.Ma=E}function ze(_,E,U,W,ae,oe,ue){var fe=_.$/W,xe=_.$%W,je=_.m,Fe=_.s,Ve=U+_.$,we=Ve;ae=U+W*ae;var Me=U+W*oe,Be=280+Fe.ua,at=_.Pb?fe:16777216,Ue=0<Fe.ua?Fe.Wa:null,rt=Fe.wc,lt=Ve<Me?le(Fe,xe,fe):null;t(_.C<oe),t(Me<=ae);var yt=!1;e:for(;;){for(;yt||Ve<Me;){var ft=0;if(fe>=at){var Wt=Ve-U;t((at=_).Pb),at.wd=at.m,at.xd=Wt,0<at.s.ua&&pt(at.s.Wa,at.s.vb),at=fe+su}if(xe&rt||(lt=le(Fe,xe,fe)),t(lt!=null),lt.Qb&&(E[Ve]=lt.qb,yt=!0),!yt)if(J(je),lt.jc){ft=je,Wt=E;var It=Ve,vr=lt.pd[q(ft)&au-1];t(lt.jc),256>vr.g?(te(ft,ft.u+vr.g),Wt[It]=vr.value,ft=0):(te(ft,ft.u+vr.g-256),t(256<=vr.value),ft=vr.value),ft==0&&(yt=!0)}else ft=Pa(lt.G[0],lt.H[0],je);if(je.h)break;if(yt||256>ft){if(!yt)if(lt.nd)E[Ve]=(lt.qb|ft<<8)>>>0;else{if(J(je),yt=Pa(lt.G[1],lt.H[1],je),J(je),Wt=Pa(lt.G[2],lt.H[2],je),It=Pa(lt.G[3],lt.H[3],je),je.h)break;E[Ve]=(It<<24|yt<<16|ft<<8|Wt)>>>0}if(yt=!1,++Ve,++xe>=W&&(xe=0,++fe,ue!=null&&fe<=oe&&!(fe%16)&&ue(_,fe),Ue!=null))for(;we<Ve;)ft=E[we++],Ue.X[(506832829*ft&4294967295)>>>Ue.Mb]=ft}else if(280>ft){if(ft=ys(ft-256,je),Wt=Pa(lt.G[4],lt.H[4],je),J(je),Wt=Js(W,Wt=ys(Wt,je)),je.h)break;if(Ve-U<Wt||ae-Ve<ft)break e;for(It=0;It<ft;++It)E[Ve+It]=E[Ve+It-Wt];for(Ve+=ft,xe+=ft;xe>=W;)xe-=W,++fe,ue!=null&&fe<=oe&&!(fe%16)&&ue(_,fe);if(t(Ve<=ae),xe&rt&&(lt=le(Fe,xe,fe)),Ue!=null)for(;we<Ve;)ft=E[we++],Ue.X[(506832829*ft&4294967295)>>>Ue.Mb]=ft}else{if(!(ft<Be))break e;for(yt=ft-280,t(Ue!=null);we<Ve;)ft=E[we++],Ue.X[(506832829*ft&4294967295)>>>Ue.Mb]=ft;ft=Ve,t(!(yt>>>(Wt=Ue).Xa)),E[ft]=Wt.X[yt],yt=!0}yt||t(je.h==K(je))}if(_.Pb&&je.h&&Ve<ae)t(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&pt(_.s.vb,_.s.Wa);else{if(je.h)break e;ue?.(_,fe>oe?oe:fe),_.a=0,_.$=Ve-U}return 1}return _.a=3,0}function tt(_){t(_!=null),_.vc=null,_.yc=null,_.Ya=null;var E=_.Wa;E!=null&&(E.X=null),_.vb=null,t(_!=null)}function $e(){var _=new Yt;return _==null?null:(_.a=0,_.xb=ex,Lr("Predictor","VP8LPredictors"),Lr("Predictor","VP8LPredictors_C"),Lr("PredictorAdd","VP8LPredictorsAdd"),Lr("PredictorAdd","VP8LPredictorsAdd_C"),An=Pt,nf=wt,sf=ur,xc=Lt,gc=Dt,Co=tr,Wu=wr,F.VP8LMapColor32b=ko,F.VP8LMapColor8b=Ns,_)}function He(_,E,U,W,ae){var oe=1,ue=[_],fe=[E],xe=W.m,je=W.s,Fe=null,Ve=0;e:for(;;){if(U)for(;oe&&se(xe,1);){var we=ue,Me=fe,Be=W,at=1,Ue=Be.m,rt=Be.gc[Be.ab],lt=se(Ue,2);if(Be.Oc&1<<lt)oe=0;else{switch(Be.Oc|=1<<lt,rt.hc=lt,rt.Ea=we[0],rt.nc=Me[0],rt.K=[null],++Be.ab,t(4>=Be.ab),lt){case 0:case 1:rt.b=se(Ue,3)+2,at=He(ot(rt.Ea,rt.b),ot(rt.nc,rt.b),0,Be,rt.K),rt.K=rt.K[0];break;case 3:var yt,ft=se(Ue,8)+1,Wt=16<ft?0:4<ft?1:2<ft?2:3;if(we[0]=ot(rt.Ea,Wt),rt.b=Wt,yt=at=He(ft,1,0,Be,rt.K)){var It,vr=ft,qt=rt,Ur=1<<(8>>qt.b),Va=i(Ur);if(Va==null)yt=0;else{var _r=qt.K[0],Bt=qt.w;for(Va[0]=qt.K[0][0],It=1;It<1*vr;++It)Va[It]=Ie(_r[Bt+It],Va[It-1]);for(;It<4*Ur;++It)Va[It]=0;qt.K[0]=null,qt.K[0]=Va,yt=1}}at=yt;break;case 2:break;default:t(0)}oe=at}}if(ue=ue[0],fe=fe[0],oe&&se(xe,1)&&!(oe=1<=(Ve=se(xe,4))&&11>=Ve)){W.a=3;break e}var Et;if(Et=oe)t:{var en,or,Ar,ga=W,Yn=ue,Cs=fe,Ra=Ve,Ln=U,$s=ga.m,Rn=ga.s,Rr=[null],ta=1,tn=0,oa=yl[Ra];r:for(;;){if(Ln&&se($s,1)){var Xn=se($s,3)+2,rn=ot(Yn,Xn),ra=ot(Cs,Xn),Tn=rn*ra;if(!He(rn,ra,0,ga,Rr))break r;for(Rr=Rr[0],Rn.xc=Xn,en=0;en<Tn;++en){var va=Rr[en]>>8&65535;Rr[en]=va,va>=ta&&(ta=va+1)}}if($s.h)break r;for(or=0;5>or;++or){var In=Xu[or];!or&&0<Ra&&(In+=1<<Ra),tn<In&&(tn=In)}var Bn=l(ta*oa,V),Sa=ta,Zr=l(Sa,ie);if(Zr==null)var Hs=null;else t(65536>=Sa),Hs=Zr;var hn=i(tn);if(Hs==null||hn==null||Bn==null){ga.a=1;break r}var rr=Bn;for(en=Ar=0;en<ta;++en){var ar=Hs[en],aa=ar.G,wi=ar.H,Nl=0,si=1,zn=0;for(or=0;5>or;++or){In=Xu[or],aa[or]=rr,wi[or]=Ar,!or&&0<Ra&&(In+=1<<Ra);n:{var du,fu=In,om=ga,Ia=hn,rx=rr,ax=Ar,cm=0,wc=om.m,W2=se(wc,1);if(s(Ia,0,0,fu),W2){var nx=se(wc,1)+1,sx=se(wc,1),um=se(wc,sx==0?1:8);Ia[um]=1,nx==2&&(Ia[um=se(wc,8)]=1);var cs=1}else{var mn=i(19),P0=se(wc,4)+4;if(19<P0){om.a=3;var hu=0;break n}for(du=0;du<P0;++du)mn[D0[du]]=se(wc,3);var hf=void 0,Ju=void 0,Do=om,dm=mn,mf=fu,fm=Ia,hm=0,jc=Do.m,ix=8,lx=l(128,V);a:for(;z(lx,0,7,dm,19);){if(se(jc,1)){var Pv=2+2*se(jc,3);if((hf=2+se(jc,Pv))>mf)break a}else hf=mf;for(Ju=0;Ju<mf&&hf--;){J(jc);var ox=lx[0+(127&q(jc))];te(jc,jc.u+ox.g);var mu=ox.value;if(16>mu)fm[Ju++]=mu,mu!=0&&(ix=mu);else{var Mv=mu==16,Lv=mu-16,Rv=cf[Lv],cx=se(jc,gl[Lv])+Rv;if(Ju+cx>mf)break a;for(var Iv=Mv?ix:0;0<cx--;)fm[Ju++]=Iv}}hm=1;break a}hm||(Do.a=3),cs=hm}(cs=cs&&!wc.h)&&(cm=z(rx,ax,8,Ia,fu)),cs&&cm!=0?hu=cm:(om.a=3,hu=0)}if(hu==0)break r;if(si&&rm[or]==1&&(si=rr[Ar].g==0),Nl+=rr[Ar].g,Ar+=hu,3>=or){var ed,mm=hn[0];for(ed=1;ed<In;++ed)hn[ed]>mm&&(mm=hn[ed]);zn+=mm}}if(ar.nd=si,ar.Qb=0,si&&(ar.qb=(aa[3][wi[3]+0].value<<24|aa[1][wi[1]+0].value<<16|aa[2][wi[2]+0].value)>>>0,Nl==0&&256>aa[0][wi[0]+0].value&&(ar.Qb=1,ar.qb+=aa[0][wi[0]+0].value<<8)),ar.jc=!ar.Qb&&6>zn,ar.jc){var M0,Oo=ar;for(M0=0;M0<au;++M0){var Nc=M0,_c=Oo.pd[Nc],pm=Oo.G[0][Oo.H[0]+Nc];256<=pm.value?(_c.g=pm.g+256,_c.value=pm.value):(_c.g=0,_c.value=0,Nc>>=un(pm,8,_c),Nc>>=un(Oo.G[1][Oo.H[1]+Nc],16,_c),Nc>>=un(Oo.G[2][Oo.H[2]+Nc],0,_c),un(Oo.G[3][Oo.H[3]+Nc],24,_c))}}}Rn.vc=Rr,Rn.Wb=ta,Rn.Ya=Hs,Rn.yc=Bn,Et=1;break t}Et=0}if(!(oe=Et)){W.a=3;break e}if(0<Ve){if(je.ua=1<<Ve,!ve(je.Wa,Ve)){W.a=1,oe=0;break e}}else je.ua=0;var xm=W,td=ue,Bv=fe,pf=xm.s,xf=pf.xc;if(xm.c=td,xm.i=Bv,pf.md=ot(td,xf),pf.wc=xf==0?-1:(1<<xf)-1,U){W.xb=iu;break e}if((Fe=i(ue*fe))==null){W.a=1,oe=0;break e}oe=(oe=ze(W,Fe,0,ue,fe,fe,null))&&!xe.h;break e}return oe?(ae!=null?ae[0]=Fe:(t(Fe==null),t(U)),W.$=0,U||tt(je)):tt(je),oe}function We(_,E){var U=_.c*_.i,W=U+E+16*E;return t(_.c<=E),_.V=i(W),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+U+E,1)}function vt(_,E){var U=_.C,W=E-U,ae=_.V,oe=_.Ba+_.c*U;for(t(E<=_.l.o);0<W;){var ue=16<W?16:W,fe=_.l.ma,xe=_.l.width,je=xe*ue,Fe=fe.ca,Ve=fe.tb+xe*U,we=_.Ta,Me=_.Ua;Ne(_,ue,ae,oe),Ki(we,Me,Fe,Ve,je),be(fe,U,U+ue,Fe,Ve,xe),W-=ue,ae+=ue*_.c,U+=ue}t(U==E),_.C=_.Ma=E}function jt(){this.ub=this.yd=this.td=this.Rb=0}function Ot(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function kt(){this.Yb=(function(){var _=[];return(function E(U,W,ae){for(var oe=ae[W],ue=0;ue<oe&&(U.push(ae.length>W+1?[]:0),!(ae.length<W+1));ue++)E(U[ue],W+1,ae)})(_,0,[3,11]),_})()}function zt(){this.jb=i(3),this.Wc=o([4,8],kt),this.Xc=o([4,17],kt)}function xa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Br(){this.ld=this.La=this.dd=this.tc=0}function ja(){this.Na=this.la=0}function ei(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ul(){this.uc=this.M=this.Nb=0,this.wa=Array(new Br),this.Y=0,this.ya=Array(new zl),this.aa=0,this.l=new Kn}function zi(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Qc(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new jt,this.Kc=new Ot,this.ed=new xa,this.Qa=new bt,this.Ic=this.$c=this.Aa=0,this.D=new Ul,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,R),this.ia=0,this.pb=l(4,ei),this.Pa=new zt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zi),this.Hd=0,this.rb=Array(new ja),this.sb=0,this.wa=Array(new Br),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zl),this.L=this.aa=0,this.gd=o([4,2],Br),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Kn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yd(){var _=new Qc;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Gi||(Gi=nc)),_}function Na(_,E,U){return _.a==0&&(_.a=E,_.sc=U,_.cb=0),0}function ti(_,E,U){return 3<=U&&_[E+0]==157&&_[E+1]==1&&_[E+2]==42}function f0(_,E){if(_==null)return 0;if(_.a=0,_.sc="OK",E==null)return Na(_,2,"null VP8Io passed to VP8GetHeaders()");var U=E.data,W=E.w,ae=E.ha;if(4>ae)return Na(_,7,"Truncated header.");var oe=U[W+0]|U[W+1]<<8|U[W+2]<<16,ue=_.Od;if(ue.Rb=!(1&oe),ue.td=oe>>1&7,ue.yd=oe>>4&1,ue.ub=oe>>5,3<ue.td)return Na(_,3,"Incorrect keyframe parameters.");if(!ue.yd)return Na(_,4,"Frame not displayable.");W+=3,ae-=3;var fe=_.Kc;if(ue.Rb){if(7>ae)return Na(_,7,"cannot parse picture header");if(!ti(U,W,ae))return Na(_,3,"Bad code word");fe.c=16383&(U[W+4]<<8|U[W+3]),fe.Td=U[W+4]>>6,fe.i=16383&(U[W+6]<<8|U[W+5]),fe.Ud=U[W+6]>>6,W+=7,ae-=7,_.za=fe.c+15>>4,_.Ub=fe.i+15>>4,E.width=fe.c,E.height=fe.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,s((oe=_.Pa).jb,0,255,oe.jb.length),t((oe=_.Qa)!=null),oe.Cb=0,oe.Bb=0,oe.Fb=1,s(oe.Zb,0,0,oe.Zb.length),s(oe.Lb,0,0,oe.Lb)}if(ue.ub>ae)return Na(_,7,"bad partition length");Z(oe=_.m,U,W,ue.ub),W+=ue.ub,ae-=ue.ub,ue.Rb&&(fe.Ld=ne(oe),fe.Kd=ne(oe)),fe=_.Qa;var xe,je=_.Pa;if(t(oe!=null),t(fe!=null),fe.Cb=ne(oe),fe.Cb){if(fe.Bb=ne(oe),ne(oe)){for(fe.Fb=ne(oe),xe=0;4>xe;++xe)fe.Zb[xe]=ne(oe)?he(oe,7):0;for(xe=0;4>xe;++xe)fe.Lb[xe]=ne(oe)?he(oe,6):0}if(fe.Bb)for(xe=0;3>xe;++xe)je.jb[xe]=ne(oe)?X(oe,8):255}else fe.Bb=0;if(oe.Ka)return Na(_,3,"cannot parse segment header");if((fe=_.ed).zd=ne(oe),fe.Tb=X(oe,6),fe.wb=X(oe,3),fe.Pc=ne(oe),fe.Pc&&ne(oe)){for(je=0;4>je;++je)ne(oe)&&(fe.vd[je]=he(oe,6));for(je=0;4>je;++je)ne(oe)&&(fe.od[je]=he(oe,6))}if(_.L=fe.Tb==0?0:fe.zd?1:2,oe.Ka)return Na(_,3,"cannot parse filter header");var Fe=ae;if(ae=xe=W,W=xe+Fe,fe=Fe,_.Xb=(1<<X(_.m,2))-1,Fe<3*(je=_.Xb))U=7;else{for(xe+=3*je,fe-=3*je,Fe=0;Fe<je;++Fe){var Ve=U[ae+0]|U[ae+1]<<8|U[ae+2]<<16;Ve>fe&&(Ve=fe),Z(_.Jc[+Fe],U,xe,Ve),xe+=Ve,fe-=Ve,ae+=3}Z(_.Jc[+je],U,xe,fe),U=xe<W?0:5}if(U!=0)return Na(_,U,"cannot parse partitions");for(U=X(xe=_.m,7),ae=ne(xe)?he(xe,4):0,W=ne(xe)?he(xe,4):0,fe=ne(xe)?he(xe,4):0,je=ne(xe)?he(xe,4):0,xe=ne(xe)?he(xe,4):0,Fe=_.Qa,Ve=0;4>Ve;++Ve){if(Fe.Cb){var we=Fe.Zb[Ve];Fe.Fb||(we+=U)}else{if(0<Ve){_.pb[Ve]=_.pb[0];continue}we=U}var Me=_.pb[Ve];Me.Sc[0]=bl[dn(we+ae,127)],Me.Sc[1]=wl[dn(we+0,127)],Me.Eb[0]=2*bl[dn(we+W,127)],Me.Eb[1]=101581*wl[dn(we+fe,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=bl[dn(we+je,117)],Me.Qc[1]=wl[dn(we+xe,127)],Me.lc=we+xe}if(!ue.Rb)return Na(_,4,"Not a key frame.");for(ne(oe),ue=_.Pa,U=0;4>U;++U){for(ae=0;8>ae;++ae)for(W=0;3>W;++W)for(fe=0;11>fe;++fe)je=ye(oe,Ha[U][ae][W][fe])?X(oe,8):Ov[U][ae][W][fe],ue.Wc[U][ae].Yb[W][fe]=je;for(ae=0;17>ae;++ae)ue.Xc[U][ae]=ue.Wc[U][Hr[ae]]}return _.kc=ne(oe),_.kc&&(_.Bd=X(oe,8)),_.cb=1}function nc(_,E,U,W,ae,oe,ue){var fe=E[ae].Yb[U];for(U=0;16>ae;++ae){if(!ye(_,fe[U+0]))return ae;for(;!ye(_,fe[U+1]);)if(fe=E[++ae].Yb[0],U=0,ae==16)return 16;var xe=E[ae+1].Yb;if(ye(_,fe[U+2])){var je=_,Fe=0;if(ye(je,(we=fe)[(Ve=U)+3]))if(ye(je,we[Ve+6])){for(fe=0,Ve=2*(Fe=ye(je,we[Ve+8]))+(we=ye(je,we[Ve+9+Fe])),Fe=0,we=Dv[Ve];we[fe];++fe)Fe+=Fe+ye(je,we[fe]);Fe+=3+(8<<Ve)}else ye(je,we[Ve+7])?(Fe=7+2*ye(je,165),Fe+=ye(je,145)):Fe=5+ye(je,159);else Fe=ye(je,we[Ve+4])?3+ye(je,we[Ve+5]):2;fe=xe[2]}else Fe=1,fe=xe[1];xe=ue+Jp[ae],0>(je=_).b&&Q(je);var Ve,we=je.b,Me=(Ve=je.Ca>>1)-(je.I>>we)>>31;--je.b,je.Ca+=Me,je.Ca|=1,je.I-=(Ve+1&Me)<<we,oe[xe]=((Fe^Me)-Me)*W[(0<ae)+0]}return 16}function sc(_){var E=_.rb[_.sb-1];E.la=0,E.Na=0,s(_.zc,0,0,_.zc.length),_.ja=0}function fl(_,E,U,W,ae){ae=_[E+U+32*W]+(ae>>3),_[E+U+32*W]=-256&ae?0>ae?0:255:ae}function vo(_,E,U,W,ae,oe){fl(_,E,0,U,W+ae),fl(_,E,1,U,W+oe),fl(_,E,2,U,W-oe),fl(_,E,3,U,W-ae)}function Sn(_){return(20091*_>>16)+_}function Bs(_,E,U,W){var ae,oe=0,ue=i(16);for(ae=0;4>ae;++ae){var fe=_[E+0]+_[E+8],xe=_[E+0]-_[E+8],je=(35468*_[E+4]>>16)-Sn(_[E+12]),Fe=Sn(_[E+4])+(35468*_[E+12]>>16);ue[oe+0]=fe+Fe,ue[oe+1]=xe+je,ue[oe+2]=xe-je,ue[oe+3]=fe-Fe,oe+=4,E++}for(ae=oe=0;4>ae;++ae)fe=(_=ue[oe+0]+4)+ue[oe+8],xe=_-ue[oe+8],je=(35468*ue[oe+4]>>16)-Sn(ue[oe+12]),fl(U,W,0,0,fe+(Fe=Sn(ue[oe+4])+(35468*ue[oe+12]>>16))),fl(U,W,1,0,xe+je),fl(U,W,2,0,xe-je),fl(U,W,3,0,fe-Fe),oe++,W+=32}function h0(_,E,U,W){var ae=_[E+0]+4,oe=35468*_[E+4]>>16,ue=Sn(_[E+4]),fe=35468*_[E+1]>>16;vo(U,W,0,ae+ue,_=Sn(_[E+1]),fe),vo(U,W,1,ae+oe,_,fe),vo(U,W,2,ae-oe,_,fe),vo(U,W,3,ae-ue,_,fe)}function zh(_,E,U,W,ae){Bs(_,E,U,W),ae&&Bs(_,E+16,U,W+4)}function m0(_,E,U,W){vc(_,E+0,U,W,1),vc(_,E+32,U,W+128,1)}function ri(_,E,U,W){var ae;for(_=_[E+0]+4,ae=0;4>ae;++ae)for(E=0;4>E;++E)fl(U,W,E,ae,_)}function p0(_,E,U,W){_[E+0]&&la(_,E+0,U,W),_[E+16]&&la(_,E+16,U,W+4),_[E+32]&&la(_,E+32,U,W+128),_[E+48]&&la(_,E+48,U,W+128+4)}function x0(_,E,U,W){var ae,oe=i(16);for(ae=0;4>ae;++ae){var ue=_[E+0+ae]+_[E+12+ae],fe=_[E+4+ae]+_[E+8+ae],xe=_[E+4+ae]-_[E+8+ae],je=_[E+0+ae]-_[E+12+ae];oe[0+ae]=ue+fe,oe[8+ae]=ue-fe,oe[4+ae]=je+xe,oe[12+ae]=je-xe}for(ae=0;4>ae;++ae)ue=(_=oe[0+4*ae]+3)+oe[3+4*ae],fe=oe[1+4*ae]+oe[2+4*ae],xe=oe[1+4*ae]-oe[2+4*ae],je=_-oe[3+4*ae],U[W+0]=ue+fe>>3,U[W+16]=je+xe>>3,U[W+32]=ue-fe>>3,U[W+48]=je-xe>>3,W+=64}function Ui(_,E,U){var W,ae=E-32,oe=Us,ue=255-_[ae-1];for(W=0;W<U;++W){var fe,xe=oe,je=ue+_[E-1];for(fe=0;fe<U;++fe)_[E+fe]=xe[je+_[ae+fe]];E+=32}}function g0(_,E){Ui(_,E,4)}function Uh(_,E){Ui(_,E,8)}function qh(_,E){Ui(_,E,16)}function v0(_,E){var U;for(U=0;16>U;++U)a(_,E+32*U,_,E-32,16)}function y0(_,E){var U;for(U=16;0<U;--U)s(_,E,_[E-1],16),E+=32}function Ru(_,E,U){var W;for(W=0;16>W;++W)s(E,U+32*W,_,16)}function ql(_,E){var U,W=16;for(U=0;16>U;++U)W+=_[E-1+32*U]+_[E+U-32];Ru(W>>5,_,E)}function $l(_,E){var U,W=8;for(U=0;16>U;++U)W+=_[E-1+32*U];Ru(W>>4,_,E)}function ic(_,E){var U,W=8;for(U=0;16>U;++U)W+=_[E+U-32];Ru(W>>4,_,E)}function Iu(_,E){Ru(128,_,E)}function lr(_,E,U){return _+2*E+U+2>>2}function Zc(_,E){var U,W=E-32;for(W=new Uint8Array([lr(_[W-1],_[W+0],_[W+1]),lr(_[W+0],_[W+1],_[W+2]),lr(_[W+1],_[W+2],_[W+3]),lr(_[W+2],_[W+3],_[W+4])]),U=0;4>U;++U)a(_,E+32*U,W,0,W.length)}function $h(_,E){var U=_[E-1],W=_[E-1+32],ae=_[E-1+64],oe=_[E-1+96];De(_,E+0,16843009*lr(_[E-1-32],U,W)),De(_,E+32,16843009*lr(U,W,ae)),De(_,E+64,16843009*lr(W,ae,oe)),De(_,E+96,16843009*lr(ae,oe,oe))}function b0(_,E){var U,W=4;for(U=0;4>U;++U)W+=_[E+U-32]+_[E-1+32*U];for(W>>=3,U=0;4>U;++U)s(_,E+32*U,W,4)}function Hh(_,E){var U=_[E-1+0],W=_[E-1+32],ae=_[E-1+64],oe=_[E-1-32],ue=_[E+0-32],fe=_[E+1-32],xe=_[E+2-32],je=_[E+3-32];_[E+0+96]=lr(W,ae,_[E-1+96]),_[E+1+96]=_[E+0+64]=lr(U,W,ae),_[E+2+96]=_[E+1+64]=_[E+0+32]=lr(oe,U,W),_[E+3+96]=_[E+2+64]=_[E+1+32]=_[E+0+0]=lr(ue,oe,U),_[E+3+64]=_[E+2+32]=_[E+1+0]=lr(fe,ue,oe),_[E+3+32]=_[E+2+0]=lr(xe,fe,ue),_[E+3+0]=lr(je,xe,fe)}function qi(_,E){var U=_[E+1-32],W=_[E+2-32],ae=_[E+3-32],oe=_[E+4-32],ue=_[E+5-32],fe=_[E+6-32],xe=_[E+7-32];_[E+0+0]=lr(_[E+0-32],U,W),_[E+1+0]=_[E+0+32]=lr(U,W,ae),_[E+2+0]=_[E+1+32]=_[E+0+64]=lr(W,ae,oe),_[E+3+0]=_[E+2+32]=_[E+1+64]=_[E+0+96]=lr(ae,oe,ue),_[E+3+32]=_[E+2+64]=_[E+1+96]=lr(oe,ue,fe),_[E+3+64]=_[E+2+96]=lr(ue,fe,xe),_[E+3+96]=lr(fe,xe,xe)}function bs(_,E){var U=_[E-1+0],W=_[E-1+32],ae=_[E-1+64],oe=_[E-1-32],ue=_[E+0-32],fe=_[E+1-32],xe=_[E+2-32],je=_[E+3-32];_[E+0+0]=_[E+1+64]=oe+ue+1>>1,_[E+1+0]=_[E+2+64]=ue+fe+1>>1,_[E+2+0]=_[E+3+64]=fe+xe+1>>1,_[E+3+0]=xe+je+1>>1,_[E+0+96]=lr(ae,W,U),_[E+0+64]=lr(W,U,oe),_[E+0+32]=_[E+1+96]=lr(U,oe,ue),_[E+1+32]=_[E+2+96]=lr(oe,ue,fe),_[E+2+32]=_[E+3+96]=lr(ue,fe,xe),_[E+3+32]=lr(fe,xe,je)}function w0(_,E){var U=_[E+0-32],W=_[E+1-32],ae=_[E+2-32],oe=_[E+3-32],ue=_[E+4-32],fe=_[E+5-32],xe=_[E+6-32],je=_[E+7-32];_[E+0+0]=U+W+1>>1,_[E+1+0]=_[E+0+64]=W+ae+1>>1,_[E+2+0]=_[E+1+64]=ae+oe+1>>1,_[E+3+0]=_[E+2+64]=oe+ue+1>>1,_[E+0+32]=lr(U,W,ae),_[E+1+32]=_[E+0+96]=lr(W,ae,oe),_[E+2+32]=_[E+1+96]=lr(ae,oe,ue),_[E+3+32]=_[E+2+96]=lr(oe,ue,fe),_[E+3+64]=lr(ue,fe,xe),_[E+3+96]=lr(fe,xe,je)}function Bu(_,E){var U=_[E-1+0],W=_[E-1+32],ae=_[E-1+64],oe=_[E-1+96];_[E+0+0]=U+W+1>>1,_[E+2+0]=_[E+0+32]=W+ae+1>>1,_[E+2+32]=_[E+0+64]=ae+oe+1>>1,_[E+1+0]=lr(U,W,ae),_[E+3+0]=_[E+1+32]=lr(W,ae,oe),_[E+3+32]=_[E+1+64]=lr(ae,oe,oe),_[E+3+64]=_[E+2+64]=_[E+0+96]=_[E+1+96]=_[E+2+96]=_[E+3+96]=oe}function $i(_,E){var U=_[E-1+0],W=_[E-1+32],ae=_[E-1+64],oe=_[E-1+96],ue=_[E-1-32],fe=_[E+0-32],xe=_[E+1-32],je=_[E+2-32];_[E+0+0]=_[E+2+32]=U+ue+1>>1,_[E+0+32]=_[E+2+64]=W+U+1>>1,_[E+0+64]=_[E+2+96]=ae+W+1>>1,_[E+0+96]=oe+ae+1>>1,_[E+3+0]=lr(fe,xe,je),_[E+2+0]=lr(ue,fe,xe),_[E+1+0]=_[E+3+32]=lr(U,ue,fe),_[E+1+32]=_[E+3+64]=lr(W,U,ue),_[E+1+64]=_[E+3+96]=lr(ae,W,U),_[E+1+96]=lr(oe,ae,W)}function zu(_,E){var U;for(U=0;8>U;++U)a(_,E+32*U,_,E-32,8)}function yo(_,E){var U;for(U=0;8>U;++U)s(_,E,_[E-1],8),E+=32}function Uu(_,E,U){var W;for(W=0;8>W;++W)s(E,U+32*W,_,8)}function lc(_,E){var U,W=8;for(U=0;8>U;++U)W+=_[E+U-32]+_[E-1+32*U];Uu(W>>4,_,E)}function Xd(_,E){var U,W=4;for(U=0;8>U;++U)W+=_[E+U-32];Uu(W>>3,_,E)}function Qd(_,E){var U,W=4;for(U=0;8>U;++U)W+=_[E-1+32*U];Uu(W>>3,_,E)}function os(_,E){Uu(128,_,E)}function Hi(_,E,U){var W=_[E-U],ae=_[E+0],oe=3*(ae-W)+yc[1020+_[E-2*U]-_[E+U]],ue=C0[112+(oe+4>>3)];_[E-U]=Us[255+W+C0[112+(oe+3>>3)]],_[E+0]=Us[255+ae-ue]}function bo(_,E,U,W){var ae=_[E+0],oe=_[E+U];return _s[255+_[E-2*U]-_[E-U]]>W||_s[255+oe-ae]>W}function oc(_,E,U,W){return 4*_s[255+_[E-U]-_[E+0]]+_s[255+_[E-2*U]-_[E+U]]<=W}function Zd(_,E,U,W,ae){var oe=_[E-3*U],ue=_[E-2*U],fe=_[E-U],xe=_[E+0],je=_[E+U],Fe=_[E+2*U],Ve=_[E+3*U];return 4*_s[255+fe-xe]+_s[255+ue-je]>W?0:_s[255+_[E-4*U]-oe]<=ae&&_s[255+oe-ue]<=ae&&_s[255+ue-fe]<=ae&&_s[255+Ve-Fe]<=ae&&_s[255+Fe-je]<=ae&&_s[255+je-xe]<=ae}function qu(_,E,U,W){var ae=2*W+1;for(W=0;16>W;++W)oc(_,E+W,U,ae)&&Hi(_,E+W,U)}function cc(_,E,U,W){var ae=2*W+1;for(W=0;16>W;++W)oc(_,E+W*U,1,ae)&&Hi(_,E+W*U,1)}function Jc(_,E,U,W){var ae;for(ae=3;0<ae;--ae)qu(_,E+=4*U,U,W)}function $u(_,E,U,W){var ae;for(ae=3;0<ae;--ae)cc(_,E+=4,U,W)}function wo(_,E,U,W,ae,oe,ue,fe){for(oe=2*oe+1;0<ae--;){if(Zd(_,E,U,oe,ue))if(bo(_,E,U,fe))Hi(_,E,U);else{var xe=_,je=E,Fe=U,Ve=xe[je-2*Fe],we=xe[je-Fe],Me=xe[je+0],Be=xe[je+Fe],at=xe[je+2*Fe],Ue=27*(lt=yc[1020+3*(Me-we)+yc[1020+Ve-Be]])+63>>7,rt=18*lt+63>>7,lt=9*lt+63>>7;xe[je-3*Fe]=Us[255+xe[je-3*Fe]+lt],xe[je-2*Fe]=Us[255+Ve+rt],xe[je-Fe]=Us[255+we+Ue],xe[je+0]=Us[255+Me-Ue],xe[je+Fe]=Us[255+Be-rt],xe[je+2*Fe]=Us[255+at-lt]}E+=W}}function uc(_,E,U,W,ae,oe,ue,fe){for(oe=2*oe+1;0<ae--;){if(Zd(_,E,U,oe,ue))if(bo(_,E,U,fe))Hi(_,E,U);else{var xe=_,je=E,Fe=U,Ve=xe[je-Fe],we=xe[je+0],Me=xe[je+Fe],Be=C0[112+(4+(at=3*(we-Ve))>>3)],at=C0[112+(at+3>>3)],Ue=Be+1>>1;xe[je-2*Fe]=Us[255+xe[je-2*Fe]+Ue],xe[je-Fe]=Us[255+Ve+at],xe[je+0]=Us[255+we-Be],xe[je+Fe]=Us[255+Me-Ue]}E+=W}}function Vh(_,E,U,W,ae,oe){wo(_,E,U,1,16,W,ae,oe)}function Wh(_,E,U,W,ae,oe){wo(_,E,1,U,16,W,ae,oe)}function dc(_,E,U,W,ae,oe){var ue;for(ue=3;0<ue;--ue)uc(_,E+=4*U,U,1,16,W,ae,oe)}function Kh(_,E,U,W,ae,oe){var ue;for(ue=3;0<ue;--ue)uc(_,E+=4,1,U,16,W,ae,oe)}function B(_,E,U,W,ae,oe,ue,fe){wo(_,E,ae,1,8,oe,ue,fe),wo(U,W,ae,1,8,oe,ue,fe)}function re(_,E,U,W,ae,oe,ue,fe){wo(_,E,1,ae,8,oe,ue,fe),wo(U,W,1,ae,8,oe,ue,fe)}function _e(_,E,U,W,ae,oe,ue,fe){uc(_,E+4*ae,ae,1,8,oe,ue,fe),uc(U,W+4*ae,ae,1,8,oe,ue,fe)}function Ee(_,E,U,W,ae,oe,ue,fe){uc(_,E+4,1,ae,8,oe,ue,fe),uc(U,W+4,1,ae,8,oe,ue,fe)}function Le(){this.ba=new ea,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new $r,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function it(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ht(){this.ua=0,this.Wa=new et,this.vb=new et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new V}function Yt(){this.xb=this.a=0,this.l=new Kn,this.ca=new ea,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ht,this.ab=0,this.gc=l(4,ht),this.Oc=0}function dr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Kn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function br(_,E,U,W,ae,oe,ue){for(_=_==null?0:_[E+0],E=0;E<ue;++E)ae[oe+E]=_+U[W+E]&255,_=ae[oe+E]}function ia(_,E,U,W,ae,oe,ue){var fe;if(_==null)br(null,null,U,W,ae,oe,ue);else for(fe=0;fe<ue;++fe)ae[oe+fe]=_[E+fe]+U[W+fe]&255}function Ja(_,E,U,W,ae,oe,ue){if(_==null)br(null,null,U,W,ae,oe,ue);else{var fe,xe=_[E+0],je=xe,Fe=xe;for(fe=0;fe<ue;++fe)je=Fe+(xe=_[E+fe])-je,Fe=U[W+fe]+(-256&je?0>je?0:255:je)&255,je=xe,ae[oe+fe]=Fe}}function kn(_,E,U,W){var ae=E.width,oe=E.o;if(t(_!=null&&E!=null),0>U||0>=W||U+W>oe)return null;if(!_.Cc){if(_.ga==null){var ue;if(_.ga=new dr,(ue=_.ga==null)||(ue=E.width*E.o,t(_.Gb.length==0),_.Gb=i(ue),_.Uc=0,_.Gb==null?ue=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,ue=1),ue=!ue),!ue){ue=_.ga;var fe=_.Fa,xe=_.P,je=_.qc,Fe=_.mb,Ve=_.nb,we=xe+1,Me=je-1,Be=ue.l;if(t(fe!=null&&Fe!=null&&E!=null),bc[0]=null,bc[1]=br,bc[2]=ia,bc[3]=Ja,ue.ca=Fe,ue.tb=Ve,ue.c=E.width,ue.i=E.height,t(0<ue.c&&0<ue.i),1>=je)E=0;else if(ue.$a=3&fe[xe+0],ue.Z=fe[xe+0]>>2&3,ue.Lc=fe[xe+0]>>4&3,xe=fe[xe+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||xe)E=0;else if(Be.put=Jt,Be.ac=vi,Be.bc=Bl,Be.ma=ue,Be.width=E.width,Be.height=E.height,Be.Da=E.Da,Be.v=E.v,Be.va=E.va,Be.j=E.j,Be.o=E.o,ue.$a)e:{t(ue.$a==1),E=$e();t:for(;;){if(E==null){E=0;break e}if(t(ue!=null),ue.mc=E,E.c=ue.c,E.i=ue.i,E.l=ue.l,E.l.ma=ue,E.l.width=ue.c,E.l.height=ue.i,E.a=0,ce(E.m,fe,we,Me),!He(ue.c,ue.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&pe(E.s)?(ue.ic=1,fe=E.c*E.i,E.Ta=null,E.Ua=0,E.V=i(fe),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(ue.ic=0,E=We(E,ue.c)),!E))break t;E=1;break e}ue.mc=null,E=0}else E=Me>=ue.c*ue.i;ue=!E}if(ue)return null;_.ga.Lc!=1?_.Ga=0:W=oe-U}t(_.ga!=null),t(U+W<=oe);e:{if(E=(fe=_.ga).c,oe=fe.l.o,fe.$a==0){if(we=_.rc,Me=_.Vc,Be=_.Fa,xe=_.P+1+U*E,je=_.mb,Fe=_.nb+U*E,t(xe<=_.P+_.qc),fe.Z!=0)for(t(bc[fe.Z]!=null),ue=0;ue<W;++ue)bc[fe.Z](we,Me,Be,xe,je,Fe,E),we=je,Me=Fe,Fe+=E,xe+=E;else for(ue=0;ue<W;++ue)a(je,Fe,Be,xe,E),we=je,Me=Fe,Fe+=E,xe+=E;_.rc=we,_.Vc=Me}else{if(t(fe.mc!=null),E=U+W,t((ue=fe.mc)!=null),t(E<=ue.i),ue.C>=E)E=1;else if(fe.ic||hl(),fe.ic){fe=ue.V,we=ue.Ba,Me=ue.c;var at=ue.i,Ue=(Be=1,xe=ue.$/Me,je=ue.$%Me,Fe=ue.m,Ve=ue.s,ue.$),rt=Me*at,lt=Me*E,yt=Ve.wc,ft=Ue<lt?le(Ve,je,xe):null;t(Ue<=rt),t(E<=at),t(pe(Ve));t:for(;;){for(;!Fe.h&&Ue<lt;){if(je&yt||(ft=le(Ve,je,xe)),t(ft!=null),J(Fe),256>(at=Pa(ft.G[0],ft.H[0],Fe)))fe[we+Ue]=at,++Ue,++je>=Me&&(je=0,++xe<=E&&!(xe%16)&&Se(ue,xe));else{if(!(280>at)){Be=0;break t}at=ys(at-256,Fe);var Wt,It=Pa(ft.G[4],ft.H[4],Fe);if(J(Fe),!(Ue>=(It=Js(Me,It=ys(It,Fe)))&&rt-Ue>=at)){Be=0;break t}for(Wt=0;Wt<at;++Wt)fe[we+Ue+Wt]=fe[we+Ue+Wt-It];for(Ue+=at,je+=at;je>=Me;)je-=Me,++xe<=E&&!(xe%16)&&Se(ue,xe);Ue<lt&&je&yt&&(ft=le(Ve,je,xe))}t(Fe.h==K(Fe))}Se(ue,xe>E?E:xe);break t}!Be||Fe.h&&Ue<rt?(Be=0,ue.a=Fe.h?5:3):ue.$=Ue,E=Be}else E=ze(ue,ue.V,ue.Ba,ue.c,ue.i,E,vt);if(!E){W=0;break e}}U+W>=oe&&(_.Cc=1),W=1}if(!W)return null;if(_.Cc&&((W=_.ga)!=null&&(W.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+U*ae}function Ma(_,E,U,W,ae,oe){for(;0<ae--;){var ue,fe=_,xe=E+(U?1:0),je=_,Fe=E+(U?0:3);for(ue=0;ue<W;++ue){var Ve=je[Fe+4*ue];Ve!=255&&(Ve*=32897,fe[xe+4*ue+0]=fe[xe+4*ue+0]*Ve>>23,fe[xe+4*ue+1]=fe[xe+4*ue+1]*Ve>>23,fe[xe+4*ue+2]=fe[xe+4*ue+2]*Ve>>23)}E+=oe}}function Gn(_,E,U,W,ae){for(;0<W--;){var oe;for(oe=0;oe<U;++oe){var ue=_[E+2*oe+0],fe=15&(je=_[E+2*oe+1]),xe=4369*fe,je=(240&je|je>>4)*xe>>16;_[E+2*oe+0]=(240&ue|ue>>4)*xe>>16&240|(15&ue|ue<<4)*xe>>16>>4&15,_[E+2*oe+1]=240&je|fe}E+=ae}}function Mn(_,E,U,W,ae,oe,ue,fe){var xe,je,Fe=255;for(je=0;je<ae;++je){for(xe=0;xe<W;++xe){var Ve=_[E+xe];oe[ue+4*xe]=Ve,Fe&=Ve}E+=U,ue+=fe}return Fe!=255}function ws(_,E,U,W,ae){var oe;for(oe=0;oe<ae;++oe)U[W+oe]=_[E+oe]>>8}function hl(){Gu=Ma,pl=Gn,S0=Mn,Ki=ws}function yi(_,E,U){F[_]=function(W,ae,oe,ue,fe,xe,je,Fe,Ve,we,Me,Be,at,Ue,rt,lt,yt){var ft,Wt=yt-1>>1,It=fe[xe+0]|je[Fe+0]<<16,vr=Ve[we+0]|Me[Be+0]<<16;t(W!=null);var qt=3*It+vr+131074>>2;for(E(W[ae+0],255&qt,qt>>16,at,Ue),oe!=null&&(qt=3*vr+It+131074>>2,E(oe[ue+0],255&qt,qt>>16,rt,lt)),ft=1;ft<=Wt;++ft){var Ur=fe[xe+ft]|je[Fe+ft]<<16,Va=Ve[we+ft]|Me[Be+ft]<<16,_r=It+Ur+vr+Va+524296,Bt=_r+2*(Ur+vr)>>3;qt=Bt+It>>1,It=(_r=_r+2*(It+Va)>>3)+Ur>>1,E(W[ae+2*ft-1],255&qt,qt>>16,at,Ue+(2*ft-1)*U),E(W[ae+2*ft-0],255&It,It>>16,at,Ue+(2*ft-0)*U),oe!=null&&(qt=_r+vr>>1,It=Bt+Va>>1,E(oe[ue+2*ft-1],255&qt,qt>>16,rt,lt+(2*ft-1)*U),E(oe[ue+2*ft+0],255&It,It>>16,rt,lt+(2*ft+0)*U)),It=Ur,vr=Va}1&yt||(qt=3*It+vr+131074>>2,E(W[ae+yt-1],255&qt,qt>>16,at,Ue+(yt-1)*U),oe!=null&&(qt=3*vr+It+131074>>2,E(oe[ue+yt-1],255&qt,qt>>16,rt,lt+(yt-1)*U)))}}function Gh(){ks[Zh]=Qu,ks[qs]=uf,ks[Jh]=tx,ks[xl]=nm,ks[E0]=lu,ks[lf]=To,ks[nu]=ou,ks[T0]=uf,ks[em]=nm,ks[of]=lu,ks[tm]=To}function Jd(_){return _&-16384?0>_?0:255:_>>sm}function Hu(_,E){return Jd((19077*_>>8)+(26149*E>>8)-14234)}function jo(_,E,U){return Jd((19077*_>>8)-(6419*E>>8)-(13320*U>>8)+8708)}function Hl(_,E){return Jd((19077*_>>8)+(33050*E>>8)-17685)}function Vu(_,E,U,W,ae){W[ae+0]=Hu(_,U),W[ae+1]=jo(_,E,U),W[ae+2]=Hl(_,E)}function eu(_,E,U,W,ae){W[ae+0]=Hl(_,E),W[ae+1]=jo(_,E,U),W[ae+2]=Hu(_,U)}function js(_,E,U,W,ae){var oe=jo(_,E,U);E=oe<<3&224|Hl(_,E)>>3,W[ae+0]=248&Hu(_,U)|oe>>5,W[ae+1]=E}function tu(_,E,U,W,ae){var oe=240&Hl(_,E)|15;W[ae+0]=240&Hu(_,U)|jo(_,E,U)>>4,W[ae+1]=oe}function ru(_,E,U,W,ae){W[ae+0]=255,Vu(_,E,U,W,ae+1)}function ef(_,E,U,W,ae){eu(_,E,U,W,ae),W[ae+3]=255}function No(_,E,U,W,ae){Vu(_,E,U,W,ae),W[ae+3]=255}function dn(_,E){return 0>_?0:_>E?E:_}function fc(_,E,U){F[_]=function(W,ae,oe,ue,fe,xe,je,Fe,Ve){for(var we=Fe+(-2&Ve)*U;Fe!=we;)E(W[ae+0],oe[ue+0],fe[xe+0],je,Fe),E(W[ae+1],oe[ue+0],fe[xe+0],je,Fe+U),ae+=2,++ue,++xe,Fe+=2*U;1&Ve&&E(W[ae+0],oe[ue+0],fe[xe+0],je,Fe)}}function tf(_,E,U){return U==0?_==0?E==0?6:5:E==0?4:0:U}function j0(_,E,U,W,ae){switch(_>>>30){case 3:vc(E,U,W,ae,0);break;case 2:zs(E,U,W,ae);break;case 1:la(E,U,W,ae)}}function Vi(_,E){var U,W,ae=E.M,oe=E.Nb,ue=_.oc,fe=_.pc+40,xe=_.oc,je=_.pc+584,Fe=_.oc,Ve=_.pc+600;for(U=0;16>U;++U)ue[fe+32*U-1]=129;for(U=0;8>U;++U)xe[je+32*U-1]=129,Fe[Ve+32*U-1]=129;for(0<ae?ue[fe-1-32]=xe[je-1-32]=Fe[Ve-1-32]=129:(s(ue,fe-32-1,127,21),s(xe,je-32-1,127,9),s(Fe,Ve-32-1,127,9)),W=0;W<_.za;++W){var we=E.ya[E.aa+W];if(0<W){for(U=-1;16>U;++U)a(ue,fe+32*U-4,ue,fe+32*U+12,4);for(U=-1;8>U;++U)a(xe,je+32*U-4,xe,je+32*U+4,4),a(Fe,Ve+32*U-4,Fe,Ve+32*U+4,4)}var Me=_.Gd,Be=_.Hd+W,at=we.ad,Ue=we.Hc;if(0<ae&&(a(ue,fe-32,Me[Be].y,0,16),a(xe,je-32,Me[Be].f,0,8),a(Fe,Ve-32,Me[Be].ea,0,8)),we.Za){var rt=ue,lt=fe-32+16;for(0<ae&&(W>=_.za-1?s(rt,lt,Me[Be].y[15],4):a(rt,lt,Me[Be+1].y,0,4)),U=0;4>U;U++)rt[lt+128+U]=rt[lt+256+U]=rt[lt+384+U]=rt[lt+0+U];for(U=0;16>U;++U,Ue<<=2)rt=ue,lt=fe+En[U],fn[we.Ob[U]](rt,lt),j0(Ue,at,16*+U,rt,lt)}else if(rt=tf(W,ae,we.Ob[0]),ni[rt](ue,fe),Ue!=0)for(U=0;16>U;++U,Ue<<=2)j0(Ue,at,16*+U,ue,fe+En[U]);for(U=we.Gc,rt=tf(W,ae,we.Dd),Gl[rt](xe,je),Gl[rt](Fe,Ve),Ue=at,rt=xe,lt=je,255&(we=0|U)&&(170&we?ml(Ue,256,rt,lt):Qr(Ue,256,rt,lt)),we=Fe,Ue=Ve,255&(U>>=8)&&(170&U?ml(at,320,we,Ue):Qr(at,320,we,Ue)),ae<_.Ub-1&&(a(Me[Be].y,0,ue,fe+480,16),a(Me[Be].f,0,xe,je+224,8),a(Me[Be].ea,0,Fe,Ve+224,8)),U=8*oe*_.B,Me=_.sa,Be=_.ta+16*W+16*oe*_.R,at=_.qa,we=_.ra+8*W+U,Ue=_.Ha,rt=_.Ia+8*W+U,U=0;16>U;++U)a(Me,Be+U*_.R,ue,fe+32*U,16);for(U=0;8>U;++U)a(at,we+U*_.B,xe,je+32*U,8),a(Ue,rt+U*_.B,Fe,Ve+32*U,8)}}function Vl(_,E,U,W,ae,oe,ue,fe,xe){var je=[0],Fe=[0],Ve=0,we=xe!=null?xe.kd:0,Me=xe??new it;if(_==null||12>U)return 7;Me.data=_,Me.w=E,Me.ha=U,E=[E],U=[U],Me.gb=[Me.gb];e:{var Be=E,at=U,Ue=Me.gb;if(t(_!=null),t(at!=null),t(Ue!=null),Ue[0]=0,12<=at[0]&&!r(_,Be[0],"RIFF")){if(r(_,Be[0]+8,"WEBP")){Ue=3;break e}var rt=Oe(_,Be[0]+4);if(12>rt||4294967286<rt){Ue=3;break e}if(we&&rt>at[0]-8){Ue=7;break e}Ue[0]=rt,Be[0]+=12,at[0]-=12}Ue=0}if(Ue!=0)return Ue;for(rt=0<Me.gb[0],U=U[0];;){e:{var lt=_;at=E,Ue=U;var yt=je,ft=Fe,Wt=Be=[0];if((qt=Ve=[Ve])[0]=0,8>Ue[0])Ue=7;else{if(!r(lt,at[0],"VP8X")){if(Oe(lt,at[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var It=Oe(lt,at[0]+8),vr=1+Je(lt,at[0]+12);if(2147483648<=vr*(lt=1+Je(lt,at[0]+15))){Ue=3;break e}Wt!=null&&(Wt[0]=It),yt!=null&&(yt[0]=vr),ft!=null&&(ft[0]=lt),at[0]+=18,Ue[0]-=18,qt[0]=1}Ue=0}}if(Ve=Ve[0],Be=Be[0],Ue!=0)return Ue;if(at=!!(2&Be),!rt&&Ve)return 3;if(oe!=null&&(oe[0]=!!(16&Be)),ue!=null&&(ue[0]=at),fe!=null&&(fe[0]=0),ue=je[0],Be=Fe[0],Ve&&at&&xe==null){Ue=0;break}if(4>U){Ue=7;break}if(rt&&Ve||!rt&&!Ve&&!r(_,E[0],"ALPH")){U=[U],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{It=_,Ue=E,rt=U;var qt=Me.gb;yt=Me.na,ft=Me.P,Wt=Me.Sa,vr=22,t(It!=null),t(rt!=null),lt=Ue[0];var Ur=rt[0];for(t(yt!=null),t(Wt!=null),yt[0]=null,ft[0]=null,Wt[0]=0;;){if(Ue[0]=lt,rt[0]=Ur,8>Ur){Ue=7;break e}var Va=Oe(It,lt+4);if(4294967286<Va){Ue=3;break e}var _r=8+Va+1&-2;if(vr+=_r,0<qt&&vr>qt){Ue=3;break e}if(!r(It,lt,"VP8 ")||!r(It,lt,"VP8L")){Ue=0;break e}if(Ur[0]<_r){Ue=7;break e}r(It,lt,"ALPH")||(yt[0]=It,ft[0]=lt+8,Wt[0]=Va),lt+=_r,Ur-=_r}}if(U=U[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],Ue!=0)break}U=[U],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(qt=_,Ue=E,rt=U,yt=Me.gb[0],ft=Me.Ja,Wt=Me.xa,It=Ue[0],lt=!r(qt,It,"VP8 "),vr=!r(qt,It,"VP8L"),t(qt!=null),t(rt!=null),t(ft!=null),t(Wt!=null),8>rt[0])Ue=7;else{if(lt||vr){if(qt=Oe(qt,It+4),12<=yt&&qt>yt-12){Ue=3;break e}if(we&&qt>rt[0]-8){Ue=7;break e}ft[0]=qt,Ue[0]+=8,rt[0]-=8,Wt[0]=vr}else Wt[0]=5<=rt[0]&&qt[It+0]==47&&!(qt[It+4]>>5),ft[0]=rt[0];Ue=0}if(U=U[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],E=E[0],Ue!=0)break;if(4294967286<Me.Ja)return 3;if(fe==null||at||(fe[0]=Me.xa?2:1),ue=[ue],Be=[Be],Me.xa){if(5>U){Ue=7;break}fe=ue,we=Be,at=oe,_==null||5>U?_=0:5<=U&&_[E+0]==47&&!(_[E+4]>>5)?(rt=[0],qt=[0],yt=[0],ce(ft=new I,_,E,U),dl(ft,rt,qt,yt)?(fe!=null&&(fe[0]=rt[0]),we!=null&&(we[0]=qt[0]),at!=null&&(at[0]=yt[0]),_=1):_=0):_=0}else{if(10>U){Ue=7;break}fe=Be,_==null||10>U||!ti(_,E+3,U-3)?_=0:(we=_[E+0]|_[E+1]<<8|_[E+2]<<16,at=16383&(_[E+7]<<8|_[E+6]),_=16383&(_[E+9]<<8|_[E+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=Me.Ja||!at||!_?_=0:(ue&&(ue[0]=at),fe&&(fe[0]=_),_=1))}if(!_||(ue=ue[0],Be=Be[0],Ve&&(je[0]!=ue||Fe[0]!=Be)))return 3;xe!=null&&(xe[0]=Me,xe.offset=E-xe.w,t(4294967286>E-xe.w),t(xe.offset==xe.ha-U));break}return Ue==0||Ue==7&&Ve&&xe==null?(oe!=null&&(oe[0]|=Me.na!=null&&0<Me.na.length),W!=null&&(W[0]=ue),ae!=null&&(ae[0]=Be),0):Ue}function hc(_,E,U){var W=E.width,ae=E.height,oe=0,ue=0,fe=W,xe=ae;if(E.Da=_!=null&&0<_.Da,E.Da&&(fe=_.cd,xe=_.bd,oe=_.v,ue=_.j,11>U||(oe&=-2,ue&=-2),0>oe||0>ue||0>=fe||0>=xe||oe+fe>W||ue+xe>ae))return 0;if(E.v=oe,E.j=ue,E.va=oe+fe,E.o=ue+xe,E.U=fe,E.T=xe,E.da=_!=null&&0<_.da,E.da){if(!Nt(fe,xe,U=[_.ib],oe=[_.hb]))return 0;E.ib=U[0],E.hb=oe[0]}return E.ob=_!=null&&_.ob,E.Kb=_==null||!_.Sd,E.da&&(E.ob=E.ib<3*W/4&&E.hb<3*ae/4,E.Kb=0),1}function N0(_){if(_==null)return 2;if(11>_.S){var E=_.f.RGBA;E.fb+=(_.height-1)*E.A,E.A=-E.A}else E=_.f.kb,_=_.height,E.O+=(_-1)*E.fa,E.fa=-E.fa,E.N+=(_-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(_-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(_-1)*E.lb,E.lb=-E.lb);return 0}function Wl(_,E,U,W){if(W==null||0>=_||0>=E)return 2;if(U!=null){if(U.Da){var ae=U.cd,oe=U.bd,ue=-2&U.v,fe=-2&U.j;if(0>ue||0>fe||0>=ae||0>=oe||ue+ae>_||fe+oe>E)return 2;_=ae,E=oe}if(U.da){if(!Nt(_,E,ae=[U.ib],oe=[U.hb]))return 2;_=ae[0],E=oe[0]}}W.width=_,W.height=E;e:{var xe=W.width,je=W.height;if(_=W.S,0>=xe||0>=je||!(_>=Zh&&13>_))_=2;else{if(0>=W.Rd&&W.sd==null){ue=oe=ae=E=0;var Fe=(fe=xe*lm[_])*je;if(11>_||(oe=(je+1)/2*(E=(xe+1)/2),_==12&&(ue=(ae=xe)*je)),(je=i(Fe+2*oe+ue))==null){_=1;break e}W.sd=je,11>_?((xe=W.f.RGBA).eb=je,xe.fb=0,xe.A=fe,xe.size=Fe):((xe=W.f.kb).y=je,xe.O=0,xe.fa=fe,xe.Fd=Fe,xe.f=je,xe.N=0+Fe,xe.Ab=E,xe.Cd=oe,xe.ea=je,xe.W=0+Fe+oe,xe.Db=E,xe.Ed=oe,_==12&&(xe.F=je,xe.J=0+Fe+2*oe),xe.Tc=ue,xe.lb=ae)}if(E=1,ae=W.S,oe=W.width,ue=W.height,ae>=Zh&&13>ae)if(11>ae)_=W.f.RGBA,E&=(fe=Math.abs(_.A))*(ue-1)+oe<=_.size,E&=fe>=oe*lm[ae],E&=_.eb!=null;else{_=W.f.kb,fe=(oe+1)/2,Fe=(ue+1)/2,xe=Math.abs(_.fa),je=Math.abs(_.Ab);var Ve=Math.abs(_.Db),we=Math.abs(_.lb),Me=we*(ue-1)+oe;E&=xe*(ue-1)+oe<=_.Fd,E&=je*(Fe-1)+fe<=_.Cd,E=(E&=Ve*(Fe-1)+fe<=_.Ed)&xe>=oe&je>=fe&Ve>=fe,E&=_.y!=null,E&=_.f!=null,E&=_.ea!=null,ae==12&&(E&=we>=oe,E&=Me<=_.Tc,E&=_.F!=null)}else E=0;_=E?0:2}}return _!=0||U!=null&&U.fd&&(_=N0(W)),_}var au=64,bi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ai=24,_o=32,So=8,mc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(_){return _},F.Predictor2=function(_,E,U){return E[U+0]},F.Predictor3=function(_,E,U){return E[U+1]},F.Predictor4=function(_,E,U){return E[U-1]},F.Predictor5=function(_,E,U){return qe(qe(_,E[U+1]),E[U+0])},F.Predictor6=function(_,E,U){return qe(_,E[U-1])},F.Predictor7=function(_,E,U){return qe(_,E[U+0])},F.Predictor8=function(_,E,U){return qe(E[U-1],E[U+0])},F.Predictor9=function(_,E,U){return qe(E[U+0],E[U+1])},F.Predictor10=function(_,E,U){return qe(qe(_,E[U-1]),qe(E[U+0],E[U+1]))},F.Predictor11=function(_,E,U){var W=E[U+0];return 0>=Mt(W>>24&255,_>>24&255,(E=E[U-1])>>24&255)+Mt(W>>16&255,_>>16&255,E>>16&255)+Mt(W>>8&255,_>>8&255,E>>8&255)+Mt(255&W,255&_,255&E)?W:_},F.Predictor12=function(_,E,U){var W=E[U+0];return(xt((_>>24&255)+(W>>24&255)-((E=E[U-1])>>24&255))<<24|xt((_>>16&255)+(W>>16&255)-(E>>16&255))<<16|xt((_>>8&255)+(W>>8&255)-(E>>8&255))<<8|xt((255&_)+(255&W)-(255&E)))>>>0},F.Predictor13=function(_,E,U){var W=E[U-1];return(gt((_=qe(_,E[U+0]))>>24&255,W>>24&255)<<24|gt(_>>16&255,W>>16&255)<<16|gt(_>>8&255,W>>8&255)<<8|gt(255&_,255&W))>>>0};var rf=F.PredictorAdd0;F.PredictorAdd1=mr,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var af=F.PredictorAdd2;Ct("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var An,Yh=F.ColorIndexInverseTransform,ko=F.MapARGB,Ao=F.VP8LColorIndexInverseTransformAlpha,Ns=F.MapAlpha,pc=F.VP8LPredictorsAdd=[];pc.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var nf,sf,xc,gc,Co,Wu,Wi,vc,zs,ml,la,Qr,La,Cn,Eo,Kl,Ku,_0,Xp,Cv,Ev,Tv,Qp,Zp,Gu,pl,S0,Ki,Yu=i(511),Xh=i(2041),k0=i(225),A0=i(767),Qh=0,yc=Xh,C0=k0,Us=A0,_s=Yu,Zh=0,qs=1,Jh=2,xl=3,E0=4,lf=5,nu=6,T0=7,em=8,of=9,tm=10,gl=[2,3,7],cf=[3,3,11],Xu=[280,256,256,256,40],rm=[0,1,1,1,0],D0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],vl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],su=8,bl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Gi=null,Dv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Jp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],am=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ov=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ss=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ha=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Hr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ni=[],fn=[],Gl=[],iu=1,ex=2,bc=[],ks=[];yi("UpsampleRgbLinePair",Vu,3),yi("UpsampleBgrLinePair",eu,3),yi("UpsampleRgbaLinePair",No,4),yi("UpsampleBgraLinePair",ef,4),yi("UpsampleArgbLinePair",ru,4),yi("UpsampleRgba4444LinePair",tu,2),yi("UpsampleRgb565LinePair",js,2);var Qu=F.UpsampleRgbLinePair,tx=F.UpsampleBgrLinePair,uf=F.UpsampleRgbaLinePair,nm=F.UpsampleBgraLinePair,lu=F.UpsampleArgbLinePair,To=F.UpsampleRgba4444LinePair,ou=F.UpsampleRgb565LinePair,jl=16,df=1<<jl-1,Zu=-227,cu=482,sm=6,uu=0,As=i(256),im=i(256),Fv=i(256),$2=i(256),H2=i(cu-Zu),V2=i(cu-Zu);fc("YuvToRgbRow",Vu,3),fc("YuvToBgrRow",eu,3),fc("YuvToRgbaRow",No,4),fc("YuvToBgraRow",ef,4),fc("YuvToArgbRow",ru,4),fc("YuvToRgba4444Row",tu,2),fc("YuvToRgb565Row",js,2);var En=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ff=[0,2,8],O0=[8,7,6,4,4,2,2,2,1,1,1,1],F0=1;this.WebPDecodeRGBA=function(_,E,U,W,ae){var oe=qs,ue=new Le,fe=new ea;ue.ba=fe,fe.S=oe,fe.width=[fe.width],fe.height=[fe.height];var xe=fe.width,je=fe.height,Fe=new Zt;if(Fe==null||_==null)var Ve=2;else t(Fe!=null),Ve=Vl(_,E,U,Fe.width,Fe.height,Fe.Pd,Fe.Qd,Fe.format,null);if(Ve!=0?xe=0:(xe!=null&&(xe[0]=Fe.width[0]),je!=null&&(je[0]=Fe.height[0]),xe=1),xe){fe.width=fe.width[0],fe.height=fe.height[0],W!=null&&(W[0]=fe.width),ae!=null&&(ae[0]=fe.height);e:{if(W=new Kn,(ae=new it).data=_,ae.w=E,ae.ha=U,ae.kd=1,E=[0],t(ae!=null),((_=Vl(ae.data,ae.w,ae.ha,null,null,null,E,null,ae))==0||_==7)&&E[0]&&(_=4),(E=_)==0){if(t(ue!=null),W.data=ae.data,W.w=ae.w+ae.offset,W.ha=ae.ha-ae.offset,W.put=Jt,W.ac=vi,W.bc=Bl,W.ma=ue,ae.xa){if((_=$e())==null){ue=1;break e}if((function(we,Me){var Be=[0],at=[0],Ue=[0];t:for(;;){if(we==null)return 0;if(Me==null)return we.a=2,0;if(we.l=Me,we.a=0,ce(we.m,Me.data,Me.w,Me.ha),!dl(we.m,Be,at,Ue)){we.a=3;break t}if(we.xb=ex,Me.width=Be[0],Me.height=at[0],!He(Be[0],at[0],1,we,null))break t;return 1}return t(we.a!=0),0})(_,W)){if(W=(E=Wl(W.width,W.height,ue.Oa,ue.ba))==0){t:{W=_;r:for(;;){if(W==null){W=0;break t}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((U=W.l)!=null),t((ae=U.ma)!=null),W.xb!=0){if(W.ca=ae.ba,W.tb=ae.tb,t(W.ca!=null),!hc(ae.Oa,U,xl)){W.a=2;break r}if(!We(W,U.width)||U.da)break r;if((U.da||pr(W.ca.S))&&hl(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&hl()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!ve(W.s.vb,W.s.Wa.Xa)){W.a=1;break r}W.xb=0}if(!ze(W,W.V,W.Ba,W.c,W.i,U.o,me))break r;ae.Dc=W.Ma,W=1;break t}t(W.a!=0),W=0}W=!W}W&&(E=_.a)}else E=_.a}else{if((_=new Yd)==null){ue=1;break e}if(_.Fa=ae.na,_.P=ae.P,_.qc=ae.Sa,f0(_,W)){if((E=Wl(W.width,W.height,ue.Oa,ue.ba))==0){if(_.Aa=0,U=ue.Oa,t((ae=_)!=null),U!=null){if(0<(xe=0>(xe=U.Md)?0:100<xe?255:255*xe/100)){for(je=Fe=0;4>je;++je)12>(Ve=ae.pb[je]).lc&&(Ve.ia=xe*O0[0>Ve.lc?0:Ve.lc]>>3),Fe|=Ve.ia;Fe&&(alert("todo:VP8InitRandom"),ae.ia=1)}ae.Ga=U.Id,100<ae.Ga?ae.Ga=100:0>ae.Ga&&(ae.Ga=0)}(function(we,Me){if(we==null)return 0;if(Me==null)return Na(we,2,"NULL VP8Io parameter in VP8Decode().");if(!we.cb&&!f0(we,Me))return 0;if(t(we.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(we.L=0);var Be=ff[we.L];if(we.L==2?(we.yb=0,we.zb=0):(we.yb=Me.v-Be>>4,we.zb=Me.j-Be>>4,0>we.yb&&(we.yb=0),0>we.zb&&(we.zb=0)),we.Va=Me.o+15+Be>>4,we.Hb=Me.va+15+Be>>4,we.Hb>we.za&&(we.Hb=we.za),we.Va>we.Ub&&(we.Va=we.Ub),0<we.L){var at=we.ed;for(Be=0;4>Be;++Be){var Ue;if(we.Qa.Cb){var rt=we.Qa.Lb[Be];we.Qa.Fb||(rt+=at.Tb)}else rt=at.Tb;for(Ue=0;1>=Ue;++Ue){var lt=we.gd[Be][Ue],yt=rt;if(at.Pc&&(yt+=at.vd[0],Ue&&(yt+=at.od[0])),0<(yt=0>yt?0:63<yt?63:yt)){var ft=yt;0<at.wb&&(ft=4<at.wb?ft>>2:ft>>1)>9-at.wb&&(ft=9-at.wb),1>ft&&(ft=1),lt.dd=ft,lt.tc=2*yt+ft,lt.ld=40<=yt?2:15<=yt?1:0}else lt.tc=0;lt.La=Ue}}}Be=0}else Na(we,6,"Frame setup failed"),Be=we.a;if(Be=Be==0){if(Be){we.$c=0,0<we.Aa||(we.Ic=F0);t:{Be=we.Ic,at=4*(ft=we.za);var Wt=32*ft,It=ft+1,vr=0<we.L?ft*(0<we.Aa?2:1):0,qt=(we.Aa==2?2:1)*ft;if((lt=at+832+(Ue=3*(16*Be+ff[we.L])/2*Wt)+(rt=we.Fa!=null&&0<we.Fa.length?we.Kc.c*we.Kc.i:0))!=lt)Be=0;else{if(lt>we.Vb){if(we.Vb=0,we.Ec=i(lt),we.Fc=0,we.Ec==null){Be=Na(we,1,"no memory during frame initialization.");break t}we.Vb=lt}lt=we.Ec,yt=we.Fc,we.Ac=lt,we.Bc=yt,yt+=at,we.Gd=l(Wt,zi),we.Hd=0,we.rb=l(It+1,ja),we.sb=1,we.wa=vr?l(vr,Br):null,we.Y=0,we.D.Nb=0,we.D.wa=we.wa,we.D.Y=we.Y,0<we.Aa&&(we.D.Y+=ft),t(!0),we.oc=lt,we.pc=yt,yt+=832,we.ya=l(qt,zl),we.aa=0,we.D.ya=we.ya,we.D.aa=we.aa,we.Aa==2&&(we.D.aa+=ft),we.R=16*ft,we.B=8*ft,ft=(Wt=ff[we.L])*we.R,Wt=Wt/2*we.B,we.sa=lt,we.ta=yt+ft,we.qa=we.sa,we.ra=we.ta+16*Be*we.R+Wt,we.Ha=we.qa,we.Ia=we.ra+8*Be*we.B+Wt,we.$c=0,yt+=Ue,we.mb=rt?lt:null,we.nb=rt?yt:null,t(yt+rt<=we.Fc+we.Vb),sc(we),s(we.Ac,we.Bc,0,at),Be=1}}if(Be){if(Me.ka=0,Me.y=we.sa,Me.O=we.ta,Me.f=we.qa,Me.N=we.ra,Me.ea=we.Ha,Me.Vd=we.Ia,Me.fa=we.R,Me.Rc=we.B,Me.F=null,Me.J=0,!Qh){for(Be=-255;255>=Be;++Be)Yu[255+Be]=0>Be?-Be:Be;for(Be=-1020;1020>=Be;++Be)Xh[1020+Be]=-128>Be?-128:127<Be?127:Be;for(Be=-112;112>=Be;++Be)k0[112+Be]=-16>Be?-16:15<Be?15:Be;for(Be=-255;510>=Be;++Be)A0[255+Be]=0>Be?0:255<Be?255:Be;Qh=1}Wi=x0,vc=zh,ml=m0,la=ri,Qr=p0,zs=h0,La=Vh,Cn=Wh,Eo=B,Kl=re,Ku=dc,_0=Kh,Xp=_e,Cv=Ee,Ev=qu,Tv=cc,Qp=Jc,Zp=$u,fn[0]=b0,fn[1]=g0,fn[2]=Zc,fn[3]=$h,fn[4]=Hh,fn[5]=bs,fn[6]=qi,fn[7]=w0,fn[8]=$i,fn[9]=Bu,ni[0]=ql,ni[1]=qh,ni[2]=v0,ni[3]=y0,ni[4]=$l,ni[5]=ic,ni[6]=Iu,Gl[0]=lc,Gl[1]=Uh,Gl[2]=zu,Gl[3]=yo,Gl[4]=Qd,Gl[5]=Xd,Gl[6]=os,Be=1}else Be=0}Be&&(Be=(function(Ur,Va){for(Ur.M=0;Ur.M<Ur.Va;++Ur.M){var _r,Bt=Ur.Jc[Ur.M&Ur.Xb],Et=Ur.m,en=Ur;for(_r=0;_r<en.za;++_r){var or=Et,Ar=en,ga=Ar.Ac,Yn=Ar.Bc+4*_r,Cs=Ar.zc,Ra=Ar.ya[Ar.aa+_r];if(Ar.Qa.Bb?Ra.$b=ye(or,Ar.Pa.jb[0])?2+ye(or,Ar.Pa.jb[2]):ye(or,Ar.Pa.jb[1]):Ra.$b=0,Ar.kc&&(Ra.Ad=ye(or,Ar.Bd)),Ra.Za=!ye(or,145)+0,Ra.Za){var Ln=Ra.Ob,$s=0;for(Ar=0;4>Ar;++Ar){var Rn,Rr=Cs[0+Ar];for(Rn=0;4>Rn;++Rn){Rr=Ss[ga[Yn+Rn]][Rr];for(var ta=am[ye(or,Rr[0])];0<ta;)ta=am[2*ta+ye(or,Rr[ta])];Rr=-ta,ga[Yn+Rn]=Rr}a(Ln,$s,ga,Yn,4),$s+=4,Cs[0+Ar]=Rr}}else Rr=ye(or,156)?ye(or,128)?1:3:ye(or,163)?2:0,Ra.Ob[0]=Rr,s(ga,Yn,Rr,4),s(Cs,0,Rr,4);Ra.Dd=ye(or,142)?ye(or,114)?ye(or,183)?1:3:2:0}if(en.m.Ka)return Na(Ur,7,"Premature end-of-partition0 encountered.");for(;Ur.ja<Ur.za;++Ur.ja){if(en=Bt,or=(Et=Ur).rb[Et.sb-1],ga=Et.rb[Et.sb+Et.ja],_r=Et.ya[Et.aa+Et.ja],Yn=Et.kc?_r.Ad:0)or.la=ga.la=0,_r.Za||(or.Na=ga.Na=0),_r.Hc=0,_r.Gc=0,_r.ia=0;else{var tn,oa;if(or=ga,ga=en,Yn=Et.Pa.Xc,Cs=Et.ya[Et.aa+Et.ja],Ra=Et.pb[Cs.$b],Ar=Cs.ad,Ln=0,$s=Et.rb[Et.sb-1],Rr=Rn=0,s(Ar,Ln,0,384),Cs.Za)var Xn=0,rn=Yn[3];else{ta=i(16);var ra=or.Na+$s.Na;if(ra=Gi(ga,Yn[1],ra,Ra.Eb,0,ta,0),or.Na=$s.Na=(0<ra)+0,1<ra)Wi(ta,0,Ar,Ln);else{var Tn=ta[0]+3>>3;for(ta=0;256>ta;ta+=16)Ar[Ln+ta]=Tn}Xn=1,rn=Yn[0]}var va=15&or.la,In=15&$s.la;for(ta=0;4>ta;++ta){var Bn=1&In;for(Tn=oa=0;4>Tn;++Tn)va=va>>1|(Bn=(ra=Gi(ga,rn,ra=Bn+(1&va),Ra.Sc,Xn,Ar,Ln))>Xn)<<7,oa=oa<<2|(3<ra?3:1<ra?2:Ar[Ln+0]!=0),Ln+=16;va>>=4,In=In>>1|Bn<<7,Rn=(Rn<<8|oa)>>>0}for(rn=va,Xn=In>>4,tn=0;4>tn;tn+=2){for(oa=0,va=or.la>>4+tn,In=$s.la>>4+tn,ta=0;2>ta;++ta){for(Bn=1&In,Tn=0;2>Tn;++Tn)ra=Bn+(1&va),va=va>>1|(Bn=0<(ra=Gi(ga,Yn[2],ra,Ra.Qc,0,Ar,Ln)))<<3,oa=oa<<2|(3<ra?3:1<ra?2:Ar[Ln+0]!=0),Ln+=16;va>>=2,In=In>>1|Bn<<5}Rr|=oa<<4*tn,rn|=va<<4<<tn,Xn|=(240&In)<<tn}or.la=rn,$s.la=Xn,Cs.Hc=Rn,Cs.Gc=Rr,Cs.ia=43690&Rr?0:Ra.ia,Yn=!(Rn|Rr)}if(0<Et.L&&(Et.wa[Et.Y+Et.ja]=Et.gd[_r.$b][_r.Za],Et.wa[Et.Y+Et.ja].La|=!Yn),en.Ka)return Na(Ur,7,"Premature end-of-file encountered.")}if(sc(Ur),Et=Va,en=1,_r=(Bt=Ur).D,or=0<Bt.L&&Bt.M>=Bt.zb&&Bt.M<=Bt.Va,Bt.Aa==0)t:{if(_r.M=Bt.M,_r.uc=or,Vi(Bt,_r),en=1,_r=(oa=Bt.D).Nb,or=(Rr=ff[Bt.L])*Bt.R,ga=Rr/2*Bt.B,ta=16*_r*Bt.R,Tn=8*_r*Bt.B,Yn=Bt.sa,Cs=Bt.ta-or+ta,Ra=Bt.qa,Ar=Bt.ra-ga+Tn,Ln=Bt.Ha,$s=Bt.Ia-ga+Tn,In=(va=oa.M)==0,Rn=va>=Bt.Va-1,Bt.Aa==2&&Vi(Bt,oa),oa.uc)for(Bn=(ra=Bt).D.M,t(ra.D.uc),oa=ra.yb;oa<ra.Hb;++oa){Xn=oa,rn=Bn;var Sa=(Zr=(zn=ra).D).Nb;tn=zn.R;var Zr=Zr.wa[Zr.Y+Xn],Hs=zn.sa,hn=zn.ta+16*Sa*tn+16*Xn,rr=Zr.dd,ar=Zr.tc;if(ar!=0)if(t(3<=ar),zn.L==1)0<Xn&&Tv(Hs,hn,tn,ar+4),Zr.La&&Zp(Hs,hn,tn,ar),0<rn&&Ev(Hs,hn,tn,ar+4),Zr.La&&Qp(Hs,hn,tn,ar);else{var aa=zn.B,wi=zn.qa,Nl=zn.ra+8*Sa*aa+8*Xn,si=zn.Ha,zn=zn.Ia+8*Sa*aa+8*Xn;Sa=Zr.ld,0<Xn&&(Cn(Hs,hn,tn,ar+4,rr,Sa),Kl(wi,Nl,si,zn,aa,ar+4,rr,Sa)),Zr.La&&(_0(Hs,hn,tn,ar,rr,Sa),Cv(wi,Nl,si,zn,aa,ar,rr,Sa)),0<rn&&(La(Hs,hn,tn,ar+4,rr,Sa),Eo(wi,Nl,si,zn,aa,ar+4,rr,Sa)),Zr.La&&(Ku(Hs,hn,tn,ar,rr,Sa),Xp(wi,Nl,si,zn,aa,ar,rr,Sa))}}if(Bt.ia&&alert("todo:DitherRow"),Et.put!=null){if(oa=16*va,va=16*(va+1),In?(Et.y=Bt.sa,Et.O=Bt.ta+ta,Et.f=Bt.qa,Et.N=Bt.ra+Tn,Et.ea=Bt.Ha,Et.W=Bt.Ia+Tn):(oa-=Rr,Et.y=Yn,Et.O=Cs,Et.f=Ra,Et.N=Ar,Et.ea=Ln,Et.W=$s),Rn||(va-=Rr),va>Et.o&&(va=Et.o),Et.F=null,Et.J=null,Bt.Fa!=null&&0<Bt.Fa.length&&oa<va&&(Et.J=kn(Bt,Et,oa,va-oa),Et.F=Bt.mb,Et.F==null&&Et.F.length==0)){en=Na(Bt,3,"Could not decode alpha data.");break t}oa<Et.j&&(Rr=Et.j-oa,oa=Et.j,t(!(1&Rr)),Et.O+=Bt.R*Rr,Et.N+=Bt.B*(Rr>>1),Et.W+=Bt.B*(Rr>>1),Et.F!=null&&(Et.J+=Et.width*Rr)),oa<va&&(Et.O+=Et.v,Et.N+=Et.v>>1,Et.W+=Et.v>>1,Et.F!=null&&(Et.J+=Et.v),Et.ka=oa-Et.j,Et.U=Et.va-Et.v,Et.T=va-oa,en=Et.put(Et))}_r+1!=Bt.Ic||Rn||(a(Bt.sa,Bt.ta-or,Yn,Cs+16*Bt.R,or),a(Bt.qa,Bt.ra-ga,Ra,Ar+8*Bt.B,ga),a(Bt.Ha,Bt.Ia-ga,Ln,$s+8*Bt.B,ga))}if(!en)return Na(Ur,6,"Output aborted.")}return 1})(we,Me)),Me.bc!=null&&Me.bc(Me),Be&=1}return Be?(we.cb=0,Be):0})(_,W)||(E=_.a)}}else E=_.a}E==0&&ue.Oa!=null&&ue.Oa.fd&&(E=N0(ue.ba))}ue=E}oe=ue!=0?null:11>oe?fe.f.RGBA.eb:fe.f.kb.y}else oe=null;return oe};var lm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(F,H){for(var L="",z=0;z<4;z++)L+=String.fromCharCode(F[H++]);return L}function f(F,H){return F[H+0]|F[H+1]<<8}function m(F,H){return(F[H+0]|F[H+1]<<8|F[H+2]<<16)>>>0}function g(F,H){return(F[H+0]|F[H+1]<<8|F[H+2]<<16|F[H+3]<<24)>>>0}new d;var x=[0],b=[0],v=[],y=new d,j=e,S=(function(F,H){var L={},z=0,V=!1,G=0,ie=0;if(L.frames=[],!(function(R,I){for(var q=0;q<4;q++)if(R[I+q]!="RIFF".charCodeAt(q))return!0;return!1})(F,H)){for(g(F,H+=4),H+=8;H<F.length;){var Z=u(F,H),X=g(F,H+=4);H+=4;var he=X+(1&X);switch(Z){case"VP8 ":case"VP8L":L.frames[z]===void 0&&(L.frames[z]={}),(se=L.frames[z]).src_off=V?ie:H-8,se.src_size=G+X+8,z++,V&&(V=!1,G=0,ie=0);break;case"VP8X":(se=L.header={}).feature_flags=F[H];var ce=H+4;se.canvas_width=1+m(F,ce),ce+=3,se.canvas_height=1+m(F,ce),ce+=3;break;case"ALPH":V=!0,G=he+8,ie=H-8;break;case"ANIM":(se=L.header).bgcolor=g(F,H),ce=H+4,se.loop_count=f(F,ce),ce+=2;break;case"ANMF":var ke,se;(se=L.frames[z]={}).offset_x=2*m(F,H),H+=3,se.offset_y=2*m(F,H),H+=3,se.width=1+m(F,H),H+=3,se.height=1+m(F,H),H+=3,se.duration=m(F,H),H+=3,ke=F[H++],se.dispose=1&ke,se.blend=ke>>1&1}Z!="ANMF"&&(H+=he)}return L}})(j,0);S.response=j,S.rgbaoutput=!0,S.dataurl=!1;var N=S.header?S.header:null,C=S.frames?S.frames:null;if(N){N.loop_counter=N.loop_count,x=[N.canvas_height],b=[N.canvas_width];for(var T=0;T<C.length&&C[T].blend!=0;T++);}var P=C[0],D=y.WebPDecodeRGBA(j,P.src_off,P.src_size,b,x);P.rgba=D,P.imgwidth=b[0],P.imgheight=x[0];for(var M=0;M<b[0]*x[0]*4;M++)v[M]=D[M];return this.width=b,this.height=x,this.data=v,this}(function(e){var t,r,a,s,i,l,o,d,u,f=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new d,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new l,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new l,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,d=this.internal.Matrix,u=new f}]);var m=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var I=R;Object.defineProperty(this,"pdf",{get:function(){return I}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(Oe){q=!!Oe}});var K=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return K},set:function(Oe){K=!!Oe}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Oe){isNaN(Oe)||(te=Oe)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(Oe){isNaN(Oe)||(J=Oe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Oe){var ve;typeof Oe=="number"?ve=[Oe,Oe,Oe,Oe]:((ve=new Array(4))[0]=Oe[0],ve[1]=Oe.length>=2?Oe[1]:ve[0],ve[2]=Oe.length>=3?Oe[2]:ve[0],ve[3]=Oe.length>=4?Oe[3]:ve[1]),u.margin=ve}});var Q=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Q},set:function(Oe){Q=Oe}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(Oe){ne=Oe}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(Oe){ye=Oe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Oe){Oe instanceof f&&(u=Oe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Oe){u.path=Oe}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Oe){De=Oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Oe){var ve;ve=g(Oe),this.ctx.fillStyle=ve.style,this.ctx.isFillTransparent=ve.a===0,this.ctx.fillOpacity=ve.a,this.pdf.setFillColor(ve.r,ve.g,ve.b,{a:ve.a}),this.pdf.setTextColor(ve.r,ve.g,ve.b,{a:ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Oe){var ve=g(Oe);this.ctx.strokeStyle=ve.style,this.ctx.isStrokeTransparent=ve.a===0,this.ctx.strokeOpacity=ve.a,ve.a===0?this.pdf.setDrawColor(255,255,255):(ve.a,this.pdf.setDrawColor(ve.r,ve.g,ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Oe){["butt","round","square"].indexOf(Oe)!==-1&&(this.ctx.lineCap=Oe,this.pdf.setLineCap(Oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Oe){isNaN(Oe)||(this.ctx.lineWidth=Oe,this.pdf.setLineWidth(Oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Oe){["bevel","round","miter"].indexOf(Oe)!==-1&&(this.ctx.lineJoin=Oe,this.pdf.setLineJoin(Oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Oe){isNaN(Oe)||(this.ctx.miterLimit=Oe,this.pdf.setMiterLimit(Oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Oe){this.ctx.textBaseline=Oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Oe){["right","end","center","left","start"].indexOf(Oe)!==-1&&(this.ctx.textAlign=Oe)}});var ee=null,Je=null;Object.defineProperty(this,"fontFaces",{get:function(){return Je},set:function(Oe){ee=null,Je=Oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Oe){var ve;if(this.ctx.font=Oe,(ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Oe))!==null){var pt=ve[1];ve[2];var et=ve[3],Nt=ve[4];ve[5];var ot=ve[6],Ie=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Nt)[2];Nt=Math.floor(Ie==="px"?parseFloat(Nt)*this.pdf.internal.scaleFactor:Ie==="em"?parseFloat(Nt)*this.pdf.getFontSize():parseFloat(Nt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Nt);var ge=(function(wt){var Ct,ur,Lt=[],Dt=wt.trim();if(Dt==="")return vN;if(Dt in PO)return[PO[Dt]];for(;Dt!=="";){switch(ur=null,Ct=(Dt=LO(Dt)).charAt(0)){case'"':case"'":ur=z_e(Dt.substring(1),Ct);break;default:ur=U_e(Dt)}if(ur===null||(Lt.push(ur[0]),(Dt=LO(ur[1]))!==""&&Dt.charAt(0)!==","))return vN;Dt=Dt.replace(/^,/,"")}return Lt})(ot);if(this.fontFaces){var Te=(function(wt,Ct){if(ee===null){var ur=(function(Lt){var Dt=[];return Object.keys(Lt).forEach(function(tr){Lt[tr].forEach(function(wr){var ir=null;switch(wr){case"bold":ir={family:tr,weight:"bold"};break;case"italic":ir={family:tr,style:"italic"};break;case"bolditalic":ir={family:tr,weight:"bold",style:"italic"};break;case"":case"normal":ir={family:tr}}ir!==null&&(ir.ref={name:tr,style:wr},Dt.push(ir))})}),Dt})(wt.getFontList());ee=(function(Lt){for(var Dt={},tr=0;tr<Lt.length;++tr){var wr=gN(Lt[tr]),ir=wr.family,Lr=wr.stretch,pr=wr.style,_a=wr.weight;Dt[ir]=Dt[ir]||{},Dt[ir][Lr]=Dt[ir][Lr]||{},Dt[ir][Lr][pr]=Dt[ir][Lr][pr]||{},Dt[ir][Lr][pr][_a]=wr}return Dt})(ur.concat(Ct))}return ee})(this.pdf,this.fontFaces),qe=ge.map(function(wt){return{family:wt,stretch:"normal",weight:et,style:pt}}),xt=(function(wt,Ct,ur){for(var Lt=(ur=ur||{}).defaultFontFamily||"times",Dt=Object.assign({},B_e,ur.genericFontFamilies||{}),tr=null,wr=null,ir=0;ir<Ct.length;++ir)if(Dt[(tr=gN(Ct[ir])).family]&&(tr.family=Dt[tr.family]),wt.hasOwnProperty(tr.family)){wr=wt[tr.family];break}if(!(wr=wr||wt[Lt]))throw new Error("Could not find a font-family for the rule '"+MO(tr)+"' and default family '"+Lt+"'.");if(wr=(function(Lr,pr){if(pr[Lr])return pr[Lr];var _a=l4[Lr],Xa=_a<=l4.normal?-1:1,ea=FO(pr,Qz,_a,Xa);if(!ea)throw new Error("Could not find a matching font-stretch value for "+Lr);return ea})(tr.stretch,wr),wr=(function(Lr,pr){if(pr[Lr])return pr[Lr];for(var _a=Xz[Lr],Xa=0;Xa<_a.length;++Xa)if(pr[_a[Xa]])return pr[_a[Xa]];throw new Error("Could not find a matching font-style for "+Lr)})(tr.style,wr),!(wr=(function(Lr,pr){if(pr[Lr])return pr[Lr];if(Lr===400&&pr[500])return pr[500];if(Lr===500&&pr[400])return pr[400];var _a=I_e[Lr],Xa=FO(pr,Zz,_a,Lr<400?-1:1);if(!Xa)throw new Error("Could not find a matching font-weight for value "+Lr);return Xa})(tr.weight,wr)))throw new Error("Failed to resolve a font for the rule '"+MO(tr)+"'.");return wr})(Te,qe);this.pdf.setFont(xt.ref.name,xt.ref.style)}else{var gt="";(et==="bold"||parseInt(et,10)>=700||pt==="bold")&&(gt="bold"),pt==="italic"&&(gt+="italic"),gt.length===0&&(gt="normal");for(var Mt="",mr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pt=0;Pt<ge.length;Pt++){if(this.pdf.internal.getFont(ge[Pt],gt,{noFallback:!0,disableWarning:!0})!==void 0){Mt=ge[Pt];break}if(gt==="bolditalic"&&this.pdf.internal.getFont(ge[Pt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Mt=ge[Pt],gt="bold";else if(this.pdf.internal.getFont(ge[Pt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Mt=ge[Pt],gt="normal";break}}if(Mt===""){for(var Rt=0;Rt<ge.length;Rt++)if(mr[ge[Rt]]){Mt=mr[ge[Rt]];break}}Mt=Mt===""?"Times":Mt,this.pdf.setFont(Mt,gt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Oe){this.ctx.globalCompositeOperation=Oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Oe){this.ctx.globalAlpha=Oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Oe){this.ctx.lineDashOffset=Oe,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Oe){this.ctx.lineDash=Oe,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Oe){this.ctx.ignoreClearRect=!!Oe}})};m.prototype.setLineDash=function(R){this.lineDash=R},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){C.call(this,"fill",!1)},m.prototype.stroke=function(){C.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(R,I){if(isNaN(R)||isNaN(I))throw Ka.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new l(R,I));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new l(R,I)},m.prototype.closePath=function(){var R=new l(0,0),I=0;for(I=this.path.length-1;I!==-1;I--)if(this.path[I].type==="begin"&&Da(this.path[I+1])==="object"&&typeof this.path[I+1].x=="number"){R=new l(this.path[I+1].x,this.path[I+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(R.x,R.y)},m.prototype.lineTo=function(R,I){if(isNaN(R)||isNaN(I))throw Ka.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new l(R,I));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new l(q.x,q.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},m.prototype.quadraticCurveTo=function(R,I,q,K){if(isNaN(q)||isNaN(K)||isNaN(R)||isNaN(I))throw Ka.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new l(q,K)),J=this.ctx.transform.applyToPoint(new l(R,I));this.path.push({type:"qct",x1:J.x,y1:J.y,x:te.x,y:te.y}),this.ctx.lastPoint=new l(te.x,te.y)},m.prototype.bezierCurveTo=function(R,I,q,K,te,J){if(isNaN(te)||isNaN(J)||isNaN(R)||isNaN(I)||isNaN(q)||isNaN(K))throw Ka.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Q=this.ctx.transform.applyToPoint(new l(te,J)),ne=this.ctx.transform.applyToPoint(new l(R,I)),ye=this.ctx.transform.applyToPoint(new l(q,K));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:ye.x,y2:ye.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(Q.x,Q.y)},m.prototype.arc=function(R,I,q,K,te,J){if(isNaN(R)||isNaN(I)||isNaN(q)||isNaN(K)||isNaN(te))throw Ka.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var Q=this.ctx.transform.applyToPoint(new l(R,I));R=Q.x,I=Q.y;var ne=this.ctx.transform.applyToPoint(new l(0,q)),ye=this.ctx.transform.applyToPoint(new l(0,0));q=Math.sqrt(Math.pow(ne.x-ye.x,2)+Math.pow(ne.y-ye.y,2))}Math.abs(te-K)>=2*Math.PI&&(K=0,te=2*Math.PI),this.path.push({type:"arc",x:R,y:I,radius:q,startAngle:K,endAngle:te,counterclockwise:J})},m.prototype.arcTo=function(R,I,q,K,te){throw new Error("arcTo not implemented.")},m.prototype.rect=function(R,I,q,K){if(isNaN(R)||isNaN(I)||isNaN(q)||isNaN(K))throw Ka.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,I),this.lineTo(R+q,I),this.lineTo(R+q,I+K),this.lineTo(R,I+K),this.lineTo(R,I),this.lineTo(R+q,I),this.lineTo(R,I)},m.prototype.fillRect=function(R,I,q,K){if(isNaN(R)||isNaN(I)||isNaN(q)||isNaN(K))throw Ka.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,I,q,K),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},m.prototype.strokeRect=function(R,I,q,K){if(isNaN(R)||isNaN(I)||isNaN(q)||isNaN(K))throw Ka.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(R,I,q,K),this.stroke())},m.prototype.clearRect=function(R,I,q,K){if(isNaN(R)||isNaN(I)||isNaN(q)||isNaN(K))throw Ka.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,I,q,K))},m.prototype.save=function(R){R=typeof R!="boolean"||R;for(var I=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(I),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var K=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=K}},m.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var I=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(I),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(R){var I,q,K,te;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))I=0,q=0,K=0,te=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(J!==null)I=parseInt(J[1]),q=parseInt(J[2]),K=parseInt(J[3]),te=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)I=parseInt(J[1]),q=parseInt(J[2]),K=parseInt(J[3]),te=parseFloat(J[4]);else{if(te=1,typeof R=="string"&&R.charAt(0)!=="#"){var Q=new $z(R);R=Q.ok?Q.toHex():"#000000"}R.length===4?(I=R.substring(1,2),I+=I,q=R.substring(2,3),q+=q,K=R.substring(3,4),K+=K):(I=R.substring(1,3),q=R.substring(3,5),K=R.substring(5,7)),I=parseInt(I,16),q=parseInt(q,16),K=parseInt(K,16)}}return{r:I,g:q,b:K,a:te,style:R}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(R,I,q,K){if(isNaN(I)||isNaN(q)||typeof R!="string")throw Ka.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(K=isNaN(K)?void 0:K,!x.call(this)){var te=he(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;z.call(this,{text:R,x:I,y:q,scale:J,angle:te,align:this.textAlign,maxWidth:K})}},m.prototype.strokeText=function(R,I,q,K){if(isNaN(I)||isNaN(q)||typeof R!="string")throw Ka.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){K=isNaN(K)?void 0:K;var te=he(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;z.call(this,{text:R,x:I,y:q,scale:J,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:K})}},m.prototype.measureText=function(R){if(typeof R!="string")throw Ka.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var I=this.pdf,q=this.pdf.internal.scaleFactor,K=I.internal.getFontSize(),te=I.getStringUnitWidth(R)*K/I.internal.scaleFactor;return new function(J){var Q=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Q}}),this}({width:te*=Math.round(96*q/72*1e4)/1e4})},m.prototype.scale=function(R,I){if(isNaN(R)||isNaN(I))throw Ka.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new d(R,0,0,I,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.rotate=function(R){if(isNaN(R))throw Ka.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var I=new d(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(I)},m.prototype.translate=function(R,I){if(isNaN(R)||isNaN(I))throw Ka.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new d(1,0,0,1,R,I);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.transform=function(R,I,q,K,te,J){if(isNaN(R)||isNaN(I)||isNaN(q)||isNaN(K)||isNaN(te)||isNaN(J))throw Ka.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Q=new d(R,I,q,K,te,J);this.ctx.transform=this.ctx.transform.multiply(Q)},m.prototype.setTransform=function(R,I,q,K,te,J){R=isNaN(R)?1:R,I=isNaN(I)?0:I,q=isNaN(q)?0:q,K=isNaN(K)?1:K,te=isNaN(te)?0:te,J=isNaN(J)?0:J,this.ctx.transform=new d(R,I,q,K,te,J)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(R,I,q,K,te,J,Q,ne,ye){var De=this.pdf.getImageProperties(R),ee=1,Je=1,Oe=1,ve=1;K!==void 0&&ne!==void 0&&(Oe=ne/K,ve=ye/te,ee=De.width/K*ne/K,Je=De.height/te*ye/te),J===void 0&&(J=I,Q=q,I=0,q=0),K!==void 0&&ne===void 0&&(ne=K,ye=te),K===void 0&&ne===void 0&&(ne=De.width,ye=De.height);for(var pt,et=this.ctx.transform.decompose(),Nt=he(et.rotate.shx),ot=new d,Ie=(ot=(ot=(ot=ot.multiply(et.translate)).multiply(et.skew)).multiply(et.scale)).applyToRectangle(new o(J-I*Oe,Q-q*ve,K*ee,te*Je)),ge=y.call(this,Ie),Te=[],qe=0;qe<ge.length;qe+=1)Te.indexOf(ge[qe])===-1&&Te.push(ge[qe]);if(N(Te),this.autoPaging)for(var xt=Te[0],gt=Te[Te.length-1],Mt=xt;Mt<gt+1;Mt++){this.pdf.setPage(Mt);var mr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=Mt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=Mt===1?0:Rt+(Mt-2)*wt;if(this.ctx.clip_path.length!==0){var ur=this.path;pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(pt,this.posX+this.margin[3],-Ct+Pt+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=ur}var Lt=JSON.parse(JSON.stringify(Ie));Lt=S([Lt],this.posX+this.margin[3],-Ct+Pt+this.ctx.prevPageLastElemOffset)[0];var Dt=(Mt>xt||Mt<gt)&&v.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mr,wt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,Nt),Dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,Nt)};var y=function(R,I,q){var K=[];I=I||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":K.push(Math.floor((R.y+te)/q)+1);break;case"arc":K.push(Math.floor((R.y+te-R.radius)/q)+1),K.push(Math.floor((R.y+te+R.radius)/q)+1);break;case"qct":var J=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);K.push(Math.floor((J.y+te)/q)+1),K.push(Math.floor((J.y+J.h+te)/q)+1);break;case"bct":var Q=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);K.push(Math.floor((Q.y+te)/q)+1),K.push(Math.floor((Q.y+Q.h+te)/q)+1);break;case"rect":K.push(Math.floor((R.y+te)/q)+1),K.push(Math.floor((R.y+R.h+te)/q)+1)}for(var ne=0;ne<K.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<K[ne];)j.call(this);return K},j=function(){var R=this.fillStyle,I=this.strokeStyle,q=this.font,K=this.lineCap,te=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=I,this.font=q,this.lineCap=K,this.lineWidth=te,this.lineJoin=J},S=function(R,I,q){for(var K=0;K<R.length;K++)switch(R[K].type){case"bct":R[K].x2+=I,R[K].y2+=q;case"qct":R[K].x1+=I,R[K].y1+=q;default:R[K].x+=I,R[K].y+=q}return R},N=function(R){return R.sort(function(I,q){return I-q})},C=function(R,I){for(var q,K,te=this.fillStyle,J=this.strokeStyle,Q=this.lineCap,ne=this.lineWidth,ye=Math.abs(ne*this.ctx.transform.scaleX),De=this.lineJoin,ee=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),Oe=[],ve=0;ve<Je.length;ve++)if(Je[ve].x!==void 0)for(var pt=y.call(this,Je[ve]),et=0;et<pt.length;et+=1)Oe.indexOf(pt[et])===-1&&Oe.push(pt[et]);for(var Nt=0;Nt<Oe.length;Nt++)for(;this.pdf.internal.getNumberOfPages()<Oe[Nt];)j.call(this);if(N(Oe),this.autoPaging)for(var ot=Oe[0],Ie=Oe[Oe.length-1],ge=ot;ge<Ie+1;ge++){this.pdf.setPage(ge),this.fillStyle=te,this.strokeStyle=J,this.lineCap=Q,this.lineWidth=ye,this.lineJoin=De;var Te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=ge===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=ge===1?0:xt+(ge-2)*gt;if(this.ctx.clip_path.length!==0){var mr=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(q,this.posX+this.margin[3],-Mt+qe+this.ctx.prevPageLastElemOffset),T.call(this,R,!0),this.path=mr}if(K=JSON.parse(JSON.stringify(ee)),this.path=S(K,this.posX+this.margin[3],-Mt+qe+this.ctx.prevPageLastElemOffset),I===!1||ge===0){var Pt=(ge>ot||ge<Ie)&&v.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Te,gt,null).clip().discardPath()),T.call(this,R,I),Pt&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=ye,T.call(this,R,I),this.lineWidth=ne;this.path=ee},T=function(R,I){if((R!=="stroke"||I||!b.call(this))&&(R==="stroke"||I||!x.call(this))){for(var q,K,te=[],J=this.path,Q=0;Q<J.length;Q++){var ne=J[Q];switch(ne.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ne,deltas:[],abs:[]});break;case"lt":var ye=te.length;if(J[Q-1]&&!isNaN(J[Q-1].x)&&(q=[ne.x-J[Q-1].x,ne.y-J[Q-1].y],ye>0)){for(;ye>=0;ye--)if(te[ye-1].close!==!0&&te[ye-1].begin!==!0){te[ye-1].deltas.push(q),te[ye-1].abs.push(ne);break}}break;case"bct":q=[ne.x1-J[Q-1].x,ne.y1-J[Q-1].y,ne.x2-J[Q-1].x,ne.y2-J[Q-1].y,ne.x-J[Q-1].x,ne.y-J[Q-1].y],te[te.length-1].deltas.push(q);break;case"qct":var De=J[Q-1].x+2/3*(ne.x1-J[Q-1].x),ee=J[Q-1].y+2/3*(ne.y1-J[Q-1].y),Je=ne.x+2/3*(ne.x1-ne.x),Oe=ne.y+2/3*(ne.y1-ne.y),ve=ne.x,pt=ne.y;q=[De-J[Q-1].x,ee-J[Q-1].y,Je-J[Q-1].x,Oe-J[Q-1].y,ve-J[Q-1].x,pt-J[Q-1].y],te[te.length-1].deltas.push(q);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ne)}}K=I?null:R==="stroke"?"stroke":"fill";for(var et=!1,Nt=0;Nt<te.length;Nt++)if(te[Nt].arc)for(var ot=te[Nt].abs,Ie=0;Ie<ot.length;Ie++){var ge=ot[Ie];ge.type==="arc"?M.call(this,ge.x,ge.y,ge.radius,ge.startAngle,ge.endAngle,ge.counterclockwise,void 0,I,!et):V.call(this,ge.x,ge.y),et=!0}else if(te[Nt].close===!0)this.pdf.internal.out("h"),et=!1;else if(te[Nt].begin!==!0){var Te=te[Nt].start.x,qe=te[Nt].start.y;G.call(this,te[Nt].deltas,Te,qe),et=!0}K&&F.call(this,K),I&&H.call(this)}},P=function(R){var I=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=I*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-q;case"top":return R+I-q;case"hanging":return R+I-2*q;case"middle":return R+I/2-q;default:return R}},D=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(I,q){this.colorStops.push([I,q])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(R,I,q,K,te,J,Q,ne,ye){for(var De=Z.call(this,q,K,te,J),ee=0;ee<De.length;ee++){var Je=De[ee];ee===0&&(ye?L.call(this,Je.x1+R,Je.y1+I):V.call(this,Je.x1+R,Je.y1+I)),ie.call(this,R,I,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}ne?H.call(this):F.call(this,Q)},F=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(R,I){this.pdf.internal.out(r(R)+" "+a(I)+" m")},z=function(R){var I;switch(R.align){case"right":case"end":I="right";break;case"center":I="center";break;default:I="left"}var q=this.pdf.getTextDimensions(R.text),K=P.call(this,R.y),te=D.call(this,K)-q.h,J=this.ctx.transform.applyToPoint(new l(R.x,K)),Q=this.ctx.transform.decompose(),ne=new d;ne=(ne=(ne=ne.multiply(Q.translate)).multiply(Q.skew)).multiply(Q.scale);for(var ye,De,ee,Je=this.ctx.transform.applyToRectangle(new o(R.x,K,q.w,q.h)),Oe=ne.applyToRectangle(new o(R.x,te,q.w,q.h)),ve=y.call(this,Oe),pt=[],et=0;et<ve.length;et+=1)pt.indexOf(ve[et])===-1&&pt.push(ve[et]);if(N(pt),this.autoPaging)for(var Nt=pt[0],ot=pt[pt.length-1],Ie=Nt;Ie<ot+1;Ie++){this.pdf.setPage(Ie);var ge=Ie===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],xt=qe-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],Mt=gt-this.margin[3],mr=Ie===1?0:Te+(Ie-2)*xt;if(this.ctx.clip_path.length!==0){var Pt=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ye,this.posX+this.margin[3],-1*mr+ge),T.call(this,"fill",!0),this.path=Pt}var Rt=S([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-mr+ge+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*R.scale),ee=this.lineWidth,this.lineWidth=ee*R.scale);var wt=this.autoPaging!=="text";if(wt||Rt.y+Rt.h<=qe){if(wt||Rt.y>=ge&&Rt.x<=gt){var Ct=wt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||gt-Rt.x)[0],ur=S([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-mr+ge+this.ctx.prevPageLastElemOffset)[0],Lt=wt&&(Ie>Nt||Ie<ot)&&v.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,xt,null).clip().discardPath()),this.pdf.text(Ct,ur.x,ur.y,{angle:R.angle,align:I,renderingMode:R.renderingMode}),Lt&&this.pdf.restoreGraphicsState()}}else Rt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Rt.y);R.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ee)}else R.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*R.scale),ee=this.lineWidth,this.lineWidth=ee*R.scale),this.pdf.text(R.text,J.x+this.posX,J.y+this.posY,{angle:R.angle,align:I,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ee)},V=function(R,I,q,K){q=q||0,K=K||0,this.pdf.internal.out(r(R+q)+" "+a(I+K)+" l")},G=function(R,I,q){return this.pdf.lines(R,I,q,null,null)},ie=function(R,I,q,K,te,J,Q,ne){this.pdf.internal.out([t(s(q+R)),t(i(K+I)),t(s(te+R)),t(i(J+I)),t(s(Q+R)),t(i(ne+I)),"c"].join(" "))},Z=function(R,I,q,K){for(var te=2*Math.PI,J=Math.PI/2;I>q;)I-=te;var Q=Math.abs(q-I);Q<te&&K&&(Q=te-Q);for(var ne=[],ye=K?-1:1,De=I;Q>1e-5;){var ee=De+ye*Math.min(Q,J);ne.push(X.call(this,R,De,ee)),Q-=Math.abs(ee-De),De=ee}return ne},X=function(R,I,q){var K=(q-I)/2,te=R*Math.cos(K),J=R*Math.sin(K),Q=te,ne=-J,ye=Q*Q+ne*ne,De=ye+Q*te+ne*J,ee=4/3*(Math.sqrt(2*ye*De)-De)/(Q*J-ne*te),Je=Q-ee*ne,Oe=ne+ee*Q,ve=Je,pt=-Oe,et=K+I,Nt=Math.cos(et),ot=Math.sin(et);return{x1:R*Math.cos(I),y1:R*Math.sin(I),x2:Je*Nt-Oe*ot,y2:Je*ot+Oe*Nt,x3:ve*Nt-pt*ot,y3:ve*ot+pt*Nt,x4:R*Math.cos(q),y4:R*Math.sin(q)}},he=function(R){return 180*R/Math.PI},ce=function(R,I,q,K,te,J){var Q=R+.5*(q-R),ne=I+.5*(K-I),ye=te+.5*(q-te),De=J+.5*(K-J),ee=Math.min(R,te,Q,ye),Je=Math.max(R,te,Q,ye),Oe=Math.min(I,J,ne,De),ve=Math.max(I,J,ne,De);return new o(ee,Oe,Je-ee,ve-Oe)},ke=function(R,I,q,K,te,J,Q,ne){var ye,De,ee,Je,Oe,ve,pt,et,Nt,ot,Ie,ge,Te,qe,xt=q-R,gt=K-I,Mt=te-q,mr=J-K,Pt=Q-te,Rt=ne-J;for(De=0;De<41;De++)Nt=(pt=(ee=R+(ye=De/40)*xt)+ye*((Oe=q+ye*Mt)-ee))+ye*(Oe+ye*(te+ye*Pt-Oe)-pt),ot=(et=(Je=I+ye*gt)+ye*((ve=K+ye*mr)-Je))+ye*(ve+ye*(J+ye*Rt-ve)-et),De==0?(Ie=Nt,ge=ot,Te=Nt,qe=ot):(Ie=Math.min(Ie,Nt),ge=Math.min(ge,ot),Te=Math.max(Te,Nt),qe=Math.max(qe,ot));return new o(Math.round(Ie),Math.round(ge),Math.round(Te-Ie),Math.round(qe-ge))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,I,q=(R=this.ctx.lineDash,I=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:I}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Qt.API),(function(e){var t=function(l){var o,d,u,f,m,g,x,b,v,y;for(d=[],u=0,f=(l+=o="\0\0\0\0".slice(l.length%4||4)).length;f>u;u+=4)(m=(l.charCodeAt(u)<<24)+(l.charCodeAt(u+1)<<16)+(l.charCodeAt(u+2)<<8)+l.charCodeAt(u+3))!==0?(g=(m=((m=((m=((m=(m-(y=m%85))/85)-(v=m%85))/85)-(b=m%85))/85)-(x=m%85))/85)%85,d.push(g+33,x+33,b+33,v+33,y+33)):d.push(122);return(function(j,S){for(var N=S;N>0;N--)j.pop()})(d,o.length),String.fromCharCode.apply(String,d)+"~>"},r=function(l){var o,d,u,f,m,g=String,x="length",b=255,v="charCodeAt",y="slice",j="replace";for(l[y](-2),l=l[y](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),u=[],f=0,m=(l+=o="uuuuu"[y](l[x]%5||5))[x];m>f;f+=5)d=52200625*(l[v](f)-33)+614125*(l[v](f+1)-33)+7225*(l[v](f+2)-33)+85*(l[v](f+3)-33)+(l[v](f+4)-33),u.push(b&d>>24,b&d>>16,b&d>>8,b&d);return(function(S,N){for(var C=N;C>0;C--)S.pop()})(u,o[x]),g.fromCharCode.apply(g,u)},a=function(l){return l.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(l){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),o.test(l)===!1)return"";for(var d="",u=0;u<l.length;u+=2)d+=String.fromCharCode("0x"+(l[u]+l[u+1]));return d},i=function(l){for(var o=new Uint8Array(l.length),d=l.length;d--;)o[d]=l.charCodeAt(d);return(o=e4(o)).reduce(function(u,f){return u+String.fromCharCode(f)},"")};e.processDataByFilters=function(l,o){var d=0,u=l||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),d=0;d<o.length;d+=1)switch(o[d]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=s(u),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=a(u),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[d]+'" is not implemented')}return{data:u,reverseChain:f.reverse().join(" ")}}})(Qt.API),(function(e){e.loadFile=function(t,r,a){return(function(s,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=(function(d,u,f){var m=new XMLHttpRequest,g=0,x=function(b){var v=b.length,y=[],j=String.fromCharCode;for(g=0;g<v;g+=1)y.push(j(255&b.charCodeAt(g)));return y.join("")};if(m.open("GET",d,!u),m.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(m.onload=function(){m.status===200?f(x(this.responseText)):f(void 0)}),m.send(null),u&&m.status===200)return x(m.responseText)})(s,i,l)}catch{}return o})(t,r,a)},e.loadImageFile=e.loadFile})(Qt.API),(function(e){function t(){return(yr.html2canvas?Promise.resolve(yr.html2canvas):i5(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(yr.DOMPurify?Promise.resolve(yr.DOMPurify):i5(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var d=Da(o);return d==="undefined"?"undefined":d==="string"||o instanceof String?"string":d==="number"||o instanceof Number?"number":d==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":d==="object"?"object":"unknown"},s=function(o,d){var u=document.createElement(o);for(var f in d.className&&(u.className=d.className),d.innerHTML&&d.dompurify&&(u.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)u.style[f]=d.style[f];return u},i=function o(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(o(m,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft},!0)),f},l=function o(d){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),u);return(f=f.setProgress(1,o,1,[o])).set(d)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(o,d){return o.__proto__=d||l.prototype,o},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(o,d){return this.then(function(){switch(d=d||(function(u){switch(a(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),d){case"string":return this.then(r).then(function(u){return this.set({src:s("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},l.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(d){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,d(this.prop.container,u)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(d){var u=this.opt.jsPDF,f=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=f,f)for(var x=0;x<f.length;++x){var b=f[x],v=b.src.find(function(y){return y.format==="truetype"});v&&u.addFont(v.url,b.ref.name,b.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,u.context2d.save(!0),d(this.prop.container,g)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(o,d,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,d):this.outputPdf(o,d)},l.prototype.outputPdf=function(o,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,d)})},l.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},l.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(o){if(a(o)!=="object")return this;var d=Object.keys(o||{}).map(function(u){if(u in l.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(d)})},l.prototype.get=function(o,d){return this.then(function(){var u=o in l.template.prop?this.prop[o]:this.opt[o];return d?d(u):u})},l.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},l.prototype.setPageSize=function(o){function d(u,f){return Math.floor(u*f/72*96)}return this.then(function(){(o=o||Qt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:d(o.inner.width,o.k),height:d(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},l.prototype.setProgress=function(o,d,u,f){return o!=null&&(this.progress.val=o),d!=null&&(this.progress.state=d),u!=null&&(this.progress.n=u),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(o,d,u,f){return this.setProgress(o?this.progress.val+o:null,d||null,u?this.progress.n+u:null,f?this.progress.stack.concat(f):null)},l.prototype.then=function(o,d){var u=this;return this.thenCore(o,d,function(f,m){return u.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(g){return u.updateProgress(null,f),g}).then(f,m).then(function(g){return u.updateProgress(1),g})})},l.prototype.thenCore=function(o,d,u){u=u||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),d&&(d=d.bind(f));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:l.convert(Object.assign({},f),Promise.prototype),g=u.call(m,o,d);return l.convert(g,f.__proto__)},l.prototype.thenExternal=function(o,d){return Promise.prototype.then.call(this,o,d)},l.prototype.thenList=function(o){var d=this;return o.forEach(function(u){d=d.thenCore(u)}),d},l.prototype.catch=function(o){o&&(o=o.bind(this));var d=Promise.prototype.catch.call(this,o);return l.convert(d,this)},l.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},l.prototype.error=function(o){return this.then(function(){throw new Error(o)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Qt.getPageSize=function(o,d,u){if(Da(o)==="object"){var f=o;o=f.orientation,d=f.unit||d,u=f.format||u}d=d||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var m,g=(""+u).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+d}var b,v=0,y=0;if(x.hasOwnProperty(g))v=x[g][1]/m,y=x[g][0]/m;else try{v=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",y>v&&(b=y,y=v,v=b);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>y&&(b=y,y=v,v=b)}return{width:y,height:v,unit:d,k:m,orientation:o}},e.html=function(o,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(gN):null;var u=new l(d);return d.worker?u:u.from(o).doCallback()}})(Qt.API),Qt.API.addJS=function(e){return IO=e,this.internal.events.subscribe("postPutResources",function(){ly=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ly+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),RO=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+IO+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ly!==void 0&&RO!==void 0&&this.internal.out("/Names <</JavaScript "+ly+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var l=s[i],o=a.exec(l);if(o!=null){var d=o[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(i=0;i<u;i++){var m=r.internal.newObject();f.push(m);var g=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var l={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var l=a.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var d=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<a.children.length;u++)this.renderItems(a.children[u])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])})(Qt.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,l,o){var d,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=(function(m){for(var g,x=256*m.charCodeAt(4)+m.charCodeAt(5),b=m.length,v={width:0,height:0,numcomponents:1},y=4;y<b;y+=2){if(y+=x,t.indexOf(m.charCodeAt(y+1))!==-1){g=256*m.charCodeAt(y+5)+m.charCodeAt(y+6),v={width:256*m.charCodeAt(y+7)+m.charCodeAt(y+8),height:g,numcomponents:m.charCodeAt(y+9)};break}x=256*m.charCodeAt(y+2)+m.charCodeAt(y+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:r,width:d.width,height:d.height,colorSpace:o,bitsPerComponent:8,filter:u,index:a,alias:s}}return f}})(Qt.API),Qt.API.processPNG=function(e,t,r,a){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=__e(e,{checkCrc:!0}),l=i.width,o=i.height,d=i.channels,u=i.palette,f=i.depth;s=u&&d===1?(function(M){for(var F=M.width,H=M.height,L=M.data,z=M.palette,V=M.depth,G=!1,ie=[],Z=[],X=void 0,he=!1,ce=0,ke=0;ke<z.length;ke++){var se=qD(z[ke],4),R=se[0],I=se[1],q=se[2],K=se[3];ie.push(R,I,q),K!=null&&(K===0?(ce++,Z.length<1&&Z.push(ke)):K<255&&(he=!0))}if(he||ce>1){G=!0,Z=void 0;var te=F*H;X=new Uint8Array(te);for(var J=new DataView(L.buffer),Q=0;Q<te;Q++){var ne=yN(J,Q,V),ye=qD(z[ne],4)[3];X[Q]=ye}}else ce===0&&(Z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:L,alphaBytes:X,needSMask:G,palette:ie,mask:Z}})(i):d===2||d===4?(function(M){for(var F=M.data,H=M.width,L=M.height,z=M.channels,V=M.depth,G=z===2?"DeviceGray":"DeviceRGB",ie=z-1,Z=H*L,X=ie,he=Z*X,ce=1*Z,ke=Math.ceil(he*V/8),se=Math.ceil(ce*V/8),R=new Uint8Array(ke),I=new Uint8Array(se),q=new DataView(F.buffer),K=new DataView(R.buffer),te=new DataView(I.buffer),J=!1,Q=0;Q<Z;Q++){for(var ne=Q*z,ye=0;ye<X;ye++)KO(K,yN(q,ne+ye,V),Q*X+ye,V);var De=yN(q,ne+X,V);De<(1<<V)-1&&(J=!0),KO(te,De,1*Q,V)}return{colorSpace:G,colorsPerPixel:ie,sMaskBitsPerComponent:J?V:void 0,colorBytes:R,alphaBytes:I,needSMask:J}})(i):(function(M){var F=M.data,H=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:H,colorsPerPixel:H==="DeviceGray"?1:3,colorBytes:F instanceof Uint16Array?(function(L){for(var z=L.length,V=new Uint8Array(2*z),G=new DataView(V.buffer,V.byteOffset,V.byteLength),ie=0;ie<z;ie++)G.setUint16(2*ie,L[ie],!1);return V})(F):F,needSMask:!1}})(i);var m,g,x,b=s,v=b.colorSpace,y=b.colorsPerPixel,j=b.sMaskBitsPerComponent,S=b.colorBytes,N=b.alphaBytes,C=b.needSMask,T=b.palette,P=b.mask,D=null;return a!==Qt.API.image_compression.NONE&&typeof e4=="function"?(D=(function(M){var F;switch(M){case Qt.API.image_compression.FAST:F=11;break;case Qt.API.image_compression.MEDIUM:F=13;break;case Qt.API.image_compression.SLOW:F=14;break;default:F=12}return F})(a),m=this.decode.FLATE_DECODE,g="/Predictor ".concat(D," /Colors ").concat(y," /BitsPerComponent ").concat(f," /Columns ").concat(l),e=qO(S,Math.ceil(l*y*f/8),y,f,a),C&&(x=qO(N,Math.ceil(l*j/8),1,j,a))):(m=void 0,g=void 0,e=S,C&&(x=N)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:e,index:t,filter:m,decodeParameters:g,transparency:P,palette:T,sMask:x,predictor:D,width:l,height:o,bitsPerComponent:f,sMaskBitsPerComponent:j,colorSpace:v}}},(function(e){e.processGIF89A=function(t,r,a,s){var i=new V_e(t),l=i.width,o=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var u={data:d,width:l,height:o},f=new bN(100).encode(u,100);return e.processJPEG.call(this,f,r,a,s)},e.processGIF87A=e.processGIF89A})(Qt.API),Cc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ka.log("bit decode error:"+r)}},Cc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var d=this.palette[i>>7-o&1];this.data[l+4*o]=d.blue,this.data[l+4*o+1]=d.green,this.data[l+4*o+2]=d.red,this.data[l+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Cc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+2*s*4,o=i>>4,d=15&i,u=this.palette[o];if(this.data[l]=u.blue,this.data[l+1]=u.green,this.data[l+2]=u.red,this.data[l+3]=255,2*s+1>=this.width)break;u=this.palette[d],this.data[l+4]=u.blue,this.data[l+4+1]=u.green,this.data[l+4+2]=u.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Cc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var l=this.palette[s];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Cc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,u=i>>15?255:0,f=a*this.width*4+4*s;this.data[f]=d,this.data[f+1]=o,this.data[f+2]=l,this.data[f+3]=u}this.pos+=e}},Cc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&t)/t*255|0,d=(l>>5&r)/r*255|0,u=(l>>11)/t*255|0,f=s*this.width*4+4*i;this.data[f]=u,this.data[f+1]=d,this.data[f+2]=o,this.data[f+3]=255}this.pos+=e}},Cc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=255}this.pos+=this.width%4}},Cc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=l}},Cc.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,a,s){var i=new Cc(t,!1),l=i.width,o=i.height,d={data:i.getData(),width:l,height:o},u=new bN(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)}})(Qt.API),YO.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,a,s){var i=new YO(t),l=i.width,o=i.height,d={data:i.getData(),width:l,height:o},u=new bN(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)}})(Qt.API),Qt.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),l=new Uint8Array(s/4),o=0,d=0,u=0;u<s;u+=4){var f=a[u],m=a[u+1],g=a[u+2],x=a[u+3];i[o++]=f,i[o++]=m,i[o++]=g,l[d++]=x}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:b,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Qt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Im=Qt.API,oy=Im.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:s.metadata.Unicode.widths,d=o.fof?o.fof:1,u=t.kerning?t.kerning:s.metadata.Unicode.kerning,f=u.fof?u.fof:1,m=t.doKerning!==!1,g=0,x=e.length,b=0,v=o[0]||d,y=[];for(r=0;r<x;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?y.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+l*(1e3/i)||0)/1e3):(g=m&&Da(u[a])==="object"&&!isNaN(parseInt(u[a][b],10))?u[a][b]/f:0,y.push((o[a]||v)/d+g)),b=a;return y},BO=Im.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Im.processArabic&&(e=Im.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:oy.apply(this,arguments).reduce(function(i,l){return i+l},0)},zO=function(e,t,r,a){for(var s=[],i=0,l=e.length,o=0;i!==l&&o+t[i]<r;)o+=t[i],i++;s.push(e.slice(0,i));var d=i;for(o=0;i!==l;)o+t[i]>a&&(s.push(e.slice(d,i)),o=0,d=i),o+=t[i],i++;return d!==i&&s.push(e.slice(d,i)),s},UO=function(e,t,r){r||(r={});var a,s,i,l,o,d,u,f=[],m=[f],g=r.textIndent||0,x=0,b=0,v=e.split(" "),y=oy.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var j=Array(d).join(" "),S=[];v.map(function(C){(C=C.split(/\s*\n/)).length>1?S=S.concat(C.map(function(T,P){return(P&&T.length?`
`:"")+T})):S.push(C[0])}),v=S,d=BO.apply(this,[j,r])}for(i=0,l=v.length;i<l;i++){var N=0;if(a=v[i],d&&a[0]==`
`&&(a=a.substr(1),N=1),g+x+(b=(s=oy.apply(this,[a,r])).reduce(function(C,T){return C+T},0))>t||N){if(b>t){for(o=zO.apply(this,[a,s,t-(g+x),t]),f.push(o.shift()),f=[o.pop()];o.length;)m.push([o.shift()]);b=s.slice(a.length-(f[0]?f[0].length:0)).reduce(function(C,T){return C+T},0)}else f=[a];m.push(f),g=b+d,x=y}else f.push(a),g+=x+b,x=y}return u=d?function(C,T){return(T?j:"")+C.join(" ")}:function(C){return C.join(" ")},m.map(u)},Im.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var m=this.internal.getFont(f.fontName,f.fontStyle),g="Unicode";return m.metadata[g]?{widths:m.metadata[g].widths||{0:1},kerning:m.metadata[g].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,d,u=[];for(o=0,d=a.length;o<d;o++)u=u.concat(UO.apply(this,[a[o],l,i]));return u},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",a={},s={},i=0;i<16;i++)a[r[i]]=t[i],s[t[i]]=r[i];var l=function(g){return"0x"+parseInt(g,10).toString(16)},o=e.__fontmetrics__.compress=function(g){var x,b,v,y,j=["{"];for(var S in g){if(x=g[S],isNaN(parseInt(S,10))?b="'"+S+"'":(S=parseInt(S,10),b=(b=l(S).slice(2)).slice(0,-1)+s[b.slice(-1)]),typeof x=="number")x<0?(v=l(x).slice(3),y="-"):(v=l(x).slice(2),y=""),v=y+v.slice(0,-1)+s[v.slice(-1)];else{if(Da(x)!=="object")throw new Error("Don't know what to do with value type "+Da(x)+".");v=o(x)}j.push(b+v)}return j.push("}"),j.join("")},d=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,b,v,y,j={},S=1,N=j,C=[],T="",P="",D=g.length-1,M=1;M<D;M+=1)(y=g[M])=="'"?x?(v=x.join(""),x=void 0):x=[]:x?x.push(y):y=="{"?(C.push([N,v]),N={},v=void 0):y=="}"?((b=C.pop())[0][b[1]]=N,v=void 0,N=b[0]):y=="-"?S=-1:v===void 0?a.hasOwnProperty(y)?(T+=a[y],v=parseInt(T,16)*S,S=1,T=""):T+=y:a.hasOwnProperty(y)?(P+=a[y],N[v]=parseInt(P,16)*S,S=1,v=void 0,P=""):P+=y;return j},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},m={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var x=g.font,b=m.Unicode[x.postScriptName];b&&(x.metadata.Unicode={},x.metadata.Unicode.widths=b.widths,x.metadata.Unicode.kerning=b.kerning);var v=f.Unicode[x.postScriptName];v&&(x.metadata.Unicode.encoding=v,x.encoding=v.codePages[0])}])})(Qt.API),(function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(vy(o)),l.metadata=e.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,a)}}])})(Qt),Qt.API.addSvgAsImage=function(e,t,r,a,s,i,l,o){if(isNaN(t)||isNaN(r))throw Ka.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw Ka.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=s;var u=d.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,d.width,d.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(yr.canvg?Promise.resolve(yr.canvg):i5(()=>import("./index.es-CBBATn9X.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(u,e,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(f)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),t,r,a,s,l,o)})},Qt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},Qt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),d=[],u=0,f=0,m=0;function g(b,v){var y,j=!1;for(y=0;y<b.length;y+=1)b[y]===v&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=o.length;for(m=0;m<x;m+=1)r[o[m]].value=r[o[m]].defaultValue,r[o[m]].explicitSet=!1}if(Da(e)==="object"){for(s in e)if(i=e[s],g(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&g(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(u=0;u<i.length;u+=1)if(a=!0,i[u].length===1&&typeof i[u][0]=="number")d.push(String(i[u]-1));else if(i[u].length>1){for(f=0;f<i[u].length;f+=1)typeof i[u][f]!="number"&&(a=!1);a===!0&&d.push([i[u][0]-1,i[u][1]-1].join(" "))}r[s].value="["+d.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,v=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?v.push("/"+b+" /"+r[b].value):v.push("/"+b+" "+r[b].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+l.length+o.length+s.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+l+o+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Qt.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,l){for(var o,d=l.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],m=0,g=i.length;m<g;++m){if(o=l.metadata.characterToGlyph(i.charCodeAt(m)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=i.charCodeAt(m),d.indexOf(o)==-1&&(d.push(o),d.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(u[4-o.length],o)}return f.join("")},a=function(i){var l,o,d,u,f,m,g;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],m=0,g=(o=Object.keys(i).sort(function(x,b){return x-b})).length;m<g;m++)l=o[m],d.length>=100&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(u=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),d.push("<"+l+"><"+u+">"));return d.length&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(l){var o=l.font,d=l.out,u=l.newObject,f=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),x="",b=0;b<g.length;b++)x+=String.fromCharCode(g[b]);var v=u();f({data:x,addLength1:!0,objectId:v}),d("endobj");var y=u();f({data:a(o.metadata.toUnicode),addLength1:!0,objectId:y}),d("endobj");var j=u();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Hm(o.fontName)),d("/FontFile2 "+v+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),d("/Flags "+o.metadata.flags),d("/StemV "+o.metadata.stemV),d("/ItalicAngle "+o.metadata.italicAngle),d("/Ascent "+o.metadata.ascender),d("/Descent "+o.metadata.decender),d("/CapHeight "+o.metadata.capHeight),d(">>"),d("endobj");var S=u();d("<<"),d("/Type /Font"),d("/BaseFont /"+Hm(o.fontName)),d("/FontDescriptor "+j+" 0 R"),d("/W "+e.API.PDFObject.convert(m)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+o.encoding+")"),d(">>"),d(">>"),d("endobj"),o.objectNumber=u(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+y+" 0 R"),d("/BaseFont /"+Hm(o.fontName)),d("/Encoding /"+o.encoding),d("/DescendantFonts ["+S+" 0 R]"),d(">>"),d("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(l){var o=l.font,d=l.out,u=l.newObject,f=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,g="",x=0;x<m.length;x++)g+=String.fromCharCode(m[x]);var b=u();f({data:g,addLength1:!0,objectId:b}),d("endobj");var v=u();f({data:a(o.metadata.toUnicode),addLength1:!0,objectId:v}),d("endobj");var y=u();d("<<"),d("/Descent "+o.metadata.decender),d("/CapHeight "+o.metadata.capHeight),d("/StemV "+o.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+b+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),d("/FontName /"+Hm(o.fontName)),d("/ItalicAngle "+o.metadata.italicAngle),d("/Ascent "+o.metadata.ascender),d(">>"),d("endobj"),o.objectNumber=u();for(var j=0;j<o.metadata.hmtx.widths.length;j++)o.metadata.hmtx.widths[j]=parseInt(o.metadata.hmtx.widths[j]*(1e3/o.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Hm(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),d("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var l,o=i.text||"",d=i.x,u=i.y,f=i.options||{},m=i.mutex||{},g=m.pdfEscape,x=m.activeFontKey,b=m.fonts,v=x,y="",j=0,S="",N=b[v].encoding;if(b[v].encoding!=="Identity-H")return{text:o,x:d,y:u,options:f,mutex:m};for(S=o,v=x,Array.isArray(o)&&(S=o[0]),j=0;j<S.length;j+=1)b[v].metadata.hasOwnProperty("cmap")&&(l=b[v].metadata.cmap.unicode.codeMap[S[j].charCodeAt(0)]),l||S[j].charCodeAt(0)<256&&b[v].metadata.hasOwnProperty("Unicode")?y+=S[j]:y+="";var C="";return parseInt(v.slice(1))<14||N==="WinAnsiEncoding"?C=g(y,v).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(C=r(y,b[v])),m.isHex=!0,{text:C,x:d,y:u,options:f,mutex:m}};t.events.push(["postProcessText",function(i){var l=i.text||"",o=[],d={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var u=0;for(u=0;u<l.length;u+=1)Array.isArray(l[u])&&l[u].length===3?o.push([s(Object.assign({},d,{text:l[u][0]})).text,l[u][1],l[u][2]]):o.push(s(Object.assign({},d,{text:l[u]})).text);i.text=o}else i.text=s(Object.assign({},d,{text:l})).text}])})(Qt),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Qt.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,l,o,d,u,f,m=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,N=0;this.__bidiEngine__={};var C=function(L){var z=L.charCodeAt(),V=z>>8,G=v[V];return G!==void 0?m[256*G+(255&z)]:V===252||V===253?"AL":j.test(V)?"L":V===8?"R":"N"},T=function(L){for(var z,V=0;V<L.length;V++){if((z=C(L.charAt(V)))==="L")return!1;if(z==="R")return!0}return!1},P=function(L,z,V,G){var ie,Z,X,he,ce=z[G];switch(ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(ce="AN");break;case"AL":S=!0,ce="R";break;case"WS":case"BN":ce="N";break;case"CS":G<1||G+1>=z.length||(ie=V[G-1])!=="EN"&&ie!=="AN"||(Z=z[G+1])!=="EN"&&Z!=="AN"?ce="N":S&&(Z="AN"),ce=Z===ie?Z:"N";break;case"ES":ce=(ie=G>0?V[G-1]:"B")==="EN"&&G+1<z.length&&z[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&V[G-1]==="EN"){ce="EN";break}if(S){ce="N";break}for(X=G+1,he=z.length;X<he&&z[X]==="ET";)X++;ce=X<he&&z[X]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(he=z.length,X=G+1;X<he&&z[X]==="NSM";)X++;if(X<he){var ke=L[G],se=ke>=1425&&ke<=2303||ke===64286;if(ie=z[X],se&&(ie==="R"||ie==="AL")){ce="R";break}}}ce=G<1||(ie=z[G-1])==="B"?"N":V[G-1];break;case"B":S=!1,s=!0,ce=N;break;case"S":i=!0,ce="N"}return ce},D=function(L,z,V){var G=L.split("");return V&&M(G,V,{hiLevel:N}),G.reverse(),z&&z.reverse(),G.join("")},M=function(L,z,V){var G,ie,Z,X,he,ce=-1,ke=L.length,se=0,R=[],I=N?x:g,q=[];for(S=!1,s=!1,i=!1,ie=0;ie<ke;ie++)q[ie]=C(L[ie]);for(Z=0;Z<ke;Z++){if(he=se,R[Z]=P(L,q,R,Z),G=240&(se=I[he][b[R[Z]]]),se&=15,z[Z]=X=I[se][5],G>0)if(G===16){for(ie=ce;ie<Z;ie++)z[ie]=1;ce=-1}else ce=-1;if(I[se][6])ce===-1&&(ce=Z);else if(ce>-1){for(ie=ce;ie<Z;ie++)z[ie]=X;ce=-1}q[Z]==="B"&&(z[Z]=0),V.hiLevel|=X}i&&(function(K,te,J){for(var Q=0;Q<J;Q++)if(K[Q]==="S"){te[Q]=N;for(var ne=Q-1;ne>=0&&K[ne]==="WS";ne--)te[ne]=N}})(q,z,ke)},F=function(L,z,V,G,ie){if(!(ie.hiLevel<L)){if(L===1&&N===1&&!s)return z.reverse(),void(V&&V.reverse());for(var Z,X,he,ce,ke=z.length,se=0;se<ke;){if(G[se]>=L){for(he=se+1;he<ke&&G[he]>=L;)he++;for(ce=se,X=he-1;ce<X;ce++,X--)Z=z[ce],z[ce]=z[X],z[X]=Z,V&&(Z=V[ce],V[ce]=V[X],V[X]=Z);se=he}se++}}},H=function(L,z,V){var G=L.split(""),ie={hiLevel:N};return V||(V=[]),M(G,V,ie),(function(Z,X,he){if(he.hiLevel!==0&&f)for(var ce,ke=0;ke<Z.length;ke++)X[ke]===1&&(ce=y.indexOf(Z[ke]))>=0&&(Z[ke]=y[ce+1])})(G,V,ie),F(2,G,z,V,ie),F(1,G,z,V,ie),G.join("")};return this.__bidiEngine__.doBidiReorder=function(L,z,V){if((function(ie,Z){if(Z)for(var X=0;X<ie.length;X++)Z[X]=X;o===void 0&&(o=T(ie)),u===void 0&&(u=T(ie))})(L,z),l||!d||u)if(l&&d&&o^u)N=o?1:0,L=D(L,z,V);else if(!l&&d&&u)N=o?1:0,L=H(L,z,V),L=D(L,z);else if(!l||o||d||u){if(l&&!d&&o^u)L=D(L,z),o?(N=0,L=H(L,z,V)):(N=1,L=H(L,z,V),L=D(L,z));else if(l&&o&&!d&&u)N=1,L=H(L,z,V),L=D(L,z);else if(!l&&!d&&o^u){var G=f;o?(N=1,L=H(L,z,V),N=0,f=!1,L=H(L,z,V),f=G):(N=0,L=H(L,z,V),L=D(L,z),N=1,f=!1,L=H(L,z,V),f=G,L=D(L,z))}}else N=0,L=H(L,z,V);else N=o?1:0,L=H(L,z,V);return L},this.__bidiEngine__.setOptions=function(L){L&&(l=L.isInputVisual,d=L.isOutputVisual,o=L.isInputRtl,u=L.isOutputRtl,f=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(l=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?l.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):l.push([r.doBidiReorder(s[o])]);a.text=l}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(Qt),Qt.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new e0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new i4e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new W_e(this.contents),this.head=new G_e(this),this.name=new J_e(this),this.cmap=new eU(this),this.toUnicode={},this.hhea=new Y_e(this),this.maxp=new e4e(this),this.hmtx=new t4e(this),this.post=new Q_e(this),this.os2=new X_e(this),this.loca=new s4e(this),this.glyf=new r4e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,d,u;for(u=[],l=0,o=(d=this.bbox).length;l<o;l++)t=d[l],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,l,o;for(l=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=t.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e})();var Xc,e0=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,l,o,d;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),o=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^l)+256*(255^o)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*l+256*o+d},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e})(),W_e=(function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,l,o,d,u,f,m,g,x,b,v;for(v in x=Object.keys(r).length,d=Math.log(2),m=16*Math.floor(Math.log(x)/d),l=Math.floor(m/d),f=16*x-m,(s=new e0).writeInt(this.scalarType),s.writeShort(x),s.writeShort(m),s.writeShort(l),s.writeShort(f),i=16*x,u=s.pos+i,o=null,b=[],r)for(g=r[v],s.writeString(v),s.writeInt(e(g)),s.writeInt(u),s.writeInt(g.length),b=b.concat(g),v==="head"&&(o=u),u+=g.length;u%4;)b.push(0),u++;return s.write(b),a=2981146554-e(s.data),s.pos=o+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,l;for(r=tU.call(r);r.length%4;)r.push(0);for(i=new e0(r),s=0,a=0,l=r.length;a<l;a=a+=4)s+=i.readUInt32();return 4294967295&s},t})(),K_e={}.hasOwnProperty,Mu=function(e,t){for(var r in t)K_e.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};Xc=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var G_e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new e0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),XO=(function(){function e(t,r){var a,s,i,l,o,d,u,f,m,g,x,b,v,y,j,S,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(x=t.readUInt16(),g=x/2,t.pos+=6,i=(function(){var C,T;for(T=[],d=C=0;0<=g?C<g:C>g;d=0<=g?++C:--C)T.push(t.readUInt16());return T})(),t.pos+=2,v=(function(){var C,T;for(T=[],d=C=0;0<=g?C<g:C>g;d=0<=g?++C:--C)T.push(t.readUInt16());return T})(),u=(function(){var C,T;for(T=[],d=C=0;0<=g?C<g:C>g;d=0<=g?++C:--C)T.push(t.readUInt16());return T})(),f=(function(){var C,T;for(T=[],d=C=0;0<=g?C<g:C>g;d=0<=g?++C:--C)T.push(t.readUInt16());return T})(),s=(this.length-t.pos+this.offset)/2,o=(function(){var C,T;for(T=[],d=C=0;0<=s?C<s:C>s;d=0<=s?++C:--C)T.push(t.readUInt16());return T})(),d=j=0,N=i.length;j<N;d=++j)for(y=i[d],a=S=b=v[d];b<=y?S<=y:S>=y;a=b<=y?++S:--S)f[d]===0?l=a+u[d]:(l=o[f[d]/2+(a-b)-(g-d)]||0)!==0&&(l+=u[d]),this.codeMap[a]=65535&l}t.pos=m}return e.encode=function(t,r){var a,s,i,l,o,d,u,f,m,g,x,b,v,y,j,S,N,C,T,P,D,M,F,H,L,z,V,G,ie,Z,X,he,ce,ke,se,R,I,q,K,te,J,Q,ne,ye,De,ee;switch(G=new e0,l=Object.keys(t).sort(function(Je,Oe){return Je-Oe}),r){case"macroman":for(v=0,y=(function(){var Je=[];for(b=0;b<256;++b)Je.push(0);return Je})(),S={0:0},i={},ie=0,ce=l.length;ie<ce;ie++)S[ne=t[s=l[ie]]]==null&&(S[ne]=++v),i[s]={old:t[s],new:S[t[s]]},y[s]=S[t[s]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(y),{charMap:i,subtable:G.data,maxGlyphID:v+1};case"unicode":for(z=[],m=[],N=0,S={},a={},j=u=null,Z=0,ke=l.length;Z<ke;Z++)S[T=t[s=l[Z]]]==null&&(S[T]=++N),a[s]={old:T,new:S[T]},o=S[T]-s,j!=null&&o===u||(j&&m.push(j),z.push(s),u=o),j=s;for(j&&m.push(j),m.push(65535),z.push(65535),H=2*(F=z.length),M=2*Math.pow(Math.log(F)/Math.LN2,2),g=Math.log(M/2)/Math.LN2,D=2*F-M,d=[],P=[],x=[],b=X=0,se=z.length;X<se;b=++X){if(L=z[b],f=m[b],L===65535){d.push(0),P.push(0);break}if(L-(V=a[L].new)>=32768)for(d.push(0),P.push(2*(x.length+F-b)),s=he=L;L<=f?he<=f:he>=f;s=L<=f?++he:--he)x.push(a[s].new);else d.push(V-L),P.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*F+2*x.length),G.writeUInt16(0),G.writeUInt16(H),G.writeUInt16(M),G.writeUInt16(g),G.writeUInt16(D),J=0,R=m.length;J<R;J++)s=m[J],G.writeUInt16(s);for(G.writeUInt16(0),Q=0,I=z.length;Q<I;Q++)s=z[Q],G.writeUInt16(s);for(ye=0,q=d.length;ye<q;ye++)o=d[ye],G.writeUInt16(o);for(De=0,K=P.length;De<K;De++)C=P[De],G.writeUInt16(C);for(ee=0,te=x.length;ee<te;ee++)v=x[ee],G.writeUInt16(v);return{charMap:a,subtable:G.data,maxGlyphID:N+1}}},e})(),eU=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,a,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r=new XO(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var a,s;return r==null&&(r="macroman"),a=XO.encode(t,r),(s=new e0).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e})(),Y_e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),X_e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,a;for(a=[],r=0;r<10;++r)a.push(t.readByte());return a})(),this.charRange=(function(){var r,a;for(a=[],r=0;r<4;++r)a.push(t.readInt());return a})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(t.readInt());return a})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Q_e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="post",e.prototype.parse=function(t){var r,a,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(a=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=(function(){var l,o,d;for(d=[],i=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;i=0<=o?++l:--l)d.push(t.readUInt32());return d}).call(this)}},e})(),Z_e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},J_e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="name",e.prototype.parse=function(t){var r,a,s,i,l,o,d,u,f,m,g;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(d={},i=f=0,m=a.length;f<m;i=++f)s=a[i],t.pos=s.offset,u=t.readString(s.length),l=new Z_e(u,s),d[g=s.nameID]==null&&(d[g]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e})(),e4e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),t4e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,a,s,i,l,o,d;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,f;for(f=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)f.push(t.readInt16());return f})(),this.widths=(function(){var u,f,m,g;for(g=[],u=0,f=(m=this.metrics).length;u<f;u++)i=m[u],g.push(i.advance);return g}).call(this),a=this.widths[this.widths.length-1],d=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)d.push(this.widths.push(a));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),tU=[].slice,r4e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,a,s,i,l,o,d,u,f,m;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,a=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+a,l=(o=new e0(r.read(s))).readShort(),u=o.readShort(),m=o.readShort(),d=o.readShort(),f=o.readShort(),this.cache[t]=l===-1?new n4e(o,u,m,d,f):new a4e(o,l,u,m,d,f),this.cache[t]))},e.prototype.encode=function(t,r,a){var s,i,l,o,d;for(l=[],i=[],o=0,d=r.length;o<d;o++)s=t[r[o]],i.push(l.length),s&&(l=l.concat(s.encode(a)));return i.push(l.length),{table:l,offsets:i}},e})(),a4e=(function(){function e(t,r,a,s,i,l){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),n4e=(function(){function e(t,r,a,s,i){var l,o;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new e0(tU.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),s4e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Xc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,a;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,l=0;l<a.length;++l)if(a[l]=s,i<r.length&&r[i]==l){++i,a[l]=s;var o=this.offsets[l],d=this.offsets[l+1]-o;d>0&&(s+=d)}for(var u=new Array(4*a.length),f=0;f<a.length;++f)u[4*f+3]=255&a[f],u[4*f+2]=(65280&a[f])>>8,u[4*f+1]=(16711680&a[f])>>16,u[4*f]=(4278190080&a[f])>>24;return u},e})(),i4e=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,l,o,d;for(s={},l=0,o=t.length;l<o;l++)s[i=t[l]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))a=d[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,l,o,d,u,f,m,g,x,b,v,y,j;for(s in a=eU.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),x={0:0},j=a.charMap)x[(d=j[s]).old]=d.new;for(b in g=a.maxGlyphID,l)b in x||(x[b]=g++);return f=(function(S){var N,C;for(N in C={},S)C[S[N]]=N;return C})(x),m=Object.keys(f).sort(function(S,N){return S-N}),v=(function(){var S,N,C;for(C=[],S=0,N=m.length;S<N;S++)o=m[S],C.push(f[o]);return C})(),i=this.font.glyf.encode(l,v,x),u=this.font.loca.encode(i.offsets,v),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e})();Qt.API.PDFObject=(function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,l;if(Array.isArray(r))return"["+(function(){var o,d,u;for(u=[],o=0,d=r.length;o<d;o++)a=r[o],u.push(t.convert(a));return u})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)l=r[s],i.push("/"+s+" "+t.convert(l));return i.push(">>"),i.join(`
`)}return""+r},t})();function rU(e,t,r,a,s){a=a||{};var i=1.15,l=s.internal.scaleFactor,o=s.internal.getFontSize()/l,d=s.getLineHeightFactor?s.getLineHeightFactor():i,u=o*d,f=/\r\n|\r|\n/g,m="",g=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(m=typeof e=="string"?e.split(f):e,g=m.length||1),r+=o*(2-i),a.valign==="middle"?r-=g/2*u:a.valign==="bottom"&&(r-=g*u),a.halign==="center"||a.halign==="right"){var x=o;if(a.halign==="center"&&(x*=.5),m&&g>=1){for(var b=0;b<m.length;b++)s.text(m[b],t-s.getStringUnitWidth(m[b])*x,r),r+=u;return s}t-=s.getStringUnitWidth(e)*x}return a.halign==="justify"?s.text(e,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):s.text(e,t,r),s}var QO={},op=(function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:QO=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var a,s,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var l=this.jsPDFDocument.internal.getFont(),o=l.fontStyle,d=l.fontName;if(t.font&&(d=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[d];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(d,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var f=e.unifyColor(t.fillColor);f&&(a=this.jsPDFDocument).setFillColor.apply(a,f),f=e.unifyColor(t.textColor),f&&(s=this.jsPDFDocument).setTextColor.apply(s,f),f=e.unifyColor(t.lineColor),f&&(i=this.jsPDFDocument).setDrawColor.apply(i,f),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},e.prototype.rect=function(t,r,a,s,i){return this.jsPDFDocument.rect(t,r,a,s,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return QO||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e})(),o4=function(e,t){return o4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},o4(e,t)};function aU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o4(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var nU=(function(e){aU(t,e);function t(r){var a=e.call(this)||this;return a._element=r,a}return t})(Array);function l4e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function o4e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Fb(e,t,r){r.applyStyles(t,!0);var a=Array.isArray(e)?e:[e],s=a.map(function(i){return r.getTextWidth(i)}).reduce(function(i,l){return Math.max(i,l)},0);return s}function sU(e,t,r,a){var s=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:i});var l=iU(s,!1);l&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),a.y-r.y,l)}function iU(e,t){var r=e>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function z2(e,t){var r,a,s,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(a=e.top)!==null&&a!==void 0?a:t,right:(s=e.right)!==null&&s!==void 0?s:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function lU(e,t){var r=z2(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function c4e(e,t,r,a,s){var i={},l=1.3333333333333333,o=wN(t,function(N){return s.getComputedStyle(N).backgroundColor});o!=null&&(i.fillColor=o);var d=wN(t,function(N){return s.getComputedStyle(N).color});d!=null&&(i.textColor=d);var u=d4e(a,r);u&&(i.cellPadding=u);var f="borderTopColor",m=l*r,g=a.borderTopWidth;if(a.borderBottomWidth===g&&a.borderRightWidth===g&&a.borderLeftWidth===g){var x=(parseFloat(g)||0)/m;x&&(i.lineWidth=x)}else i.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/m,right:(parseFloat(a.borderRightWidth)||0)/m,bottom:(parseFloat(a.borderBottomWidth)||0)/m,left:(parseFloat(a.borderLeftWidth)||0)/m},i.lineWidth.top||(i.lineWidth.right?f="borderRightColor":i.lineWidth.bottom?f="borderBottomColor":i.lineWidth.left&&(f="borderLeftColor"));var b=wN(t,function(N){return s.getComputedStyle(N)[f]});b!=null&&(i.lineColor=b);var v=["left","right","center","justify"];v.indexOf(a.textAlign)!==-1&&(i.halign=a.textAlign),v=["middle","bottom","top"],v.indexOf(a.verticalAlign)!==-1&&(i.valign=a.verticalAlign);var y=parseInt(a.fontSize||"");isNaN(y)||(i.fontSize=y/l);var j=u4e(a);j&&(i.fontStyle=j);var S=(a.fontFamily||"").toLowerCase();return e.indexOf(S)!==-1&&(i.font=S),i}function u4e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function wN(e,t){var r=oU(e,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],i=parseInt(a[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function oU(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:oU(e.parentElement,t):r}function d4e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(o){return parseInt(o||"0")/a}),l=z2(i,0);return s>l.top&&(l.top=s),s>l.bottom&&(l.bottom=s),l}function cU(e,t,r,a,s){var i,l;a===void 0&&(a=!1),s===void 0&&(s=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var d=Object.keys(e.getFontList()),u=e.scaleFactor(),f=[],m=[],g=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:f,body:m,foot:g};for(var x=0;x<o.rows.length;x++){var b=o.rows[x],v=(l=(i=b?.parentElement)===null||i===void 0?void 0:i.tagName)===null||l===void 0?void 0:l.toLowerCase(),y=f4e(d,u,r,b,a,s);y&&(v==="thead"?f.push(y):v==="tfoot"?g.push(y):m.push(y))}return{head:f,body:m,foot:g}}function f4e(e,t,r,a,s,i){for(var l=new nU(a),o=0;o<a.cells.length;o++){var d=a.cells[o],u=r.getComputedStyle(d);if(s||u.display!=="none"){var f=void 0;i&&(f=c4e(e,d,t,u,r)),l.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:f,_element:d,content:h4e(d)})}}var m=r.getComputedStyle(a);if(l.length>0&&(s||m.display!=="none"))return l}function h4e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function m4e(e,t,r){for(var a=0,s=[e,t,r];a<s.length;a++){var i=s[a];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function bd(e,t,r,a,s){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),l=1;l<arguments.length;l++){var o=arguments[l];if(o!=null)for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d])}return i}function uU(e,t){var r=new op(e),a=r.getDocumentOptions(),s=r.getGlobalOptions();m4e(s,a,t);var i=bd({},s,a,t),l;typeof window<"u"&&(l=window);var o=p4e(s,a,t),d=x4e(s,a,t),u=g4e(r,i),f=y4e(r,i,l);return{id:t.tableId,content:f,hooks:d,styles:o,settings:u}}function p4e(e,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(d){if(d==="columnStyles"){var u=e[d],f=t[d],m=r[d];a.columnStyles=bd({},u,f,m)}else{var g=[e,t,r],x=g.map(function(b){return b[d]||{}});a[d]=bd({},x[0],x[1],x[2])}},i=0,l=Object.keys(a);i<l.length;i++){var o=l[i];s(o)}return a}function x4e(e,t,r){for(var a=[e,t,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,l=a;i<l.length;i++){var o=l[i];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function g4e(e,t){var r,a,s,i,l,o,d,u,f,m,g,x,b=z2(t.margin,40/e.scaleFactor()),v=(r=v4e(e,t.startY))!==null&&r!==void 0?r:b.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var j;t.showHead===!0?j="everyPage":t.showHead===!1?j="never":j=(s=t.showHead)!==null&&s!==void 0?s:"everyPage";var S=(i=t.useCss)!==null&&i!==void 0?i:!1,N=t.theme||(S?"plain":"striped"),C=!!t.horizontalPageBreak,T=(l=t.horizontalPageBreakRepeat)!==null&&l!==void 0?l:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:S,theme:N,startY:v,margin:b,pageBreak:(d=t.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(f=t.tableWidth)!==null&&f!==void 0?f:"auto",showHead:j,showFoot:y,tableLineWidth:(m=t.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(g=t.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:C,horizontalPageBreakRepeat:T,horizontalPageBreakBehaviour:(x=t.horizontalPageBreakBehaviour)!==null&&x!==void 0?x:"afterAllRows"}}function v4e(e,t){var r=e.getLastAutoTable(),a=e.scaleFactor(),s=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var l=r.startPageNumber+r.pageNumber-1;i=l===s}return typeof t=="number"?t:(t==null||t===!1)&&i&&r?.finalY!=null?r.finalY+20/a:null}function y4e(e,t,r){var a=t.head||[],s=t.body||[],i=t.foot||[];if(t.html){var l=t.includeHiddenHtml;if(r){var o=cU(e,t.html,r,l,t.useCss)||{};a=o.head||a,s=o.body||a,i=o.foot||a}else console.error("Cannot parse html in non browser environment")}var d=t.columns||b4e(a,s,i);return{columns:d,head:a,body:s,foot:i}}function b4e(e,t,r){var a=e[0]||t[0]||r[0]||[],s=[];return Object.keys(a).filter(function(i){return i!=="_element"}).forEach(function(i){var l=1,o;Array.isArray(a)?o=a[parseInt(i)]:o=a[i],typeof o=="object"&&!Array.isArray(o)&&(l=o?.colSpan||1);for(var d=0;d<l;d++){var u=void 0;Array.isArray(a)?u=s.length:u=i+(d>0?"_".concat(d):"");var f={dataKey:u};s.push(f)}}),s}var c4=(function(){function e(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return e})(),w4e=(function(e){aU(t,e);function t(r,a,s,i,l,o){var d=e.call(this,r,a,o)||this;return d.cell=s,d.row=i,d.column=l,d.section=i.section,d}return t})(c4),j4e=(function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,a,s,i,l){for(var o=0,d=r;o<d.length;o++){var u=d[o],f=new w4e(t,this,a,s,i,l),m=u(f)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],m)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,s=this.hooks.didDrawPage;a<s.length;a++){var i=s[a];i(new c4(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,s=this.hooks.willDrawPage;a<s.length;a++){var i=s[a];i(new c4(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},e})(),dU=(function(){function e(t,r,a,s,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof nU&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=s,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,s){var i;return Math.max(a,((i=r.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var s=r.cells[a.index];return s?s.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(s,i){var l=a.cells[i.index];if(!l)return 0;var o=r.getLineHeight(l.styles.fontSize),d=l.padding("vertical"),u=d+o;return u>s?u:s},0)},e})(),fU=(function(){function e(t,r,a){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(s=t.content)!==null&&s!==void 0?s:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var l=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=l.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");a=this.x+s/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/t*r,i=a*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=z2(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e})(),N4e=(function(){function e(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,s=t.allRows();a<s.length;a++){var i=s[a],l=i.cells[this.index];l&&typeof l.styles.cellWidth=="number"&&(r=Math.max(r,l.styles.cellWidth))}return r},e})();function _4e(e,t){S4e(e,t);var r=[],a=0;t.columns.forEach(function(i){var l=i.getMaxCustomCellWidth(t);l?i.width=l:(i.width=i.wrappedWidth,r.push(i)),a+=i.width});var s=t.getWidth(e.pageSize().width)-a;s&&(s=u4(r,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=u4(r,s,function(i){return i.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),A4e(t),C4e(t,e),k4e(t)}function S4e(e,t){var r=e.scaleFactor(),a=t.settings.horizontalPageBreak,s=lU(e,t);t.allRows().forEach(function(i){for(var l=0,o=t.columns;l<o.length;l++){var d=o[l],u=i.cells[d.index];if(u){var f=t.hooks.didParseCell;t.callCellHooks(e,f,u,i,d,null);var m=u.padding("horizontal");u.contentWidth=Fb(u.text,u.styles,e)+m;var g=Fb(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=g+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||a===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var x=10/r;u.minWidth=u.styles.minCellWidth||x,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var l=0,o=t.columns;l<o.length;l++){var d=o[l],u=i.cells[d.index];if(u&&u.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,u.wrappedWidth),d.minWidth=Math.max(d.minWidth,u.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,u.minReadableWidth);else{var f=t.styles.columnStyles[d.dataKey]||t.styles.columnStyles[d.index]||{},m=f.cellWidth||f.minCellWidth;m&&typeof m=="number"&&(d.minWidth=m,d.wrappedWidth=m)}u&&(u.colSpan>1&&!d.minWidth&&(d.minWidth=u.minWidth),u.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=u.minWidth))}})}function u4(e,t,r){for(var a=t,s=e.reduce(function(x,b){return x+b.wrappedWidth},0),i=0;i<e.length;i++){var l=e[i],o=l.wrappedWidth/s,d=a*o,u=l.width+d,f=r(l),m=u<f?f:u;t-=m-l.width,l.width=m}if(t=Math.round(t*1e10)/1e10,t){var g=e.filter(function(x){return t<0?x.width>r(x):!0});g.length&&(t=u4(g,t,r))}return t}function k4e(e){for(var t={},r=1,a=e.allRows(),s=0;s<a.length;s++)for(var i=a[s],l=0,o=e.columns;l<o.length;l++){var d=o[l],u=t[d.index];if(r>1)r--,delete i.cells[d.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[d.index],u.left--,u.left<=1&&delete t[d.index];else{var f=i.cells[d.index];if(!f)continue;if(f.height=i.height,f.rowSpan>1){var m=a.length-s,g=f.rowSpan>m?m:f.rowSpan;t[d.index]={cell:f,left:g,row:i}}}}}function A4e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var a=t[r],s=null,i=0,l=0,o=0;o<e.columns.length;o++){var d=e.columns[o];if(l-=1,l>1&&e.columns[o+1])i+=d.width,delete a.cells[d.index];else if(s){var u=s;delete a.cells[d.index],s=null,u.width=d.width+i}else{var u=a.cells[d.index];if(!u)continue;if(l=u.colSpan,i=0,u.colSpan>1){s=u,i+=d.width;continue}u.width=d.width+i}}}function C4e(e,t){for(var r={count:0,height:0},a=0,s=e.allRows();a<s.length;a++){for(var i=s[a],l=0,o=e.columns;l<o.length;l++){var d=o[l],u=i.cells[d.index];if(u){t.applyStyles(u.styles,!0);var f=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,f+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=ZO(u.text,f,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=ZO(u.text,f,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var m=u.styles.overflow(u.text,f);typeof m=="string"?u.text=[m]:u.text=m}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var g=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<g*u.rowSpan?r={height:g,count:u.rowSpan}:r&&r.count>0&&r.height>g&&(g=r.height),g>i.height&&(i.height=g)}}r.count--}}function ZO(e,t,r,a,s){return e.map(function(i){return E4e(i,t,r,a,s)})}function E4e(e,t,r,a,s){var i=1e4*a.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Fb(e,r,a))return e;for(;t<Fb(e+s,r,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}function hU(e,t){var r=new op(e),a=T4e(t,r.scaleFactor()),s=new j4e(t,a);return _4e(r,s),r.applyStyles(r.userStyles),s}function T4e(e,t){var r=e.content,a=O4e(r.columns);if(r.head.length===0){var s=JO(a,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=JO(a,"foot");s&&r.foot.push(s)}var i=e.settings.theme,l=e.styles;return{columns:a,head:jN("head",r.head,a,l,i,t),body:jN("body",r.body,a,l,i,t),foot:jN("foot",r.foot,a,l,i,t)}}function jN(e,t,r,a,s,i){var l={},o=t.map(function(d,u){for(var f=0,m={},g=0,x=0,b=0,v=r;b<v.length;b++){var y=v[b];if(l[y.index]==null||l[y.index].left===0)if(x===0){var j=void 0;Array.isArray(d)?j=d[y.index-g-f]:j=d[y.dataKey];var S={};typeof j=="object"&&!Array.isArray(j)&&(S=j?.styles||{});var N=F4e(e,y,u,s,a,i,S),C=new fU(j,N,e);m[y.dataKey]=C,m[y.index]=C,x=C.colSpan-1,l[y.index]={left:C.rowSpan-1,times:x}}else x--,g++;else l[y.index].left--,x=l[y.index].times,f++}return new dU(d,u,e,m)});return o}function JO(e,t){var r={};return e.forEach(function(a){if(a.raw!=null){var s=D4e(t,a.raw);s!=null&&(r[a.dataKey]=s)}}),Object.keys(r).length>0?r:null}function D4e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function O4e(e){return e.map(function(t,r){var a,s;return typeof t=="object"?s=(a=t.dataKey)!==null&&a!==void 0?a:r:s=r,new N4e(s,t,r)})}function F4e(e,t,r,a,s,i,l){var o=o4e(a),d;e==="head"?d=s.headStyles:e==="body"?d=s.bodyStyles:e==="foot"&&(d=s.footStyles);var u=bd({},o.table,o[e],s.styles,d),f=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},m=e==="body"?f:{},g=e==="body"&&r%2===0?bd({},o.alternateRow,s.alternateRowStyles):{},x=l4e(i),b=bd({},x,u,g,m);return bd(b,l)}function P4e(e,t,r){var a;r===void 0&&(r={});var s=lU(e,t),i=new Map,l=[],o=[],d=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?d=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(d=[t.settings.horizontalPageBreakRepeat]),d.forEach(function(g){var x=t.columns.find(function(b){return b.dataKey===g||b.index===g});x&&!i.has(x.index)&&(i.set(x.index,!0),l.push(x.index),o.push(t.columns[x.index]),s-=x.wrappedWidth)});for(var u=!0,f=(a=r?.start)!==null&&a!==void 0?a:0;f<t.columns.length;){if(i.has(f)){f++;continue}var m=t.columns[f].wrappedWidth;if(u||s>=m)u=!1,l.push(f),o.push(t.columns[f]),s-=m;else break;f++}return{colIndexes:l,columns:o,lastIndex:f-1}}function M4e(e,t){for(var r=[],a=0;a<t.columns.length;a++){var s=P4e(e,t,{start:a});s.columns.length&&(r.push(s),a=s.lastIndex)}return r}function mU(e,t){var r=t.settings,a=r.startY,s=r.margin,i={x:s.left,y:a},l=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=a+s.bottom+l;if(r.pageBreak==="avoid"){var d=t.body,u=d.reduce(function(g,x){return g+x.height},0);o+=u}var f=new op(e);(r.pageBreak==="always"||r.startY!=null&&o>f.pageSize().height)&&(xU(f),i.y=s.top),t.callWillDrawPageHooks(f,i);var m=bd({},i);t.startPageNumber=f.pageNumber(),r.horizontalPageBreak?L4e(f,t,m,i):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(g){return Rd(f,t,g,i,t.columns)}),f.applyStyles(f.userStyles),t.body.forEach(function(g,x){var b=x===t.body.length-1;Pb(f,t,g,b,m,i,t.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(g){return Rd(f,t,g,i,t.columns)})),sU(f,t,m,i),t.callEndPageHooks(f,i),t.finalY=i.y,e.lastAutoTable=t,f.applyStyles(f.userStyles)}function L4e(e,t,r,a){var s=M4e(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,f){e.applyStyles(e.userStyles),f>0?dg(e,t,r,a,u.columns,!0):eF(e,t,a,u.columns),R4e(e,t,r,a,u.columns),NN(e,t,a,u.columns)});else for(var l=-1,o=s[0],d=function(){var u=l;if(o){e.applyStyles(e.userStyles);var f=o.columns;l>=0?dg(e,t,r,a,f,!0):eF(e,t,a,f),u=tF(e,t,l+1,a,f),NN(e,t,a,f)}var m=u-l;s.slice(1).forEach(function(g){e.applyStyles(e.userStyles),dg(e,t,r,a,g.columns,!0),tF(e,t,l+1,a,g.columns,m),NN(e,t,a,g.columns)}),l=u};l<t.body.length-1;)d()}function eF(e,t,r,a){var s=t.settings;e.applyStyles(e.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(i){return Rd(e,t,i,r,a)})}function R4e(e,t,r,a,s){e.applyStyles(e.userStyles),t.body.forEach(function(i,l){var o=l===t.body.length-1;Pb(e,t,i,o,r,a,s)})}function tF(e,t,r,a,s,i){e.applyStyles(e.userStyles),i=i??t.body.length;var l=Math.min(r+i,t.body.length),o=-1;return t.body.slice(r,l).forEach(function(d,u){var f=r+u===t.body.length-1,m=pU(e,t,f,a);d.canEntireRowFit(m,s)&&(Rd(e,t,d,a,s),o=r+u)}),o}function NN(e,t,r,a){var s=t.settings;e.applyStyles(e.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(i){return Rd(e,t,i,r,a)})}function I4e(e,t,r){var a=r.getLineHeight(e.styles.fontSize),s=e.padding("vertical"),i=Math.floor((t-s)/a);return Math.max(0,i)}function B4e(e,t,r,a){var s={};e.spansMultiplePages=!0,e.height=0;for(var i=0,l=0,o=r.columns;l<o.length;l++){var d=o[l],u=e.cells[d.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var f=new fU(u.raw,u.styles,u.section);f=bd(f,u),f.text=[];var m=I4e(u,t,a);u.text.length>m&&(f.text=u.text.splice(m,u.text.length));var g=a.scaleFactor(),x=a.getLineHeightFactor();u.contentHeight=u.getContentHeight(g,x),u.contentHeight>=t&&(u.contentHeight=t,f.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),f.contentHeight=f.getContentHeight(g,x),f.contentHeight>i&&(i=f.contentHeight),s[d.index]=f}}var b=new dU(e.raw,-1,e.section,s,!0);b.height=i;for(var v=0,y=r.columns;v<y.length;v++){var d=y[v],f=b.cells[d.index];f&&(f.height=b.height);var u=e.cells[d.index];u&&(u.height=e.height)}return b}function z4e(e,t,r,a){var s=e.pageSize().height,i=a.settings.margin,l=i.top+i.bottom,o=s-l;t.section==="body"&&(o-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var d=t.getMinimumRowHeight(a.columns,e),u=d<r;if(d>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var f=t.hasRowSpan(a.columns),m=t.getMaxCellHeight(a.columns)>o;return m?(f&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||a.settings.rowPageBreak==="avoid")}function Pb(e,t,r,a,s,i,l){var o=pU(e,t,a,i);if(r.canEntireRowFit(o,l))Rd(e,t,r,i,l);else if(z4e(e,r,o,t)){var d=B4e(r,o,t,e);Rd(e,t,r,i,l),dg(e,t,s,i,l),Pb(e,t,d,a,s,i,l)}else dg(e,t,s,i,l),Pb(e,t,r,a,s,i,l)}function Rd(e,t,r,a,s){a.x=t.settings.margin.left;for(var i=0,l=s;i<l.length;i++){var o=l[i],d=r.cells[o.index];if(!d){a.x+=o.width;continue}e.applyStyles(d.styles),d.x=a.x,d.y=a.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,d,r,o,a);if(u===!1){a.x+=o.width;continue}U4e(e,d,a);var f=d.getTextPos();rU(d.text,f.x,f.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,d,r,o,a),a.x+=o.width}a.y+=r.height}function U4e(e,t,r){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof a.lineWidth=="number"){var s=iU(a.lineWidth,a.fillColor);s&&e.rect(t.x,r.y,t.width,t.height,s)}else typeof a.lineWidth=="object"&&(a.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),q4e(e,t,r,a.lineWidth))}function q4e(e,t,r,a){var s,i,l,o;a.top&&(s=r.x,i=r.y,l=r.x+t.width,o=r.y,a.right&&(l+=.5*a.right),a.left&&(s-=.5*a.left),d(a.top,s,i,l,o)),a.bottom&&(s=r.x,i=r.y+t.height,l=r.x+t.width,o=r.y+t.height,a.right&&(l+=.5*a.right),a.left&&(s-=.5*a.left),d(a.bottom,s,i,l,o)),a.left&&(s=r.x,i=r.y,l=r.x,o=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(o+=.5*a.bottom),d(a.left,s,i,l,o)),a.right&&(s=r.x+t.width,i=r.y,l=r.x+t.width,o=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(o+=.5*a.bottom),d(a.right,s,i,l,o));function d(u,f,m,g,x){e.getDocument().setLineWidth(u),e.getDocument().line(f,m,g,x,"S")}}function pU(e,t,r,a){var s=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(s+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-s}function dg(e,t,r,a,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(o){return Rd(e,t,o,a,s)}),t.callEndPageHooks(e,a);var l=t.settings.margin;sU(e,t,r,a),xU(e),t.pageNumber++,a.x=l.left,a.y=l.top,r.y=l.top,t.callWillDrawPageHooks(e,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Rd(e,t,o,a,s)}),e.applyStyles(e.userStyles))}function xU(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function $4e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],s=uU(this,a),i=hU(this,s);return mU(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,a,s){rU(t,r,a,s,this)},e.API.autoTableSetDefaults=function(t){return op.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){op.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new op(this),i=cU(s,t,window,r,!1),l=i.head,o=i.body,d=((a=l[0])===null||a===void 0?void 0:a.map(function(u){return u.content}))||[];return{columns:d,rows:o,data:o}}}var _N;function rF(e,t){var r=uU(e,t),a=hU(e,r);mU(e,a)}try{if(typeof window<"u"&&window){var aF=window,nF=aF.jsPDF||((_N=aF.jspdf)===null||_N===void 0?void 0:_N.jsPDF);nF&&$4e(nF)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Wg=(e,t)=>{if(!e||e.length===0){alert("Aucune donne  exporter");return}const r=Object.keys(e[0]),a=[r.join(","),...e.map(o=>r.map(d=>{const u=o[d];return typeof u=="string"&&(u.includes(",")||u.includes('"'))?`"${u.replace(/"/g,'""')}"`:u}).join(","))].join(`
`),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),l=URL.createObjectURL(s);i.setAttribute("href",l),i.setAttribute("download",`${t}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},H4e=e=>{const t=new Qt,r=e.student;t.setFontSize(20),t.setTextColor(59,130,246),t.text("Rapport de Progression",14,20),t.setFontSize(12),t.setTextColor(0,0,0),t.text(`tudiant: ${r.full_name}`,14,35),t.text(`Email: ${r.email}`,14,42),t.text(`Inscrit le: ${new Date(r.created_at).toLocaleDateString("fr-FR")}`,14,49),t.text(`Date du rapport: ${new Date().toLocaleDateString("fr-FR")}`,14,56),t.setDrawColor(229,231,235),t.line(14,60,196,60),t.setFontSize(14),t.setTextColor(59,130,246),t.text("Statistiques Globales",14,70);const a=e.enrollments.reduce((u,f)=>u+f.total_videos,0),s=e.enrollments.reduce((u,f)=>u+f.completed_videos,0),i=e.enrollments.reduce((u,f)=>u+f.total_tests,0),l=e.enrollments.reduce((u,f)=>u+f.passed_tests,0);if(t.setFontSize(10),t.setTextColor(0,0,0),t.text(`Formations inscrites: ${e.enrollments.length}`,14,80),t.text(`Formations compltes: ${e.enrollments.filter(u=>u.completed_at).length}`,14,87),t.text(`Vidos compltes: ${s} / ${a}`,14,94),t.text(`Tests russis: ${l} / ${i}`,14,101),e.enrollments.length>0){t.setFontSize(14),t.setTextColor(59,130,246),t.text("Formations Inscrites",14,115);const u=e.enrollments.map(f=>[f.formation_title,new Date(f.enrolled_at).toLocaleDateString("fr-FR"),f.completed_at?new Date(f.completed_at).toLocaleDateString("fr-FR"):"-",`${f.completed_videos}/${f.total_videos}`,`${f.passed_tests}/${f.total_tests}`,f.status==="completed"?"Complt":f.status==="active"?"En cours":"Inactif"]);rF(t,{head:[["Formation","Date Inscription","Date Compltion","Vidos","Tests","Statut"]],body:u,startY:120,theme:"grid",headStyles:{fillColor:[59,130,246]},styles:{fontSize:8}})}if(e.test_history.length>0){const u=t.lastAutoTable?.finalY||120;let f;u>220?(t.addPage(),t.setFontSize(14),t.setTextColor(59,130,246),t.text("Historique des Tests",14,20),f=25):(t.setFontSize(14),t.setTextColor(59,130,246),t.text("Historique des Tests",14,u+15),f=u+20);const m=e.test_history.map(g=>{const x=g.total_points>0?(g.score/g.total_points*100).toFixed(1):"0";return[g.formation_title,g.test_title,`${g.score}/${g.total_points}`,`${x}%`,g.passed?"Russi":"chou",new Date(g.submitted_at).toLocaleDateString("fr-FR")]});rF(t,{head:[["Formation","Test","Score","%","Rsultat","Date"]],body:m,startY:f,theme:"grid",headStyles:{fillColor:[59,130,246]},styles:{fontSize:8}})}const o=t.getNumberOfPages();for(let u=1;u<=o;u++)t.setPage(u),t.setFontSize(8),t.setTextColor(156,163,175),t.text(`Page ${u} sur ${o}`,t.internal.pageSize.getWidth()/2,t.internal.pageSize.getHeight()-10,{align:"center"});const d=`rapport_${r.full_name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;t.save(d)},V4e=e=>{const t=e.map(r=>({ID:r.id,Titre:r.title,Inscriptions:r.enrollment_count,Complts:r.completed_count,"Taux de Compltion (%)":r.completion_rate,Prix:r.price||0}));Wg(t,`formations_${new Date().toISOString().split("T")[0]}`)},W4e=e=>{const t=e.map(r=>({ID:r.id,Nom:r.full_name,Email:r.email,Inscriptions:r.enrollments_count,"Vidos Vues":r.videos_watched,"Vidos Compltes":r.videos_completed,"Tests Passs":r.tests_taken,"Tests Russis":r.tests_passed}));Wg(t,`etudiants_actifs_${new Date().toISOString().split("T")[0]}`)},K4e=e=>{const t=e.map(r=>({Mois:r.month,Inscriptions:r.enrollment_count,Complts:r.completed_count}));Wg(t,`tendances_inscriptions_${new Date().toISOString().split("T")[0]}`)},G4e=e=>{const t=e.student,r=e.enrollments.map(a=>({Formation:a.formation_title,"Date Inscription":new Date(a.enrolled_at).toLocaleDateString("fr-FR"),"Date Compltion":a.completed_at?new Date(a.completed_at).toLocaleDateString("fr-FR"):"-","Vidos Compltes":a.completed_videos,"Total Vidos":a.total_videos,"Tests Russis":a.passed_tests,"Total Tests":a.total_tests,Statut:a.status==="completed"?"Complt":a.status==="active"?"En cours":"Inactif"}));if(Wg(r,`rapport_formations_${t.full_name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}`),e.test_history.length>0){const a=e.test_history.map(s=>{const i=s.total_points>0?(s.score/s.total_points*100).toFixed(1):"0";return{Formation:s.formation_title,Test:s.test_title,Score:s.score,"Total Points":s.total_points,"Pourcentage (%)":i,Rsultat:s.passed?"Russi":"chou",Date:new Date(s.submitted_at).toLocaleDateString("fr-FR")}});Wg(a,`rapport_tests_${t.full_name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}`)}},cy=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4"],Y4e=()=>{const[e,t]=k.useState(30),{data:r,isLoading:a}=fje(),{data:s,isLoading:i}=hje(10),{data:l,isLoading:o}=mje(6),{data:d,isLoading:u}=pje(10),{data:f,isLoading:m}=gje(),{data:g,isLoading:x}=vje(e),b=r?.overview;return a||i||o||u||m||x?n.jsx(Ut,{title:"Analytics",subtitle:"Vue d'ensemble des performances",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):n.jsx(Ut,{title:"Tableau de bord Analytics",subtitle:"Vue d'ensemble des performances de votre plateforme de formation",children:n.jsxs("div",{className:"space-y-8",children:[g&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-xl font-bold",children:["Statistiques des ",g.period_days," derniers jours"]}),n.jsx("div",{className:"flex gap-2",children:[7,30,90].map(y=>n.jsxs("button",{onClick:()=>t(y),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e===y?"bg-white text-blue-600":"bg-white/20 hover:bg-white/30"}`,children:[y,"j"]},y))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm opacity-90",children:"Nouvelles inscriptions"}),n.jsx("p",{className:"text-3xl font-bold mt-1",children:g.stats.new_enrollments})]}),n.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm opacity-90",children:"Formations compltes"}),n.jsx("p",{className:"text-3xl font-bold mt-1",children:g.stats.completed_formations})]}),n.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm opacity-90",children:"Vidos termines"}),n.jsx("p",{className:"text-3xl font-bold mt-1",children:g.stats.videos_completed})]}),n.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm opacity-90",children:"Tests passs"}),n.jsx("p",{className:"text-3xl font-bold mt-1",children:g.stats.tests_total})]}),n.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm opacity-90",children:"Tests russis"}),n.jsx("p",{className:"text-3xl font-bold mt-1",children:g.stats.tests_passed})]})]})]}),b&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(Df,{title:"Total tudiants",value:b.students.total,icon:Ya,colorClass:"bg-blue-500"}),n.jsx(Df,{title:"Total Formations",value:b.formations.total,icon:wa,colorClass:"bg-green-500"}),n.jsx(Df,{title:"Sessions Actives",value:b.sessions.active,subtitle:`Sur ${b.sessions.total} sessions`,icon:ba,colorClass:"bg-purple-500"}),n.jsx(Df,{title:"Taux de Compltion",value:`${b.enrollments.completion_rate.toFixed(1)}%`,subtitle:`${b.enrollments.completed}/${b.enrollments.total} inscriptions`,icon:Xr,colorClass:"bg-orange-500"}),n.jsx(Df,{title:"Vidos Compltes",value:`${b.videos.completion_rate.toFixed(1)}%`,subtitle:`${b.videos.completed}/${b.videos.total} vidos`,icon:gg,colorClass:"bg-cyan-500"}),n.jsx(Df,{title:"Taux de Russite Tests",value:`${b.tests.success_rate.toFixed(1)}%`,subtitle:`${b.tests.passed}/${b.tests.total} tests`,icon:cp,colorClass:"bg-pink-500"}),n.jsx(Df,{title:"Inscriptions Totales",value:b.enrollments.total,icon:Ll,colorClass:"bg-indigo-500"}),n.jsx(Df,{title:"Formations Compltes",value:b.enrollments.completed,icon:Fn,colorClass:"bg-emerald-500"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s?.formations&&s.formations.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Formations les Plus Populaires"}),n.jsxs("button",{onClick:()=>V4e(s.formations),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(ps,{className:"h-4 w-4"}),"CSV"]})]}),n.jsx(hy,{width:"100%",height:300,children:n.jsxs(rje,{data:s.formations.slice(0,8),children:[n.jsx(q_,{strokeDasharray:"3 3"}),n.jsx(V_,{dataKey:"title",angle:-45,textAnchor:"end",height:120,interval:0,tick:{fontSize:11}}),n.jsx(K_,{}),n.jsx(py,{content:({active:y,payload:j})=>{if(y&&j&&j.length){const S=j[0].payload;return n.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-1",children:S.title}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Inscriptions: ",n.jsx("span",{className:"font-medium",children:S.enrollment_count})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Complts: ",n.jsx("span",{className:"font-medium",children:S.completed_count})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Taux: ",n.jsxs("span",{className:"font-medium",children:[S.completion_rate,"%"]})]})]})}return null}}),n.jsx(bp,{}),n.jsx(z_,{dataKey:"enrollment_count",name:"Inscriptions",fill:"#3B82F6"}),n.jsx(z_,{dataKey:"completed_count",name:"Complts",fill:"#10B981"})]})})]}),l?.trends&&l.trends.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tendances d'Inscriptions (6 mois)"}),n.jsxs("button",{onClick:()=>K4e(l.trends),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(ps,{className:"h-4 w-4"}),"CSV"]})]}),n.jsx(hy,{width:"100%",height:300,children:n.jsxs(eje,{data:l.trends,children:[n.jsx(q_,{strokeDasharray:"3 3"}),n.jsx(V_,{dataKey:"month"}),n.jsx(K_,{}),n.jsx(py,{content:({active:y,payload:j})=>{if(y&&j&&j.length){const S=j[0].payload;return n.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-1",children:S.month}),n.jsxs("p",{className:"text-xs text-blue-600",children:["Inscriptions: ",n.jsx("span",{className:"font-medium",children:S.enrollment_count})]}),n.jsxs("p",{className:"text-xs text-green-600",children:["Complts: ",n.jsx("span",{className:"font-medium",children:S.completed_count})]})]})}return null}}),n.jsx(bp,{}),n.jsx($_,{type:"monotone",dataKey:"enrollment_count",name:"Inscriptions",stroke:"#3B82F6",strokeWidth:2,dot:{r:4}}),n.jsx($_,{type:"monotone",dataKey:"completed_count",name:"Complts",stroke:"#10B981",strokeWidth:2,dot:{r:4}})]})})]})]}),f?.data&&f.data.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rpartition des Taux de Compltion"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(hy,{width:"100%",height:300,children:n.jsxs(uz,{children:[n.jsx(o6,{data:f.data.slice(0,6),dataKey:"completion_rate",nameKey:"title",cx:"50%",cy:"50%",outerRadius:100,label:y=>`${y.title}: ${y.completion_rate}%`,children:f.data.slice(0,6).map((y,j)=>n.jsx(Hf,{fill:cy[j%cy.length]},`cell-${j}`))}),n.jsx(py,{content:({active:y,payload:j})=>{if(y&&j&&j.length){const S=j[0].payload;return n.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[n.jsx("p",{className:"font-semibold text-sm mb-1",children:S.title}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Taux: ",n.jsxs("span",{className:"font-medium",children:[S.completion_rate,"%"]})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Complts: ",n.jsxs("span",{className:"font-medium",children:[S.completed_enrollments,"/",S.total_enrollments]})]})]})}return null}})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Dtails par Formation"}),n.jsx("div",{className:"space-y-2 max-h-[280px] overflow-y-auto",children:f.data.map((y,j)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:cy[j%cy.length]}}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.title})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[y.completion_rate,"%"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[y.completed_enrollments,"/",y.total_enrollments]})]})]},y.id))})]})]})]}),d?.students&&d.students.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"tudiants les Plus Actifs"}),n.jsxs("button",{onClick:()=>W4e(d.students),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(ps,{className:"h-4 w-4"}),"Export CSV"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"tudiant"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscriptions"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vidos Vues"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vidos Compltes"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tests Passs"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tests Russis"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.students.map(y=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:y.full_name}),n.jsx("p",{className:"text-sm text-gray-500",children:y.email})]})}),n.jsx("td",{className:"px-6 py-4 text-center",children:n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:y.enrollments_count})}),n.jsx("td",{className:"px-6 py-4 text-center text-gray-900",children:y.videos_watched}),n.jsx("td",{className:"px-6 py-4 text-center",children:n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:y.videos_completed})}),n.jsx("td",{className:"px-6 py-4 text-center text-gray-900",children:y.tests_taken}),n.jsx("td",{className:"px-6 py-4 text-center",children:n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:y.tests_passed})})]},y.id))})]})})]})]})})},Mb=({progress:e,label:t,showPercentage:r=!0,size:a="md",color:s="blue"})=>{const i=Math.min(Math.max(e,0),100),l=i>=100,o={sm:"h-1.5",md:"h-2",lg:"h-3"},d={blue:"bg-blue-600",green:"bg-green-600",purple:"bg-purple-600",orange:"bg-orange-600"};return n.jsxs("div",{className:"w-full",children:[(t||r)&&n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[t&&n.jsx("span",{className:"text-sm font-medium text-gray-700",children:t}),r&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[l&&n.jsx(Xr,{className:"h-4 w-4 text-green-600"}),n.jsxs("span",{className:`text-sm font-semibold ${l?"text-green-600":"text-gray-600"}`,children:[Math.round(i),"%"]})]})]}),n.jsx("div",{className:`w-full bg-gray-200 rounded-full overflow-hidden ${o[a]}`,children:n.jsx("div",{className:`${o[a]} ${d[s]} rounded-full transition-all duration-500 ease-out`,style:{width:`${i}%`}})})]})},sF=({completed:e,total:t,label:r,color:a="blue"})=>{const s=t>0?e/t*100:0;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsx("span",{className:"text-sm text-gray-600",children:r}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e,"/",t]})]}),n.jsx(Mb,{progress:s,showPercentage:!1,color:a})]})},X4e=()=>{const[e,t]=k.useState(null),[r,a]=k.useState(""),{data:s,isLoading:i}=xje(e),l=u=>{t(u)},o=()=>{s&&H4e(s)},d=()=>{s&&G4e(s)};return n.jsxs(Ut,{title:"Rapports tudiants",subtitle:"Consulter les rapports dtaills de progression des tudiants",children:[n.jsxs("div",{className:"space-y-6",children:[e&&n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(ps,{className:"h-4 w-4"}),"Export CSV"]}),n.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(ps,{className:"h-4 w-4"}),"Export PDF"]})]})}),!e&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(ps,{className:"h-4 w-4"}),"Export CSV"]}),n.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[n.jsx(ps,{className:"h-4 w-4"}),"Export PDF"]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Rechercher un tudiant par ID (pour test, utilisez un ID existant)...",value:r,onChange:u=>a(u.target.value),onKeyDown:u=>{u.key==="Enter"&&r.trim()&&l(r.trim())},className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Appuyez sur Entre pour charger le rapport d'un tudiant"})]}),i&&n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!i&&!e&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(pi,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun tudiant slectionn"}),n.jsx("p",{className:"text-gray-600",children:"Entrez l'ID d'un tudiant dans la barre de recherche pour afficher son rapport dtaill"})]}),!i&&e&&s&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"bg-blue-500 p-4 rounded-full",children:n.jsx(il,{className:"h-8 w-8 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.student.full_name}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(XF,{className:"h-4 w-4"}),s.student.email]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ba,{className:"h-4 w-4"}),"Inscrit le ",new Date(s.student.created_at).toLocaleDateString("fr-FR")]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(wa,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Formations"})]}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.enrollments.length})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Xr,{className:"h-5 w-5 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Compltes"})]}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.enrollments.filter(u=>u.completed_at).length})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(gg,{className:"h-5 w-5 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Vidos"})]}),n.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[s.enrollments.reduce((u,f)=>u+f.completed_videos,0)," /"," ",s.enrollments.reduce((u,f)=>u+f.total_videos,0)]})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(cp,{className:"h-5 w-5 text-orange-600"}),n.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Tests Russis"})]}),n.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[s.enrollments.reduce((u,f)=>u+f.passed_tests,0)," /"," ",s.enrollments.reduce((u,f)=>u+f.total_tests,0)]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Formations Inscrites"})}),n.jsx("div",{className:"divide-y",children:s.enrollments.length===0?n.jsxs("div",{className:"p-12 text-center text-gray-500",children:[n.jsx(wa,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{children:"Aucune formation inscrite"})]}):s.enrollments.map(u=>{const f=u.total_videos>0?u.completed_videos/u.total_videos*100:0,m=u.total_tests>0?u.passed_tests/u.total_tests*100:0;return n.jsxs("div",{className:"p-6 hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:u.formation_title}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("span",{children:["Inscrit le ",new Date(u.enrolled_at).toLocaleDateString("fr-FR")]}),u.completed_at&&n.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[n.jsx(Xr,{className:"h-4 w-4"}),"Complt le ",new Date(u.completed_at).toLocaleDateString("fr-FR")]})]})]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${u.status==="completed"?"bg-green-100 text-green-800":u.status==="active"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:u.status==="completed"?"Complt":u.status==="active"?"En cours":"Inactif"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx("div",{children:n.jsx(Mb,{progress:f,label:`Vidos (${u.completed_videos}/${u.total_videos})`,color:"purple",size:"sm"})}),n.jsx("div",{children:n.jsx(Mb,{progress:m,label:`Tests russis (${u.passed_tests}/${u.total_tests})`,color:"orange",size:"sm"})})]})]},u.formation_id)})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Historique des Tests"})}),s.test_history.length===0?n.jsxs("div",{className:"p-12 text-center text-gray-500",children:[n.jsx(cp,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{children:"Aucun test pass"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Formation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Test"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Score"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Rsultat"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),n.jsx("tbody",{className:"divide-y",children:s.test_history.map(u=>{const f=u.total_points>0?(u.score/u.total_points*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:u.formation_title}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:u.test_title}),n.jsxs("td",{className:"px-6 py-4 text-center",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[u.score," / ",u.total_points]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[f,"%"]})]}),n.jsx("td",{className:"px-6 py-4 text-center",children:u.passed?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[n.jsx(Xr,{className:"h-4 w-4"}),"Russi"]}):n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[n.jsx(fo,{className:"h-4 w-4"}),"chou"]})}),n.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:new Date(u.submitted_at).toLocaleDateString("fr-FR")})]},u.id)})})]})})]})]})]})},S6={generate:async e=>Ce.post("/certificates/generate",e),getByStudent:async e=>Ce.get(`/certificates/student/${e}`),getById:async e=>Ce.get(`/certificates/${e}`),verify:async e=>Ce.get(`/certificates/verify/${e}`),getAll:async e=>{const t={};return e?.limit&&(t.limit=e.limit.toString()),e?.offset&&(t.offset=e.offset.toString()),e?.formation_id&&(t.formation_id=e.formation_id),Ce.get("/certificates",t)},delete:async e=>Ce.delete(`/certificates/${e}`),updateMetadata:async(e,t)=>Ce.patch(`/certificates/${e}/metadata`,{metadata:t})},gU=e=>Ft({queryKey:["certificates","student",e],queryFn:()=>{if(!e)throw new Error("Student ID is required");return S6.getByStudent(e)},enabled:!!e,staleTime:1e3*60*5}),Q4e=e=>Ft({queryKey:["certificates","all",e],queryFn:()=>S6.getAll(e),staleTime:1e3*60*5}),Z4e=()=>{const e=Tt();return St({mutationFn:S6.delete,onSuccess:()=>{e.invalidateQueries({queryKey:["certificates"]})}})},vU=["helvetica","times","courier","arial","verdana","georgia","palatino","garamond","bookman","trebuchet","impact"],J4e=["normal","bold","italic","bolditalic"];function k6(){return`page-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function e3e(e,t){if(e.pages&&e.pages.length>0)return e;const r={id:k6(),name:"Recto",background_image_url:t?.url,background_image_type:t?.type,elements:e.elements||[]};return{...e,pages:[r],elements:e.elements}}function t3e(e){return!!(e.pages&&e.pages.length>0)}function Kg(e,t){return t3e(e)?e.pages:e3e(e,t).pages}function r3e(e="Nouvelle page"){return{id:k6(),name:e,elements:[]}}const a3e={a4:{width:1122,height:794},letter:{width:1056,height:816},badge:{width:323,height:204}},U2=(e,t,r,a)=>{if(e==="custom"){const i=r?iF(r):1122,l=a?iF(a):794;return t==="portrait"?{width:l,height:i}:{width:i,height:l}}const s=a3e[e];return t==="portrait"?{width:s.height,height:s.width}:{...s}},n3e=(e,t,r,a)=>{const{width:s,height:i}=U2(e,t,r,a),l=Ny[e]||"Personnalis";return`${s}  ${i} px (${l} ${t==="portrait"?"Portrait":"Paysage"})`},Ny={a4:"A4",letter:"Letter",badge:"Badge",custom:"Personnalis"},s3e={a4:{width:297,height:210},letter:{width:279.4,height:215.9},badge:{width:85.6,height:54},custom:{width:210,height:297}},iF=e=>e*96/25.4;class SN{doc;certificate;template;pageWidth;pageHeight;customFonts=[];isCustomFontsLoaded=!1;pxToMmX;pxToMmY;canvasWidthPx;canvasHeightPx;constructor(t,r){this.certificate=t,this.template=r;const a=r.template_config,{format:s,orientation:i,customWidth:l,customHeight:o}=a.layout,d=U2(s,i,l,o);this.canvasWidthPx=d.width,this.canvasHeightPx=d.height;let u,f;if(s==="custom")u=i==="landscape"?l||210:o||297,f=i==="landscape"?o||297:l||210;else{const g=s3e[s];u=i==="landscape"?g.width:g.height,f=i==="landscape"?g.height:g.width}this.pxToMmX=u/this.canvasWidthPx,this.pxToMmY=f/this.canvasHeightPx;let m;s==="badge"||s==="custom"?m=[u,f]:m=s,this.doc=new Qt({orientation:i||"landscape",unit:"mm",format:m}),this.pageWidth=this.doc.internal.pageSize.getWidth(),this.pageHeight=this.doc.internal.pageSize.getHeight()}async loadCustomFonts(){if(!this.isCustomFontsLoaded)try{const t=await al.getCustomFonts();this.customFonts=t.fonts||[];for(const r of this.customFonts)try{const s=await(await fetch(r.file_url)).blob(),l=(await this.blobToBase64(s)).split(",")[1],o=`custom-${r.id}`;this.doc.addFileToVFS(`${o}.${r.file_format}`,l),this.doc.addFont(`${o}.${r.file_format}`,o,"normal")}catch(a){console.warn(`Failed to load custom font ${r.name}:`,a)}this.isCustomFontsLoaded=!0}catch(t){console.error("Error loading custom fonts:",t)}}blobToBase64(t){return new Promise((r,a)=>{const s=new FileReader;s.onloadend=()=>r(s.result),s.onerror=a,s.readAsDataURL(t)})}async loadBackgroundImage(t){const r=t||this.template.background_image_url;if(r)try{const s=await(await fetch(r)).blob(),i=await this.blobToBase64(s);this.doc.addImage(i,"JPEG",0,0,this.pageWidth,this.pageHeight,void 0,"FAST")}catch(a){console.error("Error loading background image:",a)}}pxToMm(t,r){let a;return typeof t=="number"?a=t:a=this.calculatePixelPosition(t,r),r==="x"?a*this.pxToMmX:a*this.pxToMmY}calculatePixelPosition(t,r="x"){if(typeof t=="number")return t;let a=t.replace(/CANVAS_WIDTH_PX|canvasWidth/g,String(this.canvasWidthPx)).replace(/CANVAS_HEIGHT_PX|canvasHeight/g,String(this.canvasHeightPx)).replace(/center/g,String(r==="x"?this.canvasWidthPx/2:this.canvasHeightPx/2));try{return/^[\d\s+\-*/().]+$/.test(a)?Function(`'use strict'; return (${a})`)():(console.warn("Expression non valide:",a),0)}catch(s){return console.error("Error calculating pixel position:",a,s),0}}async generate(){await this.loadCustomFonts();const t=Kg(this.template.template_config,{url:this.template.background_image_url,type:this.template.background_image_type});for(let r=0;r<t.length;r++){const a=t[r];r>0&&this.doc.addPage(),await this.loadBackgroundImage(a.background_image_url);for(const s of a.elements)s.condition&&!this.checkCondition(s.condition)||await this.renderElement(s)}return this.doc}async appendToDocument(t){await this.loadCustomFonts(),this.doc=t;const r=Kg(this.template.template_config,{url:this.template.background_image_url,type:this.template.background_image_type});for(let a=0;a<r.length;a++){const s=r[a];this.doc.addPage(),await this.loadBackgroundImage(s.background_image_url);for(const i of s.elements)i.condition&&!this.checkCondition(i.condition)||await this.renderElement(i)}}checkCondition(t){const a=this.certificate[t];return a!=null&&a!==""}replaceVariables(t){const r={"{student_name}":this.certificate.student_name||"tudiant","{student_first_name}":this.certificate.metadata?.student_first_name||this.certificate.metadata?.prenom||"","{student_last_name}":this.certificate.metadata?.student_last_name||this.certificate.metadata?.nom||"","{student_email}":this.certificate.student_email||"","{student_id}":this.certificate.metadata?.student_id||this.certificate.metadata?.cin||"","{student_phone}":this.certificate.metadata?.student_phone||this.certificate.metadata?.phone||"","{student_whatsapp}":this.certificate.metadata?.student_whatsapp||this.certificate.metadata?.whatsapp||"","{student_birth_date}":this.certificate.metadata?.student_birth_date||this.certificate.metadata?.date_naissance?this.formatDate(this.certificate.metadata?.student_birth_date||this.certificate.metadata?.date_naissance,"short"):"","{student_birth_place}":this.certificate.metadata?.student_birth_place||this.certificate.metadata?.lieu_naissance||"","{student_address}":this.certificate.metadata?.student_address||this.certificate.metadata?.adresse||"","{formation_title}":this.certificate.formation_title||"Formation","{formation_description}":this.certificate.formation_description||"","{duration_hours}":this.certificate.duration_hours||"","{completion_date}":this.formatDate(this.certificate.completion_date,"long"),"{completion_date_short}":this.formatDate(this.certificate.completion_date,"short"),"{issued_date}":this.formatDate(this.certificate.issued_at,"long"),"{issued_date_short}":this.formatDate(this.certificate.issued_at,"short"),"{certificate_number}":this.certificate.certificate_number||"","{certificate_serial}":this.certificate.metadata?.certificate_serial||"","{grade}":this.certificate.grade!==null&&this.certificate.grade!==void 0?this.certificate.grade:"","{grade_rounded}":this.certificate.grade!==null&&this.certificate.grade!==void 0?Math.round(this.certificate.grade):"","{session_title}":this.certificate.metadata?.session_title||"","{session_date_debut}":this.certificate.metadata?.session_date_debut?this.formatDate(this.certificate.metadata?.session_date_debut,"short"):"","{session_date_fin}":this.certificate.metadata?.session_date_fin?this.formatDate(this.certificate.metadata?.session_date_fin,"short"):"","{session_ville}":this.certificate.metadata?.session_ville||"","{session_segment}":this.certificate.metadata?.session_segment||"","{session_corps_formation}":this.certificate.metadata?.session_corps_formation||"","{current_year}":new Date().getFullYear(),"{current_date}":this.formatDate(new Date,"long"),"{organization_name}":this.certificate.metadata?.organization_name||"Centre de Formation","{organization_address}":this.certificate.metadata?.organization_address||"","{director_name}":this.certificate.metadata?.director_name||"Directeur","{logo_url}":this.certificate.metadata?.logo_url||"","{signature_url}":this.certificate.metadata?.signature_url||"","{student_photo_url}":this.certificate.metadata?.student_photo_url||""};let a=t;return Object.entries(r).forEach(([s,i])=>{a=a.replace(new RegExp(s.replace(/[{}]/g,"\\$&"),"g"),String(i||""))}),a}getColor(t){const a=this.template.template_config.colors[t]||t;return a.startsWith("#")?this.hexToRgb(a):[0,0,0]}hexToRgb(t){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:[0,0,0]}formatDate(t,r){try{const a=new Date(t);return isNaN(a.getTime())?"":r==="long"?a.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):a.toLocaleDateString("fr-FR")}catch{return""}}async renderElement(t){try{switch(t.type){case"text":this.renderText(t);break;case"line":this.renderLine(t);break;case"border":case"rectangle":this.renderRectangle(t);break;case"circle":this.renderCircle(t);break;case"image":await this.renderImage(t);break;default:console.warn("Unknown element type:",t.type)}}catch(r){console.error("Error rendering element:",t.id,r)}}renderText(t){const r=t.font?this.template.template_config.fonts[t.font]:{family:"helvetica",size:12,style:"normal",color:"text"};let a=t.fontFamily||r.family;const s=t.fontStyle||r.style,i=t.fontSize||r.size;a.startsWith("custom-")?this.customFonts.find(v=>`custom-${v.id}`===a)?this.doc.setFont(a,"normal"):(console.warn(`Custom font ${a} not loaded, falling back to helvetica`),a="helvetica",this.doc.setFont(a,s)):this.doc.setFont(a,s),this.doc.setFontSize(i);const l=t.color?this.getColor(t.color):this.getColor(r.color||"text");this.doc.setTextColor(...l);const o=this.replaceVariables(t.content||"");let d=this.pxToMm(t.x||0,"x");const u=this.pxToMm(t.y||0,"y"),f=t.align||"left",m=t.maxWidth||t.width;let g=d;if(m&&(f==="center"||f==="right")){const b=this.pxToMm(m,"x");f==="center"?g=d+b/2:f==="right"&&(g=d+b)}let x=u;if(t.height){const b=this.pxToMm(t.height,"y"),v=i*.3527;x=u+b/2+v/3}if(t.maxWidth){const b=this.pxToMm(t.maxWidth,"x"),v=this.doc.splitTextToSize(o,b);if(v.length===1)this.doc.text(v[0],g,x,{align:f});else{const y=i*.3527*1.2;v.forEach((j,S)=>{this.doc.text(j,g,x+S*y,{align:f})})}}else this.doc.text(o,g,x,{align:f})}renderLine(t){const r=this.pxToMm(t.x1||0,"x"),a=this.pxToMm(t.y1||0,"y"),s=this.pxToMm(t.x2||0,"x"),i=this.pxToMm(t.y2||0,"y"),l=this.getColor(t.color||"text");this.doc.setDrawColor(...l),this.doc.setLineWidth(t.lineWidth||.5),this.doc.line(r,a,s,i)}renderRectangle(t){const r=this.pxToMm(t.x||0,"x"),a=this.pxToMm(t.y||0,"y"),s=this.pxToMm(t.width||0,"x"),i=this.pxToMm(t.height||0,"y"),l=this.getColor(t.color||"secondary");this.doc.setDrawColor(...l),this.doc.setLineWidth(t.lineWidth||1),this.doc.rect(r,a,s,i)}renderCircle(t){const r=this.pxToMm(t.x||0,"x"),a=this.pxToMm(t.y||0,"y"),s=this.pxToMm(t.radius||10,"x"),i=this.getColor(t.fillColor||"secondary");this.doc.setFillColor(...i),this.doc.circle(r,a,s,"F")}async renderImage(t){if(!t.source){console.warn("Image element has no source");return}try{let r=this.replaceVariables(t.source);if(!r||r===t.source&&t.source.startsWith("{")){console.warn("Image source variable not resolved:",t.source);return}r.startsWith("/uploads/")&&(r=`${(window.__API_URL__||"http://localhost:3001/api").replace("/api","")}${r}`);const s=await(await fetch(r)).blob(),i=await this.blobToBase64(s),l=this.pxToMm(t.x||0,"x"),o=this.pxToMm(t.y||0,"y"),d=this.pxToMm(t.width||100,"x"),u=this.pxToMm(t.height||100,"y");this.doc.addImage(i,"JPEG",l,o,d,u,void 0,"FAST")}catch(r){console.error("Error loading image:",t.source,r)}}download(){const t=`certificat_${this.certificate.certificate_number}_${this.certificate.student_name?.replace(/\s+/g,"_")||"etudiant"}.pdf`;this.doc.save(t)}getBlob(){return this.doc.output("blob")}getDataURL(){return this.doc.output("dataurlstring")}}const yU=async(e,t)=>{const r=new Qt({orientation:"landscape",unit:"mm",format:"a4"}),a=r.internal.pageSize.getWidth(),s=r.internal.pageSize.getHeight(),i=[59,130,246],l=[251,191,36],o=[31,41,55];r.setDrawColor(...l),r.setLineWidth(1),r.rect(10,10,a-20,s-20),r.setDrawColor(...i),r.setLineWidth(.5),r.rect(15,15,a-30,s-30),r.setLineWidth(2),r.line(20,20,40,20),r.line(20,20,20,40),r.line(a-40,20,a-20,20),r.line(a-20,20,a-20,40),r.line(20,s-20,40,s-20),r.line(20,s-40,20,s-20),r.line(a-40,s-20,a-20,s-20),r.line(a-20,s-40,a-20,s-20),r.setTextColor(...l),r.setFontSize(32),r.setFont("helvetica","bold"),r.text("CERTIFICAT DE RUSSITE",a/2,40,{align:"center"}),r.setDrawColor(...l),r.setLineWidth(.5),r.line(a/2-50,45,a/2+50,45),r.setTextColor(...o),r.setFontSize(14),r.setFont("helvetica","normal"),r.text("Ce certificat est dcern ",a/2,60,{align:"center"}),r.setTextColor(...i),r.setFontSize(28),r.setFont("helvetica","bold"),r.text(e.student_name||"tudiant",a/2,75,{align:"center"}),r.setDrawColor(...i),r.setLineWidth(.3);const d=r.getTextWidth(e.student_name||"tudiant");r.line(a/2-d/2-10,78,a/2+d/2+10,78),r.setTextColor(...o),r.setFontSize(13),r.setFont("helvetica","normal"),r.text("Pour avoir complt avec succs la formation",a/2,92,{align:"center"}),r.setTextColor(0,0,0),r.setFontSize(18),r.setFont("helvetica","bold");const u=e.formation_title||"Formation",f=a-80,m=r.splitTextToSize(u,f);m.length===1?r.text(m[0],a/2,105,{align:"center"}):(r.text(m[0],a/2,102,{align:"center"}),m[1]&&r.text(m[1],a/2,110,{align:"center"}));const g=m.length>1?120:115;r.setTextColor(...o),r.setFontSize(11),r.setFont("helvetica","normal");const x=new Date(e.completion_date).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});r.text(`Date de compltion : ${x}`,a/2,g+10,{align:"center"}),e.duration_hours&&r.text(`Dure de la formation : ${e.duration_hours} heures`,a/2,g+17,{align:"center"}),e.grade!==null&&e.grade!==void 0&&(r.setTextColor(...i),r.setFont("helvetica","bold"),r.text(`Note obtenue : ${e.grade}%`,a/2,g+24,{align:"center"}));const b=s-40;r.setTextColor(...o),r.setFontSize(9),r.setFont("helvetica","italic"),r.text(`Numro de certificat : ${e.certificate_number}`,a/2,b,{align:"center"});const v=new Date(e.issued_at).toLocaleDateString("fr-FR");r.text(`Dlivr le : ${v}`,a/2,b+5,{align:"center"});const y=b-20;r.setDrawColor(...o),r.setLineWidth(.3),r.line(a/2-30,y,a/2+30,y),r.setTextColor(...o),r.setFontSize(10),r.setFont("helvetica","normal"),r.text("Directeur de Formation",a/2,y+5,{align:"center"}),r.setFillColor(...l),r.circle(a-35,s-35,15,"F"),r.setTextColor(255,255,255),r.setFontSize(8),r.setFont("helvetica","bold"),r.text("CERTIFI",a-35,s-38,{align:"center"}),r.text("RUSSITE",a-35,s-32,{align:"center"});const j=`certificat_${e.certificate_number}_${e.student_name?.replace(/\s+/g,"_")||"etudiant"}.pdf`;r.save(j)},i3e=()=>{const[e,t]=k.useState(""),[r,a]=k.useState(""),{data:s,isLoading:i}=Q4e({limit:100,formation_id:r||void 0}),{data:l}=Zb(),o=Z4e(),d=s?.certificates||[],u=l||[],f=d.filter(y=>{const j=e.toLowerCase();return y.student_name?.toLowerCase().includes(j)||y.formation_title?.toLowerCase().includes(j)||y.certificate_number.toLowerCase().includes(j)}),m=async y=>{await yU(y)},g=async y=>{if(confirm("tes-vous sr de vouloir supprimer ce certificat ?"))try{await o.mutateAsync(y)}catch(j){console.error("Erreur lors de la suppression:",j),alert("Erreur lors de la suppression du certificat")}},x=d.length,b=d.filter(y=>{const j=new Date(y.issued_at),S=new Date;return j.getMonth()===S.getMonth()&&j.getFullYear()===S.getFullYear()}).length,v=d.length>0?(d.filter(y=>y.grade!==null).reduce((y,j)=>y+(j.grade||0),0)/d.filter(y=>y.grade!==null).length).toFixed(1):"0";return n.jsx(Ut,{title:"Gestion des Certificats",subtitle:"Consulter et grer tous les certificats mis",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm opacity-90",children:"Total Certificats"}),n.jsx("p",{className:"text-4xl font-bold mt-2",children:x})]}),n.jsx(Fn,{className:"h-12 w-12 opacity-80"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm opacity-90",children:"Ce mois-ci"}),n.jsx("p",{className:"text-4xl font-bold mt-2",children:b})]}),n.jsx(ba,{className:"h-12 w-12 opacity-80"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm opacity-90",children:"Note Moyenne"}),n.jsxs("p",{className:"text-4xl font-bold mt-2",children:[v,"%"]})]}),n.jsx(Xr,{className:"h-12 w-12 opacity-80"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm opacity-90",children:"Formations"}),n.jsx("p",{className:"text-4xl font-bold mt-2",children:new Set(d.map(y=>y.formation_id)).size})]}),n.jsx(wa,{className:"h-12 w-12 opacity-80"})]})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Rechercher par tudiant, formation ou numro...",value:e,onChange:y=>t(y.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsx("div",{children:n.jsxs("div",{className:"relative",children:[n.jsx(Tp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsxs("select",{value:r,onChange:y=>a(y.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:[n.jsx("option",{value:"",children:"Toutes les formations"}),u.map(y=>n.jsx("option",{value:y.id,children:y.title},y.id))]})]})})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Certificats (",f.length,")"]})}),i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):f.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Fn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun certificat trouv"}),n.jsx("p",{className:"text-gray-600",children:e||r?"Essayez de modifier vos critres de recherche":"Aucun certificat n'a encore t gnr"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Numro"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"tudiant"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Formation"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Note"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date mission"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(y=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-mono text-gray-900",children:y.certificate_number})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(il,{className:"h-4 w-4 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.student_name}),n.jsx("p",{className:"text-xs text-gray-500",children:y.student_email})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wa,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:y.formation_title})]})}),n.jsx("td",{className:"px-6 py-4 text-center",children:y.grade!==null&&y.grade!==void 0?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[y.grade,"%"]}):n.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),n.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:new Date(y.issued_at).toLocaleDateString("fr-FR")}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx("button",{onClick:()=>m(y),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Tlcharger",children:n.jsx(ps,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>g(y.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",disabled:o.isPending,children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},y.id))})]})})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:n.jsx(Nr,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" propos des certificats"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Les certificats sont gnrs automatiquement quand un tudiant complte une formation"}),n.jsx("li",{children:" Chaque certificat possde un numro unique pour vrification"}),n.jsx("li",{children:" La suppression d'un certificat est dfinitive"}),n.jsx("li",{children:" Les certificats peuvent tre tlchargs en PDF  tout moment"})]})]})]})})]})})},l3e=({isOpen:e,onClose:t,onSubmit:r,folder:a,folders:s,isLoading:i=!1,mode:l})=>{const[o,d]=k.useState(""),[u,f]=k.useState(null);k.useEffect(()=>{e&&(l==="edit"&&a?(d(a.name),f(a.parent_id)):(d(""),f(null)))},[e,l,a]);const m=x=>{x.preventDefault(),o.trim()&&r(o.trim(),l==="create"?u:void 0)};if(!e)return null;const g=s.filter(x=>l==="edit"&&a?x.id!==a.id:!0);return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ch,{className:"h-5 w-5 text-blue-600"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l==="create"?"Nouveau Dossier":"Renommer le Dossier"})]}),n.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded transition-colors",disabled:i,children:n.jsx(Mr,{className:"h-5 w-5 text-gray-500"})})]}),n.jsxs("form",{onSubmit:m,className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"folder-name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom du dossier ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"folder-name",type:"text",value:o,onChange:x=>d(x.target.value),placeholder:"Ex: Formation KSS",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i,autoFocus:!0})]}),l==="create"&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"parent-folder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dossier parent (optionnel)"}),n.jsxs("select",{id:"parent-folder",value:u||"",onChange:x=>f(x.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:i,children:[n.jsx("option",{value:"",children:" Racine (aucun parent)"}),g.map(x=>n.jsxs("option",{value:x.id,children:[" ",x.name]},x.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Laissez vide pour crer un dossier  la racine"})]}),n.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",disabled:i,children:"Annuler"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",disabled:i||!o.trim(),children:i?"Enregistrement...":l==="create"?"Crer":"Enregistrer"})]})]})]})})},o3e=({currentPath:e,onNavigate:t})=>n.jsxs("div",{className:"flex items-center gap-1 px-4 py-3 bg-white border border-gray-200 rounded-lg shadow-sm",children:[n.jsxs("button",{onClick:()=>t(null),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded transition-colors",title:"Accueil",children:[n.jsx(Ym,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Accueil"})]}),e.map((r,a)=>n.jsxs(Kr.Fragment,{children:[n.jsx(rl,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),n.jsxs("button",{onClick:()=>t(r.id),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded transition-colors ${a===e.length-1?"bg-blue-100 text-blue-800 font-semibold":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,title:r.name,children:[n.jsx(ch,{className:"h-4 w-4"}),n.jsx("span",{className:"max-w-[200px] truncate",children:r.name})]})]},r.id))]}),c3e={A4:{width:210,height:297,label:"A4 (210 x 297 mm)"},Letter:{width:216,height:279,label:"Letter (216 x 279 mm)"},Badge:{width:85,height:55,label:"Badge (85 x 55 mm)"},Custom:{width:210,height:297,label:"Personnalis"}},u3e=({isOpen:e,onClose:t,onSubmit:r,currentFolderName:a})=>{const[s,i]=k.useState(""),[l,o]=k.useState("A4"),[d,u]=k.useState("portrait"),[f,m]=k.useState(10),[g,x]=k.useState(210),[b,v]=k.useState(297),[y,j]=k.useState("");if(!e)return null;const S=C=>{if(C.preventDefault(),!s.trim()){j("Le nom du template est requis");return}if(f<0||f>50){j("Les marges doivent tre entre 0 et 50 mm");return}if(l==="Custom"&&(g<10||g>500||b<10||b>500)){j("Les dimensions personnalises doivent tre entre 10 et 500 mm");return}const T={name:s.trim(),format:l,orientation:d,margins:f};l==="Custom"&&(T.customWidth=g,T.customHeight=b),r(T),N()},N=()=>{i(""),o("A4"),u("portrait"),m(10),x(210),v(297),j(""),t()};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:n.jsx(Fa,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nouveau Template Canvas"}),a&&n.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:["Dossier: ",n.jsx("span",{className:"font-medium",children:a})]})]})]}),n.jsx("button",{onClick:N,className:"p-2 hover:bg-blue-200 rounded-lg transition-colors",type:"button",children:n.jsx(Mr,{className:"h-5 w-5 text-gray-600"})})]}),n.jsxs("form",{onSubmit:S,className:"p-6 space-y-5",children:[y&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:y}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Nom du template ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:s,onChange:C=>{i(C.target.value),j("")},className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Ex: Certificat de Formation",autoFocus:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Format"}),n.jsx("select",{value:l,onChange:C=>o(C.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:Object.entries(c3e).map(([C,{label:T}])=>n.jsx("option",{value:C,children:T},C))})]}),l==="Custom"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Largeur (mm)"}),n.jsx("input",{type:"number",value:g,onChange:C=>x(parseInt(C.target.value)||0),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",min:"10",max:"500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Hauteur (mm)"}),n.jsx("input",{type:"number",value:b,onChange:C=>v(parseInt(C.target.value)||0),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",min:"10",max:"500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Orientation"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx("button",{type:"button",onClick:()=>u("portrait"),className:`px-4 py-3 border-2 rounded-lg font-medium transition-all ${d==="portrait"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"Portrait"}),n.jsx("button",{type:"button",onClick:()=>u("landscape"),className:`px-4 py-3 border-2 rounded-lg font-medium transition-all ${d==="landscape"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"Paysage"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Marges (mm)"}),n.jsx("input",{type:"number",value:f,onChange:C=>m(parseInt(C.target.value)||0),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",min:"0",max:"50"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Valeur par dfaut: 10mm"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:N,className:"flex-1 px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Annuler"}),n.jsx("button",{type:"submit",className:"flex-1 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md hover:shadow-lg font-medium",children:"Crer et Modifier"})]})]})]})})},d3e=({isOpen:e,onClose:t,onSubmit:r,currentName:a,isLoading:s=!1})=>{const[i,l]=k.useState(a),[o,d]=k.useState("");k.useEffect(()=>{e&&(l(a),d(""))},[e,a]);const u=m=>{m.preventDefault();const g=i.trim();if(!g){d("Le nom du template est requis");return}if(g===a){d("Le nouveau nom doit tre diffrent de l'ancien");return}if(g.length<3){d("Le nom doit contenir au moins 3 caractres");return}if(g.length>100){d("Le nom ne peut pas dpasser 100 caractres");return}r(g)},f=()=>{s||(l(a),d(""),t())};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:n.jsx(Ah,{className:"h-5 w-5 text-white"})}),n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Renommer le Template"})]}),n.jsx("button",{onClick:f,disabled:s,className:"p-2 hover:bg-blue-200 rounded-lg transition-colors disabled:opacity-50",type:"button",children:n.jsx(Mr,{className:"h-5 w-5 text-gray-600"})})]}),n.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[o&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nom actuel"}),n.jsx("div",{className:"px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700",children:a})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Nouveau nom ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:i,onChange:m=>{l(m.target.value),d("")},className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Entrez le nouveau nom",autoFocus:!0,disabled:s}),n.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Minimum 3 caractres, maximum 100"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:f,disabled:s,className:"flex-1 px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md hover:shadow-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Renommage...":"Renommer"})]})]})]})}):null},f3e=({isOpen:e,onClose:t,onSubmit:r,currentName:a,isLoading:s=!1})=>{const[i,l]=k.useState(a),[o,d]=k.useState("");k.useEffect(()=>{e&&(l(a),d(""))},[e,a]);const u=m=>{m.preventDefault();const g=i.trim();if(!g){d("Le nom du dossier est requis");return}if(g===a){d("Le nouveau nom doit tre diffrent de l'ancien");return}if(g.length<3){d("Le nom doit contenir au moins 3 caractres");return}if(g.length>100){d("Le nom ne peut pas dpasser 100 caractres");return}r(g)},f=()=>{s||(l(a),d(""),t())};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-purple-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:n.jsx(uW,{className:"h-5 w-5 text-white"})}),n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Renommer le Dossier"})]}),n.jsx("button",{onClick:f,disabled:s,className:"p-2 hover:bg-purple-200 rounded-lg transition-colors disabled:opacity-50",type:"button",children:n.jsx(Mr,{className:"h-5 w-5 text-gray-600"})})]}),n.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[o&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nom actuel"}),n.jsx("div",{className:"px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700",children:a})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Nouveau nom ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:i,onChange:m=>{l(m.target.value),d("")},className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"Entrez le nouveau nom",autoFocus:!0,disabled:s}),n.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Minimum 3 caractres, maximum 100"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:f,disabled:s,className:"flex-1 px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-5 py-2.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all shadow-md hover:shadow-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Renommage...":"Renommer"})]})]})]})}):null},h3e=({isOpen:e,onClose:t,onSubmit:r,folders:a,currentFolderId:s,templateName:i,isLoading:l=!1})=>{const[o,d]=k.useState(""),[u,f]=k.useState(""),m=b=>{if(b.preventDefault(),!o){f("Veuillez slectionner un dossier de destination");return}if(o===s){f("Veuillez choisir un dossier diffrent du dossier actuel");return}r(o)},g=()=>{l||(d(""),f(""),t())},x=a.find(b=>b.id===s);return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:n.jsx(Dl,{className:"h-5 w-5 text-white"})}),n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Dupliquer vers un dossier"})]}),n.jsx("button",{onClick:g,disabled:l,className:"p-2 hover:bg-blue-200 rounded-lg transition-colors disabled:opacity-50",type:"button",children:n.jsx(Mr,{className:"h-5 w-5 text-gray-600"})})]}),n.jsxs("form",{onSubmit:m,className:"p-6 space-y-5",children:[u&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:u}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Template  dupliquer"}),n.jsx("div",{className:"px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700 font-medium",children:i})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Dossier actuel"}),n.jsxs("div",{className:"px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700 flex items-center gap-2",children:[n.jsx(ch,{className:"h-4 w-4 text-gray-500"}),x?.name||"Tous les dossiers"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Dossier de destination ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:o,onChange:b=>{d(b.target.value),f("")},className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",disabled:l,children:[n.jsx("option",{value:"",children:"Slectionnez un dossier"}),a.filter(b=>b.id!==s).map(b=>n.jsx("option",{value:b.id,children:b.name},b.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:'Le template sera dupliqu avec le suffixe " - Copie"'})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:g,disabled:l,className:"flex-1 px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md hover:shadow-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Duplication...":"Dupliquer"})]})]})]})}):null},m3e=()=>{const e=$a(),{data:t,isLoading:r,error:a}=Jb(),{data:s,isLoading:i}=ioe(),l=Jle(),o=eoe(),d=toe(),u=jL(),f=loe(),m=ooe(),g=coe(),[x,b]=k.useState(null),[v,y]=k.useState(null),[j,S]=k.useState(!1),[N,C]=k.useState("create"),[T,P]=k.useState(null),[D,M]=k.useState(!1),[F,H]=k.useState(!1),[L,z]=k.useState(null),[V,G]=k.useState(!1),[ie,Z]=k.useState(null),[X,he]=k.useState(!1),[ce,ke]=k.useState(null),[se,R]=k.useState(null),I=k.useMemo(()=>t?v?t.filter(Te=>Te.folder_id===v):t:[],[t,v]),q=k.useMemo(()=>{if(!v||!s)return null;const Te=qe=>{for(const xt of qe){if(xt.id===v)return xt;if(xt.children){const gt=Te(xt.children);if(gt)return gt}}return null};return Te(s)},[v,s]),K=k.useMemo(()=>s?v?q&&q.children?q.children:[]:s:[],[v,q,s]),te=k.useMemo(()=>{if(!v||!s)return[];const Te=(qe,xt,gt=[])=>{for(const Mt of qe){const mr=[...gt,Mt];if(Mt.id===xt)return mr;if(Mt.children){const Pt=Te(Mt.children,xt,mr);if(Pt)return Pt}}return null};return Te(s,v)||[]},[v,s]),J=k.useMemo(()=>{if(!s)return[];const Te=(qe,xt=[])=>{for(const gt of qe)xt.push(gt),gt.children&&Te(gt.children,xt);return xt};return Te(s)},[s]),Q=async Te=>{try{await l.mutateAsync(Te),b(null)}catch(qe){alert("Erreur: "+(qe.message||"Impossible de supprimer ce template"))}},ne=async Te=>{try{await o.mutateAsync(Te)}catch(qe){alert("Erreur: "+(qe.message||"Impossible de dupliquer ce template"))}},ye=(Te,qe)=>{z({id:Te,name:qe}),H(!0)},De=async Te=>{if(L)try{await u.mutateAsync({id:L.id,data:{name:Te}}),H(!1),z(null)}catch(qe){alert("Erreur: "+(qe.message||"Impossible de renommer ce template"))}},ee=(Te,qe,xt)=>{ke({id:Te,name:qe,folderId:xt}),he(!0)},Je=async Te=>{if(ce)try{await d.mutateAsync({id:ce.id,targetFolderId:Te}),he(!1),ke(null)}catch(qe){alert("Erreur: "+(qe.message||"Impossible de dupliquer ce template"))}},Oe=(Te,qe)=>{Z({id:Te,name:qe}),G(!0)},ve=async Te=>{if(ie)try{await m.mutateAsync({id:ie.id,data:{name:Te}}),G(!1),Z(null)}catch(qe){alert("Erreur: "+(qe.message||"Impossible de renommer ce dossier"))}},pt=Te=>{R(Te)},et=async()=>{if(se)try{await g.mutateAsync(se),v===se&&y(null),R(null)}catch(Te){alert("Erreur: "+(Te.message||"Impossible de supprimer ce dossier")),R(null)}},Nt=()=>{C("create"),P(null),S(!0)},ot=async(Te,qe)=>{try{N==="create"?await f.mutateAsync({name:Te,parent_id:qe!==void 0?qe:v}):T&&await m.mutateAsync({id:T.id,data:{name:Te}}),S(!1)}catch(xt){alert("Erreur: "+(xt.message||"Impossible d'enregistrer le dossier"))}},Ie=()=>{if(J.length===0){alert("Veuillez d'abord crer au moins un dossier avant de crer un template."),Nt();return}M(!0)},ge=Te=>{const qe=v||J[0]?.id,xt=new URLSearchParams({folderId:qe,name:Te.name,format:Te.format,orientation:Te.orientation,margins:Te.margins.toString()});Te.format==="Custom"&&Te.customWidth&&Te.customHeight&&(xt.set("customWidth",Te.customWidth.toString()),xt.set("customHeight",Te.customHeight.toString())),e(`/admin/certificate-templates/new/canvas-edit?${xt.toString()}`)};return r||i?n.jsx(Ut,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Chargement des templates..."})})}):a?n.jsx(Ut,{children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[n.jsx(Nr,{className:"h-5 w-5"}),n.jsx("span",{children:"Erreur lors du chargement des templates"})]})})}):n.jsx(Ut,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(Fn,{className:"h-7 w-7 text-blue-600"}),"Templates de Certificats"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Grez les templates utiliss pour gnrer les certificats"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Nt,className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-medium",children:[n.jsx(yC,{className:"h-5 w-5"}),"Nouveau Dossier"]}),n.jsxs("button",{onClick:Ie,className:"px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-medium",children:[n.jsx(Ub,{className:"h-5 w-5"}),"Ajouter Template Canvas"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[n.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Templates"}),n.jsx("div",{className:"text-3xl font-bold text-blue-900 mt-1",children:t?.length||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:[n.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Dossiers"}),n.jsx("div",{className:"text-3xl font-bold text-purple-900 mt-1",children:J?.length||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:[n.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Dossier Actuel"}),n.jsx("div",{className:"text-lg font-bold text-green-900 mt-1 truncate",children:q?q.name:"Tous"})]})]}),n.jsx(o3e,{currentPath:te,onNavigate:y}),n.jsx("div",{children:K.length===0&&I.length===0?n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[n.jsx(ch,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 text-sm",children:J.length===0?'Aucun dossier. Utilisez le bouton "Nouveau Dossier" pour commencer.':q?"Ce dossier est vide":"Aucun contenu"})]}):n.jsxs("div",{className:"space-y-6",children:[K.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(ch,{className:"h-4 w-4"}),"Dossiers (",K.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:K.map(Te=>n.jsxs("div",{className:"relative bg-white rounded-lg border-2 border-gray-200 hover:border-purple-300 hover:shadow-lg transition-all duration-200",children:[n.jsxs("button",{onClick:()=>y(Te.id),className:"group w-full p-5 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg group-hover:from-purple-200 group-hover:to-purple-300 transition-all",children:n.jsx(KF,{className:"h-8 w-8 text-purple-600"})}),n.jsx(rl,{className:"h-5 w-5 text-gray-400 group-hover:text-purple-600 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-900 text-sm mb-1 truncate group-hover:text-purple-700 transition-colors",children:Te.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Te.template_count||0," template",(Te.template_count||0)!==1?"s":"",Te.children&&Te.children.length>0&&n.jsxs(n.Fragment,{children:["  ",Te.children.length," sous-dossier",Te.children.length!==1?"s":""]})]})]})]}),n.jsxs("div",{className:"px-5 pb-4 flex gap-2",children:[n.jsxs("button",{onClick:qe=>{qe.stopPropagation(),Oe(Te.id,Te.name)},className:"flex-1 px-2 py-1.5 bg-green-50 text-green-700 rounded border border-green-300 hover:bg-green-100 transition-colors text-xs font-medium flex items-center justify-center gap-1",title:"Renommer le dossier",children:[n.jsx(hp,{className:"h-3 w-3"}),"Renommer"]}),n.jsxs("button",{onClick:qe=>{qe.stopPropagation(),pt(Te.id)},disabled:g.isPending&&se===Te.id,className:"flex-1 px-2 py-1.5 bg-red-50 text-red-700 rounded border border-red-300 hover:bg-red-100 transition-colors text-xs font-medium flex items-center justify-center gap-1 disabled:opacity-50",title:"Supprimer le dossier",children:[n.jsx(Pr,{className:"h-3 w-3"}),"Supprimer"]})]}),se===Te.id&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl max-w-xs mx-4",children:[n.jsx("h4",{className:"font-bold text-gray-900 text-sm mb-2",children:"Confirmer la suppression"}),n.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:['Supprimer le dossier "',Te.name,'" ?',n.jsx("br",{}),n.jsx("span",{className:"text-red-600 font-medium",children:"Le dossier doit tre vide."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>R(null),className:"flex-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors text-xs font-medium",children:"Annuler"}),n.jsx("button",{onClick:et,className:"flex-1 px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-xs font-medium",children:"Supprimer"})]})]})})]},Te.id))})]}),I.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4"}),"Templates (",I.length,")"]}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Nom"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Format"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Couleurs"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:I.map(Te=>n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900",children:Te.name}),n.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Te.description||"Aucune description"})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4 text-gray-400"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium text-gray-900",children:Te.template_config.layout.format.toUpperCase()}),n.jsx("div",{className:"text-xs text-gray-500",children:Te.template_config.layout.orientation==="landscape"?"Paysage":"Portrait"})]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:Te.template_config.colors.primary},title:"Couleur primaire"}),n.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:Te.template_config.colors.secondary},title:"Couleur secondaire"}),n.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:Te.template_config.colors.text},title:"Couleur du texte"})]})}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsxs("button",{onClick:()=>e(`/admin/certificate-templates/${Te.id}/canvas-edit`),className:"px-3 py-1.5 bg-purple-50 text-purple-700 rounded border border-purple-300 hover:bg-purple-100 transition-colors text-xs font-medium flex items-center gap-1",title:"Modifier avec l'diteur Canvas",children:[n.jsx(Ah,{className:"h-3.5 w-3.5"}),"Modifier"]}),n.jsxs("button",{onClick:()=>ye(Te.id,Te.name),className:"px-3 py-1.5 bg-green-50 text-green-700 rounded border border-green-300 hover:bg-green-100 transition-colors text-xs font-medium flex items-center gap-1",title:"Renommer le template",children:[n.jsx(hp,{className:"h-3.5 w-3.5"}),"Renommer"]}),n.jsxs("button",{onClick:()=>ne(Te.id),disabled:o.isPending,className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded border border-blue-300 hover:bg-blue-100 transition-colors text-xs font-medium flex items-center gap-1 disabled:opacity-50",title:"Dupliquer",children:[n.jsx(Dl,{className:"h-3.5 w-3.5"}),"Dupliquer"]}),n.jsxs("button",{onClick:()=>ee(Te.id,Te.name,Te.folder_id),disabled:d.isPending,className:"px-3 py-1.5 bg-cyan-50 text-cyan-700 rounded border border-cyan-300 hover:bg-cyan-100 transition-colors text-xs font-medium flex items-center gap-1 disabled:opacity-50",title:"Dupliquer vers un autre dossier",children:[n.jsx(yC,{className:"h-3.5 w-3.5"}),"Vers dossier"]}),n.jsxs("button",{onClick:()=>b(Te.id),disabled:l.isPending,className:"px-3 py-1.5 bg-red-50 text-red-700 rounded border border-red-300 hover:bg-red-100 transition-colors text-xs font-medium flex items-center gap-1 disabled:opacity-50",title:"Supprimer",children:[n.jsx(Pr,{className:"h-3.5 w-3.5"}),"Supprimer"]})]}),x===Te.id&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md mx-4",children:[n.jsx("h4",{className:"font-bold text-gray-900 text-lg mb-2",children:"Confirmer la suppression"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:['tes-vous sr de vouloir supprimer le template "',n.jsx("strong",{children:Te.name}),'" ?']}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors text-sm font-medium",children:"Annuler"}),n.jsx("button",{onClick:()=>Q(Te.id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm font-medium",children:"Supprimer"})]})]})})]})]},Te.id))})]})})]})]})}),n.jsx(l3e,{isOpen:j,onClose:()=>S(!1),onSubmit:ot,folder:T,folders:J,isLoading:f.isPending||m.isPending,mode:N}),n.jsx(u3e,{isOpen:D,onClose:()=>M(!1),onSubmit:ge,currentFolderName:q?.name||"Tous les dossiers"}),L&&n.jsx(d3e,{isOpen:F,onClose:()=>{H(!1),z(null)},onSubmit:De,currentName:L.name,isLoading:u.isPending}),ie&&n.jsx(f3e,{isOpen:V,onClose:()=>{G(!1),Z(null)},onSubmit:ve,currentName:ie.name,isLoading:m.isPending}),ce&&n.jsx(h3e,{isOpen:X,onClose:()=>{he(!1),ke(null)},onSubmit:Je,folders:J,currentFolderId:ce.folderId,templateName:ce.name,isLoading:d.isPending})]})})},p3e=({onDragStart:e})=>{const t=[{type:"text",icon:Qm,label:"Nom complet tudiant",variable:"{student_name}",category:"tudiant",color:"blue"},{type:"text",icon:il,label:"Prnom tudiant",variable:"{student_first_name}",category:"tudiant",color:"blue"},{type:"text",icon:il,label:"Nom famille tudiant",variable:"{student_last_name}",category:"tudiant",color:"blue"},{type:"text",icon:oV,label:"Email tudiant",variable:"{student_email}",category:"tudiant",color:"blue"},{type:"text",icon:WF,label:"CIN/ID tudiant",variable:"{student_id}",category:"tudiant",color:"blue"},{type:"text",icon:Jx,label:"Tlphone tudiant",variable:"{student_phone}",category:"tudiant",color:"blue"},{type:"text",icon:zW,label:"WhatsApp tudiant",variable:"{student_whatsapp}",category:"tudiant",color:"blue"},{type:"text",icon:yV,label:"Date naissance",variable:"{student_birth_date}",category:"tudiant",color:"blue"},{type:"text",icon:ns,label:"Lieu naissance",variable:"{student_birth_place}",category:"tudiant",color:"blue"},{type:"text",icon:Ym,label:"Adresse tudiant",variable:"{student_address}",category:"tudiant",color:"blue"},{type:"text",icon:_4,label:"Nom formation",variable:"{formation_title}",category:"Formation",color:"green"},{type:"text",icon:Qm,label:"Description formation",variable:"{formation_description}",category:"Formation",color:"green"},{type:"text",icon:na,label:"Dure (heures)",variable:"{duration_hours}",category:"Formation",color:"green"},{type:"text",icon:zb,label:"Numro certificat",variable:"{certificate_number}",category:"Certificat",color:"purple"},{type:"text",icon:NW,label:"Srie unique",variable:"{certificate_serial}",category:"Certificat",color:"purple"},{type:"text",icon:j4,label:"Date compltion",variable:"{completion_date}",category:"Certificat",color:"purple"},{type:"text",icon:ba,label:"Date mission",variable:"{issued_date}",category:"Certificat",color:"purple"},{type:"text",icon:Fn,label:"Note/Grade",variable:"{grade}",category:"Certificat",color:"purple"},{type:"text",icon:wa,label:"Titre session",variable:"{session_title}",category:"Session",color:"teal"},{type:"text",icon:xC,label:"Date dbut session",variable:"{session_date_debut}",category:"Session",color:"teal"},{type:"text",icon:xC,label:"Date fin session",variable:"{session_date_fin}",category:"Session",color:"teal"},{type:"text",icon:ns,label:"Ville session",variable:"{session_ville}",category:"Session",color:"teal"},{type:"text",icon:qb,label:"Segment session",variable:"{session_segment}",category:"Session",color:"teal"},{type:"text",icon:dp,label:"Corps formation",variable:"{session_corps_formation}",category:"Session",color:"teal"},{type:"text",icon:gV,label:"Nom organisation",variable:"{organization_name}",category:"Organisation",color:"orange"},{type:"text",icon:IV,label:"Nom directeur",variable:"{director_name}",category:"Organisation",color:"orange"},{type:"text",icon:ns,label:"Adresse organisation",variable:"{organization_address}",category:"Organisation",color:"orange"}],r=[{type:"image",icon:kV,label:"Photo tudiant",source:"{student_photo_url}",color:"indigo"},{type:"image",icon:Qx,label:"Logo",source:"{logo_url}",color:"indigo"},{type:"image",icon:Qx,label:"Signature",source:"{signature_url}",color:"indigo"},{type:"image",icon:Qx,label:"Image personnalise",source:"",color:"indigo"}],a=[{type:"rectangle",icon:LN,label:"Rectangle",color:"gray"},{type:"line",icon:Ey,label:"Ligne",color:"gray"},{type:"circle",icon:UV,label:"Cercle",color:"gray"}],s=[{type:"text",icon:Qm,label:"Texte libre",content:"Nouveau texte",color:"slate"}],i=(u,f)=>{u.dataTransfer.effectAllowed="copy",u.dataTransfer.setData("application/json",JSON.stringify(f)),e(f.type,f)},l={blue:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"},green:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},purple:{bg:"bg-purple-50",text:"text-purple-700",border:"border-purple-200"},orange:{bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",border:"border-indigo-200"},teal:{bg:"bg-teal-50",text:"text-teal-700",border:"border-teal-200"},gray:{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"},slate:{bg:"bg-slate-50",text:"text-slate-700",border:"border-slate-200"}},o=(u,f)=>{const m=u.icon,g=l[u.color]||l.gray;return n.jsxs("div",{draggable:!0,onDragStart:x=>i(x,u),className:`${g.bg} ${g.text} border ${g.border} rounded-lg p-2 cursor-grab active:cursor-grabbing hover:shadow-md transition-shadow flex items-center gap-2 text-sm`,title:`Glisser pour ajouter: ${u.label}`,children:[n.jsx(m,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"truncate flex-1",children:u.label})]},`${u.type}-${f}`)},d=Array.from(new Set(t.map(u=>u.category)));return n.jsx("div",{className:"h-full overflow-y-auto bg-white border-r border-gray-200",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide",children:"lments"}),n.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Glissez-dposez les lments sur le canvas"})]}),d.map(u=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:u}),n.jsx("div",{className:"space-y-2",children:t.filter(f=>f.category===u).map((f,m)=>o(f,m))})]},u)),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:"Images"}),n.jsx("div",{className:"space-y-2",children:r.map((u,f)=>o(u,f))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:"Formes"}),n.jsx("div",{className:"space-y-2",children:a.map((u,f)=>o(u,f))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:"Texte"}),n.jsx("div",{className:"space-y-2",children:s.map((u,f)=>o(u,f))})]})]})})},x3e=({elements:e,selectedId:t,backgroundImage:r,canvasSize:a,showGrid:s,onElementMove:i,onElementResize:l,onElementSelect:o,onElementDrop:d,onElementUpdate:u,onElementDuplicate:f,onElementDelete:m})=>{const g=k.useRef(null),[x,b]=k.useState(null),[v,y]=k.useState(null),[j,S]=k.useState(!1),N=(F,H)=>{if(F.stopPropagation(),o(H.id),F.target.classList.contains("resize-handle"))return;const L=typeof H.x=="number"?H.x:0,z=typeof H.y=="number"?H.y:0;b({id:H.id,startX:F.clientX,startY:F.clientY,offsetX:F.clientX-L,offsetY:F.clientY-z})},C=(F,H)=>{F.stopPropagation(),o(H.id);const L=typeof H.width=="number"?H.width:100,z=typeof H.height=="number"?H.height:50;y({id:H.id,startX:F.clientX,startY:F.clientY,startW:L,startH:z})},T=F=>{F.preventDefault(),F.dataTransfer.dropEffect="copy",S(!0)},P=F=>{F.preventDefault(),S(!1)},D=F=>{if(F.preventDefault(),S(!1),!g.current)return;const H=g.current.getBoundingClientRect(),L=F.clientX-H.left,z=F.clientY-H.top;try{const V=F.dataTransfer.getData("application/json");if(!V||V.trim()===""){console.warn("Drop data is empty - ignoring drop event");return}const G=JSON.parse(V);d(G.type,L,z,G)}catch(V){console.error("Error parsing drop data:",V)}};k.useEffect(()=>{const F=L=>{if(x&&g.current){const z=g.current.getBoundingClientRect(),V=Math.max(0,Math.min(a.width,L.clientX-z.left)),G=Math.max(0,Math.min(a.height,L.clientY-z.top));i(x.id,V,G)}if(v){const z=L.clientX-v.startX,V=L.clientY-v.startY,G=Math.max(10,v.startW+z),ie=Math.max(10,v.startH+V);l(v.id,G,ie)}},H=()=>{b(null),y(null)};if(x||v)return window.addEventListener("mousemove",F),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",H)}},[x,v,a,i,l]);const M=F=>{const H=F.id===t,L=typeof F.x=="number"?F.x:0,z=typeof F.y=="number"?F.y:0,V={position:"absolute",left:`${L}px`,top:`${z}px`,cursor:x?.id===F.id?"grabbing":"grab",border:H?"2px solid #3B82F6":"1px dashed rgba(0,0,0,0.2)",boxShadow:H?"0 0 0 1px rgba(59, 130, 246, 0.3)":"none"};if(F.type==="text"){const G=typeof F.width=="number"?F.width:150,ie=typeof F.height=="number"?F.height:30;return n.jsxs("div",{children:[n.jsx("div",{style:{...V,width:`${G}px`,height:`${ie}px`,padding:"4px 8px",fontSize:`${F.fontSize||12}px`,fontFamily:F.fontFamily||"helvetica",fontWeight:F.fontStyle?.includes("bold")?"bold":"normal",fontStyle:F.fontStyle?.includes("italic")?"italic":"normal",color:F.color||"#000000",textAlign:F.align||"left",whiteSpace:"normal",wordWrap:"break-word",overflow:"hidden",backgroundColor:H?"rgba(59, 130, 246, 0.05)":"transparent"},onMouseDown:Z=>N(Z,F),children:F.content||"Texte vide"}),H&&n.jsxs("div",{style:{position:"absolute",left:`${L}px`,top:`${z-44}px`,zIndex:1001},className:"flex items-center gap-1 bg-white rounded-lg shadow-lg border border-gray-200 p-1.5",onMouseDown:Z=>Z.stopPropagation(),children:[n.jsx("button",{onClick:()=>u?.({...F,align:"left"}),className:`p-1.5 rounded hover:bg-gray-100 ${F.align==="left"||!F.align?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Aligner  gauche",children:n.jsx(QF,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>u?.({...F,align:"center"}),className:`p-1.5 rounded hover:bg-gray-100 ${F.align==="center"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Centrer",children:n.jsx(bK,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>u?.({...F,align:"right"}),className:`p-1.5 rounded hover:bg-gray-100 ${F.align==="right"?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Aligner  droite",children:n.jsx(jK,{className:"h-4 w-4"})}),n.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),n.jsx("select",{value:F.fontFamily||"helvetica",onChange:Z=>u?.({...F,fontFamily:Z.target.value}),className:"text-xs bg-white border border-gray-300 rounded px-1 py-1 text-gray-700 focus:outline-none focus:ring-1 focus:ring-blue-500",title:"Police",children:vU.map(Z=>n.jsx("option",{value:Z,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z))}),n.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),n.jsx("button",{onClick:()=>{const Z=F.fontStyle||"normal",X=Z.includes("bold"),he=Z.includes("italic");u?.({...F,fontStyle:X?he?"italic":"normal":he?"bolditalic":"bold"})},className:`p-1.5 rounded hover:bg-gray-100 ${F.fontStyle?.includes("bold")?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Gras",children:n.jsx(dV,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{const Z=F.fontStyle||"normal",X=Z.includes("bold"),ce=Z.includes("italic")?X?"bold":"normal":X?"bolditalic":"italic";u?.({...F,fontStyle:ce})},className:`p-1.5 rounded hover:bg-gray-100 ${F.fontStyle?.includes("italic")?"bg-blue-100 text-blue-600":"text-gray-600"}`,title:"Italique",children:n.jsx(wW,{className:"h-4 w-4"})}),n.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),n.jsx("button",{onClick:()=>u?.({...F,fontSize:Math.max(8,(F.fontSize||12)-2)}),className:"p-1.5 rounded hover:bg-gray-100 text-gray-600",title:"Rduire la taille",children:n.jsx(Ey,{className:"h-4 w-4"})}),n.jsxs("span",{className:"text-xs font-medium text-gray-700 min-w-[32px] text-center",children:[F.fontSize||12,"px"]}),n.jsx("button",{onClick:()=>u?.({...F,fontSize:Math.min(200,(F.fontSize||12)+2)}),className:"p-1.5 rounded hover:bg-gray-100 text-gray-600",title:"Augmenter la taille",children:n.jsx(Jr,{className:"h-4 w-4"})}),n.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),n.jsxs("div",{className:"relative flex items-center",title:"Couleur du texte",children:[n.jsx(Ub,{className:"h-4 w-4 text-gray-600 mr-1"}),n.jsx("input",{type:"color",value:F.color||"#000000",onChange:Z=>u?.({...F,color:Z.target.value}),className:"w-6 h-6 rounded border border-gray-300 cursor-pointer",style:{padding:0}})]}),n.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),n.jsx("button",{onClick:()=>f?.(F),className:"p-1.5 rounded hover:bg-blue-100 text-blue-600",title:"Dupliquer",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>m?.(F.id),className:"p-1.5 rounded hover:bg-red-100 text-red-600",title:"Supprimer",children:n.jsx(Pr,{className:"h-4 w-4"})})]}),H&&n.jsx("div",{className:"resize-handle",style:{position:"absolute",left:`${L+G-8}px`,top:`${z+ie-8}px`,width:"16px",height:"16px",backgroundColor:"#3B82F6",border:"2px solid white",borderRadius:"50%",cursor:"se-resize",zIndex:1e3},onMouseDown:Z=>C(Z,F)})]},F.id)}if(F.type==="rectangle"||F.type==="border"){const G=typeof F.width=="number"?F.width:100,ie=typeof F.height=="number"?F.height:50;return n.jsxs("div",{children:[n.jsx("div",{style:{...V,width:`${G}px`,height:`${ie}px`,border:`${F.lineWidth||1}px solid ${F.color||"#000000"}`,backgroundColor:F.fillColor||"transparent"},onMouseDown:Z=>N(Z,F)}),H&&n.jsxs("div",{style:{position:"absolute",left:`${L}px`,top:`${z-44}px`,zIndex:1001},className:"flex items-center gap-1 bg-white rounded-lg shadow-lg border border-gray-200 p-1.5",onMouseDown:Z=>Z.stopPropagation(),children:[n.jsx("button",{onClick:()=>f?.(F),className:"p-1.5 rounded hover:bg-blue-100 text-blue-600",title:"Dupliquer",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>m?.(F.id),className:"p-1.5 rounded hover:bg-red-100 text-red-600",title:"Supprimer",children:n.jsx(Pr,{className:"h-4 w-4"})})]}),H&&n.jsx("div",{className:"resize-handle",style:{position:"absolute",left:`${L+G-8}px`,top:`${z+ie-8}px`,width:"16px",height:"16px",backgroundColor:"#3B82F6",border:"2px solid white",borderRadius:"50%",cursor:"se-resize",zIndex:1e3},onMouseDown:Z=>C(Z,F)})]},F.id)}if(F.type==="circle"){const G=F.radius||20;return n.jsxs("div",{children:[n.jsx("div",{style:{...V,width:`${G*2}px`,height:`${G*2}px`,borderRadius:"50%",border:`${F.lineWidth||1}px solid ${F.color||"#000000"}`,backgroundColor:F.fillColor||"transparent"},onMouseDown:ie=>N(ie,F)}),H&&n.jsxs("div",{style:{position:"absolute",left:`${L}px`,top:`${z-44}px`,zIndex:1001},className:"flex items-center gap-1 bg-white rounded-lg shadow-lg border border-gray-200 p-1.5",onMouseDown:ie=>ie.stopPropagation(),children:[n.jsx("button",{onClick:()=>f?.(F),className:"p-1.5 rounded hover:bg-blue-100 text-blue-600",title:"Dupliquer",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>m?.(F.id),className:"p-1.5 rounded hover:bg-red-100 text-red-600",title:"Supprimer",children:n.jsx(Pr,{className:"h-4 w-4"})})]})]},F.id)}if(F.type==="line"){const G=typeof F.x1=="number"?F.x1:0,ie=typeof F.y1=="number"?F.y1:0,Z=typeof F.x2=="number"?F.x2:100,X=typeof F.y2=="number"?F.y2:0,he=Math.sqrt(Math.pow(Z-G,2)+Math.pow(X-ie,2)),ce=Math.atan2(X-ie,Z-G)*(180/Math.PI);return n.jsxs("div",{children:[n.jsx("div",{style:{position:"absolute",left:`${G}px`,top:`${ie}px`,width:`${he}px`,height:`${F.lineWidth||1}px`,backgroundColor:F.color||"#000000",transform:`rotate(${ce}deg)`,transformOrigin:"0 0",cursor:"grab",border:H?"2px solid #3B82F6":"none"},onMouseDown:ke=>N(ke,F)}),H&&n.jsxs("div",{style:{position:"absolute",left:`${G}px`,top:`${Math.min(ie,X)-44}px`,zIndex:1001},className:"flex items-center gap-1 bg-white rounded-lg shadow-lg border border-gray-200 p-1.5",onMouseDown:ke=>ke.stopPropagation(),children:[n.jsx("button",{onClick:()=>f?.(F),className:"p-1.5 rounded hover:bg-blue-100 text-blue-600",title:"Dupliquer",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>m?.(F.id),className:"p-1.5 rounded hover:bg-red-100 text-red-600",title:"Supprimer",children:n.jsx(Pr,{className:"h-4 w-4"})})]})]},F.id)}if(F.type==="image"){const G=typeof F.width=="number"?F.width:100,ie=typeof F.height=="number"?F.height:100;return n.jsxs("div",{children:[n.jsx("div",{style:{...V,width:`${G}px`,height:`${ie}px`,border:H?"2px solid #3B82F6":"1px dashed rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.05)"},onMouseDown:Z=>N(Z,F),children:n.jsx("span",{className:"text-xs text-gray-400",children:F.source?F.source.substring(0,20)+"...":"Image"})}),H&&n.jsxs("div",{style:{position:"absolute",left:`${L}px`,top:`${z-44}px`,zIndex:1001},className:"flex items-center gap-1 bg-white rounded-lg shadow-lg border border-gray-200 p-1.5",onMouseDown:Z=>Z.stopPropagation(),children:[n.jsx("button",{onClick:()=>f?.(F),className:"p-1.5 rounded hover:bg-blue-100 text-blue-600",title:"Dupliquer",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>m?.(F.id),className:"p-1.5 rounded hover:bg-red-100 text-red-600",title:"Supprimer",children:n.jsx(Pr,{className:"h-4 w-4"})})]}),H&&n.jsx("div",{className:"resize-handle",style:{position:"absolute",left:`${L+G-8}px`,top:`${z+ie-8}px`,width:"16px",height:"16px",backgroundColor:"#3B82F6",border:"2px solid white",borderRadius:"50%",cursor:"se-resize",zIndex:1e3},onMouseDown:Z=>C(Z,F)})]},F.id)}return null};return n.jsx("div",{className:"h-full flex flex-col bg-gray-100",children:n.jsx("div",{className:"flex-1 overflow-auto p-8 flex items-center justify-center",children:n.jsxs("div",{ref:g,style:{width:`${a.width}px`,height:`${a.height}px`,position:"relative",backgroundColor:"#ffffff",backgroundImage:r?`url(${r})`:s?"repeating-linear-gradient(0deg, #e5e7eb 0px, #e5e7eb 1px, transparent 1px, transparent 20px), repeating-linear-gradient(90deg, #e5e7eb 0px, #e5e7eb 1px, transparent 1px, transparent 20px)":"none",backgroundSize:r?"cover":"20px 20px",backgroundPosition:r?"center":"0 0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:j?"3px dashed #3B82F6":"1px solid #d1d5db"},onDragOver:T,onDragLeave:P,onDrop:D,onClick:F=>{F.target===F.currentTarget&&o(null)},children:[e.length===0&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:n.jsxs("div",{className:"text-center text-gray-400",children:[n.jsx(S4,{className:"h-16 w-16 mx-auto mb-3 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Glissez-dposez des lments ici"})]})}),e.map(M)]})})})},lF=({label:e,value:t,onChange:r,description:a})=>n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"color",value:t,onChange:s=>r(s.target.value),className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:t,onChange:s=>r(s.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm font-mono",placeholder:"#000000"})]}),a&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a})]}),g3e=({element:e,customFonts:t,onChange:r,onDelete:a,onDuplicate:s})=>{if(!e)return n.jsx("div",{className:"h-full bg-white border-l border-gray-200 p-6 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-gray-400",children:[n.jsx(Nr,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Slectionnez un lment pour modifier ses proprits"})]})});const i=(o,d)=>{r({...e,[o]:d})},l=[...vU.map(o=>({value:o,label:o.charAt(0).toUpperCase()+o.slice(1),isCustom:!1})),...t.map(o=>({value:o.name,label:o.name,isCustom:!0}))];return n.jsx("div",{className:"h-full overflow-y-auto bg-white border-l border-gray-200",children:n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Proprits de l'lment"}),n.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"ID"}),n.jsx("input",{type:"text",value:e.id,disabled:!0,className:"w-full px-2 py-1.5 text-xs bg-gray-50 border border-gray-200 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Position"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"X"}),n.jsx("input",{type:"number",value:e.x||0,onChange:o=>i("x",parseFloat(o.target.value)||0),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Y"}),n.jsx("input",{type:"number",value:e.y||0,onChange:o=>i("y",parseFloat(o.target.value)||0),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(e.type==="rectangle"||e.type==="border"||e.type==="image"||e.type==="circle")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Dimensions"}),e.type==="circle"?n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Rayon"}),n.jsx("input",{type:"number",value:e.radius||20,onChange:o=>i("radius",parseFloat(o.target.value)||20),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Largeur"}),n.jsx("input",{type:"number",value:e.width||100,onChange:o=>i("width",parseFloat(o.target.value)||100),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Hauteur"}),n.jsx("input",{type:"number",value:e.height||50,onChange:o=>i("height",parseFloat(o.target.value)||50),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.type==="line"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Coordonnes"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"X1"}),n.jsx("input",{type:"number",value:e.x1||0,onChange:o=>i("x1",parseFloat(o.target.value)||0),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Y1"}),n.jsx("input",{type:"number",value:e.y1||0,onChange:o=>i("y1",parseFloat(o.target.value)||0),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"X2"}),n.jsx("input",{type:"number",value:e.x2||100,onChange:o=>i("x2",parseFloat(o.target.value)||100),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Y2"}),n.jsx("input",{type:"number",value:e.y2||0,onChange:o=>i("y2",parseFloat(o.target.value)||0),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded"})]})]})]}),e.type==="text"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Contenu"}),n.jsx("textarea",{value:e.content||"",onChange:o=>i("content",o.target.value),rows:3,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"Texte ou variable {student_name}"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Variables: ","{","student_name","}",", ","{","formation_title","}",", ","{","grade","}","..."]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Police"}),n.jsx("select",{value:e.fontFamily||"helvetica",onChange:o=>i("fontFamily",o.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:l.map(o=>n.jsxs("option",{value:o.value,children:[o.label," ",o.isCustom&&"(Custom)"]},o.value))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Taille"}),n.jsx("input",{type:"number",min:"8",max:"100",value:e.fontSize||12,onChange:o=>i("fontSize",parseInt(o.target.value)||12),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Style"}),n.jsx("select",{value:e.fontStyle||"normal",onChange:o=>i("fontStyle",o.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:J4e.map(o=>n.jsxs("option",{value:o,children:[o==="normal"&&"Normal",o==="bold"&&"Gras",o==="italic"&&"Italique",o==="bolditalic"&&"Gras Italique"]},o))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Alignement"}),n.jsx("div",{className:"flex gap-1",children:["left","center","right"].map(o=>n.jsxs("button",{onClick:()=>i("align",o),className:`flex-1 px-2 py-1.5 text-xs rounded border transition-colors ${(e.align||"left")===o?"bg-blue-100 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[o==="left"&&"Gauche",o==="center"&&"Centre",o==="right"&&"Droite"]},o))})]})]}),e.type==="image"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Source"}),n.jsx("input",{type:"text",value:e.source||"",onChange:o=>i("source",o.target.value),placeholder:"URL ou variable {logo_url}",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono"})]}),e.type!=="image"&&n.jsx(lF,{label:"Couleur",value:e.color||"#000000",onChange:o=>i("color",o)}),(e.type==="rectangle"||e.type==="circle")&&n.jsx(lF,{label:"Couleur de remplissage (optionnel)",value:e.fillColor||"#ffffff",onChange:o=>i("fillColor",o),description:"Laissez transparent pour pas de remplissage"}),(e.type==="line"||e.type==="rectangle"||e.type==="border"||e.type==="circle")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"paisseur du trait"}),n.jsx("input",{type:"number",min:"0.1",max:"20",step:"0.5",value:e.lineWidth||1,onChange:o=>i("lineWidth",parseFloat(o.target.value)||1),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Condition d'affichage (optionnel)"}),n.jsx("input",{type:"text",value:e.condition||"",onChange:o=>i("condition",o.target.value),placeholder:"grade",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"L'lment s'affiche seulement si cette variable existe"})]}),n.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:[n.jsxs("button",{onClick:s,className:"w-full px-3 py-2 bg-blue-50 text-blue-700 rounded border border-blue-300 hover:bg-blue-100 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[n.jsx(Dl,{className:"h-4 w-4"}),"Dupliquer l'lment"]}),n.jsxs("button",{onClick:a,className:"w-full px-3 py-2 bg-red-50 text-red-700 rounded border border-red-300 hover:bg-red-100 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[n.jsx(Pr,{className:"h-4 w-4"}),"Supprimer l'lment"]})]})]})})},v3e=({template:e,onUpdate:t})=>{const[r,a]=k.useState("upload"),[s,i]=k.useState(""),[l,o]=k.useState(!1),[d,u]=k.useState(null),[f,m]=k.useState(!1),g=k.useRef(null),x=n3e(e.template_config.layout.format,e.template_config.layout.orientation,e.template_config.layout.customWidth,e.template_config.layout.customHeight),b=async C=>{const T=C.target.files?.[0];if(T){if(!T.type.startsWith("image/")){u("Veuillez slectionner une image (JPG, PNG, WEBP ou SVG)");return}if(T.size>5*1024*1024){u("L'image ne doit pas dpasser 5 MB");return}o(!0),u(null);try{const P=await al.uploadBackground(e.id,T);P.template?t(P.template):P.background_url&&t({...e,background_image_url:P.background_url,background_image_type:"upload"})}catch(P){u(P.message||"Erreur lors de l'upload de l'image")}finally{o(!1),g.current&&(g.current.value="")}}},v=async()=>{if(!s.trim()){u("Veuillez saisir une URL");return}o(!0),u(null);try{const C=await al.setBackgroundUrl(e.id,s.trim());C.template?t(C.template):C.background_url&&t({...e,background_image_url:C.background_url,background_image_type:"url"}),i("")}catch(C){u(C.message||"Erreur lors de la dfinition de l'URL")}finally{o(!1)}},y=async()=>{if(confirm("Supprimer l'arrire-plan ?")){o(!0),u(null);try{const C=await al.deleteBackground(e.id);C.template?t(C.template):t({...e,background_image_url:void 0,background_image_type:void 0})}catch(C){u(C.message||"Erreur lors de la suppression de l'arrire-plan")}finally{o(!1)}}},j=C=>{C.preventDefault(),C.stopPropagation(),m(!0)},S=C=>{C.preventDefault(),C.stopPropagation(),m(!1)},N=async C=>{C.preventDefault(),C.stopPropagation(),m(!1);const T=C.dataTransfer.files?.[0];if(T){if(!T.type.startsWith("image/")){u("Veuillez dposer une image (JPG, PNG, WEBP ou SVG)");return}if(T.size>5*1024*1024){u("L'image ne doit pas dpasser 5 MB");return}o(!0),u(null);try{const P=await al.uploadBackground(e.id,T);P.template?t(P.template):P.background_url&&t({...e,background_image_url:P.background_url,background_image_type:"upload"})}catch(P){u(P.message||"Erreur lors de l'upload de l'image")}finally{o(!1)}}};return n.jsx("div",{className:"h-full overflow-y-auto bg-white",children:n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Image d'arrire-plan"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Uploadez une image ou dfinissez une URL pour le fond du certificat"})]}),e.background_image_url&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Arrire-plan actuel"}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[n.jsx(Qx,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-700 truncate font-mono",children:e.background_image_url}),n.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Type: ",e.background_image_type==="upload"?"Fichier upload":"URL externe"]})]})]}),n.jsx("button",{onClick:y,disabled:l,className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:"Supprimer l'arrire-plan",children:n.jsx(Mr,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"mt-3",children:n.jsx("img",{src:e.background_image_url,alt:"Aperu arrire-plan",className:"w-full h-32 object-cover rounded border border-gray-200",onError:C=>{C.target.style.display="none"}})})]})]}),n.jsxs("div",{className:"flex border-b border-gray-200",children:[n.jsxs("button",{onClick:()=>a("upload"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${r==="upload"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[n.jsx(zc,{className:"h-4 w-4 inline mr-1"}),"Upload"]}),n.jsxs("button",{onClick:()=>a("url"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${r==="url"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[n.jsx(xg,{className:"h-4 w-4 inline mr-1"}),"URL"]})]}),r==="upload"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:b,disabled:l,className:"hidden"}),n.jsxs("div",{onDragOver:j,onDragLeave:S,onDrop:N,onClick:()=>g.current?.click(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all ${f?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50/50"} ${l?"opacity-50 pointer-events-none":""}`,children:[n.jsx(zc,{className:`h-12 w-12 mx-auto mb-3 ${f?"text-blue-600":"text-gray-400"}`}),n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:f?"Dposez l'image ici":"Glissez-dposez une image ou cliquez pour parcourir"}),n.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, WEBP ou SVG  Max 5 MB"}),n.jsxs("p",{className:"text-xs text-blue-600 font-medium mt-2",children:["Recommand: ",x]}),l&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Upload en cours..."})]})]})]}),r==="url"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"URL de l'image"}),n.jsx("input",{type:"url",value:s,onChange:C=>i(C.target.value),placeholder:"https://exemple.com/image.jpg",disabled:l,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"})]}),n.jsx("button",{onClick:v,disabled:l||!s.trim(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm font-medium",children:l?"Application...":"Appliquer l'URL"})]}),d&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[n.jsx(Nr,{className:"h-4 w-4 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-xs text-red-700",children:d})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-xs text-blue-700",children:[n.jsx("strong",{children:"Astuce:"})," L'image d'arrire-plan sera affiche en plein cran sur le canvas. Vous pourrez ensuite placer vos lments texte par-dessus."]})})]})})},y3e=()=>{const[e,t]=k.useState(""),[r,a]=k.useState(null),s=k.useRef(null),{data:i,isLoading:l}=roe(),o=aoe(),d=noe(),u=async m=>{const g=m.target.files?.[0];if(!g)return;if(!e.trim()){a("Veuillez saisir un nom pour la police");return}const x=[".ttf",".otf",".woff",".woff2"],b=g.name.toLowerCase().slice(g.name.lastIndexOf("."));if(!x.includes(b)){a("Format de fichier non valide. Utilisez TTF, OTF, WOFF ou WOFF2");return}if(g.size>2*1024*1024){a("La police ne doit pas dpasser 2 MB");return}a(null);try{await o.mutateAsync({file:g,fontName:e.trim()}),t(""),s.current&&(s.current.value="")}catch(v){a(v.message||"Erreur lors de l'upload de la police")}},f=async(m,g)=>{if(confirm(`Supprimer la police "${g}" ?`))try{await d.mutateAsync(m)}catch(x){a(x.message||"Erreur lors de la suppression de la police")}};return n.jsx("div",{className:"h-full overflow-y-auto bg-white",children:n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Polices personnalises"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Uploadez des polices personnalises pour les utiliser dans vos certificats"})]}),n.jsxs("div",{className:"space-y-4 border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-700",children:"Ajouter une police"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Nom de la police"}),n.jsx("input",{type:"text",value:e,onChange:m=>t(m.target.value),placeholder:"ex: Ma Police Custom",disabled:o.isPending,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Fichier de police"}),n.jsx("input",{ref:s,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:u,disabled:o.isPending,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 disabled:opacity-50"}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"TTF, OTF, WOFF ou WOFF2  Max 2 MB"})]}),o.isPending&&n.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Upload en cours..."]})]}),r&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[n.jsx(Nr,{className:"h-4 w-4 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-xs text-red-700",children:r})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Polices disponibles (",i?.length||0,")"]}),l?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Chargement des polices..."})]}):i&&i.length>0?n.jsx("div",{className:"space-y-2",children:i.map(m=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[n.jsx(Qm,{className:"h-4 w-4 text-indigo-600 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.name}),n.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Format: ",m.file_format.toUpperCase(),m.file_size&&`  ${(m.file_size/1024).toFixed(1)} KB`]}),n.jsx("style",{children:`
                            @font-face {
                              font-family: 'custom-${m.id}';
                              src: url('${m.file_url}');
                            }
                          `}),n.jsxs("p",{className:"text-xs text-gray-700 mt-2 italic",style:{fontFamily:`'custom-${m.id}', sans-serif`},children:["Aperu: ",m.name]})]})]}),n.jsx("button",{onClick:()=>f(m.id,m.name),disabled:d.isPending,className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:"Supprimer la police",children:n.jsx(Pr,{className:"h-4 w-4"})})]})},m.id))}):n.jsxs("div",{className:"text-center py-8 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsx(Qm,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Aucune police personnalise"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Uploadez une police pour la rendre disponible dans l'diteur"})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-xs text-blue-700",children:[n.jsx("strong",{children:"Info:"})," Les polices personnalises seront disponibles dans la liste des polices lors de l'dition d'lments texte. Assurez-vous d'avoir les droits d'utilisation pour les polices que vous uploadez."]})})]})})},b3e=({isOpen:e,onClose:t,template:r})=>{const a=k.useRef(null),[s,i]=k.useState(!0);k.useEffect(()=>{if(!e||!a.current)return;const o=a.current,d=o.getContext("2d");if(!d)return;i(!0);const{format:u,orientation:f,customWidth:m,customHeight:g}=r.template_config.layout,x=U2(u,f,m,g);o.width=x.width,o.height=x.height,d.fillStyle=r.template_config.colors.background,d.fillRect(0,0,o.width,o.height);const b=async()=>{if(r.background_image_url)try{const y=new Image;y.crossOrigin="anonymous",await new Promise((j,S)=>{y.onload=j,y.onerror=S,y.src=r.background_image_url}),d.drawImage(y,0,0,o.width,o.height)}catch(y){console.error("Erreur lors du chargement de l'image de fond:",y)}},v=()=>{const y={studentName:"Jean Dupont",courseName:"Formation en Dveloppement Web",date:new Date().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),instructor:"Marie Martin",duration:"40 heures"};(Kg(r.template_config,{url:r.background_image_url,type:r.background_image_type})[0]?.elements||[]).forEach(N=>{d.save();const C=typeof N.x=="string"?parseFloat(N.x):N.x||0,T=typeof N.y=="string"?parseFloat(N.y):N.y||0,P=typeof N.width=="string"?parseFloat(N.width):N.width||0,D=typeof N.height=="string"?parseFloat(N.height):N.height||0;switch(N.type){case"text":const F=(N.fontStyle||"normal")==="bold"?"bold":"normal",H=N.fontFamily||"Arial",L=N.fontSize||16;d.font=`${F} ${L}px ${H}`,d.fillStyle=N.color||"#000000",d.textAlign=N.textAlign||"left";let z=N.content||"";z=z.replace(/\{studentName\}/g,y.studentName),z=z.replace(/\{courseName\}/g,y.courseName),z=z.replace(/\{date\}/g,y.date),z=z.replace(/\{instructor\}/g,y.instructor),z=z.replace(/\{duration\}/g,y.duration),d.fillText(z,C,T);break;case"rectangle":d.strokeStyle=N.color||"#000000",d.lineWidth=N.borderWidth||1,N.fillColor&&(d.fillStyle=N.fillColor,d.fillRect(C,T,P,D)),d.strokeRect(C,T,P,D);break;case"circle":const V=P/2;d.strokeStyle=N.color||"#000000",d.lineWidth=N.borderWidth||1,d.beginPath(),d.arc(C+V,T+V,V,0,Math.PI*2),N.fillColor&&(d.fillStyle=N.fillColor,d.fill()),d.stroke();break;case"line":d.strokeStyle=N.color||"#000000",d.lineWidth=N.borderWidth||1,d.beginPath(),d.moveTo(C,T),d.lineTo(C+P,T+D),d.stroke();break;case"image":if(N.imageUrl){const G=new Image;G.crossOrigin="anonymous",G.onload=()=>{d.drawImage(G,C,T,P,D)},G.src=N.imageUrl}break}d.restore()}),i(!1)};b().then(v)},[e,r]);const l=()=>{if(!a.current)return;const o=document.createElement("a");o.download=`preview-${r.name}.png`,o.href=a.current.toDataURL("image/png"),o.click()};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-purple-100",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Prvisualisation du Template"}),n.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:r.name})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:l,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg flex items-center gap-2 transition-colors text-sm font-medium",title:"Tlcharger l'aperu",children:[n.jsx(ps,{className:"h-4 w-4"}),"Tlcharger"]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-purple-200 rounded-lg transition-colors",children:n.jsx(Mr,{className:"h-5 w-5 text-gray-600"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-auto p-6 bg-gray-50 relative",children:[s&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-10",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Gnration de l'aperu..."})]})}),n.jsx("div",{className:"flex items-center justify-center min-h-full",children:n.jsx("div",{className:"bg-white p-4 rounded-lg shadow-lg",children:n.jsx("canvas",{ref:a,className:"border border-gray-300 max-w-full h-auto",style:{maxHeight:"calc(95vh - 200px)"}})})})]}),n.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("p",{className:"text-xs text-gray-600 text-center",children:[n.jsx("span",{className:"font-semibold",children:"Note:"})," Cette prvisualisation utilise des donnes de test. Les placeholders ","{studentName}",", ","{courseName}",", ","{date}",", etc. sont remplacs par des valeurs fictives."]})})]})}):null},w3e=e=>({name:"Nouveau Template Canvas",description:"",folder_id:e||"",template_config:{layout:{orientation:"landscape",format:"a4",margins:{top:10,right:10,bottom:10,left:10}},colors:{primary:"#1e40af",secondary:"#3b82f6",text:"#1f2937",background:"#ffffff"},fonts:{title:{family:"times",size:28,style:"bold"},subtitle:{family:"times",size:18,style:"normal"},body:{family:"helvetica",size:12,style:"normal"},studentName:{family:"times",size:24,style:"bold"}},pages:[{id:k6(),name:"Recto",elements:[]}],elements:[]}}),j3e=()=>{const{id:e}=xo(),t=$a(),[r]=IF(),a=r.get("folderId"),s=e==="new",i=r.get("name"),l=r.get("format"),o=r.get("orientation"),d=r.get("margins"),u=r.get("customWidth"),f=r.get("customHeight"),{data:m,isLoading:g}=Qle(s?null:e||""),x=jL(),b=Zle(),[v,y]=k.useState(null),[j,S]=k.useState([]),[N,C]=k.useState(null),[T,P]=k.useState(1),[D,M]=k.useState(!0),[F,H]=k.useState(!1),[L,z]=k.useState("elements"),[V,G]=k.useState(!1),[ie,Z]=k.useState([]),[X,he]=k.useState(0),ce=k.useMemo(()=>{if(!v)return{width:1122,height:794};const{format:Ie,orientation:ge,customWidth:Te,customHeight:qe}=v.template_config.layout;return U2(Ie,ge,Te,qe)},[v?.template_config.layout.format,v?.template_config.layout.orientation,v?.template_config.layout.customWidth,v?.template_config.layout.customHeight]);k.useEffect(()=>{if(s){const Ie=w3e(a||void 0),ge=d?parseInt(d):10,Te={...Ie,id:"new",name:i||"Nouveau Template Canvas",template_config:{...Ie.template_config,layout:{...Ie.template_config.layout,format:l?.toLowerCase()||"a4",orientation:o||"landscape",margins:{top:ge,right:ge,bottom:ge,left:ge}}},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};l?.toLowerCase()==="custom"&&u&&f&&(Te.template_config.layout.customWidth=parseInt(u),Te.template_config.layout.customHeight=parseInt(f)),y(Te);const qe=Kg(Te.template_config,{url:Te.background_image_url,type:Te.background_image_type});Z(qe),he(0),S(qe[0]?.elements||[])}else if(m){y(m);const Ie=Kg(m.template_config,{url:m.background_image_url,type:m.background_image_type});Z(Ie),he(0),S(Ie[0]?.elements||[]);const ge=Ie.flatMap(Te=>Te.elements);if(ge.length>0){const Te=Math.max(...ge.map(qe=>{const xt=qe.id.match(/element-(\d+)/);return xt?parseInt(xt[1]):0}));P(Te+1)}}},[m,s,a,i,l,o,d,u,f]),k.useEffect(()=>{ie.length>0&&X<ie.length&&Z(Ie=>{const ge=[...Ie];return ge[X]={...ge[X],elements:j},ge})},[j]),k.useEffect(()=>{ie.length>0&&X<ie.length&&(S(ie[X].elements),C(null))},[X,ie.length]);const ke=()=>{const Ie=ie.length===1?"Verso":`Page ${ie.length+1}`,ge=r3e(Ie);Z([...ie,ge]),he(ie.length)},se=Ie=>{Ie>=0&&Ie<ie.length&&he(Ie)},R=(Ie,ge)=>{if(Ie>=0&&Ie<ie.length&&ge.trim()){const Te=[...ie];Te[Ie]={...Te[Ie],name:ge.trim()},Z(Te)}},I=Ie=>{if(ie.length<=1){alert("Vous devez avoir au moins une page dans le template.");return}if(confirm(`Supprimer la page "${ie[Ie].name}" ?`)){const ge=ie.filter((Te,qe)=>qe!==Ie);Z(ge),X>=ge.length?he(ge.length-1):X===Ie&&Ie>0&&he(Ie-1)}},q=async()=>{if(v){H(!0);try{const Ie={...v,template_config:{...v.template_config,pages:ie,elements:ie[0]?.elements||[]}};if(s){const{id:ge,created_at:Te,updated_at:qe,...xt}=Ie;await b.mutateAsync(xt)}else{const{id:ge,created_at:Te,updated_at:qe,...xt}=Ie;await x.mutateAsync({id:v.id,data:xt})}t("/admin/certificate-templates")}catch(Ie){console.error("Error saving template:",Ie),alert("Erreur lors de la sauvegarde: "+(Ie.message||"Erreur inconnue"))}finally{H(!1)}}},K=()=>{confirm("Annuler les modifications ?")&&t("/admin/certificate-templates")},te=(Ie,ge,Te,qe)=>{const xt=`element-${T}`;P(T+1);let gt={id:xt,type:Ie,x:ge,y:Te,color:"#000000"};Ie==="text"?gt={...gt,content:qe.variable||qe.content||"Nouveau texte",fontSize:14,fontFamily:"helvetica",fontStyle:"normal",align:"left",width:150,height:30}:Ie==="image"?gt={...gt,source:qe.source||"",width:100,height:100}:Ie==="rectangle"||Ie==="border"?gt={...gt,width:150,height:80,lineWidth:1}:Ie==="circle"?gt={...gt,radius:30,lineWidth:1}:Ie==="line"&&(gt={...gt,x1:ge,y1:Te,x2:ge+100,y2:Te,lineWidth:1},delete gt.x,delete gt.y),S([...j,gt]),C(xt)},J=(Ie,ge,Te)=>{S(j.map(qe=>qe.id===Ie?{...qe,x:ge,y:Te}:qe))},Q=(Ie,ge,Te)=>{S(j.map(qe=>qe.id===Ie?{...qe,width:ge,height:Te}:qe))},ne=Ie=>{S(j.map(ge=>ge.id===Ie.id?Ie:ge))},ye=()=>{N&&confirm("Supprimer cet lment ?")&&(S(j.filter(Ie=>Ie.id!==N)),C(null))},De=()=>{if(!N)return;const Ie=j.find(qe=>qe.id===N);if(!Ie)return;const ge=`element-${T}`;P(T+1);const Te={...Ie,id:ge,x:typeof Ie.x=="number"?Ie.x+20:Ie.x,y:typeof Ie.y=="number"?Ie.y+20:Ie.y};S([...j,Te]),C(ge)},ee=Ie=>{const ge=`element-${T}`;P(T+1);const Te={...Ie,id:ge,x:typeof Ie.x=="number"?Ie.x+20:Ie.x,y:typeof Ie.y=="number"?Ie.y+20:Ie.y};S([...j,Te]),C(ge)},Je=Ie=>{S(j.filter(ge=>ge.id!==Ie)),C(null)},Oe=(Ie,ge)=>{const Te={type:Ie,...ge};window.__dragData=Te},ve=Ie=>{const ge=Ie.background_image_url,Te=Ie.background_image_type;Z(qe=>{const xt=[...qe];return xt[X]={...xt[X],background_image_url:ge,background_image_type:Te},xt}),y(Ie)},pt=Ie=>{v&&y({...v,template_config:{...v.template_config,layout:{...v.template_config.layout,format:Ie}}})},et=Ie=>{v&&y({...v,template_config:{...v.template_config,layout:{...v.template_config.layout,orientation:Ie}}})};if(g||!v)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Chargement du template..."})]})});const Nt=N&&j.find(Ie=>Ie.id===N)||null,ot=v?{...v,background_image_url:ie[X]?.background_image_url||v.background_image_url,background_image_type:ie[X]?.background_image_type||v.background_image_type}:null;return n.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsx("div",{className:"max-w-screen-2xl mx-auto px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>t("/admin/certificate-templates"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Retour",children:n.jsx(Xo,{className:"h-5 w-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("input",{type:"text",value:v.name,onChange:Ie=>y({...v,name:Ie.target.value}),className:"text-xl font-bold text-gray-900 border-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1"}),n.jsx("p",{className:"text-sm text-gray-500",children:"diteur Canvas Drag-and-Drop"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600 font-medium",children:"Format:"}),n.jsxs("select",{value:v.template_config.layout.format,onChange:Ie=>pt(Ie.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsxs("option",{value:"a4",children:[Ny.a4," (297210mm)"]}),n.jsxs("option",{value:"letter",children:[Ny.letter," (279216mm)"]}),n.jsxs("option",{value:"badge",children:[Ny.badge," (8654mm)"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600 font-medium",children:"Orientation:"}),n.jsxs("select",{value:v.template_config.layout.orientation,onChange:Ie=>et(Ie.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"landscape",children:"Paysage"}),n.jsx("option",{value:"portrait",children:"Portrait"})]})]}),n.jsxs("div",{className:"px-3 py-2 text-xs bg-gray-50 text-gray-600 rounded-lg border border-gray-200",children:[ce.width,"  ",ce.height," px"]}),n.jsxs("button",{onClick:()=>M(!D),className:`px-3 py-2 text-sm rounded-lg flex items-center gap-2 transition-colors ${D?"bg-blue-100 text-blue-700":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,title:"Afficher/Masquer la grille",children:[n.jsx(S4,{className:"h-4 w-4"}),"Grille"]}),n.jsxs("button",{onClick:()=>G(!0),className:"px-4 py-2 text-sm bg-purple-600 hover:bg-purple-700 text-white rounded-lg flex items-center gap-2 transition-colors",title:"Prvisualiser le certificat",children:[n.jsx(pi,{className:"h-4 w-4"}),"Visualiser"]}),n.jsxs("button",{onClick:K,disabled:F,className:"px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[n.jsx(Mr,{className:"h-4 w-4"}),"Annuler"]}),n.jsxs("button",{onClick:q,disabled:F,className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[n.jsx(Td,{className:"h-4 w-4"}),F?"Sauvegarde...":"Enregistrer"]})]})]})})}),n.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n.jsx("div",{className:"w-64 flex-shrink-0",children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"flex border-b border-gray-200 bg-white",children:n.jsx("button",{onClick:()=>z("elements"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${L==="elements"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:"lments"})}),L==="elements"&&n.jsx(p3e,{onDragStart:Oe})]})}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto",children:[ie.map((Ie,ge)=>n.jsxs("div",{className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${X===ge?"bg-blue-100 text-blue-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200 cursor-pointer"}`,children:[n.jsx(Fa,{className:"h-3.5 w-3.5"}),n.jsx("input",{type:"text",value:Ie.name,onChange:Te=>R(ge,Te.target.value),onClick:()=>se(ge),className:`bg-transparent border-none outline-none w-20 ${X===ge?"text-blue-700":"text-gray-700"}`}),ie.length>1&&n.jsx("button",{onClick:Te=>{Te.stopPropagation(),I(ge)},className:"ml-1 hover:bg-red-100 hover:text-red-600 rounded p-0.5 transition-colors",title:"Supprimer cette page",children:n.jsx(Mr,{className:"h-3.5 w-3.5"})})]},Ie.id)),n.jsxs("button",{onClick:ke,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-green-50 hover:bg-green-100 text-green-700 rounded-lg transition-colors border border-green-200",title:"Ajouter une nouvelle page",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Ajouter page"]}),n.jsxs("div",{className:"ml-auto text-xs text-gray-500 px-2",children:["Page ",X+1," / ",ie.length]})]})}),n.jsx("div",{className:"flex-1",children:n.jsx(x3e,{elements:j,selectedId:N,backgroundImage:ie[X]?.background_image_url||v.background_image_url||null,canvasSize:ce,showGrid:D&&!v.background_image_url,onElementMove:J,onElementResize:Q,onElementSelect:Ie=>{C(Ie),Ie!==null&&z("elements")},onElementDrop:(Ie,ge,Te)=>{const qe=window.__dragData||{};te(Ie,ge,Te,qe),delete window.__dragData},onElementUpdate:ne,onElementDuplicate:ee,onElementDelete:Je})})]}),n.jsx("div",{className:"w-80 flex-shrink-0",children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"flex border-b border-gray-200 bg-white",children:[n.jsx("button",{onClick:()=>z("elements"),className:`flex-1 px-3 py-3 text-sm font-medium transition-colors ${L==="elements"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:"Proprits"}),n.jsx("button",{onClick:()=>z("background"),className:`flex-1 px-3 py-3 text-sm font-medium transition-colors ${L==="background"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:"Arrire-plan"}),n.jsx("button",{onClick:()=>z("fonts"),className:`flex-1 px-3 py-3 text-sm font-medium transition-colors ${L==="fonts"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:"Polices"})]}),L==="elements"&&n.jsx(g3e,{element:Nt,customFonts:[],onChange:ne,onDelete:ye,onDuplicate:De}),L==="background"&&ot&&n.jsx(v3e,{template:ot,onUpdate:ve}),L==="fonts"&&n.jsx(y3e,{})]})})]}),v&&n.jsx(b3e,{isOpen:V,onClose:()=>G(!1),template:v})]})},Lu={getThreads:async(e,t)=>{const r=new URLSearchParams;t?.sort&&r.append("sort",t.sort),t?.pinned&&r.append("pinned",t.pinned);const a=`/forums/${e}/threads${r.toString()?`?${r.toString()}`:""}`;return Ce.get(a)},createThread:async(e,t)=>Ce.post(`/forums/${e}/threads`,t),getThread:async e=>Ce.get(`/forums/threads/${e}`),updateThread:async(e,t)=>Ce.put(`/forums/threads/${e}`,t),deleteThread:async(e,t,r=!1)=>Ce.delete(`/forums/threads/${e}?user_id=${t}&is_admin=${r}`),pinThread:async(e,t)=>Ce.patch(`/forums/threads/${e}/pin`,{is_pinned:t}),lockThread:async(e,t)=>Ce.patch(`/forums/threads/${e}/lock`,{is_locked:t}),incrementViewCount:async e=>Ce.patch(`/forums/threads/${e}/view`,{}),getPosts:async e=>Ce.get(`/forums/threads/${e}/posts`),createPost:async(e,t)=>Ce.post(`/forums/threads/${e}/posts`,t),updatePost:async(e,t)=>Ce.put(`/forums/posts/${e}`,t),deletePost:async(e,t,r=!1)=>Ce.delete(`/forums/posts/${e}?user_id=${t}&is_admin=${r}`),addReaction:async(e,t)=>Ce.post(`/forums/posts/${e}/reactions`,t),removeReaction:async(e,t,r)=>Ce.delete(`/forums/posts/${e}/reactions/${r}?user_id=${t}`),getReactions:async e=>Ce.get(`/forums/posts/${e}/reactions`),getStats:async()=>Ce.get("/forums/stats")},Pl={all:["forums"],threads:e=>["forums","threads",e],thread:e=>["forums","thread",e],posts:e=>["forums","posts",e],reactions:e=>["forums","reactions",e],stats:()=>["forums","stats"]},N3e=(e,t)=>Ft({queryKey:[...Pl.threads(e||""),t],queryFn:()=>{if(!e)throw new Error("Formation ID is required");return Lu.getThreads(e,t)},enabled:!!e,staleTime:120*1e3}),_3e=e=>Ft({queryKey:Pl.thread(e||""),queryFn:()=>{if(!e)throw new Error("Thread ID is required");return Lu.getThread(e)},enabled:!!e,staleTime:300*1e3}),S3e=()=>{const e=Tt();return St({mutationFn:({formationId:t,data:r})=>Lu.createThread(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:Pl.threads(r.formationId)})}})},k3e=()=>{const e=Tt();return St({mutationFn:t=>Lu.incrementViewCount(t),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:Pl.thread(r)})}})},A3e=e=>Ft({queryKey:Pl.posts(e||""),queryFn:()=>{if(!e)throw new Error("Thread ID is required");return Lu.getPosts(e)},enabled:!!e,staleTime:60*1e3}),C3e=()=>{const e=Tt();return St({mutationFn:({threadId:t,data:r})=>Lu.createPost(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:Pl.posts(r.threadId)}),e.invalidateQueries({queryKey:Pl.thread(r.threadId)}),e.invalidateQueries({queryKey:Pl.all})}})},E3e=()=>{const e=Tt();return St({mutationFn:({postId:t,userId:r,isAdmin:a})=>Lu.deletePost(t,r,a),onSuccess:()=>{e.invalidateQueries({queryKey:Pl.all})}})},T3e=()=>{const e=Tt();return St({mutationFn:({postId:t,data:r})=>Lu.addReaction(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:Pl.reactions(r.postId)}),e.invalidateQueries({queryKey:Pl.all})}})},D3e=()=>{const e=Tt();return St({mutationFn:({postId:t,userId:r,reactionType:a})=>Lu.removeReaction(t,r,a),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:Pl.reactions(r.postId)}),e.invalidateQueries({queryKey:Pl.all})}})},O3e=()=>Ft({queryKey:Pl.stats(),queryFn:()=>Lu.getStats(),staleTime:300*1e3}),F3e=()=>{const e=$a(),[t,r]=k.useState(""),[a,s]=k.useState(""),{data:i}=O3e(),{data:l}=Zb(),o=i?.stats,d=l||[],u=a?d.filter(f=>f.id===a):d;return n.jsx(Ut,{title:"Modration des Forums",subtitle:"Grez les discussions et modrez le contenu des forums",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-5 text-white",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx(as,{className:"h-8 w-8 opacity-80"})}),n.jsx("div",{className:"text-3xl font-bold",children:o?.total_threads||0}),n.jsx("div",{className:"text-blue-100 text-sm",children:"Total discussions"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-5 text-white",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx($F,{className:"h-8 w-8 opacity-80"})}),n.jsx("div",{className:"text-3xl font-bold",children:o?.total_posts||0}),n.jsx("div",{className:"text-green-100 text-sm",children:"Total rponses"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-5 text-white",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx(Ll,{className:"h-8 w-8 opacity-80"})}),n.jsx("div",{className:"text-3xl font-bold",children:o?.total_reactions||0}),n.jsx("div",{className:"text-purple-100 text-sm",children:"Total ractions"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-lg p-5 text-white",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx(Ya,{className:"h-8 w-8 opacity-80"})}),n.jsx("div",{className:"text-3xl font-bold",children:o?.active_posters||0}),n.jsx("div",{className:"text-amber-100 text-sm",children:"Participants actifs"})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Rechercher une discussion...",value:t,onChange:f=>r(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("select",{value:a,onChange:f=>s(f.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Toutes les formations"}),d.map(f=>n.jsx("option",{value:f.id,children:f.title},f.id))]})]})}),n.jsx("div",{className:"space-y-4",children:u.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[n.jsx(as,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune formation trouve"}),n.jsx("p",{className:"text-gray-600",children:"Crez des formations pour activer les forums"})]}):u.map(f=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:f.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:f.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(as,{className:"h-4 w-4"}),"Forum actif"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ya,{className:"h-4 w-4"}),f.enrolled_count||0," tudiants"]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(Ye,{onClick:()=>e(`/student/forums/${f.id}`),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Voir le forum"]})})]})},f.id))}),n.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Actions de modration disponibles"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-blue-800",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(k4,{className:"h-4 w-4 mt-0.5 text-yellow-600"}),n.jsxs("span",{children:[n.jsx("strong",{children:"pingler:"})," Mettre en avant les discussions importantes"]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(fp,{className:"h-4 w-4 mt-0.5 text-gray-600"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Verrouiller:"})," Empcher de nouvelles rponses"]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Pr,{className:"h-4 w-4 mt-0.5 text-red-600"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Supprimer:"})," Retirer du contenu inappropri"]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(pi,{className:"h-4 w-4 mt-0.5 text-blue-600"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Surveiller:"})," Suivre l'activit des discussions"]})]})]}),n.jsx("p",{className:"mt-3 text-sm text-blue-700",children:" Accdez  un forum spcifique pour utiliser ces actions de modration."})]}),o&&n.jsxs("div",{className:"mt-6 bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200 rounded-lg p-5",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Statistiques gnrales"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Crateurs de discussions:"}),n.jsx("span",{className:"ml-2 font-semibold text-gray-900",children:o.active_thread_creators})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Participants actifs:"}),n.jsx("span",{className:"ml-2 font-semibold text-gray-900",children:o.active_posters})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Taux d'engagement:"}),n.jsxs("span",{className:"ml-2 font-semibold text-gray-900",children:[o.total_threads>0?(o.total_posts/o.total_threads*100).toFixed(1):0,"% rponses/thread"]})]})]})]})]})})},P3e=()=>{const e=$a(),[t,r]=k.useState({segment_id:"",ville_id:"",annee:""}),[a,s]=k.useState([]),[i,l]=k.useState([]),[o,d]=k.useState([]),{data:u,isLoading:f,error:m}=yle(t.segment_id||t.ville_id||t.annee?t:void 0),g=Nle(),[x,b]=k.useState(null),[v,y]=k.useState(!1),[j,S]=k.useState(null);k.useEffect(()=>{(async()=>{try{const P=await Ce.get("/segments");s(P)}catch(P){console.error("Error fetching segments:",P)}})()},[]),k.useEffect(()=>{(async()=>{try{if(t.segment_id){const P=await Ce.get(`/cities?segment_id=${t.segment_id}`);l(P)}else{const P=await Ce.get("/cities");l(P)}}catch(P){console.error("Error fetching cities:",P)}})()},[t.segment_id]),k.useEffect(()=>{if(u&&u.length>0){const T=new Set;u.forEach(P=>{if(P.date_debut){const D=new Date(P.date_debut).getFullYear().toString();T.add(D)}}),d(Array.from(T).sort((P,D)=>parseInt(D)-parseInt(P)))}},[u]);const N=async T=>{try{await g.mutateAsync(T),b(null)}catch(P){alert("Erreur: "+(P.message||"Impossible de supprimer cette session"))}},C=()=>{r({segment_id:"",ville_id:"",annee:""})};return f?n.jsx(Ut,{title:"Sessions de Formation",subtitle:"Grez les sessions de formation (classes)",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Chargement des sessions..."})})}):m?n.jsx(Ut,{title:"Sessions de Formation",subtitle:"Grez les sessions de formation (classes)",children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[n.jsx(Nr,{className:"h-5 w-5"}),n.jsx("span",{children:"Erreur lors du chargement des sessions"})]})})}):n.jsxs(Ut,{title:"Sessions de Formation",subtitle:"Grez les sessions de formation (classes)",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:()=>{S(null),y(!0)},className:"px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-medium",children:[n.jsx(Jr,{className:"h-5 w-5"}),"Nouvelle Session"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[n.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Sessions"}),n.jsx("div",{className:"text-3xl font-bold text-blue-900 mt-1",children:u?.length||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:[n.jsx("div",{className:"text-sm text-green-600 font-medium",children:"En Cours"}),n.jsx("div",{className:"text-3xl font-bold text-green-900 mt-1",children:u?.filter(T=>T.statut==="en_cours").length||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:[n.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Planifies"}),n.jsx("div",{className:"text-3xl font-bold text-purple-900 mt-1",children:u?.filter(T=>T.statut==="planifiee").length||0})]}),n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border border-gray-200",children:[n.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Termines"}),n.jsx("div",{className:"text-3xl font-bold text-gray-900 mt-1",children:u?.filter(T=>T.statut==="terminee").length||0})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Tp,{className:"h-5 w-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Filtres"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segment"}),n.jsxs("select",{value:t.segment_id,onChange:T=>r({...t,segment_id:T.target.value,ville_id:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Tous les segments"}),a.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville"}),n.jsxs("select",{value:t.ville_id,onChange:T=>r({...t,ville_id:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!t.segment_id&&i.length===0,children:[n.jsx("option",{value:"",children:"Toutes les villes"}),i.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anne"}),n.jsxs("select",{value:t.annee,onChange:T=>r({...t,annee:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Toutes les annes"}),o.map(T=>n.jsx("option",{value:T,children:T},T))]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:C,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"Rinitialiser"})})]})]}),u&&u.length>0?n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Titre"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ville"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Dbut"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"tudiants"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(T=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"flex items-center",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.titre}),T.corps_formation_name&&n.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[n.jsx(wa,{className:"h-3 w-3"}),T.corps_formation_name]})]})})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.segment_name&&n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:T.segment_color+"20",color:T.segment_color},children:T.segment_name})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[n.jsx(ns,{className:"h-4 w-4 text-gray-400"}),T.ville_name||"-"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[n.jsx(ba,{className:"h-4 w-4 text-gray-400"}),T.date_debut?new Date(T.date_debut).toLocaleDateString("fr-FR"):"-"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[n.jsx(Ya,{className:"h-4 w-4 text-gray-400"}),T.nombre_etudiants||0]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${T.statut==="en_cours"?"bg-blue-100 text-blue-800":T.statut==="terminee"?"bg-green-100 text-green-800":T.statut==="annulee"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[T.statut==="planifiee"&&"Planifie",T.statut==="en_cours"&&"En cours",T.statut==="terminee"&&"Termine",T.statut==="annulee"&&"Annule"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>e(`/admin/sessions-formation/${T.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Voir",children:n.jsx(pi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{S(T),y(!0)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Modifier",children:n.jsx(hp,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>b(T.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},T.id))})]})})}):n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[n.jsx(ba,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"Aucune session trouve"}),n.jsx("p",{className:"text-gray-500 text-sm mb-4",children:t.segment_id||t.ville_id||t.annee?"Aucune session ne correspond aux filtres slectionns":"Commencez par crer votre premire session de formation"}),!t.segment_id&&!t.ville_id&&!t.annee&&n.jsxs("button",{onClick:()=>{S(null),y(!0)},className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[n.jsx(Jr,{className:"h-5 w-5"}),"Crer une session"]})]})]}),x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md mx-4",children:[n.jsx("h4",{className:"font-bold text-gray-900 text-lg mb-2",children:"Confirmer la suppression"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"tes-vous sr de vouloir supprimer cette session ?"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>b(null),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors text-sm font-medium",children:"Annuler"}),n.jsx("button",{onClick:()=>N(x),disabled:g.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm font-medium disabled:opacity-50",children:g.isPending?"Suppression...":"Supprimer"})]})]})}),v&&n.jsx(QN,{session:j,onClose:()=>{y(!1),S(null)}})]})},M3e=({sessionId:e,corpsFormationId:t,onClose:r,onSuccess:a})=>{const[s,i]=k.useState({nom:"",prenom:"",cin:"",email:"",phone:"",whatsapp:"",date_naissance:"",lieu_naissance:"",adresse:"",session_id:e,formation_id:"",numero_bon:"",avance:"",discount_percentage:"0",statut_compte:"actif"}),[l,o]=k.useState(null),[d,u]=k.useState(""),[f,m]=k.useState({}),[g,x]=k.useState(!1),[b,v]=k.useState([]),[y,j]=k.useState([]),[S,N]=k.useState(!1),[C,T]=k.useState(!1),P=b.find(X=>X.id===s.formation_id);k.useEffect(()=>{t&&(D(),M())},[t]);const D=async()=>{try{N(!0);const X=await Ce.get(`/cours?corps_id=${t}`);v(X)}catch(X){console.error("Error fetching formations:",X)}finally{N(!1)}},M=async()=>{try{T(!0);const X=await Ce.get(`/sessions-formation?corps_formation_id=${t}&statut=en_cours`);j(X.sessions||[])}catch(X){console.error("Error fetching sessions:",X),j([])}finally{T(!1)}},F=X=>{const he=X.target.files?.[0];if(he){o(he);const ce=new FileReader;ce.onloadend=()=>{u(ce.result)},ce.readAsDataURL(he)}},H=()=>{const X={};if(s.nom.trim()||(X.nom="Le nom est obligatoire"),s.prenom.trim()||(X.prenom="Le prnom est obligatoire"),s.cin.trim()||(X.cin="Le CIN est obligatoire"),s.phone.trim()||(X.phone="Le tlphone est obligatoire"),s.date_naissance||(X.date_naissance="La date de naissance est obligatoire"),s.lieu_naissance.trim()||(X.lieu_naissance="Le lieu de naissance est obligatoire"),s.adresse.trim()||(X.adresse="L'adresse est obligatoire"),s.session_id||(X.session="La session est obligatoire"),s.formation_id||(X.formation="La formation est obligatoire"),s.numero_bon.trim()||(X.numero_bon="Le numro de bon est obligatoire"),s.avance||(X.avance="L'avance est obligatoire"),s.avance&&P){const he=parseFloat(s.avance);he<0?X.avance="L'avance ne peut pas tre ngative":he>P.price&&(X.avance="L'avance ne peut pas dpasser le prix de la formation")}return m(X),Object.keys(X).length===0},L=async X=>{if(X.preventDefault(),!!H()){x(!0);try{const he=await Ce.get(`/students/check-cin/${s.cin}`);let ce;if(he.exists)ce=he.student.id;else{const q=new FormData;q.append("nom",s.nom.trim()),q.append("prenom",s.prenom.trim()),q.append("cin",s.cin.trim()),q.append("email",s.email.trim()),q.append("phone",s.phone.trim()),q.append("whatsapp",s.whatsapp.trim()),q.append("date_naissance",s.date_naissance),q.append("lieu_naissance",s.lieu_naissance.trim()),q.append("adresse",s.adresse.trim()),q.append("statut_compte",s.statut_compte),l&&q.append("profile_image",l),ce=(await Ce.post("/students",q)).student.id}const ke=P?.price||0,se=parseFloat(s.discount_percentage)||0,R=ke*se/100,I=ke-R;await Ce.post(`/sessions-formation/${e}/etudiants`,{student_id:ce,formation_id:s.formation_id,montant_paye:parseFloat(s.avance),numero_bon:s.numero_bon.trim(),discount_percentage:se,statut_paiement:parseFloat(s.avance)>=I?"paye":parseFloat(s.avance)>0?"partiellement_paye":"impaye"}),a(),r()}catch(he){console.error("Error adding student:",he),m({submit:he.message||"Erreur lors de l'ajout de l'tudiant"})}finally{x(!1)}}},z=P?.price||0,V=parseFloat(s.discount_percentage)||0,G=Number(z)*V/100,ie=Number(z)-G,Z=s.avance?Math.max(0,ie-parseFloat(s.avance)):ie;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Ajouter un tudiant"}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:r,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:L,className:"p-6 space-y-6",children:[f.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:f.submit})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Personnelles"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:s.nom,onChange:X=>i({...s,nom:X.target.value}),placeholder:"Nom",className:f.nom?"border-red-300":""}),f.nom&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.nom})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prnom ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:s.prenom,onChange:X=>i({...s,prenom:X.target.value}),placeholder:"Prnom",className:f.prenom?"border-red-300":""}),f.prenom&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.prenom})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CIN ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:s.cin,onChange:X=>i({...s,cin:X.target.value}),placeholder:"CIN",className:f.cin?"border-red-300":""}),f.cin&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.cin})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx(xr,{type:"email",value:s.email,onChange:X=>i({...s,email:X.target.value}),placeholder:"Email"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tlphone ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:s.phone,onChange:X=>i({...s,phone:X.target.value}),placeholder:"Phone",className:f.phone?"border-red-300":""}),f.phone&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp"}),n.jsx(xr,{value:s.whatsapp,onChange:X=>i({...s,whatsapp:X.target.value}),placeholder:"WhatsApp"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Administratives"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de naissance ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"date",value:s.date_naissance,onChange:X=>i({...s,date_naissance:X.target.value}),className:f.date_naissance?"border-red-300":""}),f.date_naissance&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.date_naissance})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lieu de naissance ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:s.lieu_naissance,onChange:X=>i({...s,lieu_naissance:X.target.value}),placeholder:"Lieu de naissance",className:f.lieu_naissance?"border-red-300":""}),f.lieu_naissance&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.lieu_naissance})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:s.adresse,onChange:X=>i({...s,adresse:X.target.value}),placeholder:"Adresse",className:f.adresse?"border-red-300":""}),f.adresse&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.adresse})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de profil"}),n.jsxs("div",{className:"flex items-center gap-4",children:[d&&n.jsx("img",{src:d,alt:"Preview",className:"h-20 w-20 rounded-full object-cover border-2 border-gray-200"}),n.jsxs("label",{className:"cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(zc,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:d?"Changer la photo":"Choisir une photo"})]}),n.jsx("input",{type:"file",accept:"image/*",onChange:F,className:"hidden"})]})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations de Formation"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Session ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:s.session_id,onChange:X=>i({...s,session_id:X.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${f.session?"border-red-300":"border-gray-300"}`,disabled:C,children:[n.jsx("option",{value:"",children:"Slectionner une session"}),y.map(X=>n.jsx("option",{value:X.id,children:X.titre},X.id))]}),f.session&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.session})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Formation ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:s.formation_id,onChange:X=>i({...s,formation_id:X.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${f.formation?"border-red-300":"border-gray-300"}`,disabled:S,children:[n.jsx("option",{value:"",children:"Choisir une formation"}),b.map(X=>n.jsxs("option",{value:X.id,children:[X.title," (",X.price," DH)",X.is_pack&&" - Pack"]},X.id))]}),f.formation&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.formation}),P&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Prix de la formation: ",P.price," DH"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Numro de bon ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:s.numero_bon,onChange:X=>i({...s,numero_bon:X.target.value}),placeholder:"Numro de bon",className:f.numero_bon?"border-red-300":""}),f.numero_bon&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.numero_bon})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remise (%)"}),n.jsx(xr,{type:"number",min:"0",max:"100",step:"0.01",value:s.discount_percentage,onChange:X=>i({...s,discount_percentage:X.target.value}),placeholder:"0"}),P&&V>0&&n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Remise: ",V.toFixed(2),"% (-",G.toFixed(2)," DH)"]}),P&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Prix aprs remise: ",ie.toFixed(2)," DH"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Avance paye (DH) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"number",min:"0",step:"0.01",value:s.avance,onChange:X=>i({...s,avance:X.target.value}),placeholder:"Avance",className:f.avance?"border-red-300":""}),f.avance&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.avance}),s.avance&&P&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Montant restant: ",Z.toFixed(2)," DH"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Statut de compte ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:s.statut_compte,onChange:X=>i({...s,statut_compte:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"actif",children:"Actif"}),n.jsx("option",{value:"inactif",children:"Inactif"}),n.jsx("option",{value:"suspendu",children:"Suspendu"}),n.jsx("option",{value:"diplome",children:"Diplm"})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:r,disabled:g,children:"Fermer"}),n.jsx(Ye,{type:"submit",disabled:g,className:"min-w-[120px]",children:g?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Ajout..."})]}):"Enregistrer"})]})]})]})})},L3e=({student:e,onClose:t,onSuccess:r})=>{const[a,s]=(e.student_name||"").split(" "),[i,l]=k.useState({nom:a||"",prenom:s||"",cin:e.student_cin||"",email:e.student_email||"",phone:e.student_phone||""}),[o,d]=k.useState(null),[u,f]=k.useState(e.profile_image_url||""),[m,g]=k.useState({}),[x,b]=k.useState(!1),v=S=>{const N=S.target.files?.[0];if(N){d(N);const C=new FileReader;C.onloadend=()=>{f(C.result)},C.readAsDataURL(N)}},y=()=>{const S={};return i.nom.trim()||(S.nom="Le nom est obligatoire"),i.prenom.trim()||(S.prenom="Le prnom est obligatoire"),i.cin.trim()||(S.cin="Le CIN est obligatoire"),i.phone.trim()||(S.phone="Le tlphone est obligatoire"),g(S),Object.keys(S).length===0},j=async S=>{if(S.preventDefault(),!!y()){b(!0);try{const N=new FormData;N.append("nom",i.nom.trim()),N.append("prenom",i.prenom.trim()),N.append("cin",i.cin.trim()),N.append("email",i.email.trim()),N.append("phone",i.phone.trim()),o&&N.append("profile_image",o),await Ce.put(`/students/${e.student_id}`,N),r(),t()}catch(N){console.error("Error updating student:",N),g({submit:N.message||"Erreur lors de la mise  jour de l'tudiant"})}finally{b(!1)}}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(il,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Modifier l'tudiant"}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Mettez  jour les informations de l'tudiant"})]})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[m.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:m.submit})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo de profil"}),n.jsxs("div",{className:"flex items-center gap-4",children:[u&&n.jsx("img",{src:u,alt:"Preview",className:"h-20 w-20 rounded-full object-cover border-2 border-gray-200"}),n.jsxs("label",{className:"cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(zc,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:u?"Changer la photo":"Choisir une photo"})]}),n.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:i.nom,onChange:S=>l({...i,nom:S.target.value}),placeholder:"Nom",className:m.nom?"border-red-300":""}),m.nom&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:m.nom})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prnom ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:i.prenom,onChange:S=>l({...i,prenom:S.target.value}),placeholder:"Prnom",className:m.prenom?"border-red-300":""}),m.prenom&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:m.prenom})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CIN ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:i.cin,onChange:S=>l({...i,cin:S.target.value}),placeholder:"CIN",className:m.cin?"border-red-300":""}),m.cin&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:m.cin})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx(xr,{type:"email",value:i.email,onChange:S=>l({...i,email:S.target.value}),placeholder:"Email"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tlphone ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{value:i.phone,onChange:S=>l({...i,phone:S.target.value}),placeholder:"Tlphone",className:m.phone?"border-red-300":""}),m.phone&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:m.phone})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,disabled:x,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:x,className:"min-w-[120px]",children:x?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Mise  jour..."})]}):"Enregistrer"})]})]})]})})},R3e=({student:e,sessionId:t,onClose:r,onSuccess:a})=>{const[s,i]=k.useState({discount_percentage:(e.discount_percentage||0).toString(),discount_reason:e.discount_reason||""}),[l,o]=k.useState({}),[d,u]=k.useState(!1),f=parseFloat(e.formation_original_price?.toString()||"0")||parseFloat(e.montant_total?.toString()||"0")+parseFloat(e.discount_amount?.toString()||"0"),m=parseFloat(s.discount_percentage)||0,g=f*m/100,x=f-g,b=parseFloat(e.discount_percentage?.toString()||"0"),v=parseFloat(e.discount_amount?.toString()||"0"),y=()=>{const S={},N=parseFloat(s.discount_percentage);return(isNaN(N)||N<0)&&(S.discount_percentage="Le pourcentage doit tre un nombre positif ou zro"),N>100&&(S.discount_percentage="Le pourcentage ne peut pas dpasser 100%"),o(S),Object.keys(S).length===0},j=async S=>{if(S.preventDefault(),!!y()){u(!0);try{await Ce.put(`/sessions-formation/${t}/etudiants/${e.student_id}`,{discount_percentage:parseFloat(s.discount_percentage),discount_reason:s.discount_reason.trim()||null}),a(),r()}catch(N){console.error("Error updating discount:",N),o({submit:N.message||"Erreur lors de la mise  jour de la remise"})}finally{u(!1)}}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(qb,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grer la remise"}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:e.student_name})]})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:r,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[l.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:l.submit})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Prix formation:"}),n.jsxs("span",{className:"font-semibold text-gray-900",children:[f.toFixed(2)," DH"]})]}),b>0?n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Remise actuelle:"}),n.jsxs("span",{className:"font-semibold text-purple-600",children:[b.toFixed(2),"% (-",v.toFixed(2)," DH)"]})]}):null,n.jsx("div",{className:"pt-2 border-t border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Prix actuel:"}),n.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[parseFloat(e.montant_total.toString()).toFixed(2)," DH"]})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pourcentage de remise (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(XW,{className:"h-4 w-4 text-gray-400"})}),n.jsx(xr,{type:"number",step:"0.01",min:"0",max:"100",value:s.discount_percentage,onChange:S=>i({...s,discount_percentage:S.target.value}),placeholder:"0.00",className:`pl-10 ${l.discount_percentage?"border-red-300":""}`})]}),l.discount_percentage&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:l.discount_percentage}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemple: 10 pour une remise de 10%"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison de la remise (optionnel)"}),n.jsx("textarea",{value:s.discount_reason,onChange:S=>i({...s,discount_reason:S.target.value}),placeholder:"Ex: Remise tudiant, Offre spciale, etc.",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),m>0&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-green-800",children:"Remise applique:"}),n.jsxs("span",{className:"text-sm font-bold text-green-700",children:[m.toFixed(2),"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-green-700",children:"Montant de la remise:"}),n.jsxs("span",{className:"text-sm font-semibold text-green-700",children:["-",g.toFixed(2)," DH"]})]}),n.jsx("div",{className:"pt-2 border-t border-green-300",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-green-800",children:"Nouveau prix final:"}),n.jsxs("span",{className:"text-xl font-bold text-green-700",children:[x.toFixed(2)," DH"]})]})})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:r,disabled:d,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:d,className:"min-w-[120px]",children:d?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Application..."})]}):"Appliquer"})]})]})]})})},I3e=(e,t)=>Ft({queryKey:["student-payments",e,t],queryFn:async()=>await Ce.get(`/sessions-formation/${e}/etudiants/${t}/paiements`),enabled:!!e&&!!t}),B3e=(e,t)=>{const r=Tt();return St({mutationFn:async a=>await Ce.post(`/sessions-formation/${e}/etudiants/${t}/paiements`,a),onSuccess:()=>{r.invalidateQueries({queryKey:["student-payments",e,t]}),r.invalidateQueries({queryKey:["session-formation",e]})}})},z3e=(e,t)=>{const r=Tt();return St({mutationFn:async a=>await Ce.delete(`/sessions-formation/${e}/etudiants/${t}/paiements/${a}`),onSuccess:()=>{r.invalidateQueries({queryKey:["student-payments",e,t]}),r.invalidateQueries({queryKey:["session-formation",e]})}})},oF={especes:"Espces",virement:"Virement",cheque:"Chque",carte:"Carte",autre:"Autre"},U3e=({student:e,sessionId:t,onClose:r,onSuccess:a})=>{const[s,i]=k.useState(!1),[l,o]=k.useState({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"especes",reference_number:"",note:""}),[d,u]=k.useState({}),{data:f,isLoading:m,error:g}=I3e(t,e.student_id),x=B3e(t,e.student_id),b=z3e(t,e.student_id),v=()=>{const C={},T=parseFloat(l.amount);(!l.amount||isNaN(T)||T<=0)&&(C.amount="Le montant doit tre suprieur  zro");const P=f?.totals.montant_du||parseFloat(e.montant_du.toString());return T>P&&(C.amount=`Le montant ne peut pas dpasser le reste  payer (${P.toFixed(2)} DH)`),l.payment_method||(C.payment_method="La mthode de paiement est requise"),l.payment_date||(C.payment_date="La date de paiement est requise"),u(C),Object.keys(C).length===0},y=async C=>{if(C.preventDefault(),!!v())try{await x.mutateAsync(l),o({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"especes",reference_number:"",note:""}),i(!1),a()}catch(T){console.error("Error recording payment:",T),u({submit:T.message||"Erreur lors de l'enregistrement du paiement"})}},j=async C=>{if(confirm("tes-vous sr de vouloir annuler ce paiement ?"))try{await b.mutateAsync(C),a()}catch(T){console.error("Error deleting payment:",T),alert("Erreur lors de l'annulation du paiement: "+T.message)}},S=f?.totals||{montant_total:parseFloat(e.montant_total.toString()),montant_paye:parseFloat(e.montant_paye.toString()),montant_du:parseFloat(e.montant_du.toString()),statut_paiement:e.statut_paiement},N=C=>new Date(C).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(jd,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Paiements"}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:e.student_name})]})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:r,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[g&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:"Erreur lors du chargement des paiements"})]}),d.submit&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:d.submit})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Rcapitulatif"}),e.formation_original_price&&e.discount_percentage&&parseFloat(e.discount_percentage.toString())>0&&n.jsxs("div",{className:"mb-4 pb-4 border-b border-blue-200",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Prix formation original:"}),n.jsxs("span",{className:"font-semibold text-gray-900",children:[parseFloat(e.formation_original_price.toString()).toFixed(2)," DH"]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm mt-1",children:[n.jsx("span",{className:"text-gray-600",children:"Remise:"}),n.jsxs("span",{className:"font-semibold text-green-600",children:["-",parseFloat(e.discount_percentage.toString()).toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm mt-1 pt-2 border-t border-blue-200",children:[n.jsx("span",{className:"text-gray-600",children:"Prix aprs remise:"}),n.jsxs("span",{className:"font-bold text-indigo-600",children:[S.montant_total.toFixed(2)," DH"]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Montant  Payer"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[S.montant_total.toFixed(2)," DH"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Montant Pay"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[S.montant_paye.toFixed(2)," DH"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Reste  Payer"}),n.jsxs("p",{className:`text-2xl font-bold ${S.montant_du===0?"text-green-600":S.montant_du<0?"text-red-600":"text-orange-600"}`,children:[S.montant_du.toFixed(2)," DH"]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-blue-300",children:n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${S.statut_paiement==="paye"?"bg-green-100 text-green-800":S.statut_paiement==="partiellement_paye"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[S.statut_paiement==="paye"&&"Pay",S.statut_paiement==="partiellement_paye"&&"Partiellement Pay",S.statut_paiement==="impaye"&&"Impay"]})})]}),s?n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Enregistrer un Paiement"}),n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant (DH) *"}),n.jsx(xr,{type:"number",step:"0.01",min:"0",value:l.amount,onChange:C=>o({...l,amount:C.target.value}),placeholder:"0.00",className:d.amount?"border-red-300":""}),d.amount&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.amount})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de Paiement *"}),n.jsx(xr,{type:"date",value:l.payment_date,onChange:C=>o({...l,payment_date:C.target.value}),className:d.payment_date?"border-red-300":""}),d.payment_date&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.payment_date})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mthode de Paiement *"}),n.jsx("select",{value:l.payment_method,onChange:C=>o({...l,payment_method:C.target.value}),className:`w-full px-3 py-2 border ${d.payment_method?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:Object.entries(oF).map(([C,T])=>n.jsx("option",{value:C,children:T},C))}),d.payment_method&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.payment_method})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numro de Rfrence (optionnel)"}),n.jsx(xr,{type:"text",value:l.reference_number,onChange:C=>o({...l,reference_number:C.target.value}),placeholder:"Ex: CHQ123456"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (optionnel)"}),n.jsx("textarea",{value:l.note,onChange:C=>o({...l,note:C.target.value}),placeholder:"Remarques sur ce paiement...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:()=>{i(!1),u({}),o({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"especes",reference_number:"",note:""})},disabled:x.isPending,children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:x.isPending,className:"min-w-[120px]",children:x.isPending?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Enregistrement..."})]}):"Enregistrer"})]})]})]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Historique des Paiements"}),S.montant_du>0&&n.jsx(Ye,{onClick:()=>i(!0),children:"Ajouter un Paiement"})]}),m?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f&&f.payments.length>0?n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mthode"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rfrence"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Note"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.payments.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"h-4 w-4 text-gray-400"}),N(C.payment_date)]})}),n.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:[parseFloat(C.amount.toString()).toFixed(2)," DH"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(WF,{className:"h-4 w-4 text-gray-400"}),oF[C.payment_method]]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:C.reference_number||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs truncate",children:C.note||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsx("button",{onClick:()=>j(C.id),disabled:b.isPending,className:"text-red-600 hover:text-red-800 transition-colors disabled:opacity-50",title:"Annuler ce paiement",children:n.jsx(Pr,{className:"h-4 w-4"})})})]},C.id))})]})}):n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx(jd,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600",children:"Aucun paiement enregistr"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Cliquez sur "Ajouter un Paiement" pour commencer'})]})]}),n.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t bg-gray-50",children:n.jsx(Ye,{type:"button",variant:"outline",onClick:r,children:"Fermer"})})]})})};var q3e=Object.defineProperty,$3e=(e,t,r)=>t in e?q3e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gn=(e,t,r)=>$3e(e,typeof t!="symbol"?t+"":t,r);const Lb={x:0,y:0,width:0,height:0,unit:"px"},Bm=(e,t,r)=>Math.min(Math.max(e,t),r),H3e=(...e)=>e.filter(t=>t&&typeof t=="string").join(" "),cF=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function zm(e,t,r){return e.unit==="%"?{...Lb,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0}}function Pf(e,t,r){return e.unit?e.unit==="px"?{...Lb,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:{...Lb,...e,unit:"px"}}function uF(e,t,r,a,s,i=0,l=0,o=a,d=s){const u={...e};let f=Math.min(i,a),m=Math.min(l,s),g=Math.min(o,a),x=Math.min(d,s);t&&(t>1?(f=l?l*t:f,m=f/t,g=o*t):(m=i?i/t:m,f=m*t,x=d/t)),u.y<0&&(u.height=Math.max(u.height+u.y,m),u.y=0),u.x<0&&(u.width=Math.max(u.width+u.x,f),u.x=0);const b=a-(u.x+u.width);b<0&&(u.x=Math.min(u.x,a-f),u.width+=b);const v=s-(u.y+u.height);if(v<0&&(u.y=Math.min(u.y,s-m),u.height+=v),u.width<f&&((r==="sw"||r=="nw")&&(u.x-=f-u.width),u.width=f),u.height<m&&((r==="nw"||r=="ne")&&(u.y-=m-u.height),u.height=m),u.width>g&&((r==="sw"||r=="nw")&&(u.x-=g-u.width),u.width=g),u.height>x&&((r==="nw"||r=="ne")&&(u.y-=x-u.height),u.height=x),t){const y=u.width/u.height;if(y<t){const j=Math.max(u.width/t,m);(r==="nw"||r=="ne")&&(u.y-=j-u.height),u.height=j}else if(y>t){const j=Math.max(u.height*t,f);(r==="sw"||r=="nw")&&(u.x-=j-u.width),u.width=j}}return u}function V3e(e,t,r,a){const s={...e};return t==="ArrowLeft"?a==="nw"?(s.x-=r,s.y-=r,s.width+=r,s.height+=r):a==="w"?(s.x-=r,s.width+=r):a==="sw"?(s.x-=r,s.width+=r,s.height+=r):a==="ne"?(s.y+=r,s.width-=r,s.height-=r):a==="e"?s.width-=r:a==="se"&&(s.width-=r,s.height-=r):t==="ArrowRight"&&(a==="nw"?(s.x+=r,s.y+=r,s.width-=r,s.height-=r):a==="w"?(s.x+=r,s.width-=r):a==="sw"?(s.x+=r,s.width-=r,s.height-=r):a==="ne"?(s.y-=r,s.width+=r,s.height+=r):a==="e"?s.width+=r:a==="se"&&(s.width+=r,s.height+=r)),t==="ArrowUp"?a==="nw"?(s.x-=r,s.y-=r,s.width+=r,s.height+=r):a==="n"?(s.y-=r,s.height+=r):a==="ne"?(s.y-=r,s.width+=r,s.height+=r):a==="sw"?(s.x+=r,s.width-=r,s.height-=r):a==="s"?s.height-=r:a==="se"&&(s.width-=r,s.height-=r):t==="ArrowDown"&&(a==="nw"?(s.x+=r,s.y+=r,s.width-=r,s.height-=r):a==="n"?(s.y+=r,s.height-=r):a==="ne"?(s.y+=r,s.width-=r,s.height-=r):a==="sw"?(s.x-=r,s.width+=r,s.height+=r):a==="s"?s.height+=r:a==="se"&&(s.width+=r,s.height+=r)),s}const Um={capture:!0,passive:!1};let W3e=0;const Mf=class Ec extends k.PureComponent{constructor(){super(...arguments),gn(this,"docMoveBound",!1),gn(this,"mouseDownOnCrop",!1),gn(this,"dragStarted",!1),gn(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),gn(this,"componentRef",k.createRef()),gn(this,"mediaRef",k.createRef()),gn(this,"resizeObserver"),gn(this,"initChangeCalled",!1),gn(this,"instanceId",`rc-${W3e++}`),gn(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),gn(this,"onCropPointerDown",t=>{const{crop:r,disabled:a}=this.props,s=this.getBox();if(!r)return;const i=Pf(r,s.width,s.height);if(a)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const l=t.target.dataset.ord,o=!!l;let d=t.clientX,u=t.clientY,f=i.x,m=i.y;if(l){const g=t.clientX-s.x,x=t.clientY-s.y;let b=0,v=0;l==="ne"||l=="e"?(b=g-(i.x+i.width),v=x-i.y,f=i.x,m=i.y+i.height):l==="se"||l==="s"?(b=g-(i.x+i.width),v=x-(i.y+i.height),f=i.x,m=i.y):l==="sw"||l=="w"?(b=g-i.x,v=x-(i.y+i.height),f=i.x+i.width,m=i.y):(l==="nw"||l=="n")&&(b=g-i.x,v=x-i.y,f=i.x+i.width,m=i.y+i.height),d=f+s.x+b,u=m+s.y+v}this.evData={startClientX:d,startClientY:u,startCropX:f,startCropY:m,clientX:t.clientX,clientY:t.clientY,isResize:o,ord:l},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),gn(this,"onComponentPointerDown",t=>{const{crop:r,disabled:a,locked:s,keepSelection:i,onChange:l}=this.props,o=this.getBox();if(a||s||i&&r)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const d=t.clientX-o.x,u=t.clientY-o.y,f={unit:"px",x:d,y:u,width:0,height:0};this.evData={startClientX:t.clientX,startClientY:t.clientY,startCropX:d,startCropY:u,clientX:t.clientX,clientY:t.clientY,isResize:!0},this.mouseDownOnCrop=!0,l(Pf(f,o.width,o.height),zm(f,o.width,o.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),gn(this,"onDocPointerMove",t=>{const{crop:r,disabled:a,onChange:s,onDragStart:i}=this.props,l=this.getBox();if(a||!r||!this.mouseDownOnCrop)return;t.cancelable&&t.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(t));const{evData:o}=this;o.clientX=t.clientX,o.clientY=t.clientY;let d;o.isResize?d=this.resizeCrop():d=this.dragCrop(),cF(r,d)||s(Pf(d,l.width,l.height),zm(d,l.width,l.height))}),gn(this,"onComponentKeyDown",t=>{const{crop:r,disabled:a,onChange:s,onComplete:i}=this.props;if(a)return;const l=t.key;let o=!1;if(!r)return;const d=this.getBox(),u=this.makePixelCrop(d),f=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?Ec.nudgeStepLarge:t.shiftKey?Ec.nudgeStepMedium:Ec.nudgeStep;if(l==="ArrowLeft"?(u.x-=f,o=!0):l==="ArrowRight"?(u.x+=f,o=!0):l==="ArrowUp"?(u.y-=f,o=!0):l==="ArrowDown"&&(u.y+=f,o=!0),o){t.cancelable&&t.preventDefault(),u.x=Bm(u.x,0,d.width-u.width),u.y=Bm(u.y,0,d.height-u.height);const m=Pf(u,d.width,d.height),g=zm(u,d.width,d.height);s(m,g),i&&i(m,g)}}),gn(this,"onHandlerKeyDown",(t,r)=>{const{aspect:a=0,crop:s,disabled:i,minWidth:l=0,minHeight:o=0,maxWidth:d,maxHeight:u,onChange:f,onComplete:m}=this.props,g=this.getBox();if(i||!s)return;if(t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="ArrowLeft"||t.key==="ArrowRight")t.stopPropagation(),t.preventDefault();else return;const x=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?Ec.nudgeStepLarge:t.shiftKey?Ec.nudgeStepMedium:Ec.nudgeStep,b=Pf(s,g.width,g.height),v=V3e(b,t.key,x,r),y=uF(v,a,r,g.width,g.height,l,o,d,u);if(!cF(s,y)){const j=zm(y,g.width,g.height);f(y,j),m&&m(y,j)}}),gn(this,"onDocPointerDone",t=>{const{crop:r,disabled:a,onComplete:s,onDragEnd:i}=this.props,l=this.getBox();this.unbindDocMove(),!(a||!r)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(t),s&&s(Pf(r,l.width,l.height),zm(r,l.width,l.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),gn(this,"onDragFocus",()=>{var t;(t=this.componentRef.current)==null||t.scrollTo(0,0)})}get document(){return document}getBox(){const t=this.mediaRef.current;if(!t)return{x:0,y:0,width:0,height:0};const{x:r,y:a,width:s,height:i}=t.getBoundingClientRect();return{x:r,y:a,width:s,height:i}}componentDidUpdate(t){const{crop:r,onComplete:a}=this.props;if(a&&!t.crop&&r){const{width:s,height:i}=this.getBox();s&&i&&a(Pf(r,s,i),zm(r,s,i))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,Um),this.document.addEventListener("pointerup",this.onDocPointerDone,Um),this.document.addEventListener("pointercancel",this.onDocPointerDone,Um),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,Um),this.document.removeEventListener("pointerup",this.onDocPointerDone,Um),this.document.removeEventListener("pointercancel",this.onDocPointerDone,Um),this.docMoveBound=!1)}getCropStyle(){const{crop:t}=this.props;if(t)return{top:`${t.y}${t.unit}`,left:`${t.x}${t.unit}`,width:`${t.width}${t.unit}`,height:`${t.height}${t.unit}`}}dragCrop(){const{evData:t}=this,r=this.getBox(),a=this.makePixelCrop(r),s=t.clientX-t.startClientX,i=t.clientY-t.startClientY;return a.x=Bm(t.startCropX+s,0,r.width-a.width),a.y=Bm(t.startCropY+i,0,r.height-a.height),a}getPointRegion(t,r,a,s){const{evData:i}=this,l=i.clientX-t.x,o=i.clientY-t.y;let d;s&&r?d=r==="nw"||r==="n"||r==="ne":d=o<i.startCropY;let u;return a&&r?u=r==="nw"||r==="w"||r==="sw":u=l<i.startCropX,u?d?"nw":"sw":d?"ne":"se"}resolveMinDimensions(t,r,a=0,s=0){const i=Math.min(a,t.width),l=Math.min(s,t.height);return!r||!i&&!l?[i,l]:r>1?i?[i,i/r]:[l*r,l]:l?[l*r,l]:[i,i/r]}resizeCrop(){const{evData:t}=this,{aspect:r=0,maxWidth:a,maxHeight:s}=this.props,i=this.getBox(),[l,o]=this.resolveMinDimensions(i,r,this.props.minWidth,this.props.minHeight);let d=this.makePixelCrop(i);const u=this.getPointRegion(i,t.ord,l,o),f=t.ord||u;let m=t.clientX-t.startClientX,g=t.clientY-t.startClientY;(l&&f==="nw"||f==="w"||f==="sw")&&(m=Math.min(m,-l)),(o&&f==="nw"||f==="n"||f==="ne")&&(g=Math.min(g,-o));const x={unit:"px",x:0,y:0,width:0,height:0};u==="ne"?(x.x=t.startCropX,x.width=m,r?(x.height=x.width/r,x.y=t.startCropY-x.height):(x.height=Math.abs(g),x.y=t.startCropY-x.height)):u==="se"?(x.x=t.startCropX,x.y=t.startCropY,x.width=m,r?x.height=x.width/r:x.height=g):u==="sw"?(x.x=t.startCropX+m,x.y=t.startCropY,x.width=Math.abs(m),r?x.height=x.width/r:x.height=g):u==="nw"&&(x.x=t.startCropX+m,x.width=Math.abs(m),r?(x.height=x.width/r,x.y=t.startCropY-x.height):(x.height=Math.abs(g),x.y=t.startCropY+g));const b=uF(x,r,u,i.width,i.height,l,o,a,s);return r||Ec.xyOrds.indexOf(f)>-1?d=b:Ec.xOrds.indexOf(f)>-1?(d.x=b.x,d.width=b.width):Ec.yOrds.indexOf(f)>-1&&(d.y=b.y,d.height=b.height),d.x=Bm(d.x,0,i.width-d.width),d.y=Bm(d.y,0,i.height-d.height),d}renderCropSelection(){const{ariaLabels:t=Ec.defaultProps.ariaLabels,disabled:r,locked:a,renderSelectionAddon:s,ruleOfThirds:i,crop:l}=this.props,o=this.getCropStyle();if(l)return Kr.createElement("div",{style:o,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!r&&!a&&Kr.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},Kr.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),Kr.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),Kr.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),Kr.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"nw"),role:"button"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"n"),role:"button"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"ne"),role:"button"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"e"),role:"button"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"se"),role:"button"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"s"),role:"button"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"sw"),role:"button"}),Kr.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"w"),role:"button"})),s&&Kr.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:d=>d.stopPropagation()},s(this.state)),i&&Kr.createElement(Kr.Fragment,null,Kr.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),Kr.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(t){const r={...Lb,...this.props.crop||{}};return Pf(r,t.width,t.height)}render(){const{aspect:t,children:r,circularCrop:a,className:s,crop:i,disabled:l,locked:o,style:d,ruleOfThirds:u}=this.props,{cropIsActive:f,newCropIsBeingDrawn:m}=this.state,g=i?this.renderCropSelection():null,x=H3e("ReactCrop",s,f&&"ReactCrop--active",l&&"ReactCrop--disabled",o&&"ReactCrop--locked",m&&"ReactCrop--new-crop",i&&t&&"ReactCrop--fixed-aspect",i&&a&&"ReactCrop--circular-crop",i&&u&&"ReactCrop--rule-of-thirds",!this.dragStarted&&i&&!i.width&&!i.height&&"ReactCrop--invisible-crop",a&&"ReactCrop--no-animate");return Kr.createElement("div",{ref:this.componentRef,className:x,style:d},Kr.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},r),i?Kr.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},Kr.createElement("defs",null,Kr.createElement("mask",{id:`hole-${this.instanceId}`},Kr.createElement("rect",{width:"100%",height:"100%",fill:"white"}),a?Kr.createElement("ellipse",{cx:`${i.x+i.width/2}${i.unit}`,cy:`${i.y+i.height/2}${i.unit}`,rx:`${i.width/2}${i.unit}`,ry:`${i.height/2}${i.unit}`,fill:"black"}):Kr.createElement("rect",{x:`${i.x}${i.unit}`,y:`${i.y}${i.unit}`,width:`${i.width}${i.unit}`,height:`${i.height}${i.unit}`,fill:"black"}))),Kr.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,g)}};gn(Mf,"xOrds",["e","w"]),gn(Mf,"yOrds",["n","s"]),gn(Mf,"xyOrds",["nw","ne","se","sw"]),gn(Mf,"nudgeStep",1),gn(Mf,"nudgeStepMedium",10),gn(Mf,"nudgeStepLarge",100),gn(Mf,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let K3e=Mf;const G3e=({student:e,onClose:t,onSuccess:r})=>{const[a,s]=k.useState(null),[i,l]=k.useState({unit:"%",width:75,height:100,x:12.5,y:0}),[o,d]=k.useState(null),[u,f]=k.useState(!1),[m,g]=k.useState(null),[x,b]=k.useState(!1),v=k.useRef(null),y=k.useRef(null);k.useEffect(()=>{if(e.profile_image_url){b(!0);const T="http://localhost:3001/api".replace("/api",""),P=e.profile_image_url.startsWith("http")?e.profile_image_url:`${T}${e.profile_image_url}`;s(P),b(!1)}},[e.profile_image_url]);const j=C=>{if(C.target.files&&C.target.files.length>0){const T=new FileReader;T.addEventListener("load",()=>{s(T.result?.toString()||null),g(null)}),T.readAsDataURL(C.target.files[0])}},S=(C,T)=>{const P=document.createElement("canvas"),D=C.naturalWidth/C.width,M=C.naturalHeight/C.height;P.width=T.width,P.height=T.height;const F=P.getContext("2d");return F?(F.drawImage(C,T.x*D,T.y*M,T.width*D,T.height*M,0,0,T.width,T.height),new Promise(H=>{P.toBlob(L=>{H(L)},"image/jpeg",.95)})):Promise.resolve(null)},N=async()=>{if(!o||!v.current){g("Veuillez slectionner une zone  recadrer");return}f(!0),g(null);try{const C=await S(v.current,o);if(!C)throw new Error("Erreur lors du recadrage de l'image");const T=new FormData;T.append("profile_image",C,`profile-${e.student_id}-${Date.now()}.jpg`),await Ce.put(`/students/${e.student_id}`,T),r(),t()}catch(C){console.error("Error uploading cropped image:",C),g(C.message||"Erreur lors de la sauvegarde de l'image")}finally{f(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(zc,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recadrer la photo"}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:e.student_name})]})]}),n.jsx(Ye,{variant:"ghost",size:"icon",onClick:t,disabled:u,children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[m&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[n.jsx(Nr,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-red-700",children:m})]}),x&&n.jsx("div",{className:"flex items-center justify-center p-12",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(aK,{className:"h-6 w-6 text-blue-600 animate-spin"}),n.jsx("span",{className:"text-gray-600",children:"Chargement de la photo existante..."})]})}),!a&&!x&&n.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(zc,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer text-blue-600 hover:text-blue-500 font-medium",children:"Choisir une photo"}),n.jsx("input",{id:"file-upload",ref:y,type:"file",className:"sr-only",accept:"image/*",onChange:j})]}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"PNG, JPG, WEBP jusqu' 3MB"})]})}),a&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex justify-center bg-gray-100 p-4 rounded-lg",children:n.jsx(K3e,{crop:i,onChange:C=>l(C),onComplete:C=>d(C),aspect:3/4,children:n.jsx("img",{ref:v,src:a,alt:"Crop me",crossOrigin:"anonymous",style:{maxHeight:"400px",maxWidth:"100%"},onLoad:()=>{if(v.current&&!o){const{width:C,height:T}=v.current,P=Math.min(C*.75,T*(3/4)),D=P/(3/4);d({unit:"px",width:P,height:D,x:(C-P)/2,y:(T-D)/2})}}})})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Ajustez le cadre pour recadrer la photo"}),n.jsx(Ye,{type:"button",variant:"outline",size:"sm",onClick:()=>{s(null),d(null),y.current&&(y.current.value="")},children:"Changer de photo"})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t bg-gray-50",children:[n.jsx(Ye,{type:"button",variant:"outline",onClick:t,disabled:u,children:"Annuler"}),n.jsx(Ye,{type:"button",onClick:N,disabled:!a||u,className:"min-w-[120px]",children:u?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Sauvegarde..."})]}):"Enregistrer"})]})]})})},Y3e=()=>{const{id:e}=xo(),t=$a(),{data:r,isLoading:a,error:s,refetch:i}=ble(e),[l,o]=k.useState("etudiants"),[d,u]=k.useState(!1),[f,m]=k.useState(!1),[g,x]=k.useState(!1),[b,v]=k.useState(!1),[y,j]=k.useState(!1),[S,N]=k.useState(null),[C,T]=k.useState(null),[P,D]=k.useState(new Set),[M,F]=k.useState(new Set),[H,L]=k.useState(!1),[z,V]=k.useState(null),[G,ie]=k.useState({}),[Z,X]=k.useState(null),[he,ce]=k.useState(null),[ke,se]=k.useState(!1),[R,I]=k.useState([]),[q,K]=k.useState(!1),[te,J]=k.useState({current:0,total:0,templateName:""}),Q=async ge=>{if(G[ge]){V(ge);return}X(ge);try{const Te=await Ce.get(`/sessions-formation/${e}/etudiants/${ge}/available-documents`);ie(qe=>({...qe,[ge]:Te.templates||[]})),V(ge)}catch(Te){console.error("Error loading documents:",Te),alert("Erreur lors du chargement des documents: "+Te.message)}finally{X(null)}},ne=async(ge,Te)=>{if(ge.student_status==="abandonne"){alert('Impossible de gnrer le document: cet tudiant a le statut "Abandonn".');return}ce(`${ge.student_id}-${Te.template_id}`);try{const xt=(await Ce.get(`/certificate-templates/${Te.template_id}`)).template,gt={id:`temp-${Date.now()}`,student_id:ge.student_id,formation_id:ge.formation_id,student_name:ge.student_name,student_email:ge.student_email||"",formation_title:ge.formation_title||"",formation_description:"",duration_hours:0,certificate_number:`DOC-${Date.now()}`,issued_at:new Date().toISOString(),completion_date:new Date().toISOString(),grade:null,metadata:{student_first_name:ge.student_first_name||ge.student_name?.split(" ")[0]||"",student_last_name:ge.student_last_name||ge.student_name?.split(" ").slice(1).join(" ")||"",cin:ge.student_cin||"",phone:ge.student_phone||"",whatsapp:ge.student_whatsapp||"",date_naissance:ge.student_birth_date||"",lieu_naissance:ge.student_birth_place||"",adresse:ge.student_address||"",organization_name:r?.titre||"Session de Formation",session_title:r?.titre||"",session_date_debut:r?.date_debut||"",session_date_fin:r?.date_fin||"",session_ville:r?.ville_name||"",session_segment:r?.segment_name||"",session_corps_formation:r?.corps_formation_name||"",student_photo_url:ge.profile_image_url||"",certificate_serial:`${ge.student_id?.substring(0,8)||"XXXX"}-${Date.now().toString(36).toUpperCase()}`},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},mr=await new SN(gt,xt).generate(),Pt=ge.student_name?.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||"Etudiant",Rt=r?.titre?.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||"Session",wt=Te.document_type?.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||"Document",Ct=`${Pt}_${Rt}_${wt}.pdf`;mr.save(Ct),T(null),V(null)}catch(qe){console.error("Error generating document:",qe),alert("Erreur lors de la gnration du document: "+qe.message)}finally{ce(null)}},ye=async ge=>{if(confirm(`tes-vous sr de vouloir retirer ${ge.student_name} de cette session?`))try{await Ce.delete(`/sessions-formation/${e}/etudiants/${ge.student_id}`),alert("tudiant retir de la session avec succs"),i()}catch(Te){console.error("Error deleting student:",Te),alert("Erreur lors de la suppression: "+Te.message)}},De=ge=>{F(Te=>{const qe=new Set(Te);return qe.has(ge)?qe.delete(ge):qe.add(ge),qe})},ee=()=>{if(!r?.etudiants)return;const ge=r.etudiants.filter(Te=>Te.student_status!=="abandonne");M.size===ge.length&&ge.length>0?F(new Set):F(new Set(ge.map(Te=>Te.student_id)))},Je=async ge=>{if(M.size===0){alert("Veuillez slectionner au moins un tudiant");return}const Te=ge==="valide"?"Valide":"Abandonn";if(confirm(`tes-vous sr de vouloir changer le statut de ${M.size} tudiant(s) en "${Te}"?`)){L(!0);try{await Ce.put(`/sessions-formation/${e}/etudiants/bulk-status`,{student_ids:Array.from(M),status:ge}),alert(`Statut mis  jour avec succs pour ${M.size} tudiant(s)`),F(new Set),i()}catch(qe){console.error("Error changing status:",qe),alert("Erreur lors du changement de statut: "+qe.message)}finally{L(!1)}}},Oe=async()=>{if(M.size===0){alert("Veuillez slectionner au moins un tudiant");return}try{const ge=r?.etudiants?.filter(Mt=>M.has(Mt.student_id)&&Mt.student_status!=="abandonne")||[];if(ge.length===0){alert("Aucun tudiant valide slectionn");return}const Te=[...new Set(ge.map(Mt=>Mt.formation_id))],qe={};for(const Mt of Te){const mr=ge.find(Pt=>Pt.formation_id===Mt);if(mr){const Pt=await Ce.get(`/sessions-formation/${e}/etudiants/${mr.student_id}/available-documents`);qe[Mt]=Pt.templates||[]}}let xt=[];const gt=Object.values(qe);if(gt.length>0){xt=gt[0];for(let Mt=1;Mt<gt.length;Mt++){const mr=new Set(gt[Mt].map(Pt=>Pt.template_id));xt=xt.filter(Pt=>mr.has(Pt.template_id))}}if(xt.length===0){alert("Aucun template commun trouv pour les formations slectionnes");return}I(xt),se(!0)}catch(ge){console.error("Error loading bulk templates:",ge),alert("Erreur lors du chargement des templates: "+ge.message)}},ve=async ge=>{const Te=r?.etudiants?.filter(qe=>M.has(qe.student_id)&&qe.student_status!=="abandonne")||[];if(Te.length===0){alert("Aucun tudiant valide slectionn");return}K(!0),J({current:0,total:Te.length,templateName:ge.template_name});try{const xt=(await Ce.get(`/certificate-templates/${ge.template_id}`)).template,gt=Te[0];J(ur=>({...ur,current:1}));const Mt={id:`temp-${Date.now()}-0`,student_id:gt.student_id,formation_id:gt.formation_id||"",student_name:gt.student_name,student_email:gt.student_email||"",formation_title:gt.formation_title||"",formation_description:"",duration_hours:0,certificate_number:`DOC-${Date.now()}-0`,issued_at:new Date().toISOString(),completion_date:new Date().toISOString(),grade:null,metadata:{student_first_name:gt.student_first_name||gt.student_name?.split(" ")[0]||"",student_last_name:gt.student_last_name||gt.student_name?.split(" ").slice(1).join(" ")||"",cin:gt.student_cin||"",phone:gt.student_phone||"",whatsapp:gt.student_whatsapp||"",date_naissance:gt.student_birth_date||"",lieu_naissance:gt.student_birth_place||"",adresse:gt.student_address||"",organization_name:r?.titre||"Session de Formation",session_title:r?.titre||"",session_date_debut:r?.date_debut||"",session_date_fin:r?.date_fin||"",session_ville:r?.ville_name||"",session_segment:r?.segment_name||"",session_corps_formation:r?.corps_formation_name||"",student_photo_url:gt.profile_image_url||"",certificate_serial:`${gt.student_id?.substring(0,8)||"XXXX"}-${Date.now().toString(36).toUpperCase()}`},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},Pt=await new SN(Mt,xt).generate();for(let ur=1;ur<Te.length;ur++){const Lt=Te[ur];J(wr=>({...wr,current:ur+1}));const Dt={id:`temp-${Date.now()}-${ur}`,student_id:Lt.student_id,formation_id:Lt.formation_id||"",student_name:Lt.student_name,student_email:Lt.student_email||"",formation_title:Lt.formation_title||"",formation_description:"",duration_hours:0,certificate_number:`DOC-${Date.now()}-${ur}`,issued_at:new Date().toISOString(),completion_date:new Date().toISOString(),grade:null,metadata:{student_first_name:Lt.student_first_name||Lt.student_name?.split(" ")[0]||"",student_last_name:Lt.student_last_name||Lt.student_name?.split(" ").slice(1).join(" ")||"",cin:Lt.student_cin||"",phone:Lt.student_phone||"",whatsapp:Lt.student_whatsapp||"",date_naissance:Lt.student_birth_date||"",lieu_naissance:Lt.student_birth_place||"",adresse:Lt.student_address||"",organization_name:r?.titre||"Session de Formation",session_title:r?.titre||"",session_date_debut:r?.date_debut||"",session_date_fin:r?.date_fin||"",session_ville:r?.ville_name||"",session_segment:r?.segment_name||"",session_corps_formation:r?.corps_formation_name||"",student_photo_url:Lt.profile_image_url||"",certificate_serial:`${Lt.student_id?.substring(0,8)||"XXXX"}-${Date.now().toString(36).toUpperCase()}`},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await new SN(Dt,xt).appendToDocument(Pt)}const Rt=r?.titre?.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||"Session",Ct=`${ge.document_type?.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||"Document"}_${Rt}_${Te.length}_etudiants.pdf`;Pt.save(Ct),se(!1),alert(`PDF combin gnr avec succs pour ${Te.length} tudiant(s)`)}catch(qe){console.error("Error generating bulk documents:",qe),alert("Erreur lors de la gnration: "+qe.message)}finally{K(!1),J({current:0,total:0,templateName:""})}};if(a)return n.jsx(Ut,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Chargement..."})})});if(s||!r)return n.jsx(Ut,{children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[n.jsx(Nr,{className:"h-5 w-5"}),n.jsx("span",{children:"Erreur lors du chargement de la session"})]})})});const pt=r.statistiques,et=Number(parseFloat(pt?.total_paye?.toString()||"0"))||0,Nt=Number(parseFloat(pt?.total_impaye?.toString()||"0"))||0,ot=Number(parseFloat(pt?.total_partiellement_paye?.toString()||"0"))||0,Ie=ge=>ge?ge.startsWith("http")?ge:`${"http://localhost:3001/api".replace("/api","")}${ge}`:"";return n.jsxs(Ut,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("button",{onClick:()=>t("/admin/sessions-formation"),className:"mt-1 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(Xo,{className:"h-5 w-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.titre,n.jsxs("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${r.statut==="en_cours"?"bg-blue-100 text-blue-800":r.statut==="terminee"?"bg-green-100 text-green-800":r.statut==="annulee"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[r.statut==="planifiee"&&"Planifie",r.statut==="en_cours"&&"En cours",r.statut==="terminee"&&"Termine",r.statut==="annulee"&&"Annule"]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[r.date_debut&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ba,{className:"h-4 w-4"}),new Date(r.date_debut).toLocaleDateString("fr-FR"),r.date_fin&&` - ${new Date(r.date_fin).toLocaleDateString("fr-FR")}`]}),r.ville_name&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ns,{className:"h-4 w-4"}),r.ville_name]}),r.segment_name&&n.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:r.segment_color+"20",color:r.segment_color},children:r.segment_name}),r.corps_formation_name&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wa,{className:"h-4 w-4"}),r.corps_formation_name]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"tudiants"}),n.jsx("div",{className:"text-2xl font-bold text-blue-900 mt-1",children:r.nombre_etudiants||0})]}),n.jsx(Ya,{className:"h-8 w-8 text-blue-600 opacity-50"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Professeurs"}),n.jsx("div",{className:"text-2xl font-bold text-purple-900 mt-1",children:r.nombre_professeurs||0})]}),n.jsx(RN,{className:"h-8 w-8 text-purple-600 opacity-50"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Pay"}),n.jsxs("div",{className:"text-2xl font-bold text-green-900 mt-1",children:[et.toFixed(2)," DH"]})]}),n.jsx(jd,{className:"h-8 w-8 text-green-600 opacity-50"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total D"}),n.jsxs("div",{className:"text-2xl font-bold text-red-900 mt-1",children:[Nt.toFixed(2)," DH"]})]}),n.jsx(jd,{className:"h-8 w-8 text-red-600 opacity-50"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistiques de Paiement"}),n.jsx("div",{className:"h-64",children:r.etudiants&&r.etudiants.length>0?n.jsx(hy,{width:"100%",height:"100%",children:n.jsxs(uz,{children:[n.jsxs(o6,{data:[{name:"Pay",value:et,count:r.etudiants.filter(ge=>ge.statut_paiement==="paye").length},{name:"Partiellement",value:ot,count:r.etudiants.filter(ge=>ge.statut_paiement==="partiellement_paye").length},{name:"Impay",value:Nt,count:r.etudiants.filter(ge=>ge.statut_paiement==="impaye").length}].filter(ge=>ge.value>0),cx:"50%",cy:"50%",labelLine:!1,label:ge=>`${ge.name} ${(ge.percent*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[n.jsx(Hf,{fill:"#22c55e"},"cell-0"),n.jsx(Hf,{fill:"#eab308"},"cell-1"),n.jsx(Hf,{fill:"#ef4444"},"cell-2")]}),n.jsx(py,{formatter:(ge,Te,qe)=>[`${ge.toFixed(2)} DH (${qe.payload.count} tudiants)`,Te]}),n.jsx(bp,{verticalAlign:"bottom",height:36,formatter:(ge,Te)=>n.jsxs("span",{className:"text-sm text-gray-600",children:[ge,": ",Te.payload.value.toFixed(2)," DH (",Te.payload.count," tudiants)"]})})]})}):n.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(jd,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"Aucun tudiant inscrit"})]})})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"flex -mb-px",children:[n.jsxs("button",{onClick:()=>o("etudiants"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${l==="etudiants"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(Ya,{className:"h-4 w-4"}),"tudiants"]}),n.jsxs("button",{onClick:()=>o("profs"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${l==="profs"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(RN,{className:"h-4 w-4"}),"Profs"]}),n.jsxs("button",{onClick:()=>o("tests"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${l==="tests"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(Fa,{className:"h-4 w-4"}),"Fichier Tests"]}),n.jsxs("button",{onClick:()=>o("presences"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 ${l==="presences"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(MN,{className:"h-4 w-4"}),"Fiche de prsences"]})]})}),n.jsxs("div",{className:"p-6",children:[l==="etudiants"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Liste des tudiants (",r.etudiants?.length||0,")"]}),n.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Ajouter un tudiant"})]}),r.etudiants&&r.etudiants.length>0?n.jsxs("div",{children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:n.jsx("button",{onClick:ee,className:"p-1 hover:bg-gray-200 rounded transition-colors",title:M.size===r.etudiants.length?"Dslectionner tout":"Slectionner tout",children:M.size===r.etudiants.length?n.jsx(NC,{className:"h-5 w-5 text-blue-600"}):n.jsx(LN,{className:"h-5 w-5 text-gray-400"})})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Photo"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nom"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Formation"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prix Formation"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Remise"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"CIN"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tlphone"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut Paiement"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant Pay"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reste  Payer"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.etudiants.map(ge=>{const Te=ge.student_name?.split(" ").map(qe=>qe[0]).join("").toUpperCase()||"??";return n.jsxs("tr",{className:`hover:bg-gray-50 ${ge.student_status==="abandonne"?"bg-red-50":""}`,children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>De(ge.student_id),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:M.has(ge.student_id)?n.jsx(NC,{className:"h-5 w-5 text-blue-600"}):n.jsx(LN,{className:"h-5 w-5 text-gray-400"})})}),n.jsx("td",{className:"px-4 py-3",children:(()=>{const qe=P.has(ge.id);return ge.profile_image_url&&!qe?n.jsx("img",{src:Ie(ge.profile_image_url),alt:ge.student_name,className:"w-[60px] h-20 rounded-lg object-cover border-3 border-gray-300 shadow-sm cursor-pointer hover:border-blue-500 transition-all",onClick:()=>{N(ge),j(!0)},onError:()=>{D(gt=>new Set(gt).add(ge.id))}}):n.jsx("div",{className:"w-[60px] h-20 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center font-semibold text-xl border-3 border-blue-300 shadow-sm cursor-pointer hover:border-blue-500 transition-all",onClick:()=>{N(ge),j(!0)},children:Te})})()}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ge.student_name}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full ${ge.student_status==="abandonne"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:ge.student_status==="abandonne"?n.jsxs(n.Fragment,{children:[n.jsx(jC,{className:"h-3 w-3"}),"Abandonn"]}):n.jsxs(n.Fragment,{children:[n.jsx(wC,{className:"h-3 w-3"}),"Valide"]})})}),n.jsx("td",{className:"px-4 py-3 text-sm text-blue-600 font-medium",children:ge.formation_title||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm",children:ge.formation_original_price&&parseFloat(ge.formation_original_price.toString())>0?n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold text-gray-900",children:[parseFloat(ge.formation_original_price.toString()).toFixed(2)," DH"]}),ge.discount_percentage&&parseFloat(ge.discount_percentage.toString())>0&&n.jsxs("div",{className:"text-xs text-green-600 mt-0.5",children:["Aprs remise: ",parseFloat(ge.montant_total?.toString()||"0").toFixed(2)," DH"]})]}):n.jsxs("div",{className:"font-semibold text-indigo-600",children:[parseFloat(ge.montant_total?.toString()||"0").toFixed(2)," DH"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"flex items-center gap-2",children:ge.discount_percentage&&parseFloat(ge.discount_percentage.toString())>0?n.jsx("button",{onClick:()=>{N(ge),x(!0)},className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-lg text-xs font-medium hover:bg-green-200 transition-colors",children:n.jsxs("span",{children:[parseFloat(ge.discount_percentage.toString()).toFixed(1),"%"]})}):n.jsx("button",{onClick:()=>{N(ge),x(!0)},className:"text-xs text-gray-400 hover:text-purple-600 hover:underline",children:"Ajouter"})})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:ge.student_cin}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:ge.student_phone}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ge.statut_paiement==="paye"?"bg-green-100 text-green-800":ge.statut_paiement==="partiellement_paye"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[ge.statut_paiement==="paye"&&"Pay",ge.statut_paiement==="partiellement_paye"&&"Partiellement",ge.statut_paiement==="impaye"&&"Impay"]})}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[parseFloat(ge.montant_paye?.toString()||"0").toFixed(2)," DH"]}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:`text-sm font-semibold ${parseFloat(ge.montant_du?.toString()||"0")===0?"text-green-600":parseFloat(ge.montant_du?.toString()||"0")===parseFloat(ge.montant_total?.toString()||"0")?"text-red-600":"text-orange-600"}`,children:[parseFloat(ge.montant_du?.toString()||"0").toFixed(2)," DH"]})}),n.jsxs("td",{className:"px-4 py-3 relative",children:[n.jsx("button",{onClick:()=>T(C===ge.id?null:ge.id),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(QV,{className:"h-5 w-5 text-gray-600"})}),C===ge.id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{T(null),V(null)}}),n.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20",children:[n.jsxs("button",{onClick:()=>{N(ge),m(!0),T(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(Mc,{className:"h-4 w-4"}),"Modifier"]}),n.jsxs("button",{onClick:()=>{N(ge),x(!0),T(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(qb,{className:"h-4 w-4"}),"Remise"]}),n.jsxs("button",{onClick:()=>{N(ge),v(!0),T(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[n.jsx(tK,{className:"h-4 w-4"}),"Paiements"]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>Q(ge.student_id),onMouseEnter:()=>Q(ge.student_id),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(S1,{className:"h-4 w-4"}),"Documents"]}),Z===ge.student_id?n.jsx(c5,{className:"h-4 w-4 animate-spin"}):n.jsx(rl,{className:"h-4 w-4"})]}),z===ge.student_id&&G[ge.student_id]&&n.jsx("div",{className:"absolute left-full top-0 ml-1 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-30",children:G[ge.student_id].length===0?n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 italic",children:"Aucun document disponible pour cette formation"}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-100",children:"Documents disponibles"}),G[ge.student_id].map(qe=>n.jsxs("button",{onClick:()=>ne(ge,qe),disabled:he===`${ge.student_id}-${qe.template_id}`||ge.student_status==="abandonne",className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 flex items-center justify-between disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:qe.template_name}),n.jsx("span",{className:"text-xs text-gray-500",children:qe.document_type})]}),he===`${ge.student_id}-${qe.template_id}`?n.jsx(c5,{className:"h-4 w-4 animate-spin text-blue-600"}):n.jsx(S1,{className:"h-4 w-4 text-blue-600"})]},qe.template_id))]})})]}),n.jsx("div",{className:"border-t border-gray-200 my-1"}),n.jsxs("button",{onClick:()=>{ye(ge),T(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[n.jsx(Pr,{className:"h-4 w-4"}),"Supprimer"]})]})]})]})]},ge.id)})})]}),M.size>0&&n.jsxs("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-xl border border-gray-200 p-4 flex items-center gap-4 z-50",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[M.size," tudiant(s) slectionn(s)"]}),n.jsx("div",{className:"h-6 w-px bg-gray-300"}),n.jsxs("button",{onClick:()=>Je("valide"),disabled:H,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(wC,{className:"h-4 w-4"}),"Valider"]}),n.jsxs("button",{onClick:()=>Je("abandonne"),disabled:H,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(jC,{className:"h-4 w-4"}),"Abandonner"]}),n.jsx("div",{className:"h-6 w-px bg-gray-300"}),n.jsxs("button",{onClick:Oe,disabled:H||q,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(S1,{className:"h-4 w-4"}),"Gnrer Documents"]}),n.jsx("button",{onClick:()=>F(new Set),className:"px-3 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Annuler"})]})]}):n.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucun tudiant inscrit"})]}),l==="profs"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Liste des professeurs (",r.professeurs?.length||0,")"]}),n.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Affecter un professeur"})]}),r.professeurs&&r.professeurs.length>0?n.jsx("div",{className:"space-y-2",children:r.professeurs.map(ge=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge.professeur_name}),n.jsx("div",{className:"text-sm text-gray-600",children:ge.professeur_email})]}),n.jsx("button",{className:"text-red-600 hover:text-red-800 transition-colors",children:"Retirer"})]},ge.id))}):n.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucun professeur affect"})]}),l==="tests"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Liste des tests"}),n.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Ajouter un fichier de test"})]}),r.fichiers?.filter(ge=>ge.type==="test").length?n.jsx("div",{className:"space-y-2",children:r.fichiers.filter(ge=>ge.type==="test").map(ge=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Fa,{className:"h-5 w-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge.titre}),ge.file_name&&n.jsx("div",{className:"text-sm text-gray-600",children:ge.file_name})]})]}),n.jsx("button",{className:"text-red-600 hover:text-red-800 transition-colors",children:"Supprimer"})]},ge.id))}):n.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucun fichier de test"})]}),l==="presences"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Liste des fiches de prsences"}),n.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Ajouter une fiche de prsence"})]}),r.fichiers?.filter(ge=>ge.type==="presence").length?n.jsx("div",{className:"space-y-2",children:r.fichiers.filter(ge=>ge.type==="presence").map(ge=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(MN,{className:"h-5 w-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge.titre}),ge.file_name&&n.jsx("div",{className:"text-sm text-gray-600",children:ge.file_name})]})]}),n.jsx("button",{className:"text-red-600 hover:text-red-800 transition-colors",children:"Supprimer"})]},ge.id))}):n.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucune fiche de prsence"})]})]})]})]}),d&&r?.corps_formation_id&&n.jsx(M3e,{sessionId:r.id,corpsFormationId:r.corps_formation_id,onClose:()=>u(!1),onSuccess:()=>{i(),u(!1)}}),f&&S&&n.jsx(L3e,{student:S,onClose:()=>{m(!1),N(null)},onSuccess:()=>{i(),m(!1),N(null)}}),g&&S&&r&&n.jsx(R3e,{student:S,sessionId:r.id,onClose:()=>{x(!1),N(null)},onSuccess:()=>{i(),x(!1),N(null)}}),y&&S&&n.jsx(G3e,{student:S,onClose:()=>{j(!1),N(null)},onSuccess:()=>{i(),j(!1),N(null),D(new Set)}}),b&&S&&r&&n.jsx(U3e,{student:S,sessionId:r.id,onClose:()=>{v(!1),N(null)},onSuccess:()=>{i(),v(!1),N(null)}}),ke&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gnrer Documents en Masse"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[M.size," tudiant(s) slectionn(s) - Choisissez le type de document"]})]}),q?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(c5,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gnration en cours..."}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:te.templateName}),n.jsx("div",{className:"mt-4 bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${te.current/te.total*100}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[te.current," / ",te.total," tudiants"]})]})}):n.jsx("div",{className:"p-6 space-y-3 max-h-96 overflow-y-auto",children:R.length===0?n.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun template disponible"}):R.map(ge=>n.jsx("button",{onClick:()=>ve(ge),className:"w-full p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:ge.template_name}),n.jsx("p",{className:"text-sm text-gray-600",children:ge.document_type})]}),n.jsx(S1,{className:"h-5 w-5 text-blue-600"})]})},ge.template_id))}),n.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:n.jsx("button",{onClick:()=>se(!1),disabled:q,className:"px-4 py-2 text-gray-700 hover:text-gray-900 disabled:opacity-50",children:"Fermer"})})]})})]})};function X3e(){const{data:e=[],isLoading:t,error:r}=x3(),a=yL(),s=bL(),i=wL(),[l,o]=k.useState(!1),[d,u]=k.useState(null),[f,m]=k.useState({name:"",description:"",color:"#3B82F6",order_index:0}),g=async j=>{if(j.preventDefault(),!f.name.trim()){alert("Le nom du corps de formation est obligatoire");return}try{d?await s.mutateAsync({id:d,data:{name:f.name,description:f.description||void 0,color:f.color,order_index:f.order_index}}):await a.mutateAsync({name:f.name,description:f.description||void 0,color:f.color,order_index:f.order_index}),v()}catch(S){console.error("Erreur lors de la sauvegarde:",S),alert(S.message||"Erreur lors de la sauvegarde du corps de formation")}},x=j=>{m({name:j.name,description:j.description||"",color:j.color||"#3B82F6",order_index:j.order_index||0}),u(j.id),o(!0)},b=async(j,S)=>{if(confirm(`tes-vous sr de vouloir supprimer le corps "${S}" ?`))try{await i.mutateAsync(j)}catch(N){console.error("Erreur lors de la suppression:",N),alert(N.message||"Erreur lors de la suppression. Vrifiez qu'aucune formation n'y est lie.")}},v=()=>{m({name:"",description:"",color:"#3B82F6",order_index:0}),u(null),o(!1)};if(r)return n.jsx(Ut,{title:"Corps de Formation",subtitle:"Grez les catgories de formations",children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-red-800",children:["Erreur lors du chargement: ",r.message]})})});const y=e.reduce((j,S)=>j+(S.formations_count||0),0);return n.jsx(Ut,{title:"Corps de Formation",subtitle:"Grez les catgories de formations",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs(Ye,{onClick:()=>o(!l),className:"w-full sm:w-auto",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Nouveau corps"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsx(Or,{children:n.jsx(Fr,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Corps"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:e.length})]}),n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(wa,{className:"h-6 w-6 text-blue-600"})})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Formations"}),n.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:y})]}),n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Zx,{className:"h-6 w-6 text-green-600"})})]})})}),n.jsx(Or,{children:n.jsx(Fr,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Moyenne"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:e.length>0?Math.round(y/e.length):0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"formations/corps"})]}),n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(wa,{className:"h-6 w-6 text-purple-600"})})]})})})]}),l&&n.jsxs(Or,{className:"mb-6",children:[n.jsx(Ic,{children:n.jsxs(Bc,{children:[d?"Modifier":"Nouveau"," Corps de Formation"]})}),n.jsx(Fr,{children:n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom du corps ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(xr,{type:"text",value:f.name,onChange:j=>m({...f,name:j.target.value}),placeholder:"Ex: Bureautique, Dveloppement Web...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleur"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xr,{type:"color",value:f.color,onChange:j=>m({...f,color:j.target.value}),className:"w-20 h-10"}),n.jsx(xr,{type:"text",value:f.color,onChange:j=>m({...f,color:j.target.value}),placeholder:"#3B82F6",className:"flex-1"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:f.description,onChange:j=>m({...f,description:j.target.value}),placeholder:"Description du corps de formation...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordre d'affichage"}),n.jsx(xr,{type:"number",value:f.order_index,onChange:j=>m({...f,order_index:parseInt(j.target.value)||0}),placeholder:"0",min:"0"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Plus le nombre est petit, plus il apparat en premier"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ye,{type:"submit",disabled:a.isPending||s.isPending,children:d?"Modifier":"Crer"}),n.jsx(Ye,{type:"button",variant:"outline",onClick:v,children:"Annuler"})]})]})})]}),n.jsxs(Or,{children:[n.jsx(Ic,{children:n.jsx(Bc,{children:"Liste des Corps de Formation"})}),n.jsx(Fr,{children:t?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"Chargement..."})}):e.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(wa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun corps de formation"}),n.jsxs(Ye,{onClick:()=>o(!0),children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Crer le premier corps"]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Couleur"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nom"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Formations"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ordre"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(j=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"w-8 h-8 rounded border border-gray-300",style:{backgroundColor:j.color||"#3B82F6"}})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"font-medium text-gray-900",children:j.name})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm text-gray-600 max-w-xs truncate",children:j.description||"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[j.formations_count||0," formation",(j.formations_count||0)!==1?"s":""]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-gray-600",children:j.order_index})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>x(j),children:n.jsx(Mc,{className:"h-4 w-4"})}),n.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>b(j.id,j.name),disabled:i.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},j.id))})]})})})]})]})})}const bU={async getAll(){return(await Ce.get("/permissions")).data},async getTree(){return Ce.get("/permissions/tree")},async getByRole(e){return Ce.get(`/permissions/by-role/${e}`)},async updateRolePermissions(e,t){return Ce.put(`/permissions/role/${e}`,{permissionIds:t})},async getUserPermissions(e){return(await Ce.get(`/permissions/user/${e}`)).data},async getStats(){return(await Ce.get("/permissions/stats")).data}};function dF({selectedPermissions:e,onSelectionChange:t,readOnly:r=!1}){const[a,s]=k.useState({}),{data:i,isLoading:l,error:o}=Ft({queryKey:["permissions-tree"],queryFn:()=>bU.getTree()});k.useEffect(()=>{if(i?.data){const y={};i.data.forEach(j=>{y[j.id]=!0,j.menus.forEach(S=>{y[`${j.id}.${S.id}`]=!0})}),s(y)}},[i]);const d=y=>{s(j=>({...j,[y]:!j[y]}))},u=y=>y.actions.every(j=>e.includes(j.id)),f=y=>{const j=y.actions.filter(S=>e.includes(S.id)).length;return j>0&&j<y.actions.length},m=y=>y.menus.every(j=>u(j)),g=y=>y.menus.some(S=>S.actions.some(N=>e.includes(N.id)))&&!m(y),x=y=>{if(r)return;const j=y.menus.flatMap(N=>N.actions.map(C=>C.id));if(m(y))t(e.filter(N=>!j.includes(N)));else{const N=[...new Set([...e,...j])];t(N)}},b=y=>{if(r)return;const j=y.actions.map(N=>N.id);if(u(y))t(e.filter(N=>!j.includes(N)));else{const N=[...new Set([...e,...j])];t(N)}},v=y=>{r||(e.includes(y)?t(e.filter(j=>j!==y)):t([...e,y]))};return l?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),n.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des permissions..."})]}):o||!i?.data?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsx("p",{className:"text-red-600",children:"Erreur lors du chargement des permissions"})}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-gray-50 rounded-md p-3 mb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium",children:e.length})," permissions slectionnes"]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:i.data.map(y=>n.jsxs("div",{className:"border-b border-gray-200 last:border-b-0",children:[n.jsxs("div",{className:"flex items-center bg-gray-100 px-4 py-3 hover:bg-gray-150 cursor-pointer",onClick:()=>d(y.id),children:[n.jsx("button",{type:"button",className:"mr-2 text-gray-500 hover:text-gray-700",children:a[y.id]?n.jsx(Au,{className:"w-5 h-5"}):n.jsx(rl,{className:"w-5 h-5"})}),n.jsxs("button",{type:"button",onClick:j=>{j.stopPropagation(),x(y)},disabled:r,className:`mr-3 w-5 h-5 rounded border flex items-center justify-center
                  ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  ${m(y)?"bg-indigo-600 border-indigo-600":g(y)?"bg-indigo-100 border-indigo-400":"bg-white border-gray-300"}`,children:[m(y)&&n.jsx(oh,{className:"w-4 h-4 text-white"}),g(y)&&n.jsx(Ey,{className:"w-4 h-4 text-indigo-600"})]}),n.jsx(ch,{className:"w-5 h-5 text-indigo-600 mr-2"}),n.jsx("span",{className:"font-semibold text-gray-900",children:y.label}),n.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",y.menus.length," pages)"]})]}),a[y.id]&&n.jsx("div",{className:"pl-8",children:y.menus.map(j=>n.jsxs("div",{className:"border-t border-gray-100",children:[n.jsxs("div",{className:"flex items-center bg-white px-4 py-2 hover:bg-gray-50 cursor-pointer",onClick:()=>d(`${y.id}.${j.id}`),children:[n.jsx("button",{type:"button",className:"mr-2 text-gray-400 hover:text-gray-600",children:a[`${y.id}.${j.id}`]?n.jsx(Au,{className:"w-4 h-4"}):n.jsx(rl,{className:"w-4 h-4"})}),n.jsxs("button",{type:"button",onClick:S=>{S.stopPropagation(),b(j)},disabled:r,className:`mr-3 w-4 h-4 rounded border flex items-center justify-center
                          ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                          ${u(j)?"bg-indigo-600 border-indigo-600":f(j)?"bg-indigo-100 border-indigo-400":"bg-white border-gray-300"}`,children:[u(j)&&n.jsx(oh,{className:"w-3 h-3 text-white"}),f(j)&&n.jsx(Ey,{className:"w-3 h-3 text-indigo-600"})]}),n.jsx(Fa,{className:"w-4 h-4 text-gray-500 mr-2"}),n.jsx("span",{className:"font-medium text-gray-800",children:j.label}),n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",j.actions.length," actions)"]})]}),a[`${y.id}.${j.id}`]&&n.jsx("div",{className:"pl-8 py-2 bg-gray-50",children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:j.actions.map(S=>n.jsxs("label",{className:`flex items-center px-3 py-2 rounded-md hover:bg-white transition-colors ${r?"cursor-not-allowed opacity-75":"cursor-pointer"}`,children:[n.jsx("input",{type:"checkbox",checked:e.includes(S.id),onChange:()=>v(S.id),disabled:r,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:S.actionLabel})]},S.id))})})]},`${y.id}.${j.id}`))})]},y.id))}),!r&&n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{const y=i.data.flatMap(j=>j.menus.flatMap(S=>S.actions.map(N=>N.id)));t(y)},className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md",children:"Tout slectionner"}),n.jsx("button",{type:"button",onClick:()=>t([]),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md",children:"Tout dslectionner"}),n.jsx("button",{type:"button",onClick:()=>{const y=i.data.flatMap(j=>j.menus.flatMap(S=>S.actions.filter(N=>N.action==="view_page").map(N=>N.id)));t(y)},className:"px-3 py-1 text-sm bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-md",children:"Lecture seule (voir pages)"})]})]})}const Q3e=()=>{const[e,t]=k.useState([]),[r,a]=k.useState({}),[s,i]=k.useState(null),[l,o]=k.useState([]),[d,u]=k.useState([]),[f,m]=k.useState(!0),[g,x]=k.useState(!1),[b,v]=k.useState(!1),[y,j]=k.useState(new Set),[S,N]=k.useState(null),[C,T]=k.useState(null),[P,D]=k.useState(!1),[M,F]=k.useState(""),[H,L]=k.useState(""),[z,V]=k.useState([]),[G,ie]=k.useState(!1),Z=!0;k.useEffect(()=>{X()},[]);const X=async()=>{m(!0);try{const J=await hd.checkMigrationStatus();N(J.migrationComplete),T(J.checks),J.migrationComplete&&await ce()}catch(J){console.error("Error checking migration:",J),N(!1)}finally{m(!1)}},he=async()=>{if(confirm("Voulez-vous excuter la migration RBAC ? Cette opration va crer les tables de rles et permissions, et migrer vos utilisateurs actuels vers le nouveau systme. Vos donnes existantes seront prserves.")){D(!0);try{const J=await hd.runMigration();J.success?(alert(`Migration russie !

- ${J.details?.rolesCreated} rles crs
- ${J.details?.permissionsCreated} permissions cres
- ${J.details?.usersMigrated} utilisateurs migrs

Vos utilisateurs conservent leur niveau d'accs actuel.`),await X()):alert("Erreur lors de la migration: "+J.message)}catch(J){console.error("Migration error:",J),alert("Erreur lors de la migration: "+J.message)}finally{D(!1)}}},ce=async()=>{try{const[J,Q]=await Promise.all([hd.getAllRoles(),hd.getAllPermissions()]);J.success&&t(J.roles),Q.success&&a(Q.grouped)}catch(J){console.error("Error loading data:",J),alert("Erreur lors du chargement: "+J.message)}},ke=async J=>{try{const Q=await hd.getRole(J.id);Q.success&&(i(J),o(Q.permissions.map(ne=>ne.id)),u(Q.users))}catch(Q){console.error("Error loading role details:",Q)}},se=async()=>{if(!M.trim()){alert("Le nom du rle est requis");return}ie(!0);try{(await hd.createRole({name:M.trim(),description:H.trim()||void 0,permission_ids:z})).success&&(alert("Rle cr avec succs"),x(!1),q(),ce())}catch(J){alert("Erreur: "+J.message)}finally{ie(!1)}},R=async()=>{if(s){ie(!0);try{Z&&await bU.updateRolePermissions(s.id,z),(await hd.updateRole(s.id,{name:M.trim()||void 0,description:H.trim(),permission_ids:z})).success&&(alert("Rle mis  jour avec succs"),v(!1),q(),ce(),i(null))}catch(J){alert("Erreur: "+J.message)}finally{ie(!1)}}},I=async J=>{if(J.is_system_role){alert("Impossible de supprimer un rle systme");return}if(confirm(`tes-vous sr de vouloir supprimer le rle "${J.name}" ?`))try{(await hd.deleteRole(J.id)).success&&(alert("Rle supprim"),ce(),s?.id===J.id&&i(null))}catch(Q){alert("Erreur: "+Q.message)}},q=()=>{F(""),L(""),V([])},K=J=>{F(J.name),L(J.description||""),V([...l]),v(!0)},te={"gestion_comptable.tableau_bord":"Tableau de bord","gestion_comptable.segments":"Segments","gestion_comptable.villes":"Villes","gestion_comptable.utilisateurs":"Utilisateurs","gestion_comptable.roles":"Rles & Permissions","gestion_comptable.fiches_calcul":"Fiches de calcul","gestion_comptable.creer_declaration":"Crer dclaration","gestion_comptable.gerer_declarations":"Grer dclarations","formation_en_ligne.formations":"Gestion des Formations","formation_en_ligne.sessions":"Sessions de Formation","formation_en_ligne.analytics":"Analytics","formation_en_ligne.rapports":"Rapports tudiants","formation_en_ligne.certificats":"Certificats","formation_en_ligne.templates":"Templates de Certificats","formation_en_ligne.forums":"Forums",gestion_comptable:"Gestion Comptable",formation_en_ligne:"Formation en Ligne",pages_comptabilite:"Pages - Gestion Comptable",pages_formation:"Pages - Formation en Ligne",actions_utilisateurs:"Actions - Utilisateurs",actions_parametres:"Actions - Segments & Villes",actions_fiches:"Actions - Fiches de Calcul",actions_declarations:"Actions - Dclarations",actions_formations:"Actions - Formations",actions_sessions:"Actions - Sessions",actions_speciales:"Actions Spciales",declarations:"Gestion Comptable",users:"Utilisateurs",students:"tudiants",sessions:"Sessions",documents:"Documents",finances:"Finances",formations:"Formations",settings:"Paramtres",reports:"Rapports"};return f?n.jsx(Ut,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Chargement..."})})}):S===!1?n.jsx(Ut,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(X0,{className:"h-8 w-8 text-purple-600"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Rles"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Configuration initiale requise"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 max-w-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(gC,{className:"h-6 w-6 text-orange-500"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Migration RBAC requise"})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(co,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:"Le systme de rles et permissions n'est pas encore initialis."}),n.jsxs("p",{className:"text-sm text-yellow-700",children:["Cette migration va crer les tables ncessaires et migrer vos utilisateurs existants vers le nouveau systme. ",n.jsx("strong",{children:"Vos donnes actuelles seront prserves"})," et chaque utilisateur conservera son niveau d'accs actuel."]})]})]})}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Ce qui va tre cr :"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Xr,{className:"h-4 w-4 text-green-500"}),"Tables : roles, permissions, role_permissions"]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Xr,{className:"h-4 w-4 text-green-500"}),"6 rles par dfaut (admin, gerant, professor, assistante, comptable, superviseur)"]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Xr,{className:"h-4 w-4 text-green-500"}),"35+ permissions granulaires (utilisateurs, tudiants, sessions, documents, finances...)"]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Xr,{className:"h-4 w-4 text-green-500"}),"Migration automatique de vos utilisateurs existants"]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Exemple :"}),' Si vous avez un utilisateur avec le rle "admin", il sera automatiquement migr vers le nouveau rle "admin" avec toutes les permissions. Un "gerant" aura les permissions de gestion quotidienne, etc.']})}),n.jsx("button",{onClick:he,disabled:P,className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:P?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Migration en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(gC,{className:"h-4 w-4"}),"Excuter la Migration"]})}),C&&n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"tat actuel :"}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{children:["Table roles : ",C.rolesTableExists?"":""]}),n.jsxs("p",{children:["Table permissions : ",C.permissionsTableExists?"":""]}),n.jsxs("p",{children:["Table role_permissions : ",C.rolePermissionsTableExists?"":""]}),n.jsxs("p",{children:["Colonne role_id dans profiles : ",C.roleIdColumnExists?"":""]})]})]})]})]})}):n.jsxs(Ut,{children:[n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(X0,{className:"h-8 w-8 text-purple-600"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Rles"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Crez et grez les rles et permissions des utilisateurs"})]})]}),n.jsxs("button",{onClick:()=>{q(),x(!0)},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Nouveau Rle"]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Rles (",e.length,")"]})}),n.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:e.map(J=>n.jsxs("div",{className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${s?.id===J.id?"bg-purple-50 border-l-4 border-purple-600":""}`,onClick:()=>ke(J),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[J.is_system_role?n.jsx(fp,{className:"h-4 w-4 text-orange-500"}):n.jsx(OW,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"font-medium text-gray-900",children:J.name})]}),!J.is_system_role&&n.jsx("button",{onClick:Q=>{Q.stopPropagation(),I(J)},className:"p-1 text-red-600 hover:bg-red-50 rounded",children:n.jsx(Pr,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:J.description||"Pas de description"}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(bC,{className:"h-3 w-3"}),J.permission_count||0," permissions"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ya,{className:"h-3 w-3"}),J.user_count||0," utilisateurs"]})]})]},J.id))})]})}),n.jsx("div",{className:"lg:col-span-2",children:s?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[s.name,s.is_system_role&&n.jsx("span",{className:"ml-2 text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Systme"})]}),n.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),n.jsxs("button",{onClick:()=>K(s),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[n.jsx(Mc,{className:"h-4 w-4"}),"Modifier"]})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(bC,{className:"h-4 w-4"}),"Permissions (",l.length,")"]}),n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:Object.entries(r).map(([J,Q])=>Q.some(ye=>l.includes(ye.id))?n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("div",{className:"font-medium text-gray-700 mb-2",children:te[J]||J}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Q.filter(ye=>l.includes(ye.id)).map(ye=>n.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:ye.name},ye.id))})]},J):null)}),n.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mt-6 mb-3 flex items-center gap-2",children:[n.jsx(Ya,{className:"h-4 w-4"}),"Utilisateurs avec ce rle (",d.length,")"]}),d.length>0?n.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:d.map(J=>n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[n.jsx(Ya,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"font-medium",children:J.full_name}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",J.username,")"]})]},J.id))}):n.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun utilisateur"})]})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx(X0,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Slectionnez un rle pour voir ses dtails"})]})})})]})]}),g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Crer un nouveau rle"}),n.jsx("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du rle *"}),n.jsx("input",{type:"text",value:M,onChange:J=>F(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"ex: assistante, comptable, superviseur"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:H,onChange:J=>L(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",rows:2,placeholder:"Dcrivez les responsabilits de ce rle"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Permissions (",z.length," slectionnes)"]}),n.jsx(dF,{selectedPermissions:z,onSelectionChange:V})]})]})}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Annuler"}),n.jsxs("button",{onClick:se,disabled:G||!M.trim(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[n.jsx(Td,{className:"h-4 w-4"}),G?"Cration...":"Crer le rle"]})]})]})}),b&&s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Modifier le rle: ",s.name]}),n.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(Mr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du rle"}),n.jsx("input",{type:"text",value:M,onChange:J=>F(J.target.value),disabled:s.is_system_role,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 disabled:bg-gray-100"}),s.is_system_role&&n.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Le nom des rles systme ne peut pas tre modifi"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:H,onChange:J=>L(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",rows:2})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Permissions (",z.length," slectionnes)"]}),n.jsx(dF,{selectedPermissions:z,onSelectionChange:V})]})]})}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-700",children:"Annuler"}),n.jsxs("button",{onClick:R,disabled:G,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[n.jsx(Td,{className:"h-4 w-4"}),G?"Enregistrement...":"Enregistrer"]})]})]})})]})};function Z3e({employeeId:e,onClose:t}){const r=Tt(),[a,s]=k.useState({employee_number:"",first_name:"",last_name:"",cin:"",birth_date:"",birth_place:"",email:"",phone:"",address:"",postal_code:"",city:"",emergency_contact_name:"",emergency_contact_phone:"",hire_date:"",termination_date:"",employment_status:"active",employment_type:"full_time",position:"",department:"",segment_id:"",manager_id:"",notes:""}),i=!!e,{data:l}=Ft({queryKey:["hr-employee",e],queryFn:async()=>e?(await Ce.get(`/hr/employees/${e}`)).data:null,enabled:!!e}),{data:o=[]}=qd(),{data:d}=Ft({queryKey:["hr-departments"],queryFn:async()=>(await Ce.get("/hr/employees/meta/departments")).data}),u=d||[],{data:f}=Ft({queryKey:["hr-potential-managers"],queryFn:async()=>(await Ce.get("/hr/employees?status=active")).data}),m=f||[];k.useEffect(()=>{l&&s({employee_number:l.employee_number||"",first_name:l.first_name||"",last_name:l.last_name||"",cin:l.cin||"",birth_date:l.birth_date||"",birth_place:l.birth_place||"",email:l.email||"",phone:l.phone||"",address:l.address||"",postal_code:l.postal_code||"",city:l.city||"",emergency_contact_name:l.emergency_contact_name||"",emergency_contact_phone:l.emergency_contact_phone||"",hire_date:l.hire_date||"",termination_date:l.termination_date||"",employment_status:l.employment_status||"active",employment_type:l.employment_type||"full_time",position:l.position||"",department:l.department||"",segment_id:l.segment_id||"",manager_id:l.manager_id||"",notes:l.notes||""})},[l]);const g=St({mutationFn:async j=>(await Ce.post("/hr/employees",j)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-employees"]}),r.invalidateQueries({queryKey:["hr-potential-managers"]}),t()}}),x=St({mutationFn:async j=>(await Ce.put(`/hr/employees/${e}`,j)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-employees"]}),r.invalidateQueries({queryKey:["hr-employee",e]}),r.invalidateQueries({queryKey:["hr-potential-managers"]}),t()}}),b=async j=>{if(j.preventDefault(),!a.first_name.trim()||!a.last_name.trim()||!a.employee_number.trim()||!a.hire_date){alert("Veuillez remplir tous les champs obligatoires (Matricule, Prnom, Nom, Date d'embauche)");return}try{i?await x.mutateAsync(a):await g.mutateAsync(a)}catch(S){console.error("Erreur lors de la sauvegarde:",S),alert(S.response?.data?.error||"Erreur lors de la sauvegarde de l'employ")}},v=(j,S)=>{s(N=>({...N,[j]:S}))},y=g.isPending||x.isPending;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(ZF,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i?"Modifier l'employ":"Nouvel employ"}),n.jsx("p",{className:"text-sm text-gray-500",children:i?"Modifiez les informations de l'employ":"Ajoutez un nouvel employ au systme RH"})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(il,{className:"w-5 h-5 text-blue-600"}),"Informations de base"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matricule *"}),n.jsxs("div",{className:"relative",children:[n.jsx(zb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",required:!0,value:a.employee_number,onChange:j=>v("employee_number",j.target.value),placeholder:"Ex: EMP001",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prnom *"}),n.jsx("input",{type:"text",required:!0,value:a.first_name,onChange:j=>v("first_name",j.target.value),placeholder:"Ex: Ahmed",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),n.jsx("input",{type:"text",required:!0,value:a.last_name,onChange:j=>v("last_name",j.target.value),placeholder:"Ex: Benali",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CIN"}),n.jsx("input",{type:"text",value:a.cin,onChange:j=>v("cin",j.target.value.toUpperCase()),placeholder:"Ex: AB123456",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de naissance"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",value:a.birth_date,onChange:j=>v("birth_date",j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lieu de naissance"}),n.jsx("input",{type:"text",value:a.birth_place,onChange:j=>v("birth_place",j.target.value),placeholder:"Ex: Casablanca",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Jx,{className:"w-5 h-5 text-blue-600"}),"Contact"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(XF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"email",value:a.email,onChange:j=>v("email",j.target.value),placeholder:"email@example.com",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tlphone"}),n.jsxs("div",{className:"relative",children:[n.jsx(Jx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"tel",value:a.phone,onChange:j=>v("phone",j.target.value),placeholder:"0612345678",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse"}),n.jsxs("div",{className:"relative",children:[n.jsx(ns,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),n.jsx("textarea",{value:a.address,onChange:j=>v("address",j.target.value),placeholder:"Adresse complte",rows:2,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code postal"}),n.jsx("input",{type:"text",value:a.postal_code,onChange:j=>v("postal_code",j.target.value),placeholder:"Ex: 20000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville"}),n.jsx("input",{type:"text",value:a.city,onChange:j=>v("city",j.target.value),placeholder:"Ex: Casablanca",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-600"}),"Contact d'urgence"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du contact"}),n.jsx("input",{type:"text",value:a.emergency_contact_name,onChange:j=>v("emergency_contact_name",j.target.value),placeholder:"Nom complet",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tlphone du contact"}),n.jsxs("div",{className:"relative",children:[n.jsx(Jx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"tel",value:a.emergency_contact_phone,onChange:j=>v("emergency_contact_phone",j.target.value),placeholder:"0612345678",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(mg,{className:"w-5 h-5 text-blue-600"}),"Informations professionnelles"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date d'embauche *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",required:!0,value:a.hire_date,onChange:j=>v("hire_date",j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut d'emploi"}),n.jsxs("select",{value:a.employment_status,onChange:j=>v("employment_status",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"active",children:"Actif"}),n.jsx("option",{value:"on_leave",children:"En cong"}),n.jsx("option",{value:"suspended",children:"Suspendu"}),n.jsx("option",{value:"terminated",children:"Termin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type d'emploi"}),n.jsxs("select",{value:a.employment_type,onChange:j=>v("employment_type",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"full_time",children:"Temps plein"}),n.jsx("option",{value:"part_time",children:"Temps partiel"}),n.jsx("option",{value:"intern",children:"Stagiaire"}),n.jsx("option",{value:"freelance",children:"Freelance"}),n.jsx("option",{value:"temporary",children:"Temporaire"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poste"}),n.jsx("input",{type:"text",value:a.position,onChange:j=>v("position",j.target.value),placeholder:"Ex: Dveloppeur",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dpartement"}),n.jsx("input",{type:"text",list:"departments-list",value:a.department,onChange:j=>v("department",j.target.value),placeholder:"Ex: IT",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("datalist",{id:"departments-list",children:u.map(j=>n.jsx("option",{value:j},j))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segment"}),n.jsxs("select",{value:a.segment_id,onChange:j=>v("segment_id",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Aucun segment"}),o.map(j=>n.jsx("option",{value:j.id,children:j.name},j.id))]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manager"}),n.jsxs("select",{value:a.manager_id,onChange:j=>v("manager_id",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Aucun manager"}),m.filter(j=>j.id!==e).map(j=>n.jsxs("option",{value:j.id,children:[j.first_name," ",j.last_name," - ",j.position||"N/A"]},j.id))]})]}),a.employment_status==="terminated"&&n.jsxs("div",{className:"md:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin de contrat"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",value:a.termination_date,onChange:j=>v("termination_date",j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{value:a.notes,onChange:j=>v("notes",j.target.value),placeholder:"Notes internes sur l'employ...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:y,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Enregistrement...":i?"Mettre  jour":"Crer l'employ"})]})]})]})})}function J3e(){const{hr:e}=Mp(),[t,r]=k.useState(""),[a,s]=k.useState(""),[i,l]=k.useState(""),[o,d]=k.useState("list"),[u,f]=k.useState(!1),[m,g]=k.useState(null),{data:x,isLoading:b}=Ft({queryKey:["hr-employees",t,a,i],queryFn:async()=>{const N=new URLSearchParams;return t&&N.append("search",t),a&&N.append("status",a),i&&N.append("department",i),(await Ce.get(`/hr/employees?${N.toString()}`)).data}}),{data:v}=Ft({queryKey:["hr-departments"],queryFn:async()=>(await Ce.get("/hr/employees/meta/departments")).data}),y=x||[],j=v||[],S=N=>{const C={active:"bg-green-100 text-green-800",terminated:"bg-red-100 text-red-800",suspended:"bg-yellow-100 text-yellow-800",on_leave:"bg-blue-100 text-blue-800"},T={active:"Actif",terminated:"Termin",suspended:"Suspendu",on_leave:"En cong"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C[N]||"bg-gray-100 text-gray-800"}`,children:T[N]||N})};return n.jsx(Ut,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(Ya,{className:"h-7 w-7 text-blue-600"}),"Dossiers du Personnel"]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Gestion des employs, contrats et documents administratifs"})]}),e.canCreateEmployee&&n.jsxs("button",{onClick:()=>{g(null),f(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Jr,{className:"h-5 w-5"}),"Nouvel Employ"]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>d("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="list"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Ya,{className:"h-4 w-4 inline mr-2"}),"Liste des Employs"]}),e.canViewContracts&&n.jsxs("button",{onClick:()=>d("contracts"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="contracts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(mg,{className:"h-4 w-4 inline mr-2"}),"Contrats"]}),e.canManageDocuments&&n.jsxs("button",{onClick:()=>d("documents"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="documents"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Fa,{className:"h-4 w-4 inline mr-2"}),"Documents"]}),e.canViewDisciplinary&&n.jsxs("button",{onClick:()=>d("disciplinary"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="disciplinary"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(co,{className:"h-4 w-4 inline mr-2"}),"Disciplinaire"]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Rechercher un employ...",value:t,onChange:N=>r(N.target.value),className:"pl-10 w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500"})]}),n.jsx("div",{children:n.jsxs("select",{value:a,onChange:N=>s(N.target.value),className:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Tous les statuts"}),n.jsx("option",{value:"active",children:"Actif"}),n.jsx("option",{value:"on_leave",children:"En cong"}),n.jsx("option",{value:"suspended",children:"Suspendu"}),n.jsx("option",{value:"terminated",children:"Termin"})]})}),n.jsx("div",{children:n.jsxs("select",{value:i,onChange:N=>l(N.target.value),className:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Tous les dpartements"}),j.map(N=>n.jsx("option",{value:N,children:N},N))]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"flex items-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200",children:[n.jsx(Tp,{className:"h-4 w-4"}),"Filtres avancs"]}),n.jsxs("button",{className:"flex items-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200",children:[n.jsx(ps,{className:"h-4 w-4"}),"Exporter"]})]})]})}),o==="list"&&n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:b?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement des employs..."})]}):y.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Ya,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Aucun employ trouv"}),e.canCreateEmployee&&n.jsx("button",{onClick:()=>{g(null),f(!0)},className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Ajouter un employ"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matricule"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Poste"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dpartement"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'embauche"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(N=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-gray-900",children:[N.first_name," ",N.last_name]}),n.jsx("div",{className:"text-sm text-gray-500",children:N.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.employee_number}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.position||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.department||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(N.employment_status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(N.hire_date).toLocaleDateString("fr-FR")}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[e.canUpdateEmployee&&n.jsx("button",{onClick:()=>{g(N.id),f(!0)},className:"text-blue-600 hover:text-blue-900",title:"Modifier l'employ",children:n.jsx(Mc,{className:"h-4 w-4"})}),e.canDeleteEmployee&&n.jsx("button",{onClick:()=>{confirm(`tes-vous sr de vouloir supprimer ${N.first_name} ${N.last_name} ?`)&&console.log("Delete employee:",N.id)},className:"text-red-600 hover:text-red-900",title:"Supprimer l'employ",children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},N.id))})]})})}),o==="contracts"&&n.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[n.jsx(mg,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Gestion des Contrats"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Cette fonctionnalit sera disponible prochainement."})]}),o==="documents"&&n.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[n.jsx(Fa,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Documents Administratifs"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Cette fonctionnalit sera disponible prochainement."})]}),o==="disciplinary"&&n.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[n.jsx(co,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Actions Disciplinaires"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Cette fonctionnalit sera disponible prochainement."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Employs"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.length})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Actifs"}),n.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.filter(N=>N.employment_status==="active").length})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"En cong"}),n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.filter(N=>N.employment_status==="on_leave").length})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Suspendus"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y.filter(N=>N.employment_status==="suspended").length})]})]}),u&&n.jsx(Z3e,{employeeId:m,onClose:()=>{f(!1),g(null)}})]})})}function eSe(){const{hr:e}=Mp(),[t]=k.useState(new Date),{data:r,isLoading:a}=Ft({queryKey:["hr-dashboard-stats"],queryFn:async()=>(await Ce.get("/hr/dashboard/stats")).data}),{data:s,isLoading:i}=Ft({queryKey:["hr-dashboard-alerts"],queryFn:async()=>(await Ce.get("/hr/dashboard/alerts")).data}),l=r,o=s,d=f=>["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"][f-1],u=async()=>{try{const f=t.getFullYear(),m=t.getMonth()+1,g=`/hr/dashboard/monthly-summary/${f}/${m}?format=csv`;window.open(`http://localhost:3001/api${g}`,"_blank")}catch(f){console.error("Export error:",f)}};return a||i?n.jsx(Ut,{children:n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):n.jsx(Ut,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(pg,{className:"h-7 w-7 text-blue-600"}),"Tableau de bord RH"]}),n.jsxs("p",{className:"text-gray-600 mt-1",children:["Vue d'ensemble et indicateurs cls - ",l&&d(l.period.month)," ",l?.period.year]})]}),e.canExportPayroll&&n.jsxs("button",{onClick:u,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(ps,{className:"h-5 w-5"}),"Exporter Rapport"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Effectif Total"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:l?.employees.total_employees||"0"}),n.jsxs("p",{className:"text-xs text-green-600 mt-2 flex items-center gap-1",children:[n.jsx(Ll,{className:"h-3 w-3"}),"+",l?.employees.new_hires_this_month||"0"," ce mois"]})]}),n.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:n.jsx(Ya,{className:"h-8 w-8 text-blue-600"})})]}),n.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[l?.employees.active_employees||"0"," actifs  ",l?.employees.on_leave||"0"," en cong"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Prsence Moyenne"}),n.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[parseFloat(l?.attendance.avg_hours_per_day||"0").toFixed(1),"h"]}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"par jour"})]}),n.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:n.jsx(na,{className:"h-8 w-8 text-green-600"})})]}),n.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[l?.attendance.total_late||"0"," retards  ",l?.attendance.total_absent||"0"," absences"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Demandes de Congs"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:l?.leaves.total_requests||"0"}),n.jsxs("p",{className:"text-xs text-yellow-600 mt-2 flex items-center gap-1",children:[l?.leaves.pending_requests||"0"," en attente"]})]}),n.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:n.jsx(ku,{className:"h-8 w-8 text-purple-600"})})]}),n.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[l?.leaves.total_days_requested||"0"," jours demands"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Heures Supplmentaires"}),n.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[parseFloat(l?.overtime.total_hours_requested||"0").toFixed(0),"h"]}),n.jsxs("p",{className:"text-xs text-yellow-600 mt-2",children:[l?.overtime.pending_approval||"0","  valider"]})]}),n.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:n.jsx(Ll,{className:"h-8 w-8 text-orange-600"})})]}),n.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[l?.overtime.total_requests||"0"," demandes"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(co,{className:"h-5 w-5 text-orange-500"}),"Contrats Expirant (30 jours)"]})}),n.jsx("div",{className:"p-4",children:o?.expiring_contracts&&o.expiring_contracts.length>0?n.jsx("div",{className:"space-y-3",children:o.expiring_contracts.slice(0,5).map(f=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:f.employee_name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[f.employee_number,"  ",f.contract_type]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm font-medium text-orange-600",children:new Date(f.end_date).toLocaleDateString("fr-FR")})})]},f.id))}):n.jsx("p",{className:"text-center text-gray-500 py-4",children:"Aucun contrat expirant"})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(co,{className:"h-5 w-5 text-red-500"}),"Anomalies de Prsence"]})}),n.jsx("div",{className:"p-4",children:o?.attendance_anomalies&&o.attendance_anomalies.length>0?n.jsx("div",{className:"space-y-3",children:o.attendance_anomalies.slice(0,5).map(f=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:f.employee_name}),n.jsx("p",{className:"text-sm text-gray-600",children:f.anomaly_type.replace("_"," ")})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm font-medium text-red-600",children:new Date(f.attendance_date).toLocaleDateString("fr-FR")})})]},f.id))}):n.jsx("p",{className:"text-center text-gray-500 py-4",children:"Aucune anomalie"})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(ku,{className:"h-5 w-5 text-purple-500"}),"Congs en Attente"]})}),n.jsx("div",{className:"p-4",children:o?.pending_leave_approvals&&o.pending_leave_approvals.length>0?n.jsx("div",{className:"space-y-3",children:o.pending_leave_approvals.slice(0,5).map(f=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:f.employee_name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[f.leave_type,"  ",f.days_requested," jours"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-xs text-purple-600 font-medium",children:["Niveau: ",f.current_approver_level]}),n.jsx("p",{className:"text-xs text-gray-600",children:new Date(f.start_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"})})]})]},f.id))}):n.jsx("p",{className:"text-center text-gray-500 py-4",children:"Aucune demande en attente"})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5 text-blue-500"}),"Heures Sup. en Attente"]})}),n.jsx("div",{className:"p-4",children:o?.pending_overtime_approvals&&o.pending_overtime_approvals.length>0?n.jsx("div",{className:"space-y-3",children:o.pending_overtime_approvals.slice(0,5).map(f=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:f.employee_name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[f.estimated_hours,"h  Priorit: ",f.priority]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm font-medium text-blue-600",children:new Date(f.request_date).toLocaleDateString("fr-FR")})})]},f.id))}):n.jsx("p",{className:"text-center text-gray-500 py-4",children:"Aucune demande en attente"})})]})]})]})})}function tSe({onSuccess:e}){const t=Tt(),r=new Date().toISOString().split("T")[0],[a,s]=k.useState({employee_id:"",attendance_date:r,check_in_time:"",check_out_time:"",status:"present",notes:""}),[i,l]=k.useState(null),{data:o}=Ft({queryKey:["hr-employees-active"],queryFn:async()=>(await Ce.get("/hr/employees?status=active")).data}),d=o||[];k.useEffect(()=>{if(a.check_in_time&&a.check_out_time){const b=new Date(`${a.attendance_date}T${a.check_in_time}`),v=new Date(`${a.attendance_date}T${a.check_out_time}`);if(v>b){const y=v.getTime()-b.getTime(),j=Math.floor(y/(1e3*60));l(j)}else l(null)}else l(null)},[a.check_in_time,a.check_out_time,a.attendance_date]);const u=St({mutationFn:async b=>(await Ce.post("/hr/attendance/record",b)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["hr-attendance"]}),t.invalidateQueries({queryKey:["hr-attendance-anomalies"]}),s({employee_id:"",attendance_date:r,check_in_time:"",check_out_time:"",status:"present",notes:""}),l(null),e&&e(),alert("Prsence enregistre avec succs")}}),f=async b=>{if(b.preventDefault(),!a.employee_id||!a.attendance_date){alert("Veuillez slectionner un employ et une date");return}if(!a.check_in_time&&!a.check_out_time&&a.status==="present"){alert('Veuillez renseigner au moins une heure (entre ou sortie) pour un statut "prsent"');return}if(a.check_in_time&&a.check_out_time){const v=new Date(`${a.attendance_date}T${a.check_in_time}`);if(new Date(`${a.attendance_date}T${a.check_out_time}`)<=v){alert("L'heure de sortie doit tre aprs l'heure d'entre");return}}try{await u.mutateAsync(a)}catch(v){console.error("Erreur lors de l'enregistrement:",v),alert(v.response?.data?.error||"Erreur lors de l'enregistrement de la prsence")}},m=(b,v)=>{s(y=>({...y,[b]:v}))},g=b=>{const v=Math.floor(b/60),y=b%60;return`${v}h${y.toString().padStart(2,"0")}`},x=u.isPending;return n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx(Xr,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Enregistrer une prsence"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Enregistrer l'arrive, le dpart ou l'absence d'un employ"})]})]}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",required:!0,value:a.attendance_date,onChange:b=>m("attendance_date",b.target.value),max:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employ *"}),n.jsxs("div",{className:"relative",children:[n.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsxs("select",{required:!0,value:a.employee_id,onChange:b=>m("employee_id",b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Slectionnez un employ"}),d.map(b=>n.jsxs("option",{value:b.id,children:[b.first_name," ",b.last_name," - ",b.employee_number]},b.id))]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure d'entre"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"time",value:a.check_in_time,onChange:b=>m("check_in_time",b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure de sortie"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"time",value:a.check_out_time,onChange:b=>m("check_out_time",b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut *"}),n.jsxs("select",{required:!0,value:a.status,onChange:b=>m("status",b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[n.jsx("option",{value:"present",children:"Prsent"}),n.jsx("option",{value:"absent",children:"Absent"}),n.jsx("option",{value:"late",children:"Retard"}),n.jsx("option",{value:"half_day",children:"Demi-journe"}),n.jsx("option",{value:"leave",children:"En cong"}),n.jsx("option",{value:"remote",children:"Tltravail"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temps travaill"}),n.jsx("div",{className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:i!==null?g(i):"-"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes / Commentaires"}),n.jsxs("div",{className:"relative",children:[n.jsx(Fa,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),n.jsx("textarea",{value:a.notes,onChange:b=>m("notes",b.target.value),placeholder:"Notes ou commentaires sur cette prsence...",rows:2,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:n.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Xr,{className:"w-5 h-5"}),x?"Enregistrement...":"Enregistrer la prsence"]})})]})]})}function rSe({requestId:e,onClose:t}){const r=Tt(),[a,s]=k.useState(null),[i,l]=k.useState(""),{data:o,isLoading:d}=Ft({queryKey:["hr-overtime-request",e],queryFn:async()=>(await Ce.get(`/hr/attendance/overtime/requests/${e}`)).data}),u=o,f=St({mutationFn:async S=>(await Ce.put(`/hr/attendance/overtime/requests/${e}/approve`,S)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-overtime-requests"]}),r.invalidateQueries({queryKey:["hr-overtime-request",e]}),alert("Demande d'heures supplmentaires approuve"),t()}}),m=St({mutationFn:async S=>(await Ce.put(`/hr/attendance/overtime/requests/${e}/reject`,S)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-overtime-requests"]}),r.invalidateQueries({queryKey:["hr-overtime-request",e]}),alert("Demande d'heures supplmentaires rejete"),t()}}),g=async()=>{if(!i.trim()){alert("Veuillez ajouter un commentaire");return}try{await f.mutateAsync({comment:i})}catch(S){console.error("Erreur lors de l'approbation:",S),alert(S.response?.data?.error||"Erreur lors de l'approbation de la demande")}},x=async()=>{if(!i.trim()){alert("Veuillez indiquer la raison du rejet");return}try{await m.mutateAsync({reason:i})}catch(S){console.error("Erreur lors du rejet:",S),alert(S.response?.data?.error||"Erreur lors du rejet de la demande")}},b=S=>({pending:"En attente",approved:"Approuv",rejected:"Rejet",cancelled:"Annul"})[S]||S,v=S=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[S]||"bg-gray-100 text-gray-800",y=S=>{const N={urgent:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",normal:"bg-blue-100 text-blue-800",low:"bg-gray-100 text-gray-800"},C={urgent:"Urgent",high:"Haute",normal:"Normal",low:"Basse"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N[S]||N.normal}`,children:C[S]||S})},j=f.isPending||m.isPending;return d?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):u?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:n.jsx(Ll,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Demande d'Heures Supplmentaires"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Validation et approbation"})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${v(u.status)}`,children:b(u.status)}),y(u.priority)]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Demand le ",new Date(u.created_at).toLocaleDateString("fr-FR")]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(il,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Employ"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Nom:"}),n.jsx("p",{className:"font-medium text-gray-900",children:u.employee_name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Matricule:"}),n.jsx("p",{className:"font-medium text-gray-900",children:u.employee_number})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(na,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Dtails des Heures Supplmentaires"})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Date:"}),n.jsx("p",{className:"font-medium text-gray-900",children:new Date(u.request_date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Heure de dbut:"}),n.jsx("p",{className:"font-medium text-gray-900",children:u.start_time})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Heure de fin:"}),n.jsx("p",{className:"font-medium text-gray-900",children:u.end_time})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Heures estimes:"}),n.jsxs("p",{className:"font-bold text-lg text-orange-600",children:[u.estimated_hours,"h"]})]})]})]}),u.reason&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Fa,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Motif"})]}),n.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:u.reason})]}),(u.status==="approved"||u.status==="rejected")&&n.jsx("div",{className:`rounded-lg p-4 ${u.status==="approved"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[u.status==="approved"?n.jsx(Xr,{className:"w-5 h-5 text-green-600 mt-0.5"}):n.jsx(fo,{className:"w-5 h-5 text-red-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:`font-medium ${u.status==="approved"?"text-green-900":"text-red-900"}`,children:u.status==="approved"?"Demande Approuve":"Demande Rejete"}),(u.approved_at||u.rejected_at)&&n.jsx("span",{className:`text-xs ${u.status==="approved"?"text-green-600":"text-red-600"}`,children:new Date(u.approved_at||u.rejected_at).toLocaleString("fr-FR")})]}),n.jsxs("p",{className:"text-sm text-gray-700",children:["Par: ",u.approved_by_name||u.rejected_by_name]}),(u.approval_comment||u.rejection_reason)&&n.jsxs("div",{className:"mt-2 bg-white rounded p-2 text-sm text-gray-700",children:[n.jsx(as,{className:"w-4 h-4 inline mr-1 text-gray-400"}),u.approval_comment||u.rejection_reason]})]})]})}),u.status==="pending"&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-blue-900",children:"Action Requise"})]}),a?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a==="approve"?"Commentaire (obligatoire)":"Raison du rejet (obligatoire)"}),n.jsx("textarea",{value:i,onChange:S=>l(S.target.value),placeholder:a==="approve"?"Ajoutez un commentaire...":"Expliquez la raison du rejet...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{s(null),l("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{onClick:a==="approve"?g:x,disabled:j||!i.trim(),className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${a==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:j?"Traitement...":a==="approve"?"Confirmer l'approbation":"Confirmer le rejet"})]})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>s("approve"),className:"flex-1 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Xr,{className:"w-5 h-5"}),"Approuver"]}),n.jsxs("button",{onClick:()=>s("reject"),className:"flex-1 flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:[n.jsx(fo,{className:"w-5 h-5"}),"Rejeter"]})]})]})]}),n.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50 sticky bottom-0",children:n.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fermer"})})]})}):null}function aSe({attendanceId:e,onClose:t}){const r=Tt(),[a,s]=k.useState({check_in_time:"",check_out_time:"",status:"present",resolution_notes:""}),{data:i,isLoading:l}=Ft({queryKey:["hr-attendance-record",e],queryFn:async()=>(await Ce.get(`/hr/attendance/${e}`)).data}),o=i;k.useState(()=>{o&&s({check_in_time:o.check_in_time||"",check_out_time:o.check_out_time||"",status:o.status,resolution_notes:""})});const d=St({mutationFn:async b=>(await Ce.put(`/hr/attendance/${e}/resolve`,b)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-attendance"]}),r.invalidateQueries({queryKey:["hr-attendance-anomalies"]}),r.invalidateQueries({queryKey:["hr-attendance-record",e]}),alert("Anomalie rsolue avec succs"),t()}}),u=async b=>{if(b.preventDefault(),!a.resolution_notes.trim()){alert("Veuillez ajouter une note de rsolution");return}if(a.status==="present"&&!a.check_in_time&&!a.check_out_time){alert('Veuillez renseigner au moins une heure pour un statut "prsent"');return}if(a.check_in_time&&a.check_out_time){const v=new Date(`${o?.attendance_date}T${a.check_in_time}`);if(new Date(`${o?.attendance_date}T${a.check_out_time}`)<=v){alert("L'heure de sortie doit tre aprs l'heure d'entre");return}}try{await d.mutateAsync(a)}catch(v){console.error("Erreur lors de la rsolution:",v),alert(v.response?.data?.error||"Erreur lors de la rsolution de l'anomalie")}},f=(b,v)=>{s(y=>({...y,[b]:v}))},m=b=>({missing_check_in:"Heure d'entre manquante",missing_check_out:"Heure de sortie manquante",excessive_hours:"Heures excessives",late_without_status:"Retard sans statut",early_departure:"Dpart anticip",weekend_work_unplanned:"Travail de week-end non planifi"})[b]||b,g=b=>({missing_check_in:"L'heure d'arrive n'a pas t enregistre",missing_check_out:"L'heure de dpart n'a pas t enregistre",excessive_hours:"La dure de travail dpasse les limites normales",late_without_status:"Retard non justifi par le statut",early_departure:"Dpart avant l'heure prvue",weekend_work_unplanned:"Prsence dtecte un week-end sans planification"})[b]||"",x=d.isPending;return l?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):!o||!o.is_anomaly?null:n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:n.jsx(co,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Rsolution d'Anomalie"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Corriger une anomalie de prsence"})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(co,{className:"w-5 h-5 text-red-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-red-900",children:m(o.anomaly_type)}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:g(o.anomaly_type)})]})]})}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(il,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Employ"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Nom:"}),n.jsx("p",{className:"font-medium text-gray-900",children:o.employee_name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Matricule:"}),n.jsx("p",{className:"font-medium text-gray-900",children:o.employee_number})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(ba,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Donnes Actuelles"})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Date:"}),n.jsx("p",{className:"font-medium text-gray-900",children:new Date(o.attendance_date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Heure d'entre:"}),n.jsx("p",{className:`font-medium ${o.check_in_time?"text-gray-900":"text-red-600"}`,children:o.check_in_time||"Non enregistre"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Heure de sortie:"}),n.jsx("p",{className:`font-medium ${o.check_out_time?"text-gray-900":"text-red-600"}`,children:o.check_out_time||"Non enregistre"})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temps travaill:"}),n.jsx("p",{className:"font-medium text-gray-900",children:o.worked_minutes?(o.worked_minutes/60).toFixed(2)+"h":"Non calcul"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Statut:"}),n.jsx("p",{className:"font-medium text-gray-900",children:o.status})]}),o.notes&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Notes:"}),n.jsx("p",{className:"text-gray-900",children:o.notes})]})]})]}),n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Xr,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-blue-900",children:"Correction de l'Anomalie"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure d'entre"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"time",value:a.check_in_time,onChange:b=>f("check_in_time",b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure de sortie"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"time",value:a.check_out_time,onChange:b=>f("check_out_time",b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut corrig *"}),n.jsxs("select",{required:!0,value:a.status,onChange:b=>f("status",b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"present",children:"Prsent"}),n.jsx("option",{value:"absent",children:"Absent"}),n.jsx("option",{value:"late",children:"Retard"}),n.jsx("option",{value:"half_day",children:"Demi-journe"}),n.jsx("option",{value:"leave",children:"En cong"}),n.jsx("option",{value:"remote",children:"Tltravail"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Notes de rsolution * ",n.jsx("span",{className:"text-xs text-gray-500",children:"(Obligatoire)"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Fa,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),n.jsx("textarea",{required:!0,value:a.resolution_notes,onChange:b=>f("resolution_notes",b.target.value),placeholder:"Expliquez la correction apporte et la raison de l'anomalie...",rows:3,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Dcrivez la nature de l'anomalie et comment vous l'avez corrige"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsxs("button",{type:"submit",disabled:x,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Xr,{className:"w-5 h-5"}),x?"Rsolution en cours...":"Rsoudre l'anomalie"]})]})]}),o.anomaly_resolved&&o.resolved_by_name&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Xr,{className:"w-5 h-5 text-green-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"font-medium text-green-900",children:"Anomalie Rsolue"}),o.resolved_at&&n.jsx("span",{className:"text-xs text-green-600",children:new Date(o.resolved_at).toLocaleString("fr-FR")})]}),n.jsxs("p",{className:"text-sm text-green-700",children:["Par: ",o.resolved_by_name]}),o.resolution_notes&&n.jsx("div",{className:"mt-2 bg-white rounded p-2 text-sm text-gray-700",children:o.resolution_notes})]})]})})]})]})})}function nSe(){const{hr:e}=Mp(),[t,r]=k.useState("records"),[a,s]=k.useState(""),[i,l]=k.useState(""),[o,d]=k.useState(new Date().toISOString().split("T")[0]),[u,f]=k.useState(new Date().toISOString().split("T")[0]),[m,g]=k.useState(!1),[x,b]=k.useState(null),[v,y]=k.useState(!1),[j,S]=k.useState(null),{data:N,isLoading:C}=Ft({queryKey:["hr-attendance",o,u,i,a],queryFn:async()=>{const G=new URLSearchParams;return o&&G.append("start_date",o),u&&G.append("end_date",u),i&&G.append("status",i),(await Ce.get(`/hr/attendance?${G.toString()}`)).data},enabled:t==="records"}),{data:T,isLoading:P}=Ft({queryKey:["hr-attendance-anomalies"],queryFn:async()=>(await Ce.get("/hr/attendance/anomalies")).data,enabled:t==="anomalies"}),{data:D,isLoading:M}=Ft({queryKey:["hr-overtime-requests",i],queryFn:async()=>{const G=new URLSearchParams;return i&&G.append("status",i),(await Ce.get(`/hr/attendance/overtime/requests?${G.toString()}`)).data},enabled:t==="overtime"}),F=N||[],H=T||[],L=D||[],z=G=>{const ie={present:"bg-green-100 text-green-800",absent:"bg-red-100 text-red-800",late:"bg-yellow-100 text-yellow-800",leave:"bg-blue-100 text-blue-800",half_day:"bg-purple-100 text-purple-800"},Z={present:"Prsent",absent:"Absent",late:"Retard",leave:"Cong",half_day:"Demi-journe"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ie[G]||"bg-gray-100 text-gray-800"}`,children:Z[G]||G})},V=G=>{const ie={urgent:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",normal:"bg-blue-100 text-blue-800",low:"bg-gray-100 text-gray-800"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ie[G]||ie.normal}`,children:G})};return n.jsx(Ut,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(na,{className:"h-7 w-7 text-blue-600"}),"Temps & Prsence"]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Gestion de la prsence, anomalies et heures supplmentaires"})]}),e.canRecordAttendance&&n.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Jr,{className:"h-5 w-5"}),"Enregistrer Prsence"]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>r("records"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="records"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(na,{className:"h-4 w-4 inline mr-2"}),"Enregistrements"]}),n.jsxs("button",{onClick:()=>r("anomalies"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="anomalies"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(co,{className:"h-4 w-4 inline mr-2"}),"Anomalies (",H.length,")"]}),n.jsxs("button",{onClick:()=>r("overtime"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="overtime"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Ll,{className:"h-4 w-4 inline mr-2"}),"Heures Supplmentaires"]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Rechercher un employ...",value:a,onChange:G=>s(G.target.value),className:"pl-10 w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500"})]}),n.jsx("div",{children:n.jsx("input",{type:"date",value:o,onChange:G=>d(G.target.value),className:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500"})}),n.jsx("div",{children:n.jsx("input",{type:"date",value:u,onChange:G=>f(G.target.value),className:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500"})}),n.jsx("div",{children:n.jsxs("select",{value:i,onChange:G=>l(G.target.value),className:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Tous les statuts"}),n.jsx("option",{value:"present",children:"Prsent"}),n.jsx("option",{value:"absent",children:"Absent"}),n.jsx("option",{value:"late",children:"Retard"}),n.jsx("option",{value:"leave",children:"Cong"}),n.jsx("option",{value:"half_day",children:"Demi-journe"})]})}),n.jsxs("button",{className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200",children:[n.jsx(Tp,{className:"h-4 w-4"}),"Filtres"]})]})}),t==="records"&&n.jsxs(n.Fragment,{children:[e.canRecordAttendance&&n.jsx(tSe,{}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:C?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):F.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(na,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Aucun enregistrement trouv"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entre"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sortie"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Heures"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(G=>n.jsxs("tr",{className:G.is_anomaly?"bg-red-50":"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"font-medium text-gray-900",children:G.employee_name}),n.jsx("div",{className:"text-sm text-gray-500",children:G.employee_number})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(G.attendance_date).toLocaleDateString("fr-FR")}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G.check_in_time||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G.check_out_time||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G.worked_minutes?(G.worked_minutes/60).toFixed(2)+"h":"-"}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[z(G.status),G.is_anomaly&&n.jsx(co,{className:"h-4 w-4 text-red-500 inline ml-2"})]})]},G.id))})]})})})]}),t==="anomalies"&&n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:P?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):H.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(oh,{className:"h-12 w-12 text-green-500 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Aucune anomalie  rsoudre"})]}):n.jsx("div",{className:"divide-y divide-gray-200",children:H.map(G=>n.jsx("div",{className:"p-4 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(co,{className:"h-5 w-5 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:G.employee_name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[G.employee_number,"  ",new Date(G.attendance_date).toLocaleDateString("fr-FR")]})]})]}),n.jsxs("p",{className:"mt-2 text-sm text-red-600",children:["Type: ",G.anomaly_type?.replace("_"," ")]})]}),e.canCorrectAttendance&&n.jsx("button",{onClick:()=>{S(G.id),y(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm hover:bg-blue-700",children:"Rsoudre"})]})},G.id))})}),t==="overtime"&&n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:M?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):L.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Ll,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Aucune demande d'heures supplmentaires"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horaires"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Heures"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priorit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(G=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{b(G.id),g(!0)},children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"font-medium text-gray-900",children:G.employee_name}),n.jsx("div",{className:"text-sm text-gray-500",children:G.employee_number})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(G.request_date).toLocaleDateString("fr-FR")}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[G.start_time," - ",G.end_time]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[G.estimated_hours,"h"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:V(G.priority)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z(G.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsx("button",{className:"text-blue-600 hover:text-blue-900",onClick:ie=>{ie.stopPropagation(),b(G.id),g(!0)},children:"Voir dtails"})})]},G.id))})]})})}),m&&x&&n.jsx(rSe,{requestId:x,onClose:()=>{g(!1),b(null)}}),v&&j&&n.jsx(aSe,{attendanceId:j,onClose:()=>{y(!1),S(null)}})]})})}function sSe({employeeId:e,onClose:t}){const r=Tt(),[a,s]=k.useState({employee_id:e||"",leave_type_id:"",start_date:"",end_date:"",start_half_day:!1,end_half_day:!1,reason:"",contact_during_leave:"",handover_notes:""}),[i,l]=k.useState(0),{data:o}=Ft({queryKey:["hr-leave-types"],queryFn:async()=>(await Ce.get("/hr/leaves/types")).data}),d=o||[],{data:u}=Ft({queryKey:["hr-employees-active"],queryFn:async()=>(await Ce.get("/hr/employees?status=active")).data,enabled:!e}),f=u||[];k.useEffect(()=>{if(a.start_date&&a.end_date){const y=new Date(a.start_date),j=new Date(a.end_date);if(j>=y){const S=Math.abs(j.getTime()-y.getTime());let N=Math.ceil(S/(1e3*60*60*24))+1;a.start_half_day&&(N-=.5),a.end_half_day&&(N-=.5),l(Math.max(0,N))}}},[a.start_date,a.end_date,a.start_half_day,a.end_half_day]);const m=d.find(y=>y.id===a.leave_type_id),g=St({mutationFn:async y=>(await Ce.post("/hr/leaves/requests",y)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-leave-requests"]}),t()}}),x=async y=>{if(y.preventDefault(),!a.employee_id||!a.leave_type_id||!a.start_date||!a.end_date){alert("Veuillez remplir tous les champs obligatoires");return}if(new Date(a.end_date)<new Date(a.start_date)){alert("La date de fin doit tre aprs la date de dbut");return}if(m?.max_days_per_request&&i>m.max_days_per_request){alert(`Le nombre maximum de jours pour ce type de cong est ${m.max_days_per_request}`);return}if(m&&i<m.min_days_per_request){alert(`Le nombre minimum de jours pour ce type de cong est ${m.min_days_per_request}`);return}try{await g.mutateAsync(a)}catch(j){console.error("Erreur lors de la cration de la demande:",j),alert(j.response?.data?.error||"Erreur lors de la cration de la demande de cong")}},b=(y,j)=>{s(S=>({...S,[y]:j}))},v=g.isPending;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx(ku,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nouvelle demande de cong"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Crer une demande de cong pour un employ"})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[!e&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employ *"}),n.jsxs("div",{className:"relative",children:[n.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsxs("select",{required:!0,value:a.employee_id,onChange:y=>b("employee_id",y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Slectionnez un employ"}),f.map(y=>n.jsxs("option",{value:y.id,children:[y.first_name," ",y.last_name," - ",y.employee_number]},y.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de cong *"}),n.jsxs("select",{required:!0,value:a.leave_type_id,onChange:y=>b("leave_type_id",y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Slectionnez un type de cong"}),d.map(y=>n.jsxs("option",{value:y.id,children:[y.name," ",y.is_paid?"(Pay)":"(Non pay)"]},y.id))]}),m&&n.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:m.color}}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Min: ",m.min_days_per_request," jour(s)",m.max_days_per_request&&`  Max: ${m.max_days_per_request} jour(s)`]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de dbut *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",required:!0,value:a.start_date,onChange:y=>b("start_date",y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsx("div",{className:"mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx("input",{type:"checkbox",checked:a.start_half_day,onChange:y=>b("start_half_day",y.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Demi-journe (matin uniquement)"]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"date",required:!0,value:a.end_date,onChange:y=>b("end_date",y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsx("div",{className:"mt-2",children:n.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx("input",{type:"checkbox",checked:a.end_half_day,onChange:y=>b("end_half_day",y.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Demi-journe (aprs-midi uniquement)"]})})]})]}),i>0&&n.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-purple-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-purple-900",children:["Dure estime: ",n.jsxs("span",{className:"font-bold",children:[i," jour(s)"]})]}),n.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:["Du ",a.start_date&&new Date(a.start_date).toLocaleDateString("fr-FR")," au ",a.end_date&&new Date(a.end_date).toLocaleDateString("fr-FR")]})]})]})}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Motif ",m?.requires_justification&&"*"]}),n.jsxs("div",{className:"relative",children:[n.jsx(Fa,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),n.jsx("textarea",{required:m?.requires_justification,value:a.reason,onChange:y=>b("reason",y.target.value),placeholder:"Expliquez la raison de votre demande...",rows:3,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact durant le cong"}),n.jsxs("div",{className:"relative",children:[n.jsx(Jx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:a.contact_during_leave,onChange:y=>b("contact_during_leave",y.target.value),placeholder:"Tlphone ou email de contact",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes de passation"}),n.jsx("textarea",{value:a.handover_notes,onChange:y=>b("handover_notes",y.target.value),placeholder:"Informations de passation des tches pendant l'absence...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Dcrivez comment vos tches seront gres pendant votre absence"})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Envoi en cours...":"Soumettre la demande"})]})]})]})})}function iSe({requestId:e,onClose:t}){const r=Tt(),[a,s]=k.useState(null),[i,l]=k.useState(""),{data:o,isLoading:d}=Ft({queryKey:["hr-leave-request",e],queryFn:async()=>(await Ce.get(`/hr/leaves/requests/${e}`)).data}),u=o,f=St({mutationFn:async j=>(await Ce.put(`/hr/leaves/requests/${e}/approve`,j)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-leave-requests"]}),r.invalidateQueries({queryKey:["hr-leave-request",e]}),alert("Demande approuve avec succs"),t()}}),m=St({mutationFn:async j=>(await Ce.put(`/hr/leaves/requests/${e}/reject`,j)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["hr-leave-requests"]}),r.invalidateQueries({queryKey:["hr-leave-request",e]}),alert("Demande rejete"),t()}}),g=async()=>{if(!i.trim()){alert("Veuillez ajouter un commentaire");return}try{await f.mutateAsync({comment:i})}catch(j){console.error("Erreur lors de l'approbation:",j),alert(j.response?.data?.error||"Erreur lors de l'approbation de la demande")}},x=async()=>{if(!i.trim()){alert("Veuillez indiquer la raison du rejet");return}try{await m.mutateAsync({reason:i})}catch(j){console.error("Erreur lors du rejet:",j),alert(j.response?.data?.error||"Erreur lors du rejet de la demande")}},b=j=>({pending:"En attente N+1",approved_n1:"Approuv N+1 - En attente N+2",approved_n2:"Approuv N+2 - En attente RH",approved_hr:"Approuv RH - Valid",approved:"Approuv",rejected:"Rejet"})[j]||j,v=j=>({pending:"bg-yellow-100 text-yellow-800",approved_n1:"bg-blue-100 text-blue-800",approved_n2:"bg-indigo-100 text-indigo-800",approved_hr:"bg-green-100 text-green-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[j]||"bg-gray-100 text-gray-800",y=f.isPending||m.isPending;return d?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):u?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx(ku,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Demande de Cong"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Validation et approbation"})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{children:n.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${v(u.status)}`,children:b(u.status)})}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Demand le ",new Date(u.created_at).toLocaleDateString("fr-FR")]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(il,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Employ"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Nom:"}),n.jsx("p",{className:"font-medium text-gray-900",children:u.employee_name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Matricule:"}),n.jsx("p",{className:"font-medium text-gray-900",children:u.employee_number})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(ku,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Dtails du Cong"})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u.leave_type_color}}),n.jsx("span",{className:"font-medium text-gray-900",children:u.leave_type_name})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Du:"}),n.jsxs("p",{className:"font-medium text-gray-900",children:[new Date(u.start_date).toLocaleDateString("fr-FR"),u.start_half_day&&" (Matin uniquement)"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Au:"}),n.jsxs("p",{className:"font-medium text-gray-900",children:[new Date(u.end_date).toLocaleDateString("fr-FR"),u.end_half_day&&" (Aprs-midi uniquement)"]})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Dure totale:"}),n.jsxs("p",{className:"font-bold text-lg text-purple-600",children:[u.total_days," jour(s)"]})]})]})]}),u.reason&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Fa,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Motif"})]}),n.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:u.reason})]}),(u.contact_during_leave||u.handover_notes)&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.contact_during_leave&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Contact durant le cong"}),n.jsx("p",{className:"text-sm text-gray-700",children:u.contact_during_leave})]}),u.handover_notes&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Notes de passation"}),n.jsx("p",{className:"text-sm text-gray-700",children:u.handover_notes})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(na,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Historique d'Approbation"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u.n1_approved_at?"bg-green-100":"bg-gray-200"}`,children:u.n1_approved_at?n.jsx(Xr,{className:"w-5 h-5 text-green-600"}):n.jsx(na,{className:"w-5 h-5 text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Approbation N+1"}),u.n1_approved_at&&n.jsx("span",{className:"text-xs text-gray-500",children:new Date(u.n1_approved_at).toLocaleString("fr-FR")})]}),u.n1_approver_name&&n.jsxs("p",{className:"text-sm text-gray-600",children:["Par: ",u.n1_approver_name]}),u.n1_comment&&n.jsxs("div",{className:"mt-1 bg-white rounded p-2 text-sm text-gray-700",children:[n.jsx(as,{className:"w-4 h-4 inline mr-1 text-gray-400"}),u.n1_comment]}),!u.n1_approved_at&&u.status==="pending"&&n.jsx("p",{className:"text-sm text-yellow-600",children:"En attente d'approbation"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u.n2_approved_at?"bg-green-100":"bg-gray-200"}`,children:u.n2_approved_at?n.jsx(Xr,{className:"w-5 h-5 text-green-600"}):n.jsx(na,{className:"w-5 h-5 text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Approbation N+2"}),u.n2_approved_at&&n.jsx("span",{className:"text-xs text-gray-500",children:new Date(u.n2_approved_at).toLocaleString("fr-FR")})]}),u.n2_approver_name&&n.jsxs("p",{className:"text-sm text-gray-600",children:["Par: ",u.n2_approver_name]}),u.n2_comment&&n.jsxs("div",{className:"mt-1 bg-white rounded p-2 text-sm text-gray-700",children:[n.jsx(as,{className:"w-4 h-4 inline mr-1 text-gray-400"}),u.n2_comment]}),!u.n2_approved_at&&u.status==="approved_n1"&&n.jsx("p",{className:"text-sm text-yellow-600",children:"En attente d'approbation"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u.hr_approved_at?"bg-green-100":"bg-gray-200"}`,children:u.hr_approved_at?n.jsx(Xr,{className:"w-5 h-5 text-green-600"}):n.jsx(na,{className:"w-5 h-5 text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Approbation RH"}),u.hr_approved_at&&n.jsx("span",{className:"text-xs text-gray-500",children:new Date(u.hr_approved_at).toLocaleString("fr-FR")})]}),u.hr_approver_name&&n.jsxs("p",{className:"text-sm text-gray-600",children:["Par: ",u.hr_approver_name]}),u.hr_comment&&n.jsxs("div",{className:"mt-1 bg-white rounded p-2 text-sm text-gray-700",children:[n.jsx(as,{className:"w-4 h-4 inline mr-1 text-gray-400"}),u.hr_comment]}),!u.hr_approved_at&&u.status==="approved_n2"&&n.jsx("p",{className:"text-sm text-yellow-600",children:"En attente d'approbation finale"})]})]}),u.status==="rejected"&&u.rejected_by_name&&n.jsxs("div",{className:"flex items-start gap-3 mt-4 p-3 bg-red-50 rounded-lg",children:[n.jsx(fo,{className:"w-5 h-5 text-red-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium text-red-900",children:"Demande Rejete"}),u.rejected_at&&n.jsx("span",{className:"text-xs text-red-600",children:new Date(u.rejected_at).toLocaleString("fr-FR")})]}),n.jsxs("p",{className:"text-sm text-red-700",children:["Par: ",u.rejected_by_name]}),u.rejection_reason&&n.jsxs("div",{className:"mt-1 bg-white rounded p-2 text-sm text-gray-700",children:[n.jsx(as,{className:"w-4 h-4 inline mr-1 text-gray-400"}),u.rejection_reason]})]})]})]})]}),u.status!=="rejected"&&u.status!=="approved"&&u.status!=="approved_hr"&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-blue-900",children:"Action Requise"})]}),a?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a==="approve"?"Commentaire (obligatoire)":"Raison du rejet (obligatoire)"}),n.jsx("textarea",{value:i,onChange:j=>l(j.target.value),placeholder:a==="approve"?"Ajoutez un commentaire...":"Expliquez la raison du rejet...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{s(null),l("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{onClick:a==="approve"?g:x,disabled:y||!i.trim(),className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${a==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:y?"Traitement...":a==="approve"?"Confirmer l'approbation":"Confirmer le rejet"})]})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>s("approve"),className:"flex-1 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Xr,{className:"w-5 h-5"}),"Approuver"]}),n.jsxs("button",{onClick:()=>s("reject"),className:"flex-1 flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:[n.jsx(fo,{className:"w-5 h-5"}),"Rejeter"]})]})]})]}),n.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50 sticky bottom-0",children:n.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fermer"})})]})}):null}function lSe(){const{hr:e}=Mp(),[t,r]=k.useState("requests"),[a,s]=k.useState(""),[i,l]=k.useState(""),[o,d]=k.useState(!1),[u,f]=k.useState(!1),[m,g]=k.useState(null),{data:x,isLoading:b}=Ft({queryKey:["hr-leave-requests",i],queryFn:async()=>{const C=new URLSearchParams;return i&&C.append("status",i),(await Ce.get(`/hr/leaves/requests?${C.toString()}`)).data},enabled:t==="requests"}),{data:v}=Ft({queryKey:["hr-holidays"],queryFn:async()=>(await Ce.get("/hr/leaves/holidays")).data,enabled:t==="holidays"}),y=x||[],j=v||[],S=C=>{const T={pending:"bg-yellow-100 text-yellow-800",approved_n1:"bg-blue-100 text-blue-800",approved_n2:"bg-indigo-100 text-indigo-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"},P={pending:"En attente",approved_n1:"Approuv N+1",approved_n2:"Approuv N+2",approved:"Approuv",rejected:"Rejet",cancelled:"Annul"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T[C]||"bg-gray-100 text-gray-800"}`,children:P[C]||C})},N=C=>{const T={paid:"bg-green-100 text-green-800",unpaid:"bg-gray-100 text-gray-800",worked_with_bonus:"bg-purple-100 text-purple-800",optional:"bg-blue-100 text-blue-800"},P={paid:"Pay",unpaid:"Non pay",worked_with_bonus:"Travaill avec prime",optional:"Optionnel"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T[C]||T.paid}`,children:P[C]||C})};return n.jsx(Ut,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(ku,{className:"h-7 w-7 text-blue-600"}),"Congs & Planning"]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Gestion des demandes de congs, soldes et jours fris"})]}),e.canRequestLeave&&n.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Jr,{className:"h-5 w-5"}),"Nouvelle Demande"]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>r("requests"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="requests"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(ku,{className:"h-4 w-4 inline mr-2"}),"Demandes de Congs"]}),n.jsxs("button",{onClick:()=>r("balances"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="balances"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Ll,{className:"h-4 w-4 inline mr-2"}),"Soldes de Congs"]}),n.jsxs("button",{onClick:()=>r("calendar"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="calendar"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(ba,{className:"h-4 w-4 inline mr-2"}),"Calendrier"]}),n.jsxs("button",{onClick:()=>r("holidays"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="holidays"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(na,{className:"h-4 w-4 inline mr-2"}),"Jours Fris"]})]})}),t==="requests"&&n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ou,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Rechercher un employ...",value:a,onChange:C=>s(C.target.value),className:"pl-10 w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500"})]}),n.jsx("div",{children:n.jsxs("select",{value:i,onChange:C=>l(C.target.value),className:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Tous les statuts"}),n.jsx("option",{value:"pending",children:"En attente"}),n.jsx("option",{value:"approved_n1",children:"Approuv N+1"}),n.jsx("option",{value:"approved_n2",children:"Approuv N+2"}),n.jsx("option",{value:"approved",children:"Approuv"}),n.jsx("option",{value:"rejected",children:"Rejet"})]})})]})}),t==="requests"&&n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:b?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):y.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(ku,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Aucune demande de cong trouve"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type de Cong"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priode"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jours"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Niveau"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{g(C.id),f(!0)},children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"font-medium text-gray-900",children:C.employee_name}),n.jsx("div",{className:"text-sm text-gray-500",children:C.employee_number})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.leave_type_color}}),n.jsx("span",{className:"text-sm text-gray-900",children:C.leave_type})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.jsxs("div",{children:[new Date(C.start_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}),"  ",new Date(C.end_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C.days_requested}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(C.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:C.current_approver_level}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsx("button",{className:"text-blue-600 hover:text-blue-900",onClick:T=>{T.stopPropagation(),g(C.id),f(!0)},children:"Voir dtails"})})]},C.id))})]})})}),t==="balances"&&n.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[n.jsx(Ll,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Soldes de Congs"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Cette fonctionnalit affichera les soldes de congs par employ."}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Slectionnez un employ pour voir ses soldes dtaills."})]}),t==="calendar"&&n.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[n.jsx(ba,{className:"h-12 w-12 text-gray-400 mx-auto"}),n.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Calendrier des Congs"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Cette fonctionnalit affichera un calendrier visuel des congs approuvs."})]}),t==="holidays"&&n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Jours Fris ",new Date().getFullYear()]}),e.canManageHolidays&&n.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm hover:bg-blue-700",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Ajouter"]})]}),n.jsx("div",{className:"divide-y divide-gray-200",children:j.map(C=>n.jsx("div",{className:"p-4 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ba,{className:"h-5 w-5 text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:C.name}),C.description&&n.jsx("p",{className:"text-sm text-gray-600",children:C.description})]})]})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(C.holiday_date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})}),N(C.holiday_type)]})]})},C.id))})]}),o&&n.jsx(sSe,{onClose:()=>d(!1)}),u&&m&&n.jsx(iSe,{requestId:m,onClose:()=>{f(!1),g(null)}})]})})}function oSe({settingKey:e,settingName:t,currentValue:r,onClose:a}){const s=Tt(),[i,l]=k.useState(r);k.useEffect(()=>{l(r)},[r]);const o=St({mutationFn:async g=>(await Ce.put(`/hr/settings/${e}`,{setting_value:g})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["hr-settings"]}),alert("Paramtres mis  jour avec succs"),a()},onError:g=>{console.error("Error updating setting:",g),alert(g.response?.data?.error||"Erreur lors de la mise  jour des paramtres")}}),d=g=>{if(g.preventDefault(),e==="attendance_rules"){const x=i;if(x.min_hours_for_half_day>x.min_hours_for_full_day){alert("Les heures minimum pour une demi-journe ne peuvent pas dpasser celles d'une journe complte");return}}if(e==="leave_rules"){const x=i;if(!x.allow_negative_balance&&x.max_negative_days>0){alert("Le nombre de jours ngatifs doit tre 0 si le solde ngatif n'est pas autoris");return}}o.mutate(i)},u=(g,x)=>{l(b=>({...b,[g]:x}))},f=()=>{const g=i;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tolrance de retard (minutes)"}),n.jsx("input",{type:"number",min:"0",value:g.late_tolerance_minutes,onChange:x=>u("late_tolerance_minutes",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Temps de retard acceptable avant pnalit"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tolrance de dpart anticip (minutes)"}),n.jsx("input",{type:"number",min:"0",value:g.early_leave_tolerance_minutes,onChange:x=>u("early_leave_tolerance_minutes",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Temps de dpart anticip acceptable"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heures minimum pour journe complte"}),n.jsx("input",{type:"number",min:"0",step:"0.5",value:g.min_hours_for_full_day,onChange:x=>u("min_hours_for_full_day",parseFloat(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre d'heures requis pour compter une journe complte"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heures minimum pour demi-journe"}),n.jsx("input",{type:"number",min:"0",step:"0.5",value:g.min_hours_for_half_day,onChange:x=>u("min_hours_for_half_day",parseFloat(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre d'heures requis pour compter une demi-journe"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-marquer absent aprs (heures)"}),n.jsx("input",{type:"number",min:"0",step:"0.5",value:g.auto_mark_absent_after_hours,onChange:x=>u("auto_mark_absent_after_hours",parseFloat(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Marquer automatiquement absent si pas de pointage aprs X heures"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.require_justification_for_absence,onChange:x=>u("require_justification_for_absence",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"Exiger une justification pour les absences"})]})]})},m=()=>{const g=i;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'accumulation congs annuels (jours/mois)"}),n.jsx("input",{type:"number",min:"0",step:"0.1",value:g.annual_leave_accrual_rate,onChange:x=>u("annual_leave_accrual_rate",parseFloat(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre de jours de cong accumuls par mois travaill"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum de jours de congs annuels"}),n.jsx("input",{type:"number",min:"0",value:g.annual_leave_max_days,onChange:x=>u("annual_leave_max_days",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre maximum de jours de congs par an"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.allow_negative_balance,onChange:x=>u("allow_negative_balance",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"Permettre un solde de congs ngatif"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum de jours en ngatif"}),n.jsx("input",{type:"number",min:"0",value:g.max_negative_days,onChange:x=>u("max_negative_days",parseInt(x.target.value)),disabled:!g.allow_negative_balance,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre de jours ngatifs autoriss (0 si non permis)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.carry_over_allowed,onChange:x=>u("carry_over_allowed",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"Autoriser le report de congs"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum de jours reportables"}),n.jsx("input",{type:"number",min:"0",value:g.max_carry_over_days,onChange:x=>u("max_carry_over_days",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre maximum de jours pouvant tre reports"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiration des congs reports (mois)"}),n.jsx("input",{type:"number",min:"0",value:g.carry_over_expiry_months,onChange:x=>u("carry_over_expiry_months",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre de mois avant expiration des congs reports"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pravis minimum (jours)"}),n.jsx("input",{type:"number",min:"0",value:g.min_advance_notice_days,onChange:x=>u("min_advance_notice_days",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre de jours de pravis requis pour une demande de cong"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.block_overlapping_requests,onChange:x=>u("block_overlapping_requests",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"Bloquer les demandes de congs qui se chevauchent"})]})]})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(Xg,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Modifier les Paramtres"}),n.jsx("p",{className:"text-sm text-gray-500",children:t})]})]}),n.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Mr,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:d,className:"p-6",children:[e==="attendance_rules"&&f(),e==="leave_rules"&&m(),n.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsxs("button",{type:"submit",disabled:o.isPending,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Td,{className:"w-5 h-5"}),o.isPending?"Enregistrement...":"Enregistrer"]})]})]})]})})}function cSe(){const{hr:e}=Mp(),[t,r]=k.useState("general"),[a,s]=k.useState(!1),[i,l]=k.useState(null),{data:o,isLoading:d}=Ft({queryKey:["hr-leave-types"],queryFn:async()=>(await Ce.get("/hr/settings/leave-types/all")).data,enabled:t==="leave-types"}),{data:u,isLoading:f}=Ft({queryKey:["hr-work-schedules"],queryFn:async()=>(await Ce.get("/hr/settings/schedules/all")).data,enabled:t==="schedules"}),{data:m,isLoading:g}=Ft({queryKey:["hr-settings"],queryFn:async()=>(await Ce.get("/hr/settings")).data,enabled:t==="general"}),x=o||[],b=u||[],y=(m||[]).reduce((N,C)=>(N[C.category]||(N[C.category]=[]),N[C.category].push(C),N),{}),j=N=>{if(N.setting_key==="attendance_rules"){const C=N.setting_value;return n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Tolrance retard:"})," ",n.jsxs("span",{className:"font-medium",children:[C.late_tolerance_minutes," min"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Tolrance dpart:"})," ",n.jsxs("span",{className:"font-medium",children:[C.early_leave_tolerance_minutes," min"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Heures journe complte:"})," ",n.jsxs("span",{className:"font-medium",children:[C.min_hours_for_full_day,"h"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Heures demi-journe:"})," ",n.jsxs("span",{className:"font-medium",children:[C.min_hours_for_half_day,"h"]})]})]})}if(N.setting_key==="leave_rules"){const C=N.setting_value;return n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Congs annuels max:"})," ",n.jsxs("span",{className:"font-medium",children:[C.annual_leave_max_days," jours"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Taux accumulation:"})," ",n.jsxs("span",{className:"font-medium",children:[C.annual_leave_accrual_rate," j/mois"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Report autoris:"})," ",n.jsx("span",{className:"font-medium",children:C.carry_over_allowed?"Oui":"Non"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Pravis minimum:"})," ",n.jsxs("span",{className:"font-medium",children:[C.min_advance_notice_days," jours"]})]})]})}return n.jsx("div",{className:"text-sm text-gray-700",children:JSON.stringify(N.setting_value)})},S=N=>{l(N),s(!0)};return n.jsxs(Ut,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(Xg,{className:"h-7 w-7 text-blue-600"}),"Paramtres RH"]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Configuration des paramtres, types de congs et horaires de travail"})]})}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>r("general"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="general"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(fK,{className:"h-4 w-4 inline mr-2"}),"Paramtres Gnraux"]}),n.jsxs("button",{onClick:()=>r("leave-types"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="leave-types"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(ku,{className:"h-4 w-4 inline mr-2"}),"Types de Congs"]}),n.jsxs("button",{onClick:()=>r("schedules"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="schedules"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(na,{className:"h-4 w-4 inline mr-2"}),"Horaires de Travail"]})]})}),t==="general"&&n.jsx("div",{className:"space-y-6",children:g?n.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):Object.keys(y).map(N=>n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:N.replace("_"," ")})}),n.jsx("div",{className:"p-4 space-y-4",children:y[N].map(C=>n.jsxs("div",{className:"py-4 border-b border-gray-100 last:border-0",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:C.setting_key}),C.description&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description})]}),C.is_editable&&e.canUpdateSettings&&n.jsxs("button",{onClick:()=>S(C),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1 text-sm",children:[n.jsx(Mc,{className:"h-4 w-4"}),"Modifier"]})]}),n.jsx("div",{className:"bg-gray-50 px-4 py-3 rounded-lg",children:j(C)})]},C.id))})]},N))}),t==="leave-types"&&n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Types de Congs"}),e.canManageLeaveTypes&&n.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm hover:bg-blue-700",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Ajouter un Type"]})]}),d?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jours par dfaut"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Workflow"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dduit du solde"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(N=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:N.color}}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:N.name}),N.description&&n.jsx("div",{className:"text-sm text-gray-500",children:N.description})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:N.code}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[N.default_days," jours"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.approval_workflow.toUpperCase()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.deducts_from_balance?n.jsx("span",{className:"text-green-600 text-sm",children:" Oui"}):n.jsx("span",{className:"text-gray-400 text-sm",children:" Non"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.is_active?"Actif":"Inactif"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.canManageLeaveTypes&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Mc,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Pr,{className:"h-4 w-4"})})]})})]},N.id))})]})})]}),t==="schedules"&&n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Horaires de Travail"}),e.canManageSchedules&&n.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm hover:bg-blue-700",children:[n.jsx(Jr,{className:"h-4 w-4"}),"Ajouter un Horaire"]})]}),f?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):n.jsx("div",{className:"divide-y divide-gray-200",children:b.map(N=>n.jsx("div",{className:"p-6 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(na,{className:"h-5 w-5 text-blue-500"}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[N.name,N.is_default&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:"Par dfaut"})]}),N.description&&n.jsx("p",{className:"text-sm text-gray-600",children:N.description})]})]}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-3 text-sm",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(C=>{const T=`${C}_start`,P=`${C}_end`,D=N[T],M=N[P];return n.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[n.jsx("p",{className:"font-medium text-gray-700 capitalize text-xs mb-1",children:C.substring(0,3)}),D&&M?n.jsxs("p",{className:"text-gray-900 text-xs",children:[D," - ",M]}):n.jsx("p",{className:"text-gray-400 text-xs",children:"Repos"})]},C)})}),n.jsxs("div",{className:"mt-4 flex gap-6 text-sm text-gray-600",children:[n.jsxs("span",{children:[n.jsx("strong",{children:"Heures/semaine:"})," ",N.weekly_hours,"h"]}),n.jsxs("span",{children:[n.jsx("strong",{children:"Tolrance retard:"})," ",N.tolerance_late_minutes," min"]})]})]}),e.canManageSchedules&&n.jsxs("div",{className:"flex gap-2 ml-4",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Mc,{className:"h-4 w-4"})}),!N.is_default&&n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Pr,{className:"h-4 w-4"})})]})]})},N.id))})]})]}),a&&i&&n.jsx(oSe,{settingKey:i.setting_key,settingName:i.setting_key,currentValue:i.setting_value,onClose:()=>{s(!1),l(null)}})]})}const uSe=()=>{const e=$a(),{user:t}=jn(),{data:r=[],isLoading:a}=gL(),s=r.filter(g=>g.students?.some(x=>x.student_id===t?.id)),i=g=>({planned:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",completed:"bg-gray-100 text-gray-700",cancelled:"bg-red-100 text-red-700"})[g]||"bg-gray-100 text-gray-700",l=g=>({planned:"Planifie",active:"En cours",completed:"Termine",cancelled:"Annule"})[g]||g,o=g=>new Date(g).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),d=g=>{const x=new Date,b=new Date(g.start_date),v=new Date(g.end_date);return x>=b&&x<=v},u=s.filter(g=>g.status==="active"||d(g)),f=s.filter(g=>g.status==="planned"&&!d(g)),m=s.filter(g=>g.status==="completed");return n.jsx(Ut,{title:`Bonjour ${t?.full_name||"tudiant"}`,subtitle:"Bienvenue sur votre portail de formation",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Sessions inscrites"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:s.length})]}),n.jsx(wa,{className:"h-12 w-12 text-blue-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Sessions actives"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:u.length})]}),n.jsx(Ll,{className:"h-12 w-12 text-green-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-100 text-sm font-medium",children:" venir"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:f.length})]}),n.jsx(ba,{className:"h-12 w-12 text-purple-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-100 text-sm font-medium",children:"Termines"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:m.length})]}),n.jsx(Fn,{className:"h-12 w-12 text-orange-200"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accs Rapide"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(Ye,{onClick:()=>e("/student/catalog"),className:"flex items-center justify-center gap-2 h-16 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white",children:[n.jsx(wa,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"Catalogue de Formations"})]}),n.jsxs(Ye,{onClick:()=>e("/student/certificates"),className:"flex items-center justify-center gap-2 h-16 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white",children:[n.jsx(Fn,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"Mes Certificats"})]}),u.length>0&&u[0].formation_id&&n.jsxs(Ye,{onClick:()=>e(`/student/formations/${u[0].formation_id}`),className:"flex items-center justify-center gap-2 h-16 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",children:[n.jsx(Pc,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"Continuer ma formation"})]})]})]}),u.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(Pc,{className:"h-6 w-6 text-green-600"}),"Sessions en cours"]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(g=>n.jsxs("div",{className:"border border-green-200 rounded-lg p-4 hover:shadow-md transition-shadow bg-green-50",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:g.name}),g.formation_title&&n.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[" ",g.formation_title]})]}),n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i(g.status)}`,children:l(g.status)})]}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[g.segment_name&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ya,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{children:g.segment_name})]}),g.city_name&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ns,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{children:g.city_name})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[o(g.start_date)," - ",o(g.end_date)]})]})]}),g.formation_id&&n.jsx("div",{className:"mt-4",children:n.jsxs(Ye,{onClick:()=>e(`/student/formations/${g.formation_id}`),className:"w-full bg-green-600 hover:bg-green-700",size:"sm",children:[n.jsx(Pc,{className:"h-4 w-4 mr-2"}),"Accder  la formation"]})})]},g.id))})]}),f.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(na,{className:"h-6 w-6 text-purple-600"}),"Sessions  venir"]}),n.jsx("div",{className:"space-y-4",children:f.map(g=>n.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:g.name}),g.formation_title&&n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",g.formation_title]}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[g.segment_name&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ya,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{children:g.segment_name})]}),g.city_name&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ns,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{children:g.city_name})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ba,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Dbut: ",o(g.start_date)]})]})]})]}),n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i(g.status)}`,children:l(g.status)})]})},g.id))})]}),m.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(Fn,{className:"h-6 w-6 text-gray-600"}),"Sessions termines"]}),n.jsx("div",{className:"space-y-4",children:m.map(g=>n.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:g.name}),g.formation_title&&n.jsxs("p",{className:"text-sm text-gray-600",children:[" ",g.formation_title]})]}),n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i(g.status)}`,children:l(g.status)})]})},g.id))})]}),!a&&s.length===0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(wa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune session inscrite"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Vous n'tes inscrit  aucune session de formation pour le moment."}),n.jsx(Ye,{onClick:()=>e("/student/catalog"),children:"Parcourir le catalogue"})]}),a&&n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})})},dSe=()=>{const e=$a(),{data:t=[],isLoading:r}=Zb(),[a,s]=k.useState(""),[i,l]=k.useState("all"),o=t.filter(m=>m.status==="published"),d=k.useMemo(()=>o.filter(m=>{const g=m.title.toLowerCase().includes(a.toLowerCase())||m.description?.toLowerCase().includes(a.toLowerCase()),x=i==="all"||m.level===i;return g&&x}),[o,a,i]),u=m=>{const x=m?{debutant:{bg:"bg-green-100",text:"text-green-700",label:"Dbutant"},intermediaire:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Intermdiaire"},avance:{bg:"bg-red-100",text:"text-red-700",label:"Avanc"}}[m]:{bg:"bg-gray-100",text:"text-gray-700",label:"N/A"};return n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x.bg} ${x.text}`,children:x.label})},f=m=>m==="debutant"?n.jsx(Ll,{className:"h-4 w-4 text-green-600"}):m==="intermediaire"?n.jsx(Ll,{className:"h-4 w-4 text-yellow-600"}):m==="avance"?n.jsx(Fn,{className:"h-4 w-4 text-red-600"}):n.jsx(wa,{className:"h-4 w-4 text-gray-400"});return n.jsx(Ut,{title:"Catalogue de formations",subtitle:"Explorez nos formations disponibles",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[o.length," formations disponibles"]}),n.jsx("p",{className:"text-blue-100",children:"Dveloppez vos comptences avec nos formations en ligne"})]}),n.jsx(wa,{className:"h-16 w-16 text-blue-200 opacity-50"})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Ou,{className:"h-4 w-4 inline mr-2"}),"Rechercher"]}),n.jsx("input",{type:"text",value:a,onChange:m=>s(m.target.value),placeholder:"Titre ou description...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Tp,{className:"h-4 w-4 inline mr-2"}),"Niveau"]}),n.jsxs("select",{value:i,onChange:m=>l(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"Tous les niveaux"}),n.jsx("option",{value:"debutant",children:"Dbutant"}),n.jsx("option",{value:"intermediaire",children:"Intermdiaire"}),n.jsx("option",{value:"avance",children:"Avanc"})]})]})]}),(a||i!=="all")&&n.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Filtres actifs:"}),a&&n.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:['Recherche: "',a,'"']}),i!=="all"&&n.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:["Niveau: ",u(i).props.children]}),n.jsx("button",{onClick:()=>{s(""),l("all")},className:"text-xs text-red-600 hover:text-red-700",children:"Effacer les filtres"})]})]}),n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("p",{className:"text-sm text-gray-600",children:[d.length," formation(s) trouve(s)"]})}),r?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(wa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune formation trouve"}),n.jsx("p",{className:"text-gray-500 mb-6",children:a||i!=="all"?"Essayez de modifier vos critres de recherche":"Aucune formation publie pour le moment"}),(a||i!=="all")&&n.jsx(Ye,{onClick:()=>{s(""),l("all")},variant:"outline",children:"Effacer les filtres"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(m=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-lg transition-all duration-200 overflow-hidden group",children:[n.jsxs("div",{className:"h-48 bg-gradient-to-br from-blue-500 to-purple-600 relative overflow-hidden",children:[m.thumbnail_url?n.jsx("img",{src:m.thumbnail_url,alt:m.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(wa,{className:"h-16 w-16 text-white opacity-50"})}),n.jsx("div",{className:"absolute top-3 right-3",children:u(m.level)})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:m.title}),m.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:m.description}),n.jsxs("div",{className:"space-y-2 mb-4",children:[m.duration_hours&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(na,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[m.duration_hours,"h de contenu"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f(m.level),n.jsxs("span",{children:["Niveau ",m.level||"N/A"]})]}),m.module_count!==void 0&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Pc,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[m.module_count," module(s)"]})]}),m.passing_score_percentage!==void 0&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Xr,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Score de russite: ",m.passing_score_percentage,"%"]})]})]}),m.price!==void 0&&m.price!==null&&Number(m.price)>0&&n.jsx("div",{className:"mb-4 pb-4 border-b",children:n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:vL(m.price)})}),n.jsxs(Ye,{onClick:()=>e(`/student/formations/${m.id}`),className:"w-full bg-blue-600 hover:bg-blue-700",children:[n.jsx(Pc,{className:"h-4 w-4 mr-2"}),"Voir la formation"]})]})]},m.id))})]})})},q2={async markVideoComplete(e){return Ce.post(`/progress/videos/${e}/complete`,{})},async recordVideoWatch(e){return Ce.post(`/progress/videos/${e}/watch`,{})},async getFormationVideoProgress(e){return Ce.get(`/progress/formations/${e}/videos`)},async submitTestAttempt(e,t){return Ce.post(`/progress/tests/${e}/attempts`,t)},async getTestAttempts(e){return Ce.get(`/progress/tests/${e}/attempts`)},async getFormationTestAttempts(e){return Ce.get(`/progress/formations/${e}/tests`)},async getFormationProgress(e){return Ce.get(`/progress/formations/${e}`)},async getStudentTranscript(e){return Ce.get(`/progress/student/${e}/transcript`)}};function fSe(){const e=Tt();return St({mutationFn:t=>q2.markVideoComplete(t),onSuccess:()=>{e.invalidateQueries({queryKey:["video-progress"]}),e.invalidateQueries({queryKey:["formation-progress"]})}})}function hSe(e){return Ft({queryKey:["video-progress",e],queryFn:()=>{if(!e)throw new Error("Formation ID required");return q2.getFormationVideoProgress(e)},enabled:!!e})}function mSe(){const e=Tt();return St({mutationFn:({testId:t,data:r})=>q2.submitTestAttempt(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["test-attempts",r.testId]}),e.invalidateQueries({queryKey:["test-attempts-formation"]}),e.invalidateQueries({queryKey:["formation-progress"]}),e.invalidateQueries({queryKey:["transcript"]})}})}function pSe(e){return Ft({queryKey:["formation-progress",e],queryFn:()=>{if(!e)throw new Error("Formation ID required");return q2.getFormationProgress(e)},enabled:!!e,staleTime:1e3*60*5})}const xSe=()=>{const{id:e}=xo(),t=$a(),{user:r}=jn(),{data:a,isLoading:s,error:i}=Lp(e),{data:l}=pSe(e),{data:o}=gU(r?.id||null),[d,u]=k.useState(new Set),f=o?.certificates.some(C=>C.formation_id===e)||!1,m=C=>{const T=new Set(d);T.has(C)?T.delete(C):T.add(C),u(T)},g=C=>l?.video_progress.some(T=>T.video_id===C&&T.completed_at)||!1,x=C=>l?.test_attempts.some(T=>T.test_id===C&&T.passed)||!1,b=C=>{const T={debutant:{bg:"bg-green-100",text:"text-green-700",label:"Dbutant"},intermediaire:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Intermdiaire"},avance:{bg:"bg-red-100",text:"text-red-700",label:"Avanc"}},P=C&&C in T?T[C]:{bg:"bg-gray-100",text:"text-gray-700",label:"N/A"};return n.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P.bg} ${P.text}`,children:P.label})},v=C=>C==="video"?n.jsx(Pc,{className:"h-5 w-5 text-purple-600"}):C==="test"?n.jsx(Nd,{className:"h-5 w-5 text-orange-600"}):n.jsx(wa,{className:"h-5 w-5 text-blue-600"}),y=(C,T)=>(!C.prerequisite_module_id||!T.find(D=>D.id===C.prerequisite_module_id),!0);if(s)return n.jsx(Ut,{title:"Chargement...",subtitle:"Chargement de la formation",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(i||!a)return n.jsx(Ut,{title:"Erreur",subtitle:"Formation introuvable",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[n.jsx("p",{className:"text-red-800 mb-4",children:i?.message||"Cette formation n'existe pas ou n'est pas disponible."}),n.jsxs(Ye,{onClick:()=>t("/student/catalog"),variant:"outline",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour au catalogue"]})]})});const j=a.modules||[],S=j.reduce((C,T)=>C+(T.videos?.length||0),0),N=j.reduce((C,T)=>C+(T.tests?.length||0),0);return n.jsx(Ut,{title:a.title,subtitle:"Contenu de la formation",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs(Ye,{variant:"ghost",size:"sm",onClick:()=>t("/student/catalog"),className:"mb-4",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour au catalogue"]}),n.jsxs("div",{className:"flex items-start gap-6",children:[n.jsx("div",{className:"hidden md:block",children:a.thumbnail_url?n.jsx("img",{src:a.thumbnail_url,alt:a.title,className:"w-48 h-32 object-cover rounded-lg"}):n.jsx("div",{className:"w-48 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:n.jsx(wa,{className:"h-12 w-12 text-white opacity-50"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.title}),b(a.level)]}),a.description&&n.jsx("p",{className:"text-gray-600 mb-4",children:a.description}),n.jsxs("div",{className:"flex flex-wrap gap-6 text-sm text-gray-600",children:[a.duration_hours&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[a.duration_hours,"h de contenu"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wa,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[j.length," module(s)"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pc,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[S," vido(s)"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nd,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[N," test(s)"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Score de russite: ",a.passing_score_percentage,"%"]})]})]})]})]})]}),l&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Votre progression"}),n.jsx("div",{className:"mb-6",children:n.jsx(Mb,{progress:l.summary.overall_progress,label:"Progression globale",color:"purple",size:"lg"})}),f&&n.jsx("div",{className:"mb-6",children:n.jsx("div",{onClick:()=>t("/student/certificates"),className:"bg-gradient-to-r from-amber-50 to-amber-100 border-2 border-amber-300 rounded-lg p-4 cursor-pointer hover:shadow-md transition-all",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-amber-500 p-3 rounded-full",children:n.jsx(Fn,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-amber-900 mb-1",children:" Certificat disponible !"}),n.jsx("p",{className:"text-sm text-amber-700",children:"Flicitations ! Vous avez termin cette formation. Cliquez ici pour tlcharger votre certificat."})]}),n.jsx(rl,{className:"h-5 w-5 text-amber-600"})]})})}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{onClick:()=>t(`/student/forums/${e}`),className:"bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-300 rounded-lg p-4 cursor-pointer hover:shadow-md transition-all",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 p-3 rounded-full",children:n.jsx(as,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:" Forum de discussion"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Posez vos questions, partagez vos ides et discutez avec les autres tudiants."})]}),n.jsx(rl,{className:"h-5 w-5 text-blue-600"})]})})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(sF,{completed:l.summary.completed_videos,total:l.summary.total_videos,label:"Vidos termines",color:"blue"}),n.jsx(sF,{completed:l.summary.passed_tests,total:l.summary.total_tests,label:"Tests russis",color:"green"})]})]}),j.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(wa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun contenu disponible"}),n.jsx("p",{className:"text-gray-500",children:"Cette formation n'a pas encore de contenu. Revenez plus tard."})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Contenu de la formation"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Cliquez sur un module pour voir son contenu"})]}),n.jsx("div",{className:"divide-y",children:j.map((C,T)=>{const P=d.has(C.id),D=y(C,j),M=C.videos||[],F=C.tests||[],H=M.length>0||F.length>0;return n.jsxs("div",{children:[n.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${D?"cursor-pointer":"opacity-60"}`,onClick:()=>D&&H&&m(C.id),children:n.jsxs("div",{className:"flex items-center gap-3",children:[H?n.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:P?n.jsx(Au,{className:"h-5 w-5"}):n.jsx(rl,{className:"h-5 w-5"})}):n.jsx("div",{className:"w-5"}),v(C.module_type),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Module ",T+1]}),!D&&n.jsx(fp,{className:"h-4 w-4 text-gray-400"})]}),n.jsx("h3",{className:"text-base font-semibold text-gray-900",children:C.title}),C.description&&n.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:C.description})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[M.length>0&&n.jsxs("span",{className:"mr-3",children:[M.length," vido(s)"]}),F.length>0&&n.jsxs("span",{children:[F.length," test(s)"]})]})]})}),P&&H&&n.jsxs("div",{className:"bg-gray-50 px-4 py-3 space-y-2",children:[M.map((L,z)=>{const V=g(L.id);return n.jsx("div",{className:`bg-white rounded-lg border p-3 hover:shadow-md transition-shadow cursor-pointer ${V?"border-green-300 bg-green-50":"border-purple-200"}`,onClick:()=>t(`/student/formations/${a.id}/videos/${L.id}`),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Pc,{className:`h-5 w-5 flex-shrink-0 ${V?"text-green-600":"text-purple-600"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Vido ",z+1,": ",L.title]}),L.duration_seconds&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Dure: ",Math.floor(L.duration_seconds/60)," min"," ",L.duration_seconds%60," sec"]})]}),V?n.jsx(Xr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):n.jsx(rl,{className:"h-5 w-5 text-gray-400"})]})},L.id)}),F.map((L,z)=>{const V=x(L.id);return n.jsx("div",{className:`bg-white rounded-lg border p-3 hover:shadow-md transition-shadow cursor-pointer ${V?"border-green-300 bg-green-50":"border-orange-200"}`,onClick:()=>t(`/student/formations/${a.id}/tests/${L.id}`),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nd,{className:`h-5 w-5 flex-shrink-0 ${V?"text-green-600":"text-orange-600"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Test ",z+1,": ",L.title]}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[L.questions&&n.jsxs("span",{children:[L.questions.length," question(s)"]}),L.time_limit_minutes&&n.jsxs("span",{children:[" ",L.time_limit_minutes," min"]}),n.jsxs("span",{children:["Score min: ",L.passing_score,"%"]})]})]}),V?n.jsx(Xr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):n.jsx(rl,{className:"h-5 w-5 text-gray-400"})]})},L.id)})]})]},C.id)})})]})]})})},gSe=()=>{const{id:e,videoId:t}=xo(),r=$a(),{data:a,isLoading:s,error:i}=Lp(e),{data:l}=hSe(e),o=fSe(),d=a?.modules?.flatMap(N=>N.videos||[]).find(N=>N.id===t),u=a?.modules?.find(N=>N.videos?.some(C=>C.id===t)),f=[];a?.modules?.forEach(N=>{N.videos?.forEach(C=>{f.push({video:C,module:N})})});const m=f.findIndex(N=>N.video.id===t),g=m>0?f[m-1]:null,x=m<f.length-1?f[m+1]:null,b=N=>{if(!N)return null;const C=[/(?:youtube\.com\/watch\?v=)([^&]+)/,/(?:youtu\.be\/)([^?]+)/,/(?:youtube\.com\/embed\/)([^?]+)/];for(const T of C){const P=N.match(T);if(P)return P[1]}return null},v=d?.youtube_url?b(d.youtube_url):null,y=N=>{const C=Math.floor(N/60),T=N%60;return`${C}:${T.toString().padStart(2,"0")}`},j=l?.some(N=>N.video_id===t&&N.completed_at)||!1,S=async()=>{if(!(!t||j))try{await o.mutateAsync(t)}catch(N){console.error("Erreur lors du marquage de la vido:",N)}};return k.useEffect(()=>{t&&console.log("Vido en cours de visionnage:",t)},[t]),s?n.jsx(Ut,{title:"Chargement...",subtitle:"Chargement de la vido",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):i||!a||!d?n.jsx(Ut,{title:"Erreur",subtitle:"Vido introuvable",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[n.jsx("p",{className:"text-red-800 mb-4",children:i?.message||"Cette vido n'existe pas ou n'est pas disponible."}),n.jsxs(Ye,{onClick:()=>r(e?`/student/formations/${e}`:"/student/catalog"),variant:"outline",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour"]})]})}):n.jsx(Ut,{title:d.title,subtitle:a.title,children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Ye,{variant:"ghost",size:"sm",onClick:()=>r(`/student/formations/${e}`),children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour  la formation"]}),j?n.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium text-sm",children:[n.jsx(Xr,{className:"h-5 w-5"}),n.jsx("span",{children:"Vido termine"})]}):n.jsxs(Ye,{onClick:S,disabled:o.isPending,className:"bg-green-600 hover:bg-green-700",children:[n.jsx(Xr,{className:"h-4 w-4 mr-2"}),o.isPending?"Enregistrement...":"Marquer comme termin"]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:v?n.jsx("div",{className:"relative",style:{paddingBottom:"56.25%"},children:n.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${v}?rel=0`,title:d.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):n.jsx("div",{className:"aspect-video bg-gray-900 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-white",children:[n.jsx(Pc,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-lg font-medium",children:"URL de vido non disponible"}),n.jsx("p",{className:"text-sm text-gray-400 mt-2",children:d.youtube_url||"Aucune URL configure"})]})})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Pc,{className:"h-5 w-5 text-purple-600"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d.title})]}),u&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(wa,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{children:u.title})]})]}),d.duration_seconds&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg",children:[n.jsx(na,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{children:y(d.duration_seconds)})]})]}),d.description&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:d.description})]})]}),(g||x)&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Navigation"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g?n.jsxs("button",{onClick:()=>r(`/student/formations/${e}/videos/${g.video.id}`),className:"flex items-center gap-3 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all text-left",children:[n.jsx(N4,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Vido prcdente"}),n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.video.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g.module.title})]})]}):n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center",children:n.jsx("p",{className:"text-sm text-gray-400",children:"Premire vido"})}),x?n.jsxs("button",{onClick:()=>r(`/student/formations/${e}/videos/${x.video.id}`),className:"flex items-center gap-3 p-4 border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all text-left",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Vido suivante"}),n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:x.video.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x.module.title})]}),n.jsx(rl,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]}):n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center",children:n.jsx("p",{className:"text-sm text-gray-400",children:"Dernire vido"})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Toutes les vidos (",f.length,")"]}),n.jsx("div",{className:"space-y-2",children:f.map(({video:N,module:C},T)=>n.jsxs("button",{onClick:()=>r(`/student/formations/${e}/videos/${N.id}`),className:`w-full flex items-center gap-3 p-3 rounded-lg border transition-all text-left ${N.id===t?"bg-purple-50 border-purple-300 shadow-sm":"border-gray-200 hover:bg-gray-50 hover:border-gray-300"}`,children:[n.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full flex-shrink-0 ${N.id===t?"bg-purple-600 text-white":"bg-gray-100 text-gray-600"}`,children:N.id===t?n.jsx(Pc,{className:"h-4 w-4"}):n.jsx("span",{className:"text-sm font-medium",children:T+1})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium truncate ${N.id===t?"text-purple-900":"text-gray-900"}`,children:N.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:C.title})]}),N.duration_seconds&&n.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[n.jsx(na,{className:"h-3 w-3"}),y(N.duration_seconds)]})]},N.id))})]})]})})},vSe=()=>{const{id:e,testId:t}=xo(),r=$a(),{data:a,isLoading:s,error:i}=Lp(e),l=mSe(),[o,d]=k.useState({}),[u,f]=k.useState(!1),[m,g]=k.useState(null),[x]=k.useState(new Date),b=a?.modules?.flatMap(D=>D.tests||[]).find(D=>D.id===t),v=a?.modules?.find(D=>D.tests?.some(M=>M.id===t)),y=b?.questions||[];k.useEffect(()=>{if(b?.time_limit_minutes&&!u){g(b.time_limit_minutes*60);const D=setInterval(()=>{g(M=>M===null||M<=0?(clearInterval(D),u||S(),0):M-1)},1e3);return()=>clearInterval(D)}},[b,u]);const j=(D,M)=>{u||d(F=>({...F,[D]:M}))},S=async()=>{if(u||!t)return;const D=y.filter(z=>!o[z.id]).length;if(D>0&&!window.confirm(`${D} question(s) non rpondue(s). Voulez-vous vraiment soumettre le test ?`))return;f(!0);let M=0,F=0;y.forEach(z=>{M+=z.points;const V=o[z.id];V&&z.choices.find(ie=>ie.id===V)?.is_correct&&(F+=z.points)});const L=(M>0?F/M*100:0)>=(b?.passing_score||70);try{await l.mutateAsync({testId:t,data:{answers:o,score:F,total_points:M,passed:L}})}catch(z){console.error("Erreur lors de l'enregistrement de la tentative:",z)}},N=()=>{let D=0,M=0,F=0;y.forEach(z=>{M+=z.points;const V=o[z.id];V&&z.choices.find(ie=>ie.id===V)?.is_correct&&(D++,F+=z.points)});const H=y.length>0?D/y.length*100:0,L=M>0?F/M*100:0;return{correctCount:D,totalQuestions:y.length,percentage:Math.round(H),earnedPoints:F,totalPoints:M,pointsPercentage:Math.round(L),passed:L>=(b?.passing_score||70)}},C=D=>{const M=Math.floor(D/60),F=D%60;return`${M}:${F.toString().padStart(2,"0")}`},T=()=>{if(!u)return"";const M=Math.floor((new Date().getTime()-x.getTime())/1e3);return C(M)},P=u?N():null;return s?n.jsx(Ut,{title:"Chargement...",subtitle:"Chargement du test",children:n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):i||!a||!b?n.jsx(Ut,{title:"Erreur",subtitle:"Test introuvable",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[n.jsx("p",{className:"text-red-800 mb-4",children:i?.message||"Ce test n'existe pas ou n'est pas disponible."}),n.jsxs(Ye,{onClick:()=>r(e?`/student/formations/${e}`:"/student/catalog"),variant:"outline",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour"]})]})}):n.jsx(Ut,{title:b.title,subtitle:a.title,children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs(Ye,{variant:"ghost",size:"sm",onClick:()=>r(`/student/formations/${e}`),disabled:!u,children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour  la formation"]}),!u&&m!==null&&n.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium ${m<60?"bg-red-100 text-red-700":m<300?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[n.jsx(na,{className:"h-4 w-4"}),n.jsx("span",{children:C(m)})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Nd,{className:"h-6 w-6 text-orange-600 flex-shrink-0 mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:b.title}),v&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[n.jsx(wa,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{children:v.title})]}),b.description&&n.jsx("p",{className:"text-gray-600 mb-3",children:b.description}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Nd,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[y.length," questions"]})]}),b.time_limit_minutes&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(na,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[b.time_limit_minutes," min"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fn,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:["Score minimum: ",b.passing_score,"%"]})]})]})]})]})]}),u&&P&&n.jsxs("div",{className:`rounded-lg shadow-sm border p-6 ${P.passed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[P.passed?n.jsx(Xr,{className:"h-8 w-8 text-green-600"}):n.jsx(fo,{className:"h-8 w-8 text-red-600"}),n.jsxs("div",{children:[n.jsx("h2",{className:`text-xl font-bold ${P.passed?"text-green-900":"text-red-900"}`,children:P.passed?"Test russi !":"Test chou"}),n.jsxs("p",{className:P.passed?"text-green-700":"text-red-700",children:["Score: ",P.pointsPercentage,"% (",P.earnedPoints,"/",P.totalPoints," points)"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Bonnes rponses"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[P.correctCount,"/",P.totalQuestions]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Pourcentage"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[P.percentage,"%"]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Points obtenus"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[P.earnedPoints,"/",P.totalPoints]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Temps coul"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:T()})]})]})]}),y.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(Nd,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune question"}),n.jsx("p",{className:"text-gray-500",children:"Ce test n'a pas encore de questions."})]}):n.jsx("div",{className:"space-y-6",children:y.map((D,M)=>{const F=o[D.id],L=D.choices.find(z=>z.id===F)?.is_correct||!1;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[n.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full flex-shrink-0 ${u?L?"bg-green-100 text-green-700":F?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700"}`,children:u?L?n.jsx(Xr,{className:"h-4 w-4"}):F?n.jsx(fo,{className:"h-4 w-4"}):n.jsx(co,{className:"h-4 w-4"}):n.jsx("span",{className:"text-sm font-medium",children:M+1})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Question ",M+1]}),n.jsxs("span",{className:"text-sm text-gray-500",children:[D.points," pts"]})]}),n.jsx("p",{className:"text-gray-700",children:D.question_text})]})]}),n.jsx("div",{className:"space-y-2 ml-11",children:D.choices.map(z=>{const V=F===z.id,G=u&&z.is_correct,ie=u&&V&&!z.is_correct;return n.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border transition-all cursor-pointer ${u?G?"bg-green-50 border-green-300":ie?"bg-red-50 border-red-300":"border-gray-200 bg-gray-50":V?"bg-blue-50 border-blue-300":"border-gray-200 hover:bg-gray-50 hover:border-gray-300"} ${u?"cursor-default":""}`,children:[n.jsx("input",{type:"radio",name:`question-${D.id}`,value:z.id,checked:V,onChange:()=>j(D.id,z.id),disabled:u,className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm ${G?"text-green-900 font-medium":ie?"text-red-900":"text-gray-900"}`,children:z.choice_text}),u&&z.is_correct&&n.jsx("p",{className:"text-xs text-green-700 mt-1",children:" Bonne rponse"}),u&&ie&&n.jsx("p",{className:"text-xs text-red-700 mt-1",children:" Mauvaise rponse"})]})]},z.id)})}),!u&&!F&&n.jsxs("div",{className:"mt-3 ml-11 text-sm text-amber-600 flex items-center gap-2",children:[n.jsx(co,{className:"h-4 w-4"}),n.jsx("span",{children:"Question non rpondue"})]})]},D.id)})}),!u&&y.length>0&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsxs("p",{children:[Object.keys(o).length," / ",y.length," questions rpondues"]}),b.show_correct_answers&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Les rponses correctes seront affiches aprs la soumission"})]}),n.jsxs(Ye,{onClick:S,size:"lg",className:"min-w-[200px]",children:[n.jsx(Xr,{className:"h-5 w-5 mr-2"}),"Soumettre le test"]})]})})]})})},ySe=()=>{const{user:e}=jn(),{data:t,isLoading:r,error:a}=gU(e?.id||null),s=async l=>{await yU(l)};if(r)return n.jsx(Ut,{title:"Mes Certificats",subtitle:"Consultez et tlchargez vos certificats",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});if(a)return n.jsx(Ut,{title:"Mes Certificats",subtitle:"Consultez et tlchargez vos certificats",children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-red-800",children:"Erreur lors du chargement des certificats"})})});const i=t?.certificates||[];return n.jsx(Ut,{title:"Mes Certificats",subtitle:"Consultez et tlchargez vos certificats",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm opacity-90",children:"Total Certificats"}),n.jsx("p",{className:"text-4xl font-bold mt-2",children:i.length})]}),n.jsx(Fn,{className:"h-12 w-12 opacity-80"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm opacity-90",children:"Formations Compltes"}),n.jsx("p",{className:"text-4xl font-bold mt-2",children:i.length})]}),n.jsx(Xr,{className:"h-12 w-12 opacity-80"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm opacity-90",children:"Note Moyenne"}),n.jsxs("p",{className:"text-4xl font-bold mt-2",children:[i.length>0?(i.filter(l=>l.grade!==null).reduce((l,o)=>l+(o.grade||0),0)/i.filter(l=>l.grade!==null).length).toFixed(1):"0","%"]})]}),n.jsx(gK,{className:"h-12 w-12 opacity-80"})]})})]}),i.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[n.jsx(cp,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun certificat disponible"}),n.jsx("p",{className:"text-gray-600",children:"Compltez vos formations pour obtenir vos certificats de russite !"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(l=>{const o=new Date(l.completion_date).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),d=new Date(l.issued_at).toLocaleDateString("fr-FR");return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium opacity-90",children:"Certificat de Russite"})]}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:l.formation_title})]}),l.grade!==null&&l.grade!==void 0&&n.jsxs("div",{className:"bg-white/20 rounded-lg px-3 py-2 text-center backdrop-blur-sm",children:[n.jsxs("p",{className:"text-2xl font-bold",children:[l.grade,"%"]}),n.jsx("p",{className:"text-xs opacity-90",children:"Note"})]})]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[n.jsx(ba,{className:"h-4 w-4 text-blue-500"}),n.jsxs("span",{children:["Complt le ",o]})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[n.jsx(wa,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{children:["Dlivr le ",d]})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[n.jsx(cp,{className:"h-4 w-4 text-purple-500"}),n.jsxs("span",{className:"font-mono text-xs",children:["N ",l.certificate_number]})]})]}),n.jsxs("button",{onClick:()=>s(l),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[n.jsx(ps,{className:"h-5 w-5"}),"Tlcharger le Certificat"]})]}),n.jsx("div",{className:"bg-green-50 border-t border-green-100 px-6 py-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm font-medium",children:[n.jsx(Xr,{className:"h-4 w-4"}),"Formation complte avec succs"]})})]},l.id)})}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:n.jsx(Fn,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" propos de vos certificats"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Les certificats sont gnrs automatiquement aprs compltion d'une formation"}),n.jsx("li",{children:" Chaque certificat contient un numro unique pour vrification"}),n.jsx("li",{children:" Vous pouvez tlcharger vos certificats  tout moment"}),n.jsx("li",{children:" Les certificats sont au format PDF professionnel"})]})]})]})})]})})},bSe=()=>{const{formationId:e}=xo(),t=$a(),[r,a]=k.useState("recent"),{data:s,isLoading:i}=Lp(e||void 0),{data:l,isLoading:o}=N3e(e||null,{sort:r,pinned:"true"}),d=s,u=l?.threads||[],f=m=>{const g=new Date(m),b=new Date().getTime()-g.getTime(),v=Math.floor(b/6e4),y=Math.floor(v/60),j=Math.floor(y/24);return v<1?" l'instant":v<60?`Il y a ${v} min`:y<24?`Il y a ${y}h`:j<7?`Il y a ${j}j`:g.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})};return i||o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement du forum..."})]})}):d?n.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Forum - ",d.title]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Posez vos questions et discutez avec les autres tudiants"})]}),n.jsxs(Ye,{onClick:()=>t(`/student/forums/${e}/new`),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Nouvelle discussion"]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(as,{className:"h-4 w-4 text-blue-600"}),n.jsxs("span",{className:"text-gray-600",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:u.length})," ","discussions"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($F,{className:"h-4 w-4 text-green-600"}),n.jsxs("span",{className:"text-gray-600",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:u.reduce((m,g)=>m+(g.post_count||0),0)})," ","rponses"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Trier par:"}),n.jsxs("select",{value:r,onChange:m=>a(m.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"recent",children:"Plus rcent"}),n.jsx("option",{value:"popular",children:"Plus populaire"}),n.jsx("option",{value:"active",children:"Plus actif"})]})]})]})}),u.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[n.jsx(as,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune discussion pour le moment"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Soyez le premier  poser une question ou partager une ide"}),n.jsxs(Ye,{onClick:()=>t(`/student/forums/${e}/new`),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Crer une discussion"]})]}):n.jsx("div",{className:"space-y-3",children:u.map(m=>n.jsx("div",{onClick:()=>t(`/student/forums/thread/${m.id}`),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:n.jsx(as,{className:"h-6 w-6 text-white"})})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.is_pinned&&n.jsx(k4,{className:"h-4 w-4 text-yellow-600 flex-shrink-0"}),m.is_locked&&n.jsx(fp,{className:"h-4 w-4 text-gray-500 flex-shrink-0"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-blue-600",children:m.title})]}),m.content&&n.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:m.content}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[n.jsxs("span",{children:["Par ",m.author_name]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(na,{className:"h-3 w-3"}),f(m.created_at)]}),m.last_post_at&&n.jsxs("span",{children:["Dernire rponse: ",f(m.last_post_at)]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[n.jsx(pi,{className:"h-4 w-4"}),n.jsx("span",{className:"font-semibold",children:m.view_count})]}),n.jsx("div",{className:"text-xs text-gray-500",children:"vues"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[n.jsx(as,{className:"h-4 w-4"}),n.jsx("span",{className:"font-semibold",children:m.post_count||0})]}),n.jsx("div",{className:"text-xs text-gray-500",children:"rponses"})]})]})]})})]})},m.id))}),r==="popular"&&u.length>0&&n.jsx("div",{className:"mt-6 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[n.jsx(Ll,{className:"h-5 w-5"}),n.jsx("span",{className:"font-semibold",children:"Discussions les plus populaires en ce moment"})]})})]}):n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-600",children:"Formation non trouve"})})},wSe=()=>{const{threadId:e}=xo(),t=$a(),{user:r}=jn(),[a,s]=k.useState(""),{data:i,isLoading:l}=_3e(e||null),{data:o,isLoading:d}=A3e(e||null),u=k3e(),f=C3e(),m=T3e(),g=D3e(),x=E3e(),b=i?.thread,v=o?.posts||[];k.useEffect(()=>{e&&u.mutate(e)},[e]);const y=async()=>{if(!(!a.trim()||!e||!r))try{await f.mutateAsync({threadId:e,data:{author_id:r.id,content:a.trim()}}),s("")}catch(T){console.error("Error posting reply:",T),alert("Erreur lors de l'envoi de la rponse")}},j=async(T,P,D)=>{if(r)try{D||await m.mutateAsync({postId:T,data:{user_id:r.id,reaction_type:P}})}catch(M){console.error("Error toggling reaction:",M)}},S=async T=>{if(r&&confirm("tes-vous sr de vouloir supprimer cette rponse ?"))try{await x.mutateAsync({postId:T,userId:r.id,isAdmin:r.role==="admin"})}catch(P){console.error("Error deleting post:",P),alert("Erreur lors de la suppression")}},N=(T,P)=>{if(!T.reactions)return 0;const D=T.reactions.find(M=>M.reaction_type===P);return D?D.count:0},C=T=>new Date(T).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return l||d?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement de la discussion..."})]})}):b?n.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[n.jsxs(Ye,{onClick:()=>t(`/student/forums/${b.formation_id}`),variant:"ghost",className:"mb-4",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour au forum"]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:n.jsx(as,{className:"h-8 w-8 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.is_pinned&&n.jsx(k4,{className:"h-5 w-5 text-yellow-600"}),b.is_locked&&n.jsx(fp,{className:"h-5 w-5 text-gray-500"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:b.title})]}),b.content&&n.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:b.content}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium",children:b.author_name}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(na,{className:"h-4 w-4"}),C(b.created_at)]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(pi,{className:"h-4 w-4"}),b.view_count," vues"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(as,{className:"h-4 w-4"}),b.post_count||0," rponses"]})]})]})]})}),n.jsx("div",{className:"space-y-4 mb-6",children:v.map(T=>{const P=r?.id===T.author_id,D=r?.role==="admin",M=P||D;return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-teal-600 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white font-semibold text-sm",children:T.author_name?.charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-gray-900",children:T.author_name}),T.author_role==="admin"&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:"Admin"}),T.author_role==="gerant"&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"Formateur"}),n.jsx("span",{className:"ml-3 text-sm text-gray-500",children:C(T.created_at)}),T.is_edited&&n.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"(modifi)"})]}),M&&n.jsx("button",{onClick:()=>S(T.id),className:"text-red-600 hover:text-red-700 p-1",children:n.jsx(Pr,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:T.content}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>j(T.id,"like",!1),className:"flex items-center gap-1 text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[n.jsx(SK,{className:"h-4 w-4"}),n.jsx("span",{children:N(T,"like")})]}),n.jsxs("button",{onClick:()=>j(T.id,"helpful",!1),className:"flex items-center gap-1 text-sm text-gray-600 hover:text-green-600 transition-colors",children:[n.jsx(as,{className:"h-4 w-4"}),n.jsx("span",{children:N(T,"helpful")})]}),n.jsxs("button",{onClick:()=>j(T.id,"insightful",!1),className:"flex items-center gap-1 text-sm text-gray-600 hover:text-purple-600 transition-colors",children:[n.jsx(AW,{className:"h-4 w-4"}),n.jsx("span",{children:N(T,"insightful")})]})]})]})]})},T.id)})}),b.is_locked?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[n.jsx(fp,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),n.jsx("p",{className:"text-yellow-800 font-medium",children:"Cette discussion est verrouille. Vous ne pouvez plus y rpondre."})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Votre rponse"}),n.jsx("textarea",{value:a,onChange:T=>s(T.target.value),placeholder:"crivez votre rponse ici...",rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Soyez respectueux et constructif dans vos rponses"}),n.jsx(Ye,{onClick:y,disabled:!a.trim()||f.isPending,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:f.isPending?"Envoi...":n.jsxs(n.Fragment,{children:[n.jsx(Xm,{className:"h-4 w-4 mr-2"}),"Envoyer"]})})]})]})]}):n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-600",children:"Discussion non trouve"})})},jSe=()=>{const{formationId:e}=xo(),t=$a(),{user:r}=jn(),[a,s]=k.useState(""),[i,l]=k.useState(""),[o,d]=k.useState(""),{data:u}=Lp(e||void 0),f=S3e(),m=u,g=async x=>{if(x.preventDefault(),d(""),!a.trim()){d("Le titre est requis");return}if(!e||!r){d("Erreur: Formation ou utilisateur non trouv");return}try{const b=await f.mutateAsync({formationId:e,data:{author_id:r.id,title:a.trim(),content:i.trim()||void 0}});t(`/student/forums/thread/${b.thread.id}`)}catch(b){console.error("Error creating thread:",b),d("Erreur lors de la cration de la discussion")}};return n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs(Ye,{onClick:()=>t(`/student/forums/${e}`),variant:"ghost",className:"mb-4",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Retour au forum"]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 mb-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(as,{className:"h-8 w-8"}),n.jsx("h1",{className:"text-3xl font-bold",children:"Nouvelle discussion"})]}),n.jsxs("p",{className:"text-blue-100",children:["Formation: ",m?.title||"Chargement..."]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Conseils pour crer une bonne discussion"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Choisissez un titre clair et descriptif"}),n.jsx("li",{children:" Expliquez votre question ou sujet en dtail"}),n.jsx("li",{children:" Soyez respectueux et constructif"}),n.jsx("li",{children:" Vrifiez qu'une discussion similaire n'existe pas dj"})]})]}),o&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[n.jsx(Nr,{className:"h-5 w-5"}),n.jsx("span",{children:o})]})}),n.jsxs("form",{onSubmit:g,className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Titre de la discussion *"}),n.jsx("input",{type:"text",id:"title",value:a,onChange:x=>s(x.target.value),placeholder:"Ex: Comment configurer l'environnement de dveloppement ?",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:200}),n.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[a.length,"/200 caractres"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("label",{htmlFor:"content",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Description (optionnelle)"}),n.jsx("textarea",{id:"content",value:i,onChange:x=>l(x.target.value),placeholder:"Dcrivez votre question ou sujet en dtail...",rows:10,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",maxLength:5e3}),n.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[i.length,"/5000 caractres"]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx(Ye,{type:"button",onClick:()=>t(`/student/forums/${e}`),variant:"outline",children:"Annuler"}),n.jsx(Ye,{type:"submit",disabled:!a.trim()||f.isPending,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:f.isPending?"Cration...":n.jsxs(n.Fragment,{children:[n.jsx(as,{className:"h-4 w-4 mr-2"}),"Crer la discussion"]})})]})]}),n.jsx("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:[" ",n.jsx("strong",{children:"Note:"})," Votre discussion sera visible par tous les tudiants de cette formation. Vous pourrez la modifier ou la supprimer aprs sa cration."]})})]})},Tr=({children:e,adminOnly:t=!1,gerantOnly:r=!1})=>{const{isAuthenticated:a,isAdmin:s,isGerant:i}=jn();return a?t&&!s?n.jsx(Gm,{to:"/dashboard",replace:!0}):r&&!i?n.jsx(Gm,{to:"/dashboard",replace:!0}):n.jsx(n.Fragment,{children:e}):n.jsx(Gm,{to:"/login",replace:!0})},NSe=({children:e})=>{const{isAuthenticated:t}=jn();return t?n.jsx(Gm,{to:"/dashboard",replace:!0}):n.jsx(n.Fragment,{children:e})},_Se=()=>{const{isLoading:e}=jn();return e?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):n.jsxs(fH,{children:[n.jsx(jr,{path:"/login",element:n.jsx(NSe,{children:n.jsx(BK,{})})}),n.jsx(jr,{path:"/dashboard",element:n.jsx(Tr,{children:n.jsx(VK,{})})}),n.jsx(jr,{path:"/admin/segments",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(lie,{})})}),n.jsx(jr,{path:"/admin/cities",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(cie,{})})}),n.jsx(jr,{path:"/admin/users",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(yie,{})})}),n.jsx(jr,{path:"/admin/calculation-sheets",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Mie,{})})}),n.jsx(jr,{path:"/admin/calculation-sheets/:id",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Pie,{})})}),n.jsx(jr,{path:"/admin/calculation-sheets/:id/editor",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Iie,{})})}),n.jsx(jr,{path:"/admin/declarations",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Wie,{})})}),n.jsx(jr,{path:"/admin/declarations/:id",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(tle,{})})}),n.jsx(jr,{path:"/admin/create-declaration",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(PE,{})})}),n.jsx(jr,{path:"/admin/formations-management",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(moe,{})})}),n.jsx(jr,{path:"/admin/corps-formation",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(X3e,{})})}),n.jsx(jr,{path:"/admin/formations/sessions",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Ale,{})})}),n.jsx(jr,{path:"/admin/formations/cours/:id/editor",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Gle,{})})}),n.jsx(jr,{path:"/admin/sessions-formation",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(P3e,{})})}),n.jsx(jr,{path:"/admin/sessions-formation/:id",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Y3e,{})})}),n.jsx(jr,{path:"/admin/analytics",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Y4e,{})})}),n.jsx(jr,{path:"/admin/student-reports",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(X4e,{})})}),n.jsx(jr,{path:"/admin/certificates",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(i3e,{})})}),n.jsx(jr,{path:"/admin/certificate-templates",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(m3e,{})})}),n.jsx(jr,{path:"/admin/certificate-templates/:id/canvas-edit",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(j3e,{})})}),n.jsx(jr,{path:"/admin/forums",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(F3e,{})})}),n.jsx(jr,{path:"/admin/roles",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(Q3e,{})})}),n.jsx(jr,{path:"/admin/hr/employees",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(J3e,{})})}),n.jsx(jr,{path:"/admin/hr/dashboard",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(eSe,{})})}),n.jsx(jr,{path:"/admin/hr/attendance",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(nSe,{})})}),n.jsx(jr,{path:"/admin/hr/leaves",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(lSe,{})})}),n.jsx(jr,{path:"/admin/hr/settings",element:n.jsx(Tr,{adminOnly:!0,children:n.jsx(cSe,{})})}),n.jsx(jr,{path:"/professor/declarations",element:n.jsx(Tr,{children:n.jsx(nle,{})})}),n.jsx(jr,{path:"/professor/declarations/:id/fill",element:n.jsx(Tr,{children:n.jsx(sle,{})})}),n.jsx(jr,{path:"/student/dashboard",element:n.jsx(Tr,{children:n.jsx(uSe,{})})}),n.jsx(jr,{path:"/student/catalog",element:n.jsx(Tr,{children:n.jsx(dSe,{})})}),n.jsx(jr,{path:"/student/formations/:id",element:n.jsx(Tr,{children:n.jsx(xSe,{})})}),n.jsx(jr,{path:"/student/formations/:id/videos/:videoId",element:n.jsx(Tr,{children:n.jsx(gSe,{})})}),n.jsx(jr,{path:"/student/formations/:id/tests/:testId",element:n.jsx(Tr,{children:n.jsx(vSe,{})})}),n.jsx(jr,{path:"/student/certificates",element:n.jsx(Tr,{children:n.jsx(ySe,{})})}),n.jsx(jr,{path:"/student/forums/:formationId",element:n.jsx(Tr,{children:n.jsx(bSe,{})})}),n.jsx(jr,{path:"/student/forums/:formationId/new",element:n.jsx(Tr,{children:n.jsx(jSe,{})})}),n.jsx(jr,{path:"/student/forums/thread/:threadId",element:n.jsx(Tr,{children:n.jsx(wSe,{})})}),n.jsx(jr,{path:"/gerant/declarations",element:n.jsx(Tr,{gerantOnly:!0,children:n.jsx(fle,{})})}),n.jsx(jr,{path:"/gerant/create-declaration",element:n.jsx(Tr,{gerantOnly:!0,children:n.jsx(PE,{})})}),n.jsx(jr,{path:"/",element:n.jsx(Gm,{to:"/login",replace:!0})}),n.jsx(jr,{path:"*",element:n.jsx(Gm,{to:"/login",replace:!0})})]})},SSe=()=>n.jsx(LH,{children:n.jsx(GH,{children:n.jsx(_Se,{})})}),kSe=new l$({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}});Iq.createRoot(document.getElementById("root")).render(n.jsx(k.StrictMode,{children:n.jsxs(o$,{client:kSe,children:[n.jsx(SSe,{}),n.jsx(j$,{initialIsOpen:!1})]})}));export{Da as _,ASe as c,Id as g};
